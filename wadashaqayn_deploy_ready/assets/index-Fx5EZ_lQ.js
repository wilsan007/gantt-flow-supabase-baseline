var BI=Object.defineProperty;var lj=e=>{throw TypeError(e)};var UI=(e,t,r)=>t in e?BI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Xs=(e,t,r)=>UI(e,typeof t!="symbol"?t+"":t,r),hg=(e,t,r)=>t.has(e)||lj("Cannot "+r);var oe=(e,t,r)=>(hg(e,t,"read from private field"),r?r.call(e):t.get(e)),tt=(e,t,r)=>t.has(e)?lj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Fe=(e,t,r,s)=>(hg(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),jr=(e,t,r)=>(hg(e,t,"access private method"),r);var of=(e,t,r,s)=>({set _(a){Fe(e,t,a,r)},get _(){return oe(e,t,s)}});function VI(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Vn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function WI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var T_={exports:{}},Am={},P_={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _u=Symbol.for("react.element"),HI=Symbol.for("react.portal"),qI=Symbol.for("react.fragment"),GI=Symbol.for("react.strict_mode"),KI=Symbol.for("react.profiler"),YI=Symbol.for("react.provider"),XI=Symbol.for("react.context"),JI=Symbol.for("react.forward_ref"),QI=Symbol.for("react.suspense"),ZI=Symbol.for("react.memo"),eO=Symbol.for("react.lazy"),cj=Symbol.iterator;function tO(e){return e===null||typeof e!="object"?null:(e=cj&&e[cj]||e["@@iterator"],typeof e=="function"?e:null)}var R_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A_=Object.assign,M_={};function hc(e,t,r){this.props=e,this.context=t,this.refs=M_,this.updater=r||R_}hc.prototype.isReactComponent={};hc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function I_(){}I_.prototype=hc.prototype;function Wy(e,t,r){this.props=e,this.context=t,this.refs=M_,this.updater=r||R_}var Hy=Wy.prototype=new I_;Hy.constructor=Wy;A_(Hy,hc.prototype);Hy.isPureReactComponent=!0;var dj=Array.isArray,O_=Object.prototype.hasOwnProperty,qy={current:null},L_={key:!0,ref:!0,__self:!0,__source:!0};function $_(e,t,r){var s,a={},o=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)O_.call(t,s)&&!L_.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:_u,type:e,key:o,ref:i,props:a,_owner:qy.current}}function rO(e,t){return{$$typeof:_u,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gy(e){return typeof e=="object"&&e!==null&&e.$$typeof===_u}function nO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var uj=/\/+/g;function mg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nO(""+e.key):t.toString(36)}function Kf(e,t,r,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case _u:case HI:i=!0}}if(i)return i=e,a=a(i),e=s===""?"."+mg(i,0):s,dj(a)?(r="",e!=null&&(r=e.replace(uj,"$&/")+"/"),Kf(a,t,r,"",function(d){return d})):a!=null&&(Gy(a)&&(a=rO(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(uj,"$&/")+"/")+e)),t.push(a)),1;if(i=0,s=s===""?".":s+":",dj(e))for(var l=0;l<e.length;l++){o=e[l];var c=s+mg(o,l);i+=Kf(o,t,r,c,a)}else if(c=tO(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=s+mg(o,l++),i+=Kf(o,t,r,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function lf(e,t,r){if(e==null)return e;var s=[],a=0;return Kf(e,s,"","",function(o){return t.call(r,o,a++)}),s}function sO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wr={current:null},Yf={transition:null},aO={ReactCurrentDispatcher:Wr,ReactCurrentBatchConfig:Yf,ReactCurrentOwner:qy};function F_(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:lf,forEach:function(e,t,r){lf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return lf(e,function(){t++}),t},toArray:function(e){return lf(e,function(t){return t})||[]},only:function(e){if(!Gy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=hc;Xe.Fragment=qI;Xe.Profiler=KI;Xe.PureComponent=Wy;Xe.StrictMode=GI;Xe.Suspense=QI;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aO;Xe.act=F_;Xe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=A_({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=qy.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)O_.call(t,c)&&!L_.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:_u,type:e.type,key:a,ref:o,props:s,_owner:i}};Xe.createContext=function(e){return e={$$typeof:XI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:YI,_context:e},e.Consumer=e};Xe.createElement=$_;Xe.createFactory=function(e){var t=$_.bind(null,e);return t.type=e,t};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:JI,render:e}};Xe.isValidElement=Gy;Xe.lazy=function(e){return{$$typeof:eO,_payload:{_status:-1,_result:e},_init:sO}};Xe.memo=function(e,t){return{$$typeof:ZI,type:e,compare:t===void 0?null:t}};Xe.startTransition=function(e){var t=Yf.transition;Yf.transition={};try{e()}finally{Yf.transition=t}};Xe.unstable_act=F_;Xe.useCallback=function(e,t){return Wr.current.useCallback(e,t)};Xe.useContext=function(e){return Wr.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return Wr.current.useDeferredValue(e)};Xe.useEffect=function(e,t){return Wr.current.useEffect(e,t)};Xe.useId=function(){return Wr.current.useId()};Xe.useImperativeHandle=function(e,t,r){return Wr.current.useImperativeHandle(e,t,r)};Xe.useInsertionEffect=function(e,t){return Wr.current.useInsertionEffect(e,t)};Xe.useLayoutEffect=function(e,t){return Wr.current.useLayoutEffect(e,t)};Xe.useMemo=function(e,t){return Wr.current.useMemo(e,t)};Xe.useReducer=function(e,t,r){return Wr.current.useReducer(e,t,r)};Xe.useRef=function(e){return Wr.current.useRef(e)};Xe.useState=function(e){return Wr.current.useState(e)};Xe.useSyncExternalStore=function(e,t,r){return Wr.current.useSyncExternalStore(e,t,r)};Xe.useTransition=function(){return Wr.current.useTransition()};Xe.version="18.3.1";P_.exports=Xe;var h=P_.exports;const X=D_(h),Mm=VI({__proto__:null,default:X},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO=h,iO=Symbol.for("react.element"),lO=Symbol.for("react.fragment"),cO=Object.prototype.hasOwnProperty,dO=oO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uO={key:!0,ref:!0,__self:!0,__source:!0};function z_(e,t,r){var s,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)cO.call(t,s)&&!uO.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:iO,type:e,key:o,ref:i,props:a,_owner:dO.current}}Am.Fragment=lO;Am.jsx=z_;Am.jsxs=z_;T_.exports=Am;var n=T_.exports,B_={exports:{}},jn={},U_={exports:{}},V_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,M){var U=T.length;T.push(M);e:for(;0<U;){var q=U-1>>>1,Y=T[q];if(0<a(Y,M))T[q]=M,T[U]=Y,U=q;else break e}}function r(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var M=T[0],U=T.pop();if(U!==M){T[0]=U;e:for(var q=0,Y=T.length,G=Y>>>1;q<G;){var z=2*(q+1)-1,Z=T[z],Q=z+1,H=T[Q];if(0>a(Z,U))Q<Y&&0>a(H,Z)?(T[q]=H,T[Q]=U,q=Q):(T[q]=Z,T[z]=U,q=z);else if(Q<Y&&0>a(H,U))T[q]=H,T[Q]=U,q=Q;else break e}}return M}function a(T,M){var U=T.sortIndex-M.sortIndex;return U!==0?U:T.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,f=null,m=3,p=!1,w=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var M=r(d);M!==null;){if(M.callback===null)s(d);else if(M.startTime<=T)s(d),M.sortIndex=M.expirationTime,t(c,M);else break;M=r(d)}}function j(T){if(v=!1,b(T),!w)if(r(c)!==null)w=!0,F(S);else{var M=r(d);M!==null&&B(j,M.startTime-T)}}function S(T,M){w=!1,v&&(v=!1,g(E),E=-1),p=!0;var U=m;try{for(b(M),f=r(c);f!==null&&(!(f.expirationTime>M)||T&&!k());){var q=f.callback;if(typeof q=="function"){f.callback=null,m=f.priorityLevel;var Y=q(f.expirationTime<=M);M=e.unstable_now(),typeof Y=="function"?f.callback=Y:f===r(c)&&s(c),b(M)}else s(c);f=r(c)}if(f!==null)var G=!0;else{var z=r(d);z!==null&&B(j,z.startTime-M),G=!1}return G}finally{f=null,m=U,p=!1}}var N=!1,_=null,E=-1,D=5,C=-1;function k(){return!(e.unstable_now()-C<D)}function P(){if(_!==null){var T=e.unstable_now();C=T;var M=!0;try{M=_(!0,T)}finally{M?R():(N=!1,_=null)}}else N=!1}var R;if(typeof y=="function")R=function(){y(P)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,I=A.port2;A.port1.onmessage=P,R=function(){I.postMessage(null)}}else R=function(){x(P,0)};function F(T){_=T,N||(N=!0,R())}function B(T,M){E=x(function(){T(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,F(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var M=3;break;default:M=m}var U=m;m=M;try{return T()}finally{m=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,M){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var U=m;m=T;try{return M()}finally{m=U}},e.unstable_scheduleCallback=function(T,M,U){var q=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?q+U:q):U=q,T){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=U+Y,T={id:u++,callback:M,priorityLevel:T,startTime:U,expirationTime:Y,sortIndex:-1},U>q?(T.sortIndex=U,t(d,T),r(c)===null&&T===r(d)&&(v?(g(E),E=-1):v=!0,B(j,U-q))):(T.sortIndex=Y,t(c,T),w||p||(w=!0,F(S))),T},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(T){var M=m;return function(){var U=m;m=M;try{return T.apply(this,arguments)}finally{m=U}}}})(V_);U_.exports=V_;var fO=U_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hO=h,wn=fO;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W_=new Set,Od={};function Ii(e,t){Hl(e,t),Hl(e+"Capture",t)}function Hl(e,t){for(Od[e]=t,e=0;e<t.length;e++)W_.add(t[e])}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qx=Object.prototype.hasOwnProperty,mO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fj={},hj={};function pO(e){return qx.call(hj,e)?!0:qx.call(fj,e)?!1:mO.test(e)?hj[e]=!0:(fj[e]=!0,!1)}function gO(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xO(e,t,r,s){if(t===null||typeof t>"u"||gO(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Hr(e,t,r,s,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wr[e]=new Hr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wr[t]=new Hr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wr[e]=new Hr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wr[e]=new Hr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wr[e]=new Hr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wr[e]=new Hr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wr[e]=new Hr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wr[e]=new Hr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wr[e]=new Hr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ky=/[\-:]([a-z])/g;function Yy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ky,Yy);wr[t]=new Hr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ky,Yy);wr[t]=new Hr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ky,Yy);wr[t]=new Hr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wr[e]=new Hr(e,1,!1,e.toLowerCase(),null,!1,!1)});wr.xlinkHref=new Hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wr[e]=new Hr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xy(e,t,r,s){var a=wr.hasOwnProperty(t)?wr[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xO(t,r,a,s)&&(r=null),s||a===null?pO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Ca=hO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cf=Symbol.for("react.element"),dl=Symbol.for("react.portal"),ul=Symbol.for("react.fragment"),Jy=Symbol.for("react.strict_mode"),Gx=Symbol.for("react.profiler"),H_=Symbol.for("react.provider"),q_=Symbol.for("react.context"),Qy=Symbol.for("react.forward_ref"),Kx=Symbol.for("react.suspense"),Yx=Symbol.for("react.suspense_list"),Zy=Symbol.for("react.memo"),Va=Symbol.for("react.lazy"),G_=Symbol.for("react.offscreen"),mj=Symbol.iterator;function zc(e){return e===null||typeof e!="object"?null:(e=mj&&e[mj]||e["@@iterator"],typeof e=="function"?e:null)}var _t=Object.assign,pg;function od(e){if(pg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);pg=t&&t[1]||""}return`
`+pg+e}var gg=!1;function xg(e,t){if(!e||gg)return"";gg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),o=s.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{gg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?od(e):""}function vO(e){switch(e.tag){case 5:return od(e.type);case 16:return od("Lazy");case 13:return od("Suspense");case 19:return od("SuspenseList");case 0:case 2:case 15:return e=xg(e.type,!1),e;case 11:return e=xg(e.type.render,!1),e;case 1:return e=xg(e.type,!0),e;default:return""}}function Xx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ul:return"Fragment";case dl:return"Portal";case Gx:return"Profiler";case Jy:return"StrictMode";case Kx:return"Suspense";case Yx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case q_:return(e.displayName||"Context")+".Consumer";case H_:return(e._context.displayName||"Context")+".Provider";case Qy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zy:return t=e.displayName||null,t!==null?t:Xx(e.type)||"Memo";case Va:t=e._payload,e=e._init;try{return Xx(e(t))}catch{}}return null}function yO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xx(t);case 8:return t===Jy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function No(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function K_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wO(e){var t=K_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function df(e){e._valueTracker||(e._valueTracker=wO(e))}function Y_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=K_(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function yh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jx(e,t){var r=t.checked;return _t({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function pj(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=No(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X_(e,t){t=t.checked,t!=null&&Xy(e,"checked",t,!1)}function Qx(e,t){X_(e,t);var r=No(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zx(e,t.type,r):t.hasOwnProperty("defaultValue")&&Zx(e,t.type,No(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gj(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Zx(e,t,r){(t!=="number"||yh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var id=Array.isArray;function Nl(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+No(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ev(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return _t({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xj(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(fe(92));if(id(r)){if(1<r.length)throw Error(fe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:No(r)}}function J_(e,t){var r=No(t.value),s=No(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function vj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Q_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Q_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uf,Z_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uf=uf||document.createElement("div"),uf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ld(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var pd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bO=["Webkit","ms","Moz","O"];Object.keys(pd).forEach(function(e){bO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pd[t]=pd[e]})});function eC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||pd.hasOwnProperty(e)&&pd[e]?(""+t).trim():t+"px"}function tC(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=eC(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var jO=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rv(e,t){if(t){if(jO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function nv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sv=null;function e0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var av=null,Sl=null,_l=null;function yj(e){if(e=ku(e)){if(typeof av!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=Fm(t),av(e.stateNode,e.type,t))}}function rC(e){Sl?_l?_l.push(e):_l=[e]:Sl=e}function nC(){if(Sl){var e=Sl,t=_l;if(_l=Sl=null,yj(e),t)for(e=0;e<t.length;e++)yj(t[e])}}function sC(e,t){return e(t)}function aC(){}var vg=!1;function oC(e,t,r){if(vg)return e(t,r);vg=!0;try{return sC(e,t,r)}finally{vg=!1,(Sl!==null||_l!==null)&&(aC(),nC())}}function $d(e,t){var r=e.stateNode;if(r===null)return null;var s=Fm(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(fe(231,t,typeof r));return r}var ov=!1;if(xa)try{var Bc={};Object.defineProperty(Bc,"passive",{get:function(){ov=!0}}),window.addEventListener("test",Bc,Bc),window.removeEventListener("test",Bc,Bc)}catch{ov=!1}function NO(e,t,r,s,a,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var gd=!1,wh=null,bh=!1,iv=null,SO={onError:function(e){gd=!0,wh=e}};function _O(e,t,r,s,a,o,i,l,c){gd=!1,wh=null,NO.apply(SO,arguments)}function CO(e,t,r,s,a,o,i,l,c){if(_O.apply(this,arguments),gd){if(gd){var d=wh;gd=!1,wh=null}else throw Error(fe(198));bh||(bh=!0,iv=d)}}function Oi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function iC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wj(e){if(Oi(e)!==e)throw Error(fe(188))}function EO(e){var t=e.alternate;if(!t){if(t=Oi(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return wj(a),e;if(o===s)return wj(a),t;o=o.sibling}throw Error(fe(188))}if(r.return!==s.return)r=a,s=o;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,s=o;break}if(l===s){i=!0,s=a,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,s=a;break}if(l===s){i=!0,s=o,r=a;break}l=l.sibling}if(!i)throw Error(fe(189))}}if(r.alternate!==s)throw Error(fe(190))}if(r.tag!==3)throw Error(fe(188));return r.stateNode.current===r?e:t}function lC(e){return e=EO(e),e!==null?cC(e):null}function cC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cC(e);if(t!==null)return t;e=e.sibling}return null}var dC=wn.unstable_scheduleCallback,bj=wn.unstable_cancelCallback,kO=wn.unstable_shouldYield,DO=wn.unstable_requestPaint,Mt=wn.unstable_now,TO=wn.unstable_getCurrentPriorityLevel,t0=wn.unstable_ImmediatePriority,uC=wn.unstable_UserBlockingPriority,jh=wn.unstable_NormalPriority,PO=wn.unstable_LowPriority,fC=wn.unstable_IdlePriority,Im=null,Fs=null;function RO(e){if(Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(Im,e,void 0,(e.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:IO,AO=Math.log,MO=Math.LN2;function IO(e){return e>>>=0,e===0?32:31-(AO(e)/MO|0)|0}var ff=64,hf=4194304;function ld(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Nh(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?s=ld(l):(o&=i,o!==0&&(s=ld(o)))}else i=r&~a,i!==0?s=ld(i):o!==0&&(s=ld(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ds(t),a=1<<r,s|=e[r],t&=~a;return s}function OO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LO(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-ds(o),l=1<<i,c=a[i];c===-1?(!(l&r)||l&s)&&(a[i]=OO(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function lv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hC(){var e=ff;return ff<<=1,!(ff&4194240)&&(ff=64),e}function yg(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Cu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ds(t),e[t]=r}function $O(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ds(r),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~o}}function r0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ds(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var it=0;function mC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pC,n0,gC,xC,vC,cv=!1,mf=[],lo=null,co=null,uo=null,Fd=new Map,zd=new Map,qa=[],FO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jj(e,t){switch(e){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":Fd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zd.delete(t.pointerId)}}function Uc(e,t,r,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=ku(t),t!==null&&n0(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function zO(e,t,r,s,a){switch(t){case"focusin":return lo=Uc(lo,e,t,r,s,a),!0;case"dragenter":return co=Uc(co,e,t,r,s,a),!0;case"mouseover":return uo=Uc(uo,e,t,r,s,a),!0;case"pointerover":var o=a.pointerId;return Fd.set(o,Uc(Fd.get(o)||null,e,t,r,s,a)),!0;case"gotpointercapture":return o=a.pointerId,zd.set(o,Uc(zd.get(o)||null,e,t,r,s,a)),!0}return!1}function yC(e){var t=ni(e.target);if(t!==null){var r=Oi(t);if(r!==null){if(t=r.tag,t===13){if(t=iC(r),t!==null){e.blockedOn=t,vC(e.priority,function(){gC(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=dv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);sv=s,r.target.dispatchEvent(s),sv=null}else return t=ku(r),t!==null&&n0(t),e.blockedOn=r,!1;t.shift()}return!0}function Nj(e,t,r){Xf(e)&&r.delete(t)}function BO(){cv=!1,lo!==null&&Xf(lo)&&(lo=null),co!==null&&Xf(co)&&(co=null),uo!==null&&Xf(uo)&&(uo=null),Fd.forEach(Nj),zd.forEach(Nj)}function Vc(e,t){e.blockedOn===t&&(e.blockedOn=null,cv||(cv=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,BO)))}function Bd(e){function t(a){return Vc(a,e)}if(0<mf.length){Vc(mf[0],e);for(var r=1;r<mf.length;r++){var s=mf[r];s.blockedOn===e&&(s.blockedOn=null)}}for(lo!==null&&Vc(lo,e),co!==null&&Vc(co,e),uo!==null&&Vc(uo,e),Fd.forEach(t),zd.forEach(t),r=0;r<qa.length;r++)s=qa[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<qa.length&&(r=qa[0],r.blockedOn===null);)yC(r),r.blockedOn===null&&qa.shift()}var Cl=Ca.ReactCurrentBatchConfig,Sh=!0;function UO(e,t,r,s){var a=it,o=Cl.transition;Cl.transition=null;try{it=1,s0(e,t,r,s)}finally{it=a,Cl.transition=o}}function VO(e,t,r,s){var a=it,o=Cl.transition;Cl.transition=null;try{it=4,s0(e,t,r,s)}finally{it=a,Cl.transition=o}}function s0(e,t,r,s){if(Sh){var a=dv(e,t,r,s);if(a===null)Dg(e,t,s,_h,r),jj(e,s);else if(zO(a,e,t,r,s))s.stopPropagation();else if(jj(e,s),t&4&&-1<FO.indexOf(e)){for(;a!==null;){var o=ku(a);if(o!==null&&pC(o),o=dv(e,t,r,s),o===null&&Dg(e,t,s,_h,r),o===a)break;a=o}a!==null&&s.stopPropagation()}else Dg(e,t,s,null,r)}}var _h=null;function dv(e,t,r,s){if(_h=null,e=e0(s),e=ni(e),e!==null)if(t=Oi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=iC(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _h=e,null}function wC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TO()){case t0:return 1;case uC:return 4;case jh:case PO:return 16;case fC:return 536870912;default:return 16}default:return 16}}var no=null,a0=null,Jf=null;function bC(){if(Jf)return Jf;var e,t=a0,r=t.length,s,a="value"in no?no.value:no.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(s=1;s<=i&&t[r-s]===a[o-s];s++);return Jf=a.slice(e,1<s?1-s:void 0)}function Qf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pf(){return!0}function Sj(){return!1}function Nn(e){function t(r,s,a,o,i){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?pf:Sj,this.isPropagationStopped=Sj,this}return _t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pf)},persist:function(){},isPersistent:pf}),t}var mc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o0=Nn(mc),Eu=_t({},mc,{view:0,detail:0}),WO=Nn(Eu),wg,bg,Wc,Om=_t({},Eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:i0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wc&&(Wc&&e.type==="mousemove"?(wg=e.screenX-Wc.screenX,bg=e.screenY-Wc.screenY):bg=wg=0,Wc=e),wg)},movementY:function(e){return"movementY"in e?e.movementY:bg}}),_j=Nn(Om),HO=_t({},Om,{dataTransfer:0}),qO=Nn(HO),GO=_t({},Eu,{relatedTarget:0}),jg=Nn(GO),KO=_t({},mc,{animationName:0,elapsedTime:0,pseudoElement:0}),YO=Nn(KO),XO=_t({},mc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),JO=Nn(XO),QO=_t({},mc,{data:0}),Cj=Nn(QO),ZO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tL[e])?!!t[e]:!1}function i0(){return rL}var nL=_t({},Eu,{key:function(e){if(e.key){var t=ZO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:i0,charCode:function(e){return e.type==="keypress"?Qf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sL=Nn(nL),aL=_t({},Om,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ej=Nn(aL),oL=_t({},Eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:i0}),iL=Nn(oL),lL=_t({},mc,{propertyName:0,elapsedTime:0,pseudoElement:0}),cL=Nn(lL),dL=_t({},Om,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uL=Nn(dL),fL=[9,13,27,32],l0=xa&&"CompositionEvent"in window,xd=null;xa&&"documentMode"in document&&(xd=document.documentMode);var hL=xa&&"TextEvent"in window&&!xd,jC=xa&&(!l0||xd&&8<xd&&11>=xd),kj=" ",Dj=!1;function NC(e,t){switch(e){case"keyup":return fL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fl=!1;function mL(e,t){switch(e){case"compositionend":return SC(t);case"keypress":return t.which!==32?null:(Dj=!0,kj);case"textInput":return e=t.data,e===kj&&Dj?null:e;default:return null}}function pL(e,t){if(fl)return e==="compositionend"||!l0&&NC(e,t)?(e=bC(),Jf=a0=no=null,fl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jC&&t.locale!=="ko"?null:t.data;default:return null}}var gL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gL[e.type]:t==="textarea"}function _C(e,t,r,s){rC(s),t=Ch(t,"onChange"),0<t.length&&(r=new o0("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var vd=null,Ud=null;function xL(e){OC(e,0)}function Lm(e){var t=pl(e);if(Y_(t))return e}function vL(e,t){if(e==="change")return t}var CC=!1;if(xa){var Ng;if(xa){var Sg="oninput"in document;if(!Sg){var Pj=document.createElement("div");Pj.setAttribute("oninput","return;"),Sg=typeof Pj.oninput=="function"}Ng=Sg}else Ng=!1;CC=Ng&&(!document.documentMode||9<document.documentMode)}function Rj(){vd&&(vd.detachEvent("onpropertychange",EC),Ud=vd=null)}function EC(e){if(e.propertyName==="value"&&Lm(Ud)){var t=[];_C(t,Ud,e,e0(e)),oC(xL,t)}}function yL(e,t,r){e==="focusin"?(Rj(),vd=t,Ud=r,vd.attachEvent("onpropertychange",EC)):e==="focusout"&&Rj()}function wL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lm(Ud)}function bL(e,t){if(e==="click")return Lm(t)}function jL(e,t){if(e==="input"||e==="change")return Lm(t)}function NL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ps=typeof Object.is=="function"?Object.is:NL;function Vd(e,t){if(ps(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!qx.call(t,a)||!ps(e[a],t[a]))return!1}return!0}function Aj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mj(e,t){var r=Aj(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Aj(r)}}function kC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function DC(){for(var e=window,t=yh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=yh(e.document)}return t}function c0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function SL(e){var t=DC(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&kC(r.ownerDocument.documentElement,r)){if(s!==null&&c0(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=Mj(r,o);var i=Mj(r,s);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _L=xa&&"documentMode"in document&&11>=document.documentMode,hl=null,uv=null,yd=null,fv=!1;function Ij(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fv||hl==null||hl!==yh(s)||(s=hl,"selectionStart"in s&&c0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),yd&&Vd(yd,s)||(yd=s,s=Ch(uv,"onSelect"),0<s.length&&(t=new o0("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=hl)))}function gf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ml={animationend:gf("Animation","AnimationEnd"),animationiteration:gf("Animation","AnimationIteration"),animationstart:gf("Animation","AnimationStart"),transitionend:gf("Transition","TransitionEnd")},_g={},TC={};xa&&(TC=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function $m(e){if(_g[e])return _g[e];if(!ml[e])return e;var t=ml[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in TC)return _g[e]=t[r];return e}var PC=$m("animationend"),RC=$m("animationiteration"),AC=$m("animationstart"),MC=$m("transitionend"),IC=new Map,Oj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(e,t){IC.set(e,t),Ii(t,[e])}for(var Cg=0;Cg<Oj.length;Cg++){var Eg=Oj[Cg],CL=Eg.toLowerCase(),EL=Eg[0].toUpperCase()+Eg.slice(1);Do(CL,"on"+EL)}Do(PC,"onAnimationEnd");Do(RC,"onAnimationIteration");Do(AC,"onAnimationStart");Do("dblclick","onDoubleClick");Do("focusin","onFocus");Do("focusout","onBlur");Do(MC,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kL=new Set("cancel close invalid load scroll toggle".split(" ").concat(cd));function Lj(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,CO(s,t,void 0,e),e.currentTarget=null}function OC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;Lj(a,l,d),o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;Lj(a,l,d),o=c}}}if(bh)throw e=iv,bh=!1,iv=null,e}function xt(e,t){var r=t[xv];r===void 0&&(r=t[xv]=new Set);var s=e+"__bubble";r.has(s)||(LC(t,e,2,!1),r.add(s))}function kg(e,t,r){var s=0;t&&(s|=4),LC(r,e,s,t)}var xf="_reactListening"+Math.random().toString(36).slice(2);function Wd(e){if(!e[xf]){e[xf]=!0,W_.forEach(function(r){r!=="selectionchange"&&(kL.has(r)||kg(r,!1,e),kg(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xf]||(t[xf]=!0,kg("selectionchange",!1,t))}}function LC(e,t,r,s){switch(wC(t)){case 1:var a=UO;break;case 4:a=VO;break;default:a=s0}r=a.bind(null,t,r,e),a=void 0,!ov||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Dg(e,t,r,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=ni(l),i===null)return;if(c=i.tag,c===5||c===6){s=o=i;continue e}l=l.parentNode}}s=s.return}oC(function(){var d=o,u=e0(r),f=[];e:{var m=IC.get(e);if(m!==void 0){var p=o0,w=e;switch(e){case"keypress":if(Qf(r)===0)break e;case"keydown":case"keyup":p=sL;break;case"focusin":w="focus",p=jg;break;case"focusout":w="blur",p=jg;break;case"beforeblur":case"afterblur":p=jg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_j;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=iL;break;case PC:case RC:case AC:p=YO;break;case MC:p=cL;break;case"scroll":p=WO;break;case"wheel":p=uL;break;case"copy":case"cut":case"paste":p=JO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ej}var v=(t&4)!==0,x=!v&&e==="scroll",g=v?m!==null?m+"Capture":null:m;v=[];for(var y=d,b;y!==null;){b=y;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,g!==null&&(j=$d(y,g),j!=null&&v.push(Hd(y,j,b)))),x)break;y=y.return}0<v.length&&(m=new p(m,w,null,r,u),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==sv&&(w=r.relatedTarget||r.fromElement)&&(ni(w)||w[va]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(w=r.relatedTarget||r.toElement,p=d,w=w?ni(w):null,w!==null&&(x=Oi(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=d),p!==w)){if(v=_j,j="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=Ej,j="onPointerLeave",g="onPointerEnter",y="pointer"),x=p==null?m:pl(p),b=w==null?m:pl(w),m=new v(j,y+"leave",p,r,u),m.target=x,m.relatedTarget=b,j=null,ni(u)===d&&(v=new v(g,y+"enter",w,r,u),v.target=b,v.relatedTarget=x,j=v),x=j,p&&w)t:{for(v=p,g=w,y=0,b=v;b;b=Hi(b))y++;for(b=0,j=g;j;j=Hi(j))b++;for(;0<y-b;)v=Hi(v),y--;for(;0<b-y;)g=Hi(g),b--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Hi(v),g=Hi(g)}v=null}else v=null;p!==null&&$j(f,m,p,v,!1),w!==null&&x!==null&&$j(f,x,w,v,!0)}}e:{if(m=d?pl(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=vL;else if(Tj(m))if(CC)S=jL;else{S=wL;var N=yL}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=bL);if(S&&(S=S(e,d))){_C(f,S,r,u);break e}N&&N(e,m,d),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Zx(m,"number",m.value)}switch(N=d?pl(d):window,e){case"focusin":(Tj(N)||N.contentEditable==="true")&&(hl=N,uv=d,yd=null);break;case"focusout":yd=uv=hl=null;break;case"mousedown":fv=!0;break;case"contextmenu":case"mouseup":case"dragend":fv=!1,Ij(f,r,u);break;case"selectionchange":if(_L)break;case"keydown":case"keyup":Ij(f,r,u)}var _;if(l0)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else fl?NC(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(jC&&r.locale!=="ko"&&(fl||E!=="onCompositionStart"?E==="onCompositionEnd"&&fl&&(_=bC()):(no=u,a0="value"in no?no.value:no.textContent,fl=!0)),N=Ch(d,E),0<N.length&&(E=new Cj(E,e,null,r,u),f.push({event:E,listeners:N}),_?E.data=_:(_=SC(r),_!==null&&(E.data=_)))),(_=hL?mL(e,r):pL(e,r))&&(d=Ch(d,"onBeforeInput"),0<d.length&&(u=new Cj("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=_))}OC(f,t)})}function Hd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ch(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=$d(e,r),o!=null&&s.unshift(Hd(e,o,a)),o=$d(e,t),o!=null&&s.push(Hd(e,o,a))),e=e.return}return s}function Hi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $j(e,t,r,s,a){for(var o=t._reactName,i=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=$d(r,o),c!=null&&i.unshift(Hd(r,c,l))):a||(c=$d(r,o),c!=null&&i.push(Hd(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var DL=/\r\n?/g,TL=/\u0000|\uFFFD/g;function Fj(e){return(typeof e=="string"?e:""+e).replace(DL,`
`).replace(TL,"")}function vf(e,t,r){if(t=Fj(t),Fj(e)!==t&&r)throw Error(fe(425))}function Eh(){}var hv=null,mv=null;function pv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gv=typeof setTimeout=="function"?setTimeout:void 0,PL=typeof clearTimeout=="function"?clearTimeout:void 0,zj=typeof Promise=="function"?Promise:void 0,RL=typeof queueMicrotask=="function"?queueMicrotask:typeof zj<"u"?function(e){return zj.resolve(null).then(e).catch(AL)}:gv;function AL(e){setTimeout(function(){throw e})}function Tg(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Bd(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Bd(t)}function fo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var pc=Math.random().toString(36).slice(2),Ps="__reactFiber$"+pc,qd="__reactProps$"+pc,va="__reactContainer$"+pc,xv="__reactEvents$"+pc,ML="__reactListeners$"+pc,IL="__reactHandles$"+pc;function ni(e){var t=e[Ps];if(t)return t;for(var r=e.parentNode;r;){if(t=r[va]||r[Ps]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Bj(e);e!==null;){if(r=e[Ps])return r;e=Bj(e)}return t}e=r,r=e.parentNode}return null}function ku(e){return e=e[Ps]||e[va],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function Fm(e){return e[qd]||null}var vv=[],gl=-1;function To(e){return{current:e}}function vt(e){0>gl||(e.current=vv[gl],vv[gl]=null,gl--)}function ut(e,t){gl++,vv[gl]=e.current,e.current=t}var So={},Dr=To(So),tn=To(!1),vi=So;function ql(e,t){var r=e.type.contextTypes;if(!r)return So;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function rn(e){return e=e.childContextTypes,e!=null}function kh(){vt(tn),vt(Dr)}function Uj(e,t,r){if(Dr.current!==So)throw Error(fe(168));ut(Dr,t),ut(tn,r)}function $C(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(fe(108,yO(e)||"Unknown",a));return _t({},r,s)}function Dh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||So,vi=Dr.current,ut(Dr,e),ut(tn,tn.current),!0}function Vj(e,t,r){var s=e.stateNode;if(!s)throw Error(fe(169));r?(e=$C(e,t,vi),s.__reactInternalMemoizedMergedChildContext=e,vt(tn),vt(Dr),ut(Dr,e)):vt(tn),ut(tn,r)}var aa=null,zm=!1,Pg=!1;function FC(e){aa===null?aa=[e]:aa.push(e)}function OL(e){zm=!0,FC(e)}function Po(){if(!Pg&&aa!==null){Pg=!0;var e=0,t=it;try{var r=aa;for(it=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}aa=null,zm=!1}catch(a){throw aa!==null&&(aa=aa.slice(e+1)),dC(t0,Po),a}finally{it=t,Pg=!1}}return null}var xl=[],vl=0,Th=null,Ph=0,An=[],Mn=0,yi=null,ca=1,da="";function Xo(e,t){xl[vl++]=Ph,xl[vl++]=Th,Th=e,Ph=t}function zC(e,t,r){An[Mn++]=ca,An[Mn++]=da,An[Mn++]=yi,yi=e;var s=ca;e=da;var a=32-ds(s)-1;s&=~(1<<a),r+=1;var o=32-ds(t)+a;if(30<o){var i=a-a%5;o=(s&(1<<i)-1).toString(32),s>>=i,a-=i,ca=1<<32-ds(t)+a|r<<a|s,da=o+e}else ca=1<<o|r<<a|s,da=e}function d0(e){e.return!==null&&(Xo(e,1),zC(e,1,0))}function u0(e){for(;e===Th;)Th=xl[--vl],xl[vl]=null,Ph=xl[--vl],xl[vl]=null;for(;e===yi;)yi=An[--Mn],An[Mn]=null,da=An[--Mn],An[Mn]=null,ca=An[--Mn],An[Mn]=null}var gn=null,un=null,bt=!1,os=null;function BC(e,t){var r=On(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Wj(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gn=e,un=fo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gn=e,un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=yi!==null?{id:ca,overflow:da}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=On(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,gn=e,un=null,!0):!1;default:return!1}}function yv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wv(e){if(bt){var t=un;if(t){var r=t;if(!Wj(e,t)){if(yv(e))throw Error(fe(418));t=fo(r.nextSibling);var s=gn;t&&Wj(e,t)?BC(s,r):(e.flags=e.flags&-4097|2,bt=!1,gn=e)}}else{if(yv(e))throw Error(fe(418));e.flags=e.flags&-4097|2,bt=!1,gn=e}}}function Hj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gn=e}function yf(e){if(e!==gn)return!1;if(!bt)return Hj(e),bt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pv(e.type,e.memoizedProps)),t&&(t=un)){if(yv(e))throw UC(),Error(fe(418));for(;t;)BC(e,t),t=fo(t.nextSibling)}if(Hj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){un=fo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}un=null}}else un=gn?fo(e.stateNode.nextSibling):null;return!0}function UC(){for(var e=un;e;)e=fo(e.nextSibling)}function Gl(){un=gn=null,bt=!1}function f0(e){os===null?os=[e]:os.push(e)}var LL=Ca.ReactCurrentBatchConfig;function Hc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(fe(309));var s=r.stateNode}if(!s)throw Error(fe(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(fe(284));if(!r._owner)throw Error(fe(290,e))}return e}function wf(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qj(e){var t=e._init;return t(e._payload)}function VC(e){function t(g,y){if(e){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function r(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function s(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function a(g,y){return g=go(g,y),g.index=0,g.sibling=null,g}function o(g,y,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,y,b,j){return y===null||y.tag!==6?(y=$g(b,g.mode,j),y.return=g,y):(y=a(y,b),y.return=g,y)}function c(g,y,b,j){var S=b.type;return S===ul?u(g,y,b.props.children,j,b.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Va&&qj(S)===y.type)?(j=a(y,b.props),j.ref=Hc(g,y,b),j.return=g,j):(j=ah(b.type,b.key,b.props,null,g.mode,j),j.ref=Hc(g,y,b),j.return=g,j)}function d(g,y,b,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Fg(b,g.mode,j),y.return=g,y):(y=a(y,b.children||[]),y.return=g,y)}function u(g,y,b,j,S){return y===null||y.tag!==7?(y=mi(b,g.mode,j,S),y.return=g,y):(y=a(y,b),y.return=g,y)}function f(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=$g(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case cf:return b=ah(y.type,y.key,y.props,null,g.mode,b),b.ref=Hc(g,null,y),b.return=g,b;case dl:return y=Fg(y,g.mode,b),y.return=g,y;case Va:var j=y._init;return f(g,j(y._payload),b)}if(id(y)||zc(y))return y=mi(y,g.mode,b,null),y.return=g,y;wf(g,y)}return null}function m(g,y,b,j){var S=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(g,y,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cf:return b.key===S?c(g,y,b,j):null;case dl:return b.key===S?d(g,y,b,j):null;case Va:return S=b._init,m(g,y,S(b._payload),j)}if(id(b)||zc(b))return S!==null?null:u(g,y,b,j,null);wf(g,b)}return null}function p(g,y,b,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(b)||null,l(y,g,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case cf:return g=g.get(j.key===null?b:j.key)||null,c(y,g,j,S);case dl:return g=g.get(j.key===null?b:j.key)||null,d(y,g,j,S);case Va:var N=j._init;return p(g,y,b,N(j._payload),S)}if(id(j)||zc(j))return g=g.get(b)||null,u(y,g,j,S,null);wf(y,j)}return null}function w(g,y,b,j){for(var S=null,N=null,_=y,E=y=0,D=null;_!==null&&E<b.length;E++){_.index>E?(D=_,_=null):D=_.sibling;var C=m(g,_,b[E],j);if(C===null){_===null&&(_=D);break}e&&_&&C.alternate===null&&t(g,_),y=o(C,y,E),N===null?S=C:N.sibling=C,N=C,_=D}if(E===b.length)return r(g,_),bt&&Xo(g,E),S;if(_===null){for(;E<b.length;E++)_=f(g,b[E],j),_!==null&&(y=o(_,y,E),N===null?S=_:N.sibling=_,N=_);return bt&&Xo(g,E),S}for(_=s(g,_);E<b.length;E++)D=p(_,g,E,b[E],j),D!==null&&(e&&D.alternate!==null&&_.delete(D.key===null?E:D.key),y=o(D,y,E),N===null?S=D:N.sibling=D,N=D);return e&&_.forEach(function(k){return t(g,k)}),bt&&Xo(g,E),S}function v(g,y,b,j){var S=zc(b);if(typeof S!="function")throw Error(fe(150));if(b=S.call(b),b==null)throw Error(fe(151));for(var N=S=null,_=y,E=y=0,D=null,C=b.next();_!==null&&!C.done;E++,C=b.next()){_.index>E?(D=_,_=null):D=_.sibling;var k=m(g,_,C.value,j);if(k===null){_===null&&(_=D);break}e&&_&&k.alternate===null&&t(g,_),y=o(k,y,E),N===null?S=k:N.sibling=k,N=k,_=D}if(C.done)return r(g,_),bt&&Xo(g,E),S;if(_===null){for(;!C.done;E++,C=b.next())C=f(g,C.value,j),C!==null&&(y=o(C,y,E),N===null?S=C:N.sibling=C,N=C);return bt&&Xo(g,E),S}for(_=s(g,_);!C.done;E++,C=b.next())C=p(_,g,E,C.value,j),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?E:C.key),y=o(C,y,E),N===null?S=C:N.sibling=C,N=C);return e&&_.forEach(function(P){return t(g,P)}),bt&&Xo(g,E),S}function x(g,y,b,j){if(typeof b=="object"&&b!==null&&b.type===ul&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case cf:e:{for(var S=b.key,N=y;N!==null;){if(N.key===S){if(S=b.type,S===ul){if(N.tag===7){r(g,N.sibling),y=a(N,b.props.children),y.return=g,g=y;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Va&&qj(S)===N.type){r(g,N.sibling),y=a(N,b.props),y.ref=Hc(g,N,b),y.return=g,g=y;break e}r(g,N);break}else t(g,N);N=N.sibling}b.type===ul?(y=mi(b.props.children,g.mode,j,b.key),y.return=g,g=y):(j=ah(b.type,b.key,b.props,null,g.mode,j),j.ref=Hc(g,y,b),j.return=g,g=j)}return i(g);case dl:e:{for(N=b.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(g,y.sibling),y=a(y,b.children||[]),y.return=g,g=y;break e}else{r(g,y);break}else t(g,y);y=y.sibling}y=Fg(b,g.mode,j),y.return=g,g=y}return i(g);case Va:return N=b._init,x(g,y,N(b._payload),j)}if(id(b))return w(g,y,b,j);if(zc(b))return v(g,y,b,j);wf(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(g,y.sibling),y=a(y,b),y.return=g,g=y):(r(g,y),y=$g(b,g.mode,j),y.return=g,g=y),i(g)):r(g,y)}return x}var Kl=VC(!0),WC=VC(!1),Rh=To(null),Ah=null,yl=null,h0=null;function m0(){h0=yl=Ah=null}function p0(e){var t=Rh.current;vt(Rh),e._currentValue=t}function bv(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function El(e,t){Ah=e,h0=yl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zr=!0),e.firstContext=null)}function Wn(e){var t=e._currentValue;if(h0!==e)if(e={context:e,memoizedValue:t,next:null},yl===null){if(Ah===null)throw Error(fe(308));yl=e,Ah.dependencies={lanes:0,firstContext:e}}else yl=yl.next=e;return t}var si=null;function g0(e){si===null?si=[e]:si.push(e)}function HC(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,g0(t)):(r.next=a.next,a.next=r),t.interleaved=r,ya(e,s)}function ya(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Wa=!1;function x0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ze&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,ya(e,r)}return a=s.interleaved,a===null?(t.next=t,g0(s)):(t.next=a.next,a.next=t),s.interleaved=t,ya(e,r)}function Zf(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,r0(e,r)}}function Gj(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Mh(e,t,r,s){var a=e.updateQueue;Wa=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var f=a.baseState;i=0,u=d=c=null,l=o;do{var m=l.lane,p=l.eventTime;if((s&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,v=l;switch(m=t,p=r,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(p,f,m);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,m=typeof w=="function"?w.call(p,f,m):w,m==null)break e;f=_t({},f,m);break e;case 2:Wa=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=f):u=u.next=p,i|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);bi|=i,e.lanes=i,e.memoizedState=f}}function Kj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(fe(191,a));a.call(s)}}}var Du={},zs=To(Du),Gd=To(Du),Kd=To(Du);function ai(e){if(e===Du)throw Error(fe(174));return e}function v0(e,t){switch(ut(Kd,t),ut(Gd,e),ut(zs,Du),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=tv(t,e)}vt(zs),ut(zs,t)}function Yl(){vt(zs),vt(Gd),vt(Kd)}function GC(e){ai(Kd.current);var t=ai(zs.current),r=tv(t,e.type);t!==r&&(ut(Gd,e),ut(zs,r))}function y0(e){Gd.current===e&&(vt(zs),vt(Gd))}var Nt=To(0);function Ih(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rg=[];function w0(){for(var e=0;e<Rg.length;e++)Rg[e]._workInProgressVersionPrimary=null;Rg.length=0}var eh=Ca.ReactCurrentDispatcher,Ag=Ca.ReactCurrentBatchConfig,wi=0,St=null,er=null,cr=null,Oh=!1,wd=!1,Yd=0,$L=0;function Nr(){throw Error(fe(321))}function b0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ps(e[r],t[r]))return!1;return!0}function j0(e,t,r,s,a,o){if(wi=o,St=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,eh.current=e===null||e.memoizedState===null?UL:VL,e=r(s,a),wd){o=0;do{if(wd=!1,Yd=0,25<=o)throw Error(fe(301));o+=1,cr=er=null,t.updateQueue=null,eh.current=WL,e=r(s,a)}while(wd)}if(eh.current=Lh,t=er!==null&&er.next!==null,wi=0,cr=er=St=null,Oh=!1,t)throw Error(fe(300));return e}function N0(){var e=Yd!==0;return Yd=0,e}function _s(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?St.memoizedState=cr=e:cr=cr.next=e,cr}function Hn(){if(er===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=er.next;var t=cr===null?St.memoizedState:cr.next;if(t!==null)cr=t,er=e;else{if(e===null)throw Error(fe(310));er=e,e={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},cr===null?St.memoizedState=cr=e:cr=cr.next=e}return cr}function Xd(e,t){return typeof t=="function"?t(e):t}function Mg(e){var t=Hn(),r=t.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=e;var s=er,a=s.baseQueue,o=r.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}s.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,s=s.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((wi&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,i=s):c=c.next=f,St.lanes|=u,bi|=u}d=d.next}while(d!==null&&d!==o);c===null?i=s:c.next=l,ps(s,t.memoizedState)||(Zr=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do o=a.lane,St.lanes|=o,bi|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ig(e){var t=Hn(),r=t.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);ps(o,t.memoizedState)||(Zr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,s]}function KC(){}function YC(e,t){var r=St,s=Hn(),a=t(),o=!ps(s.memoizedState,a);if(o&&(s.memoizedState=a,Zr=!0),s=s.queue,S0(QC.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||cr!==null&&cr.memoizedState.tag&1){if(r.flags|=2048,Jd(9,JC.bind(null,r,s,a,t),void 0,null),ur===null)throw Error(fe(349));wi&30||XC(r,t,a)}return a}function XC(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function JC(e,t,r,s){t.value=r,t.getSnapshot=s,ZC(t)&&eE(e)}function QC(e,t,r){return r(function(){ZC(t)&&eE(e)})}function ZC(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ps(e,r)}catch{return!0}}function eE(e){var t=ya(e,1);t!==null&&us(t,e,1,-1)}function Yj(e){var t=_s();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xd,lastRenderedState:e},t.queue=e,e=e.dispatch=BL.bind(null,St,e),[t.memoizedState,e]}function Jd(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function tE(){return Hn().memoizedState}function th(e,t,r,s){var a=_s();St.flags|=e,a.memoizedState=Jd(1|t,r,void 0,s===void 0?null:s)}function Bm(e,t,r,s){var a=Hn();s=s===void 0?null:s;var o=void 0;if(er!==null){var i=er.memoizedState;if(o=i.destroy,s!==null&&b0(s,i.deps)){a.memoizedState=Jd(t,r,o,s);return}}St.flags|=e,a.memoizedState=Jd(1|t,r,o,s)}function Xj(e,t){return th(8390656,8,e,t)}function S0(e,t){return Bm(2048,8,e,t)}function rE(e,t){return Bm(4,2,e,t)}function nE(e,t){return Bm(4,4,e,t)}function sE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aE(e,t,r){return r=r!=null?r.concat([e]):null,Bm(4,4,sE.bind(null,t,e),r)}function _0(){}function oE(e,t){var r=Hn();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&b0(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function iE(e,t){var r=Hn();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&b0(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function lE(e,t,r){return wi&21?(ps(r,t)||(r=hC(),St.lanes|=r,bi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zr=!0),e.memoizedState=r)}function FL(e,t){var r=it;it=r!==0&&4>r?r:4,e(!0);var s=Ag.transition;Ag.transition={};try{e(!1),t()}finally{it=r,Ag.transition=s}}function cE(){return Hn().memoizedState}function zL(e,t,r){var s=po(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},dE(e))uE(t,r);else if(r=HC(e,t,r,s),r!==null){var a=Fr();us(r,e,s,a),fE(r,t,s)}}function BL(e,t,r){var s=po(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(dE(e))uE(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,r);if(a.hasEagerState=!0,a.eagerState=l,ps(l,i)){var c=t.interleaved;c===null?(a.next=a,g0(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=HC(e,t,a,s),r!==null&&(a=Fr(),us(r,e,s,a),fE(r,t,s))}}function dE(e){var t=e.alternate;return e===St||t!==null&&t===St}function uE(e,t){wd=Oh=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function fE(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,r0(e,r)}}var Lh={readContext:Wn,useCallback:Nr,useContext:Nr,useEffect:Nr,useImperativeHandle:Nr,useInsertionEffect:Nr,useLayoutEffect:Nr,useMemo:Nr,useReducer:Nr,useRef:Nr,useState:Nr,useDebugValue:Nr,useDeferredValue:Nr,useTransition:Nr,useMutableSource:Nr,useSyncExternalStore:Nr,useId:Nr,unstable_isNewReconciler:!1},UL={readContext:Wn,useCallback:function(e,t){return _s().memoizedState=[e,t===void 0?null:t],e},useContext:Wn,useEffect:Xj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,th(4194308,4,sE.bind(null,t,e),r)},useLayoutEffect:function(e,t){return th(4194308,4,e,t)},useInsertionEffect:function(e,t){return th(4,2,e,t)},useMemo:function(e,t){var r=_s();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=_s();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=zL.bind(null,St,e),[s.memoizedState,e]},useRef:function(e){var t=_s();return e={current:e},t.memoizedState=e},useState:Yj,useDebugValue:_0,useDeferredValue:function(e){return _s().memoizedState=e},useTransition:function(){var e=Yj(!1),t=e[0];return e=FL.bind(null,e[1]),_s().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=St,a=_s();if(bt){if(r===void 0)throw Error(fe(407));r=r()}else{if(r=t(),ur===null)throw Error(fe(349));wi&30||XC(s,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,Xj(QC.bind(null,s,o,e),[e]),s.flags|=2048,Jd(9,JC.bind(null,s,o,r,t),void 0,null),r},useId:function(){var e=_s(),t=ur.identifierPrefix;if(bt){var r=da,s=ca;r=(s&~(1<<32-ds(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Yd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$L++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},VL={readContext:Wn,useCallback:oE,useContext:Wn,useEffect:S0,useImperativeHandle:aE,useInsertionEffect:rE,useLayoutEffect:nE,useMemo:iE,useReducer:Mg,useRef:tE,useState:function(){return Mg(Xd)},useDebugValue:_0,useDeferredValue:function(e){var t=Hn();return lE(t,er.memoizedState,e)},useTransition:function(){var e=Mg(Xd)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:KC,useSyncExternalStore:YC,useId:cE,unstable_isNewReconciler:!1},WL={readContext:Wn,useCallback:oE,useContext:Wn,useEffect:S0,useImperativeHandle:aE,useInsertionEffect:rE,useLayoutEffect:nE,useMemo:iE,useReducer:Ig,useRef:tE,useState:function(){return Ig(Xd)},useDebugValue:_0,useDeferredValue:function(e){var t=Hn();return er===null?t.memoizedState=e:lE(t,er.memoizedState,e)},useTransition:function(){var e=Ig(Xd)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:KC,useSyncExternalStore:YC,useId:cE,unstable_isNewReconciler:!1};function es(e,t){if(e&&e.defaultProps){t=_t({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function jv(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:_t({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Um={isMounted:function(e){return(e=e._reactInternals)?Oi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Fr(),a=po(e),o=ma(s,a);o.payload=t,r!=null&&(o.callback=r),t=ho(e,o,a),t!==null&&(us(t,e,a,s),Zf(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Fr(),a=po(e),o=ma(s,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=ho(e,o,a),t!==null&&(us(t,e,a,s),Zf(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Fr(),s=po(e),a=ma(r,s);a.tag=2,t!=null&&(a.callback=t),t=ho(e,a,s),t!==null&&(us(t,e,s,r),Zf(t,e,s))}};function Jj(e,t,r,s,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!Vd(r,s)||!Vd(a,o):!0}function hE(e,t,r){var s=!1,a=So,o=t.contextType;return typeof o=="object"&&o!==null?o=Wn(o):(a=rn(t)?vi:Dr.current,s=t.contextTypes,o=(s=s!=null)?ql(e,a):So),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Um,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Qj(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Um.enqueueReplaceState(t,t.state,null)}function Nv(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},x0(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Wn(o):(o=rn(t)?vi:Dr.current,a.context=ql(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(jv(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Um.enqueueReplaceState(a,a.state,null),Mh(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xl(e,t){try{var r="",s=t;do r+=vO(s),s=s.return;while(s);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Og(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Sv(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var HL=typeof WeakMap=="function"?WeakMap:Map;function mE(e,t,r){r=ma(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Fh||(Fh=!0,Mv=s),Sv(e,t)},r}function pE(e,t,r){r=ma(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){Sv(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Sv(e,t),typeof s!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Zj(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new HL;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=a3.bind(null,e,t,r),t.then(e,e))}function eN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tN(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ma(-1,1),t.tag=2,ho(r,t,1))),r.lanes|=1),e)}var qL=Ca.ReactCurrentOwner,Zr=!1;function Ir(e,t,r,s){t.child=e===null?WC(t,null,r,s):Kl(t,e.child,r,s)}function rN(e,t,r,s,a){r=r.render;var o=t.ref;return El(t,a),s=j0(e,t,r,s,o,a),r=N0(),e!==null&&!Zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wa(e,t,a)):(bt&&r&&d0(t),t.flags|=1,Ir(e,t,s,a),t.child)}function nN(e,t,r,s,a){if(e===null){var o=r.type;return typeof o=="function"&&!A0(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,gE(e,t,o,s,a)):(e=ah(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Vd,r(i,s)&&e.ref===t.ref)return wa(e,t,a)}return t.flags|=1,e=go(o,s),e.ref=t.ref,e.return=t,t.child=e}function gE(e,t,r,s,a){if(e!==null){var o=e.memoizedProps;if(Vd(o,s)&&e.ref===t.ref)if(Zr=!1,t.pendingProps=s=o,(e.lanes&a)!==0)e.flags&131072&&(Zr=!0);else return t.lanes=e.lanes,wa(e,t,a)}return _v(e,t,r,s,a)}function xE(e,t,r){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(bl,ln),ln|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ut(bl,ln),ln|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,ut(bl,ln),ln|=s}else o!==null?(s=o.baseLanes|r,t.memoizedState=null):s=r,ut(bl,ln),ln|=s;return Ir(e,t,a,r),t.child}function vE(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _v(e,t,r,s,a){var o=rn(r)?vi:Dr.current;return o=ql(t,o),El(t,a),r=j0(e,t,r,s,o,a),s=N0(),e!==null&&!Zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wa(e,t,a)):(bt&&s&&d0(t),t.flags|=1,Ir(e,t,r,a),t.child)}function sN(e,t,r,s,a){if(rn(r)){var o=!0;Dh(t)}else o=!1;if(El(t,a),t.stateNode===null)rh(e,t),hE(t,r,s),Nv(t,r,s,a),s=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Wn(d):(d=rn(r)?vi:Dr.current,d=ql(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==s||c!==d)&&Qj(t,i,s,d),Wa=!1;var m=t.memoizedState;i.state=m,Mh(t,s,i,a),c=t.memoizedState,l!==s||m!==c||tn.current||Wa?(typeof u=="function"&&(jv(t,r,u,s),c=t.memoizedState),(l=Wa||Jj(t,r,l,s,m,c,d))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),i.props=s,i.state=c,i.context=d,s=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,qC(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:es(t.type,l),i.props=d,f=t.pendingProps,m=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Wn(c):(c=rn(r)?vi:Dr.current,c=ql(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Qj(t,i,s,c),Wa=!1,m=t.memoizedState,i.state=m,Mh(t,s,i,a);var w=t.memoizedState;l!==f||m!==w||tn.current||Wa?(typeof p=="function"&&(jv(t,r,p,s),w=t.memoizedState),(d=Wa||Jj(t,r,d,s,m,w,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=w),i.props=s,i.state=w,i.context=c,s=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Cv(e,t,r,s,o,a)}function Cv(e,t,r,s,a,o){vE(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return a&&Vj(t,r,!1),wa(e,t,o);s=t.stateNode,qL.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=Kl(t,e.child,null,o),t.child=Kl(t,null,l,o)):Ir(e,t,l,o),t.memoizedState=s.state,a&&Vj(t,r,!0),t.child}function yE(e){var t=e.stateNode;t.pendingContext?Uj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Uj(e,t.context,!1),v0(e,t.containerInfo)}function aN(e,t,r,s,a){return Gl(),f0(a),t.flags|=256,Ir(e,t,r,s),t.child}var Ev={dehydrated:null,treeContext:null,retryLane:0};function kv(e){return{baseLanes:e,cachePool:null,transitions:null}}function wE(e,t,r){var s=t.pendingProps,a=Nt.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ut(Nt,a&1),e===null)return wv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,o?(s=t.mode,o=t.child,i={mode:"hidden",children:i},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Hm(i,s,0,null),e=mi(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=kv(r),t.memoizedState=Ev,e):C0(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return GL(e,t,i,s,l,a,r);if(o){o=s.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(i&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=go(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=go(l,o):(o=mi(o,i,r,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,i=e.child.memoizedState,i=i===null?kv(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=Ev,s}return o=e.child,e=o.sibling,s=go(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function C0(e,t){return t=Hm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bf(e,t,r,s){return s!==null&&f0(s),Kl(t,e.child,null,r),e=C0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GL(e,t,r,s,a,o,i){if(r)return t.flags&256?(t.flags&=-257,s=Og(Error(fe(422))),bf(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=Hm({mode:"visible",children:s.children},a,0,null),o=mi(o,a,i,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&Kl(t,e.child,null,i),t.child.memoizedState=kv(i),t.memoizedState=Ev,o);if(!(t.mode&1))return bf(e,t,i,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,o=Error(fe(419)),s=Og(o,s,void 0),bf(e,t,i,s)}if(l=(i&e.childLanes)!==0,Zr||l){if(s=ur,s!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,ya(e,a),us(s,e,a,-1))}return R0(),s=Og(Error(fe(421))),bf(e,t,i,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=o3.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,un=fo(a.nextSibling),gn=t,bt=!0,os=null,e!==null&&(An[Mn++]=ca,An[Mn++]=da,An[Mn++]=yi,ca=e.id,da=e.overflow,yi=t),t=C0(t,s.children),t.flags|=4096,t)}function oN(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),bv(e.return,t,r)}function Lg(e,t,r,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=a)}function bE(e,t,r){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(Ir(e,t,s.children,r),s=Nt.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oN(e,r,t);else if(e.tag===19)oN(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ut(Nt,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ih(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Lg(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ih(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Lg(t,!0,r,null,o);break;case"together":Lg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),bi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,r=go(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=go(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function KL(e,t,r){switch(t.tag){case 3:yE(t),Gl();break;case 5:GC(t);break;case 1:rn(t.type)&&Dh(t);break;case 4:v0(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;ut(Rh,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ut(Nt,Nt.current&1),t.flags|=128,null):r&t.child.childLanes?wE(e,t,r):(ut(Nt,Nt.current&1),e=wa(e,t,r),e!==null?e.sibling:null);ut(Nt,Nt.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return bE(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ut(Nt,Nt.current),s)break;return null;case 22:case 23:return t.lanes=0,xE(e,t,r)}return wa(e,t,r)}var jE,Dv,NE,SE;jE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Dv=function(){};NE=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,ai(zs.current);var o=null;switch(r){case"input":a=Jx(e,a),s=Jx(e,s),o=[];break;case"select":a=_t({},a,{value:void 0}),s=_t({},s,{value:void 0}),o=[];break;case"textarea":a=ev(e,a),s=ev(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Eh)}rv(r,s);var i;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Od.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Od.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&xt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};SE=function(e,t,r,s){r!==s&&(t.flags|=4)};function qc(e,t){if(!bt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Sr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function YL(e,t,r){var s=t.pendingProps;switch(u0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(t),null;case 1:return rn(t.type)&&kh(),Sr(t),null;case 3:return s=t.stateNode,Yl(),vt(tn),vt(Dr),w0(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(yf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,os!==null&&(Lv(os),os=null))),Dv(e,t),Sr(t),null;case 5:y0(t);var a=ai(Kd.current);if(r=t.type,e!==null&&t.stateNode!=null)NE(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(fe(166));return Sr(t),null}if(e=ai(zs.current),yf(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[Ps]=t,s[qd]=o,e=(t.mode&1)!==0,r){case"dialog":xt("cancel",s),xt("close",s);break;case"iframe":case"object":case"embed":xt("load",s);break;case"video":case"audio":for(a=0;a<cd.length;a++)xt(cd[a],s);break;case"source":xt("error",s);break;case"img":case"image":case"link":xt("error",s),xt("load",s);break;case"details":xt("toggle",s);break;case"input":pj(s,o),xt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},xt("invalid",s);break;case"textarea":xj(s,o),xt("invalid",s)}rv(r,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?s.textContent!==l&&(o.suppressHydrationWarning!==!0&&vf(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&vf(s.textContent,l,e),a=["children",""+l]):Od.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&xt("scroll",s)}switch(r){case"input":df(s),gj(s,o,!0);break;case"textarea":df(s),vj(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Eh)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Q_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),r==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[Ps]=t,e[qd]=s,jE(e,t,!1,!1),t.stateNode=e;e:{switch(i=nv(r,s),r){case"dialog":xt("cancel",e),xt("close",e),a=s;break;case"iframe":case"object":case"embed":xt("load",e),a=s;break;case"video":case"audio":for(a=0;a<cd.length;a++)xt(cd[a],e);a=s;break;case"source":xt("error",e),a=s;break;case"img":case"image":case"link":xt("error",e),xt("load",e),a=s;break;case"details":xt("toggle",e),a=s;break;case"input":pj(e,s),a=Jx(e,s),xt("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=_t({},s,{value:void 0}),xt("invalid",e);break;case"textarea":xj(e,s),a=ev(e,s),xt("invalid",e);break;default:a=s}rv(r,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?tC(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Z_(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ld(e,c):typeof c=="number"&&Ld(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Od.hasOwnProperty(o)?c!=null&&o==="onScroll"&&xt("scroll",e):c!=null&&Xy(e,o,c,i))}switch(r){case"input":df(e),gj(e,s,!1);break;case"textarea":df(e),vj(e);break;case"option":s.value!=null&&e.setAttribute("value",""+No(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?Nl(e,!!s.multiple,o,!1):s.defaultValue!=null&&Nl(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Eh)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Sr(t),null;case 6:if(e&&t.stateNode!=null)SE(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(fe(166));if(r=ai(Kd.current),ai(zs.current),yf(t)){if(s=t.stateNode,r=t.memoizedProps,s[Ps]=t,(o=s.nodeValue!==r)&&(e=gn,e!==null))switch(e.tag){case 3:vf(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vf(s.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ps]=t,t.stateNode=s}return Sr(t),null;case 13:if(vt(Nt),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bt&&un!==null&&t.mode&1&&!(t.flags&128))UC(),Gl(),t.flags|=98560,o=!1;else if(o=yf(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(fe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(fe(317));o[Ps]=t}else Gl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Sr(t),o=!1}else os!==null&&(Lv(os),os=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Nt.current&1?rr===0&&(rr=3):R0())),t.updateQueue!==null&&(t.flags|=4),Sr(t),null);case 4:return Yl(),Dv(e,t),e===null&&Wd(t.stateNode.containerInfo),Sr(t),null;case 10:return p0(t.type._context),Sr(t),null;case 17:return rn(t.type)&&kh(),Sr(t),null;case 19:if(vt(Nt),o=t.memoizedState,o===null)return Sr(t),null;if(s=(t.flags&128)!==0,i=o.rendering,i===null)if(s)qc(o,!1);else{if(rr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ih(e),i!==null){for(t.flags|=128,qc(o,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)o=r,e=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ut(Nt,Nt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Mt()>Jl&&(t.flags|=128,s=!0,qc(o,!1),t.lanes=4194304)}else{if(!s)if(e=Ih(i),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),qc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!bt)return Sr(t),null}else 2*Mt()-o.renderingStartTime>Jl&&r!==1073741824&&(t.flags|=128,s=!0,qc(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Mt(),t.sibling=null,r=Nt.current,ut(Nt,s?r&1|2:r&1),t):(Sr(t),null);case 22:case 23:return P0(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ln&1073741824&&(Sr(t),t.subtreeFlags&6&&(t.flags|=8192)):Sr(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function XL(e,t){switch(u0(t),t.tag){case 1:return rn(t.type)&&kh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yl(),vt(tn),vt(Dr),w0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return y0(t),null;case 13:if(vt(Nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));Gl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vt(Nt),null;case 4:return Yl(),null;case 10:return p0(t.type._context),null;case 22:case 23:return P0(),null;case 24:return null;default:return null}}var jf=!1,Er=!1,JL=typeof WeakSet=="function"?WeakSet:Set,Se=null;function wl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Tt(e,t,s)}else r.current=null}function Tv(e,t,r){try{r()}catch(s){Tt(e,t,s)}}var iN=!1;function QL(e,t){if(hv=Sh,e=DC(),c0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,f=e,m=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=i+a),f!==o||s!==0&&f.nodeType!==3||(c=i+s),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===r&&++d===a&&(l=i),m===o&&++u===s&&(c=i),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(mv={focusedElem:e,selectionRange:r},Sh=!1,Se=t;Se!==null;)if(t=Se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Se=e;else for(;Se!==null;){t=Se;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,x=w.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:es(t.type,v),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(j){Tt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Se=e;break}Se=t.return}return w=iN,iN=!1,w}function bd(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&Tv(t,r,o)}a=a.next}while(a!==s)}}function Vm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Pv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function _E(e){var t=e.alternate;t!==null&&(e.alternate=null,_E(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ps],delete t[qd],delete t[xv],delete t[ML],delete t[IL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function CE(e){return e.tag===5||e.tag===3||e.tag===4}function lN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||CE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rv(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Eh));else if(s!==4&&(e=e.child,e!==null))for(Rv(e,t,r),e=e.sibling;e!==null;)Rv(e,t,r),e=e.sibling}function Av(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Av(e,t,r),e=e.sibling;e!==null;)Av(e,t,r),e=e.sibling}var gr=null,ss=!1;function Ma(e,t,r){for(r=r.child;r!==null;)EE(e,t,r),r=r.sibling}function EE(e,t,r){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(Im,r)}catch{}switch(r.tag){case 5:Er||wl(r,t);case 6:var s=gr,a=ss;gr=null,Ma(e,t,r),gr=s,ss=a,gr!==null&&(ss?(e=gr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):gr.removeChild(r.stateNode));break;case 18:gr!==null&&(ss?(e=gr,r=r.stateNode,e.nodeType===8?Tg(e.parentNode,r):e.nodeType===1&&Tg(e,r),Bd(e)):Tg(gr,r.stateNode));break;case 4:s=gr,a=ss,gr=r.stateNode.containerInfo,ss=!0,Ma(e,t,r),gr=s,ss=a;break;case 0:case 11:case 14:case 15:if(!Er&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Tv(r,t,i),a=a.next}while(a!==s)}Ma(e,t,r);break;case 1:if(!Er&&(wl(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Tt(r,t,l)}Ma(e,t,r);break;case 21:Ma(e,t,r);break;case 22:r.mode&1?(Er=(s=Er)||r.memoizedState!==null,Ma(e,t,r),Er=s):Ma(e,t,r);break;default:Ma(e,t,r)}}function cN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new JL),t.forEach(function(s){var a=i3.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Xn(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:gr=l.stateNode,ss=!1;break e;case 3:gr=l.stateNode.containerInfo,ss=!0;break e;case 4:gr=l.stateNode.containerInfo,ss=!0;break e}l=l.return}if(gr===null)throw Error(fe(160));EE(o,i,a),gr=null,ss=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Tt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kE(t,e),t=t.sibling}function kE(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xn(t,e),Ss(e),s&4){try{bd(3,e,e.return),Vm(3,e)}catch(v){Tt(e,e.return,v)}try{bd(5,e,e.return)}catch(v){Tt(e,e.return,v)}}break;case 1:Xn(t,e),Ss(e),s&512&&r!==null&&wl(r,r.return);break;case 5:if(Xn(t,e),Ss(e),s&512&&r!==null&&wl(r,r.return),e.flags&32){var a=e.stateNode;try{Ld(a,"")}catch(v){Tt(e,e.return,v)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&X_(a,o),nv(l,i);var d=nv(l,o);for(i=0;i<c.length;i+=2){var u=c[i],f=c[i+1];u==="style"?tC(a,f):u==="dangerouslySetInnerHTML"?Z_(a,f):u==="children"?Ld(a,f):Xy(a,u,f,d)}switch(l){case"input":Qx(a,o);break;case"textarea":J_(a,o);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Nl(a,!!o.multiple,p,!1):m!==!!o.multiple&&(o.defaultValue!=null?Nl(a,!!o.multiple,o.defaultValue,!0):Nl(a,!!o.multiple,o.multiple?[]:"",!1))}a[qd]=o}catch(v){Tt(e,e.return,v)}}break;case 6:if(Xn(t,e),Ss(e),s&4){if(e.stateNode===null)throw Error(fe(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){Tt(e,e.return,v)}}break;case 3:if(Xn(t,e),Ss(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Bd(t.containerInfo)}catch(v){Tt(e,e.return,v)}break;case 4:Xn(t,e),Ss(e);break;case 13:Xn(t,e),Ss(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(D0=Mt())),s&4&&cN(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Er=(d=Er)||u,Xn(t,e),Er=d):Xn(t,e),Ss(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Se=e,u=e.child;u!==null;){for(f=Se=u;Se!==null;){switch(m=Se,p=m.child,m.tag){case 0:case 11:case 14:case 15:bd(4,m,m.return);break;case 1:wl(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){s=m,r=m.return;try{t=s,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){Tt(s,r,v)}}break;case 5:wl(m,m.return);break;case 22:if(m.memoizedState!==null){uN(f);continue}}p!==null?(p.return=m,Se=p):uN(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,d?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=eC("display",i))}catch(v){Tt(e,e.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){Tt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Xn(t,e),Ss(e),s&4&&cN(e);break;case 21:break;default:Xn(t,e),Ss(e)}}function Ss(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(CE(r)){var s=r;break e}r=r.return}throw Error(fe(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Ld(a,""),s.flags&=-33);var o=lN(e);Av(e,o,a);break;case 3:case 4:var i=s.stateNode.containerInfo,l=lN(e);Rv(e,l,i);break;default:throw Error(fe(161))}}catch(c){Tt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ZL(e,t,r){Se=e,DE(e)}function DE(e,t,r){for(var s=(e.mode&1)!==0;Se!==null;){var a=Se,o=a.child;if(a.tag===22&&s){var i=a.memoizedState!==null||jf;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Er;l=jf;var d=Er;if(jf=i,(Er=c)&&!d)for(Se=a;Se!==null;)i=Se,c=i.child,i.tag===22&&i.memoizedState!==null?fN(a):c!==null?(c.return=i,Se=c):fN(a);for(;o!==null;)Se=o,DE(o),o=o.sibling;Se=a,jf=l,Er=d}dN(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,Se=o):dN(e)}}function dN(e){for(;Se!==null;){var t=Se;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Er||Vm(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Er)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:es(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Kj(t,o,s);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Kj(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Bd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Er||t.flags&512&&Pv(t)}catch(m){Tt(t,t.return,m)}}if(t===e){Se=null;break}if(r=t.sibling,r!==null){r.return=t.return,Se=r;break}Se=t.return}}function uN(e){for(;Se!==null;){var t=Se;if(t===e){Se=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Se=r;break}Se=t.return}}function fN(e){for(;Se!==null;){var t=Se;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Vm(4,t)}catch(c){Tt(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Tt(t,a,c)}}var o=t.return;try{Pv(t)}catch(c){Tt(t,o,c)}break;case 5:var i=t.return;try{Pv(t)}catch(c){Tt(t,i,c)}}}catch(c){Tt(t,t.return,c)}if(t===e){Se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Se=l;break}Se=t.return}}var e3=Math.ceil,$h=Ca.ReactCurrentDispatcher,E0=Ca.ReactCurrentOwner,Fn=Ca.ReactCurrentBatchConfig,Ze=0,ur=null,Gt=null,yr=0,ln=0,bl=To(0),rr=0,Qd=null,bi=0,Wm=0,k0=0,jd=null,Xr=null,D0=0,Jl=1/0,na=null,Fh=!1,Mv=null,mo=null,Nf=!1,so=null,zh=0,Nd=0,Iv=null,nh=-1,sh=0;function Fr(){return Ze&6?Mt():nh!==-1?nh:nh=Mt()}function po(e){return e.mode&1?Ze&2&&yr!==0?yr&-yr:LL.transition!==null?(sh===0&&(sh=hC()),sh):(e=it,e!==0||(e=window.event,e=e===void 0?16:wC(e.type)),e):1}function us(e,t,r,s){if(50<Nd)throw Nd=0,Iv=null,Error(fe(185));Cu(e,r,s),(!(Ze&2)||e!==ur)&&(e===ur&&(!(Ze&2)&&(Wm|=r),rr===4&&Ga(e,yr)),nn(e,s),r===1&&Ze===0&&!(t.mode&1)&&(Jl=Mt()+500,zm&&Po()))}function nn(e,t){var r=e.callbackNode;LO(e,t);var s=Nh(e,e===ur?yr:0);if(s===0)r!==null&&bj(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&bj(r),t===1)e.tag===0?OL(hN.bind(null,e)):FC(hN.bind(null,e)),RL(function(){!(Ze&6)&&Po()}),r=null;else{switch(mC(s)){case 1:r=t0;break;case 4:r=uC;break;case 16:r=jh;break;case 536870912:r=fC;break;default:r=jh}r=LE(r,TE.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function TE(e,t){if(nh=-1,sh=0,Ze&6)throw Error(fe(327));var r=e.callbackNode;if(kl()&&e.callbackNode!==r)return null;var s=Nh(e,e===ur?yr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Bh(e,s);else{t=s;var a=Ze;Ze|=2;var o=RE();(ur!==e||yr!==t)&&(na=null,Jl=Mt()+500,hi(e,t));do try{n3();break}catch(l){PE(e,l)}while(!0);m0(),$h.current=o,Ze=a,Gt!==null?t=0:(ur=null,yr=0,t=rr)}if(t!==0){if(t===2&&(a=lv(e),a!==0&&(s=a,t=Ov(e,a))),t===1)throw r=Qd,hi(e,0),Ga(e,s),nn(e,Mt()),r;if(t===6)Ga(e,s);else{if(a=e.current.alternate,!(s&30)&&!t3(a)&&(t=Bh(e,s),t===2&&(o=lv(e),o!==0&&(s=o,t=Ov(e,o))),t===1))throw r=Qd,hi(e,0),Ga(e,s),nn(e,Mt()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(fe(345));case 2:Jo(e,Xr,na);break;case 3:if(Ga(e,s),(s&130023424)===s&&(t=D0+500-Mt(),10<t)){if(Nh(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Fr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=gv(Jo.bind(null,e,Xr,na),t);break}Jo(e,Xr,na);break;case 4:if(Ga(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var i=31-ds(s);o=1<<i,i=t[i],i>a&&(a=i),s&=~o}if(s=a,s=Mt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*e3(s/1960))-s,10<s){e.timeoutHandle=gv(Jo.bind(null,e,Xr,na),s);break}Jo(e,Xr,na);break;case 5:Jo(e,Xr,na);break;default:throw Error(fe(329))}}}return nn(e,Mt()),e.callbackNode===r?TE.bind(null,e):null}function Ov(e,t){var r=jd;return e.current.memoizedState.isDehydrated&&(hi(e,t).flags|=256),e=Bh(e,t),e!==2&&(t=Xr,Xr=r,t!==null&&Lv(t)),e}function Lv(e){Xr===null?Xr=e:Xr.push.apply(Xr,e)}function t3(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],o=a.getSnapshot;a=a.value;try{if(!ps(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ga(e,t){for(t&=~k0,t&=~Wm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ds(t),s=1<<r;e[r]=-1,t&=~s}}function hN(e){if(Ze&6)throw Error(fe(327));kl();var t=Nh(e,0);if(!(t&1))return nn(e,Mt()),null;var r=Bh(e,t);if(e.tag!==0&&r===2){var s=lv(e);s!==0&&(t=s,r=Ov(e,s))}if(r===1)throw r=Qd,hi(e,0),Ga(e,t),nn(e,Mt()),r;if(r===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jo(e,Xr,na),nn(e,Mt()),null}function T0(e,t){var r=Ze;Ze|=1;try{return e(t)}finally{Ze=r,Ze===0&&(Jl=Mt()+500,zm&&Po())}}function ji(e){so!==null&&so.tag===0&&!(Ze&6)&&kl();var t=Ze;Ze|=1;var r=Fn.transition,s=it;try{if(Fn.transition=null,it=1,e)return e()}finally{it=s,Fn.transition=r,Ze=t,!(Ze&6)&&Po()}}function P0(){ln=bl.current,vt(bl)}function hi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,PL(r)),Gt!==null)for(r=Gt.return;r!==null;){var s=r;switch(u0(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&kh();break;case 3:Yl(),vt(tn),vt(Dr),w0();break;case 5:y0(s);break;case 4:Yl();break;case 13:vt(Nt);break;case 19:vt(Nt);break;case 10:p0(s.type._context);break;case 22:case 23:P0()}r=r.return}if(ur=e,Gt=e=go(e.current,null),yr=ln=t,rr=0,Qd=null,k0=Wm=bi=0,Xr=jd=null,si!==null){for(t=0;t<si.length;t++)if(r=si[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,o=r.pending;if(o!==null){var i=o.next;o.next=a,s.next=i}r.pending=s}si=null}return e}function PE(e,t){do{var r=Gt;try{if(m0(),eh.current=Lh,Oh){for(var s=St.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Oh=!1}if(wi=0,cr=er=St=null,wd=!1,Yd=0,E0.current=null,r===null||r.return===null){rr=1,Qd=t,Gt=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=yr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=eN(i);if(p!==null){p.flags&=-257,tN(p,i,l,o,t),p.mode&1&&Zj(o,d,t),t=p,c=d;var w=t.updateQueue;if(w===null){var v=new Set;v.add(c),t.updateQueue=v}else w.add(c);break e}else{if(!(t&1)){Zj(o,d,t),R0();break e}c=Error(fe(426))}}else if(bt&&l.mode&1){var x=eN(i);if(x!==null){!(x.flags&65536)&&(x.flags|=256),tN(x,i,l,o,t),f0(Xl(c,l));break e}}o=c=Xl(c,l),rr!==4&&(rr=2),jd===null?jd=[o]:jd.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=mE(o,c,t);Gj(o,g);break e;case 1:l=c;var y=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(mo===null||!mo.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=pE(o,l,t);Gj(o,j);break e}}o=o.return}while(o!==null)}ME(r)}catch(S){t=S,Gt===r&&r!==null&&(Gt=r=r.return);continue}break}while(!0)}function RE(){var e=$h.current;return $h.current=Lh,e===null?Lh:e}function R0(){(rr===0||rr===3||rr===2)&&(rr=4),ur===null||!(bi&268435455)&&!(Wm&268435455)||Ga(ur,yr)}function Bh(e,t){var r=Ze;Ze|=2;var s=RE();(ur!==e||yr!==t)&&(na=null,hi(e,t));do try{r3();break}catch(a){PE(e,a)}while(!0);if(m0(),Ze=r,$h.current=s,Gt!==null)throw Error(fe(261));return ur=null,yr=0,rr}function r3(){for(;Gt!==null;)AE(Gt)}function n3(){for(;Gt!==null&&!kO();)AE(Gt)}function AE(e){var t=OE(e.alternate,e,ln);e.memoizedProps=e.pendingProps,t===null?ME(e):Gt=t,E0.current=null}function ME(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=XL(r,t),r!==null){r.flags&=32767,Gt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rr=6,Gt=null;return}}else if(r=YL(r,t,ln),r!==null){Gt=r;return}if(t=t.sibling,t!==null){Gt=t;return}Gt=t=e}while(t!==null);rr===0&&(rr=5)}function Jo(e,t,r){var s=it,a=Fn.transition;try{Fn.transition=null,it=1,s3(e,t,r,s)}finally{Fn.transition=a,it=s}return null}function s3(e,t,r,s){do kl();while(so!==null);if(Ze&6)throw Error(fe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if($O(e,o),e===ur&&(Gt=ur=null,yr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Nf||(Nf=!0,LE(jh,function(){return kl(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Fn.transition,Fn.transition=null;var i=it;it=1;var l=Ze;Ze|=4,E0.current=null,QL(e,r),kE(r,e),SL(mv),Sh=!!hv,mv=hv=null,e.current=r,ZL(r),DO(),Ze=l,it=i,Fn.transition=o}else e.current=r;if(Nf&&(Nf=!1,so=e,zh=a),o=e.pendingLanes,o===0&&(mo=null),RO(r.stateNode),nn(e,Mt()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(Fh)throw Fh=!1,e=Mv,Mv=null,e;return zh&1&&e.tag!==0&&kl(),o=e.pendingLanes,o&1?e===Iv?Nd++:(Nd=0,Iv=e):Nd=0,Po(),null}function kl(){if(so!==null){var e=mC(zh),t=Fn.transition,r=it;try{if(Fn.transition=null,it=16>e?16:e,so===null)var s=!1;else{if(e=so,so=null,zh=0,Ze&6)throw Error(fe(331));var a=Ze;for(Ze|=4,Se=e.current;Se!==null;){var o=Se,i=o.child;if(Se.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Se=d;Se!==null;){var u=Se;switch(u.tag){case 0:case 11:case 15:bd(8,u,o)}var f=u.child;if(f!==null)f.return=u,Se=f;else for(;Se!==null;){u=Se;var m=u.sibling,p=u.return;if(_E(u),u===d){Se=null;break}if(m!==null){m.return=p,Se=m;break}Se=p}}}var w=o.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Se=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Se=i;else e:for(;Se!==null;){if(o=Se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:bd(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Se=g;break e}Se=o.return}}var y=e.current;for(Se=y;Se!==null;){i=Se;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Se=b;else e:for(i=y;Se!==null;){if(l=Se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vm(9,l)}}catch(S){Tt(l,l.return,S)}if(l===i){Se=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Se=j;break e}Se=l.return}}if(Ze=a,Po(),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(Im,e)}catch{}s=!0}return s}finally{it=r,Fn.transition=t}}return!1}function mN(e,t,r){t=Xl(r,t),t=mE(e,t,1),e=ho(e,t,1),t=Fr(),e!==null&&(Cu(e,1,t),nn(e,t))}function Tt(e,t,r){if(e.tag===3)mN(e,e,r);else for(;t!==null;){if(t.tag===3){mN(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(mo===null||!mo.has(s))){e=Xl(r,e),e=pE(t,e,1),t=ho(t,e,1),e=Fr(),t!==null&&(Cu(t,1,e),nn(t,e));break}}t=t.return}}function a3(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Fr(),e.pingedLanes|=e.suspendedLanes&r,ur===e&&(yr&r)===r&&(rr===4||rr===3&&(yr&130023424)===yr&&500>Mt()-D0?hi(e,0):k0|=r),nn(e,t)}function IE(e,t){t===0&&(e.mode&1?(t=hf,hf<<=1,!(hf&130023424)&&(hf=4194304)):t=1);var r=Fr();e=ya(e,t),e!==null&&(Cu(e,t,r),nn(e,r))}function o3(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),IE(e,r)}function i3(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(fe(314))}s!==null&&s.delete(t),IE(e,r)}var OE;OE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||tn.current)Zr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Zr=!1,KL(e,t,r);Zr=!!(e.flags&131072)}else Zr=!1,bt&&t.flags&1048576&&zC(t,Ph,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;rh(e,t),e=t.pendingProps;var a=ql(t,Dr.current);El(t,r),a=j0(null,t,s,e,a,r);var o=N0();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rn(s)?(o=!0,Dh(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,x0(t),a.updater=Um,t.stateNode=a,a._reactInternals=t,Nv(t,s,e,r),t=Cv(null,t,s,!0,o,r)):(t.tag=0,bt&&o&&d0(t),Ir(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(rh(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=c3(s),e=es(s,e),a){case 0:t=_v(null,t,s,e,r);break e;case 1:t=sN(null,t,s,e,r);break e;case 11:t=rN(null,t,s,e,r);break e;case 14:t=nN(null,t,s,es(s.type,e),r);break e}throw Error(fe(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:es(s,a),_v(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:es(s,a),sN(e,t,s,a,r);case 3:e:{if(yE(t),e===null)throw Error(fe(387));s=t.pendingProps,o=t.memoizedState,a=o.element,qC(e,t),Mh(t,s,null,r);var i=t.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Xl(Error(fe(423)),t),t=aN(e,t,s,r,a);break e}else if(s!==a){a=Xl(Error(fe(424)),t),t=aN(e,t,s,r,a);break e}else for(un=fo(t.stateNode.containerInfo.firstChild),gn=t,bt=!0,os=null,r=WC(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gl(),s===a){t=wa(e,t,r);break e}Ir(e,t,s,r)}t=t.child}return t;case 5:return GC(t),e===null&&wv(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,pv(s,a)?i=null:o!==null&&pv(s,o)&&(t.flags|=32),vE(e,t),Ir(e,t,i,r),t.child;case 6:return e===null&&wv(t),null;case 13:return wE(e,t,r);case 4:return v0(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Kl(t,null,s,r):Ir(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:es(s,a),rN(e,t,s,a,r);case 7:return Ir(e,t,t.pendingProps,r),t.child;case 8:return Ir(e,t,t.pendingProps.children,r),t.child;case 12:return Ir(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,ut(Rh,s._currentValue),s._currentValue=i,o!==null)if(ps(o.value,i)){if(o.children===a.children&&!tn.current){t=wa(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(o.tag===1){c=ma(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),bv(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(fe(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),bv(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ir(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,El(t,r),a=Wn(a),s=s(a),t.flags|=1,Ir(e,t,s,r),t.child;case 14:return s=t.type,a=es(s,t.pendingProps),a=es(s.type,a),nN(e,t,s,a,r);case 15:return gE(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:es(s,a),rh(e,t),t.tag=1,rn(s)?(e=!0,Dh(t)):e=!1,El(t,r),hE(t,s,a),Nv(t,s,a,r),Cv(null,t,s,!0,e,r);case 19:return bE(e,t,r);case 22:return xE(e,t,r)}throw Error(fe(156,t.tag))};function LE(e,t){return dC(e,t)}function l3(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(e,t,r,s){return new l3(e,t,r,s)}function A0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function c3(e){if(typeof e=="function")return A0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Qy)return 11;if(e===Zy)return 14}return 2}function go(e,t){var r=e.alternate;return r===null?(r=On(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ah(e,t,r,s,a,o){var i=2;if(s=e,typeof e=="function")A0(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ul:return mi(r.children,a,o,t);case Jy:i=8,a|=8;break;case Gx:return e=On(12,r,t,a|2),e.elementType=Gx,e.lanes=o,e;case Kx:return e=On(13,r,t,a),e.elementType=Kx,e.lanes=o,e;case Yx:return e=On(19,r,t,a),e.elementType=Yx,e.lanes=o,e;case G_:return Hm(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H_:i=10;break e;case q_:i=9;break e;case Qy:i=11;break e;case Zy:i=14;break e;case Va:i=16,s=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=On(i,r,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function mi(e,t,r,s){return e=On(7,e,s,t),e.lanes=r,e}function Hm(e,t,r,s){return e=On(22,e,s,t),e.elementType=G_,e.lanes=r,e.stateNode={isHidden:!1},e}function $g(e,t,r){return e=On(6,e,null,t),e.lanes=r,e}function Fg(e,t,r){return t=On(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function d3(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yg(0),this.expirationTimes=yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yg(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function M0(e,t,r,s,a,o,i,l,c){return e=new d3(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=On(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},x0(o),e}function u3(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dl,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function $E(e){if(!e)return So;e=e._reactInternals;e:{if(Oi(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var r=e.type;if(rn(r))return $C(e,r,t)}return t}function FE(e,t,r,s,a,o,i,l,c){return e=M0(r,s,!0,e,a,o,i,l,c),e.context=$E(null),r=e.current,s=Fr(),a=po(r),o=ma(s,a),o.callback=t??null,ho(r,o,a),e.current.lanes=a,Cu(e,a,s),nn(e,s),e}function qm(e,t,r,s){var a=t.current,o=Fr(),i=po(a);return r=$E(r),t.context===null?t.context=r:t.pendingContext=r,t=ma(o,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ho(a,t,i),e!==null&&(us(e,a,i,o),Zf(e,a,i)),i}function Uh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function I0(e,t){pN(e,t),(e=e.alternate)&&pN(e,t)}function f3(){return null}var zE=typeof reportError=="function"?reportError:function(e){console.error(e)};function O0(e){this._internalRoot=e}Gm.prototype.render=O0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));qm(e,t,null,null)};Gm.prototype.unmount=O0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ji(function(){qm(null,e,null,null)}),t[va]=null}};function Gm(e){this._internalRoot=e}Gm.prototype.unstable_scheduleHydration=function(e){if(e){var t=xC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<qa.length&&t!==0&&t<qa[r].priority;r++);qa.splice(r,0,e),r===0&&yC(e)}};function L0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Km(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gN(){}function h3(e,t,r,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var d=Uh(i);o.call(d)}}var i=FE(t,s,e,0,null,!1,!1,"",gN);return e._reactRootContainer=i,e[va]=i.current,Wd(e.nodeType===8?e.parentNode:e),ji(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=Uh(c);l.call(d)}}var c=M0(e,0,!1,null,null,!1,!1,"",gN);return e._reactRootContainer=c,e[va]=c.current,Wd(e.nodeType===8?e.parentNode:e),ji(function(){qm(t,c,r,s)}),c}function Ym(e,t,r,s,a){var o=r._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=Uh(i);l.call(c)}}qm(t,i,e,a)}else i=h3(r,t,e,a,s);return Uh(i)}pC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ld(t.pendingLanes);r!==0&&(r0(t,r|1),nn(t,Mt()),!(Ze&6)&&(Jl=Mt()+500,Po()))}break;case 13:ji(function(){var s=ya(e,1);if(s!==null){var a=Fr();us(s,e,1,a)}}),I0(e,1)}};n0=function(e){if(e.tag===13){var t=ya(e,134217728);if(t!==null){var r=Fr();us(t,e,134217728,r)}I0(e,134217728)}};gC=function(e){if(e.tag===13){var t=po(e),r=ya(e,t);if(r!==null){var s=Fr();us(r,e,t,s)}I0(e,t)}};xC=function(){return it};vC=function(e,t){var r=it;try{return it=e,t()}finally{it=r}};av=function(e,t,r){switch(t){case"input":if(Qx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Fm(s);if(!a)throw Error(fe(90));Y_(s),Qx(s,a)}}}break;case"textarea":J_(e,r);break;case"select":t=r.value,t!=null&&Nl(e,!!r.multiple,t,!1)}};sC=T0;aC=ji;var m3={usingClientEntryPoint:!1,Events:[ku,pl,Fm,rC,nC,T0]},Gc={findFiberByHostInstance:ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p3={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ca.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lC(e),e===null?null:e.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||f3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sf.isDisabled&&Sf.supportsFiber)try{Im=Sf.inject(p3),Fs=Sf}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m3;jn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!L0(t))throw Error(fe(200));return u3(e,t,null,r)};jn.createRoot=function(e,t){if(!L0(e))throw Error(fe(299));var r=!1,s="",a=zE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=M0(e,1,!1,null,null,r,!1,s,a),e[va]=t.current,Wd(e.nodeType===8?e.parentNode:e),new O0(t)};jn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=lC(t),e=e===null?null:e.stateNode,e};jn.flushSync=function(e){return ji(e)};jn.hydrate=function(e,t,r){if(!Km(t))throw Error(fe(200));return Ym(null,e,t,!0,r)};jn.hydrateRoot=function(e,t,r){if(!L0(e))throw Error(fe(405));var s=r!=null&&r.hydratedSources||null,a=!1,o="",i=zE;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=FE(t,null,e,1,r??null,a,!1,o,i),e[va]=t.current,Wd(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Gm(t)};jn.render=function(e,t,r){if(!Km(t))throw Error(fe(200));return Ym(null,e,t,!1,r)};jn.unmountComponentAtNode=function(e){if(!Km(e))throw Error(fe(40));return e._reactRootContainer?(ji(function(){Ym(null,null,e,!1,function(){e._reactRootContainer=null,e[va]=null})}),!0):!1};jn.unstable_batchedUpdates=T0;jn.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Km(r))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return Ym(e,t,r,!1,s)};jn.version="18.3.1-next-f1338f8080-20240426";function BE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BE)}catch(e){console.error(e)}}BE(),B_.exports=jn;var en=B_.exports;const $0=D_(en);var UE,xN=en;UE=xN.createRoot,xN.hydrateRoot;const g3=1,x3=1e6;let zg=0;function v3(){return zg=(zg+1)%Number.MAX_SAFE_INTEGER,zg.toString()}const Bg=new Map,vN=e=>{if(Bg.has(e))return;const t=setTimeout(()=>{Bg.delete(e),Sd({type:"REMOVE_TOAST",toastId:e})},x3);Bg.set(e,t)},y3=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,g3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?vN(r):e.toasts.forEach(s=>{vN(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},oh=[];let ih={toasts:[]};function Sd(e){ih=y3(ih,e),oh.forEach(t=>{t(ih)})}function w3({...e}){const t=v3(),r=a=>Sd({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>Sd({type:"DISMISS_TOAST",toastId:t});return Sd({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function rt(){const[e,t]=h.useState(ih);return h.useEffect(()=>(oh.push(t),()=>{const r=oh.indexOf(t);r>-1&&oh.splice(r,1)}),[e]),{...e,toast:w3,dismiss:r=>Sd({type:"DISMISS_TOAST",toastId:r})}}function ue(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function yN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Xm(...e){return t=>{let r=!1;const s=e.map(a=>{const o=yN(a,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():yN(e[a],null)}}}}function Ae(...e){return h.useCallback(Xm(...e),e)}function b3(e,t){const r=h.createContext(t),s=o=>{const{children:i,...l}=o,c=h.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:c,children:i})};s.displayName=e+"Provider";function a(o){const i=h.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function sr(e,t=[]){let r=[];function s(o,i){const l=h.createContext(i),c=r.length;r=[...r,i];const d=f=>{var g;const{scope:m,children:p,...w}=f,v=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,x=h.useMemo(()=>w,Object.values(w));return n.jsx(v.Provider,{value:x,children:p})};d.displayName=o+"Provider";function u(f,m){var v;const p=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,w=h.useContext(p);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=r.map(i=>h.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,j3(a,...t)]}function j3(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const f=c(o)[`__scope${d}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function _o(e){const t=S3(e),r=h.forwardRef((s,a)=>{const{children:o,...i}=s,l=h.Children.toArray(o),c=l.find(_3);if(c){const d=c.props.children,u=l.map(f=>f===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...i,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return n.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}var N3=_o("Slot");function S3(e){const t=h.forwardRef((r,s)=>{const{children:a,...o}=r;if(h.isValidElement(a)){const i=E3(a),l=C3(o,a.props);return a.type!==h.Fragment&&(l.ref=s?Xm(s,i):i),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var VE=Symbol("radix.slottable");function WE(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=VE,t}function _3(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===VE}function C3(e,t){const r={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?r[s]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[s]=a):s==="style"?r[s]={...a,...o}:s==="className"&&(r[s]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function E3(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Tu(e){const t=e+"CollectionProvider",[r,s]=sr(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:x,children:g}=v,y=X.useRef(null),b=X.useRef(new Map).current;return n.jsx(a,{scope:x,itemMap:b,collectionRef:y,children:g})};i.displayName=t;const l=e+"CollectionSlot",c=_o(l),d=X.forwardRef((v,x)=>{const{scope:g,children:y}=v,b=o(l,g),j=Ae(x,b.collectionRef);return n.jsx(c,{ref:j,children:y})});d.displayName=l;const u=e+"CollectionItemSlot",f="data-radix-collection-item",m=_o(u),p=X.forwardRef((v,x)=>{const{scope:g,children:y,...b}=v,j=X.useRef(null),S=Ae(x,j),N=o(u,g);return X.useEffect(()=>(N.itemMap.set(j,{ref:j,...b}),()=>void N.itemMap.delete(j))),n.jsx(m,{[f]:"",ref:S,children:y})});p.displayName=u;function w(v){const x=o(e+"CollectionConsumer",v);return X.useCallback(()=>{const y=x.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((N,_)=>b.indexOf(N.ref.current)-b.indexOf(_.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:i,Slot:d,ItemSlot:p},w,s]}var k3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=k3.reduce((e,t)=>{const r=_o(`Primitive.${t}`),s=h.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function F0(e,t){e&&en.flushSync(()=>e.dispatchEvent(t))}function Rt(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function D3(e,t=globalThis==null?void 0:globalThis.document){const r=Rt(e);h.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var T3="DismissableLayer",$v="dismissableLayer.update",P3="dismissableLayer.pointerDownOutside",R3="dismissableLayer.focusOutside",wN,HE=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Li=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=h.useContext(HE),[u,f]=h.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=h.useState({}),w=Ae(t,_=>f(_)),v=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=v.indexOf(x),y=u?v.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=y>=g,S=M3(_=>{const E=_.target,D=[...d.branches].some(C=>C.contains(E));!j||D||(a==null||a(_),i==null||i(_),_.defaultPrevented||l==null||l())},m),N=I3(_=>{const E=_.target;[...d.branches].some(C=>C.contains(E))||(o==null||o(_),i==null||i(_),_.defaultPrevented||l==null||l())},m);return D3(_=>{y===d.layers.size-1&&(s==null||s(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},m),h.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(wN=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),bN(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=wN)}},[u,m,r,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),bN())},[u,d]),h.useEffect(()=>{const _=()=>p({});return document.addEventListener($v,_),()=>document.removeEventListener($v,_)},[]),n.jsx(je.div,{...c,ref:w,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:ue(e.onFocusCapture,N.onFocusCapture),onBlurCapture:ue(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:ue(e.onPointerDownCapture,S.onPointerDownCapture)})});Li.displayName=T3;var A3="DismissableLayerBranch",qE=h.forwardRef((e,t)=>{const r=h.useContext(HE),s=h.useRef(null),a=Ae(t,s);return h.useEffect(()=>{const o=s.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),n.jsx(je.div,{...e,ref:a})});qE.displayName=A3;function M3(e,t=globalThis==null?void 0:globalThis.document){const r=Rt(e),s=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){GE(P3,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function I3(e,t=globalThis==null?void 0:globalThis.document){const r=Rt(e),s=h.useRef(!1);return h.useEffect(()=>{const a=o=>{o.target&&!s.current&&GE(R3,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function bN(){const e=new CustomEvent($v);document.dispatchEvent(e)}function GE(e,t,r,{discrete:s}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?F0(a,o):a.dispatchEvent(o)}var O3=Li,L3=qE,$t=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},$3="Portal",gc=h.forwardRef((e,t)=>{var l;const{container:r,...s}=e,[a,o]=h.useState(!1);$t(()=>o(!0),[]);const i=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?$0.createPortal(n.jsx(je.div,{...s,ref:t}),i):null});gc.displayName=$3;function F3(e,t){return h.useReducer((r,s)=>t[r][s]??r,e)}var mr=e=>{const{present:t,children:r}=e,s=z3(t),a=typeof r=="function"?r({present:s.isPresent}):h.Children.only(r),o=Ae(s.ref,B3(a));return typeof r=="function"||s.isPresent?h.cloneElement(a,{ref:o}):null};mr.displayName="Presence";function z3(e){const[t,r]=h.useState(),s=h.useRef(null),a=h.useRef(e),o=h.useRef("none"),i=e?"mounted":"unmounted",[l,c]=F3(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=_f(s.current);o.current=l==="mounted"?d:"none"},[l]),$t(()=>{const d=s.current,u=a.current;if(u!==e){const m=o.current,p=_f(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),$t(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,f=p=>{const v=_f(s.current).includes(p.animationName);if(p.target===t&&v&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},m=p=>{p.target===t&&(o.current=_f(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{s.current=d?getComputedStyle(d):null,r(d)},[])}}function _f(e){return(e==null?void 0:e.animationName)||"none"}function B3(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var U3=Mm[" useInsertionEffect ".trim().toString()]||$t;function Br({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,o,i]=V3({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const u=h.useRef(e!==void 0);h.useEffect(()=>{const f=u.current;f!==l&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,s])}const d=h.useCallback(u=>{var f;if(l){const m=W3(u)?u(e):u;m!==e&&((f=i.current)==null||f.call(i,m))}else o(u)},[l,e,o,i]);return[c,d]}function V3({defaultProp:e,onChange:t}){const[r,s]=h.useState(e),a=h.useRef(r),o=h.useRef(t);return U3(()=>{o.current=t},[t]),h.useEffect(()=>{var i;a.current!==r&&((i=o.current)==null||i.call(o,r),a.current=r)},[r,a]),[r,s,o]}function W3(e){return typeof e=="function"}var KE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),H3="VisuallyHidden",Jm=h.forwardRef((e,t)=>n.jsx(je.span,{...e,ref:t,style:{...KE,...e.style}}));Jm.displayName=H3;var q3=Jm,z0="ToastProvider",[B0,G3,K3]=Tu("Toast"),[YE,Yae]=sr("Toast",[K3]),[Y3,Qm]=YE(z0),XE=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=e,[l,c]=h.useState(null),[d,u]=h.useState(0),f=h.useRef(!1),m=h.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${z0}\`. Expected non-empty \`string\`.`),n.jsx(B0.Provider,{scope:t,children:n.jsx(Y3,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>u(p=>p+1),[]),onToastRemove:h.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:i})})};XE.displayName=z0;var JE="ToastViewport",X3=["F8"],Fv="toast.viewportPause",zv="toast.viewportResume",QE=h.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=X3,label:a="Notifications ({hotkey})",...o}=e,i=Qm(JE,r),l=G3(r),c=h.useRef(null),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null),m=Ae(t,f,i.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=i.toastCount>0;h.useEffect(()=>{const x=g=>{var b;s.length!==0&&s.every(j=>g[j]||g.code===j)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[s]),h.useEffect(()=>{const x=c.current,g=f.current;if(w&&x&&g){const y=()=>{if(!i.isClosePausedRef.current){const N=new CustomEvent(Fv);g.dispatchEvent(N),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const N=new CustomEvent(zv);g.dispatchEvent(N),i.isClosePausedRef.current=!1}},j=N=>{!x.contains(N.relatedTarget)&&b()},S=()=>{x.contains(document.activeElement)||b()};return x.addEventListener("focusin",y),x.addEventListener("focusout",j),x.addEventListener("pointermove",y),x.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{x.removeEventListener("focusin",y),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",y),x.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[w,i.isClosePausedRef]);const v=h.useCallback(({tabbingDirection:x})=>{const y=l().map(b=>{const j=b.ref.current,S=[j,...c5(j)];return x==="forwards"?S:S.reverse()});return(x==="forwards"?y.reverse():y).flat()},[l]);return h.useEffect(()=>{const x=f.current;if(x){const g=y=>{var S,N,_;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const E=document.activeElement,D=y.shiftKey;if(y.target===x&&D){(S=d.current)==null||S.focus();return}const P=v({tabbingDirection:D?"backwards":"forwards"}),R=P.findIndex(A=>A===E);Ug(P.slice(R+1))?y.preventDefault():D?(N=d.current)==null||N.focus():(_=u.current)==null||_.focus()}};return x.addEventListener("keydown",g),()=>x.removeEventListener("keydown",g)}},[l,v]),n.jsxs(L3,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&n.jsx(Bv,{ref:d,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});Ug(x)}}),n.jsx(B0.Slot,{scope:r,children:n.jsx(je.ol,{tabIndex:-1,...o,ref:m})}),w&&n.jsx(Bv,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});Ug(x)}})]})});QE.displayName=JE;var ZE="ToastFocusProxy",Bv=h.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,o=Qm(ZE,r);return n.jsx(Jm,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&s()}})});Bv.displayName=ZE;var Pu="Toast",J3="toast.swipeStart",Q3="toast.swipeMove",Z3="toast.swipeCancel",e5="toast.swipeEnd",e2=h.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:o,...i}=e,[l,c]=Br({prop:s,defaultProp:a??!0,onChange:o,caller:Pu});return n.jsx(mr,{present:r||l,children:n.jsx(n5,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Rt(e.onPause),onResume:Rt(e.onResume),onSwipeStart:ue(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ue(e.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ue(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ue(e.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});e2.displayName=Pu;var[t5,r5]=YE(Pu,{onClose(){}}),n5=h.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...w}=e,v=Qm(Pu,r),[x,g]=h.useState(null),y=Ae(t,A=>g(A)),b=h.useRef(null),j=h.useRef(null),S=a||v.duration,N=h.useRef(0),_=h.useRef(S),E=h.useRef(0),{onToastAdd:D,onToastRemove:C}=v,k=Rt(()=>{var I;(x==null?void 0:x.contains(document.activeElement))&&((I=v.viewport)==null||I.focus()),i()}),P=h.useCallback(A=>{!A||A===1/0||(window.clearTimeout(E.current),N.current=new Date().getTime(),E.current=window.setTimeout(k,A))},[k]);h.useEffect(()=>{const A=v.viewport;if(A){const I=()=>{P(_.current),d==null||d()},F=()=>{const B=new Date().getTime()-N.current;_.current=_.current-B,window.clearTimeout(E.current),c==null||c()};return A.addEventListener(Fv,F),A.addEventListener(zv,I),()=>{A.removeEventListener(Fv,F),A.removeEventListener(zv,I)}}},[v.viewport,S,c,d,P]),h.useEffect(()=>{o&&!v.isClosePausedRef.current&&P(S)},[o,S,v.isClosePausedRef,P]),h.useEffect(()=>(D(),()=>C()),[D,C]);const R=h.useMemo(()=>x?i2(x):null,[x]);return v.viewport?n.jsxs(n.Fragment,{children:[R&&n.jsx(s5,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),n.jsx(t5,{scope:r,onClose:k,children:en.createPortal(n.jsx(B0.ItemSlot,{scope:r,children:n.jsx(O3,{asChild:!0,onEscapeKeyDown:ue(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||k(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ue(e.onKeyDown,A=>{A.key==="Escape"&&(l==null||l(A.nativeEvent),A.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:ue(e.onPointerDown,A=>{A.button===0&&(b.current={x:A.clientX,y:A.clientY})}),onPointerMove:ue(e.onPointerMove,A=>{if(!b.current)return;const I=A.clientX-b.current.x,F=A.clientY-b.current.y,B=!!j.current,T=["left","right"].includes(v.swipeDirection),M=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,U=T?M(0,I):0,q=T?0:M(0,F),Y=A.pointerType==="touch"?10:2,G={x:U,y:q},z={originalEvent:A,delta:G};B?(j.current=G,Cf(Q3,f,z,{discrete:!1})):jN(G,v.swipeDirection,Y)?(j.current=G,Cf(J3,u,z,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(I)>Y||Math.abs(F)>Y)&&(b.current=null)}),onPointerUp:ue(e.onPointerUp,A=>{const I=j.current,F=A.target;if(F.hasPointerCapture(A.pointerId)&&F.releasePointerCapture(A.pointerId),j.current=null,b.current=null,I){const B=A.currentTarget,T={originalEvent:A,delta:I};jN(I,v.swipeDirection,v.swipeThreshold)?Cf(e5,p,T,{discrete:!0}):Cf(Z3,m,T,{discrete:!0}),B.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),s5=e=>{const{__scopeToast:t,children:r,...s}=e,a=Qm(Pu,t),[o,i]=h.useState(!1),[l,c]=h.useState(!1);return i5(()=>i(!0)),h.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx(gc,{asChild:!0,children:n.jsx(Jm,{...s,children:o&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},a5="ToastTitle",t2=h.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(je.div,{...s,ref:t})});t2.displayName=a5;var o5="ToastDescription",r2=h.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(je.div,{...s,ref:t})});r2.displayName=o5;var n2="ToastAction",s2=h.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(o2,{altText:r,asChild:!0,children:n.jsx(U0,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${n2}\`. Expected non-empty \`string\`.`),null)});s2.displayName=n2;var a2="ToastClose",U0=h.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=r5(a2,r);return n.jsx(o2,{asChild:!0,children:n.jsx(je.button,{type:"button",...s,ref:t,onClick:ue(e.onClick,a.onClose)})})});U0.displayName=a2;var o2=h.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function i2(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),l5(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=s.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...i2(s))}}),t}function Cf(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?F0(a,o):a.dispatchEvent(o)}var jN=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),o=s>a;return t==="left"||t==="right"?o&&s>r:!o&&a>r};function i5(e=()=>{}){const t=Rt(e);$t(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function l5(e){return e.nodeType===e.ELEMENT_NODE}function c5(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ug(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var d5=XE,l2=QE,c2=e2,d2=t2,u2=r2,f2=s2,h2=U0;function m2(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=m2(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function p2(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=m2(e))&&(s&&(s+=" "),s+=t);return s}const NN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,SN=p2,xc=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return SN(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],f=o==null?void 0:o[d];if(u===null)return null;const m=NN(u)||NN(f);return a[d][m]}),l=r&&Object.entries(r).reduce((d,u)=>{let[f,m]=u;return m===void 0||(d[f]=m),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:f,className:m,...p}=u;return Object.entries(p).every(w=>{let[v,x]=w;return Array.isArray(x)?x.includes({...o,...l}[v]):{...o,...l}[v]===x})?[...d,f,m]:d},[]);return SN(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g2=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:i,...l},c)=>h.createElement("svg",{ref:c,...f5,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:g2("lucide",a),...l},[...i.map(([d,u])=>h.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const r=h.forwardRef(({className:s,...a},o)=>h.createElement(h5,{ref:o,iconNode:t,className:g2(`lucide-${u5(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=me("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=me("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=me("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=me("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=me("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=me("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=me("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=me("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=me("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=me("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=me("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=me("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=me("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=me("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=me("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=me("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=me("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=me("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=me("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=me("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=me("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=me("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=me("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=me("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=me("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=me("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=me("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=me("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=me("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=me("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=me("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=me("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=me("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=me("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=me("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=me("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=me("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=me("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=me("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=me("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=me("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=me("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=me("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=me("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=me("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=me("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=me("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=me("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=me("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=me("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=me("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=me("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=me("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=me("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=me("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=me("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=me("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=me("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),X0="-",U5=e=>{const t=W5(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(X0);return l[0]===""&&l.length!==1&&l.shift(),N2(l,t)||V5(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},N2=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?N2(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(X0);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},TN=/^\[(.+)\]$/,V5=e=>{if(TN.test(e)){const t=TN.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},W5=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return q5(Object.entries(e.classGroups),r).forEach(([o,i])=>{Hv(i,s,o,t)}),s},Hv=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:PN(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(H5(a)){Hv(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,i])=>{Hv(i,PN(t,o),r,s)})})},PN=(e,t)=>{let r=e;return t.split(X0).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},H5=e=>e.isThemeGetter,q5=(e,t)=>t?e.map(([r,s])=>{const a=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[r,a]}):e,G5=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(o,i)=>{r.set(o,i),t++,t>e&&(t=0,s=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return a(o,i),i},set(o,i){r.has(o)?r.set(o,i):a(o,i)}}},S2="!",K5=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],o=t.length,i=l=>{const c=[];let d=0,u=0,f;for(let x=0;x<l.length;x++){let g=l[x];if(d===0){if(g===a&&(s||l.slice(x,x+o)===t)){c.push(l.slice(u,x)),u=x+o;continue}if(g==="/"){f=x;continue}}g==="["?d++:g==="]"&&d--}const m=c.length===0?l:l.substring(u),p=m.startsWith(S2),w=p?m.substring(1):m,v=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:i}):i},Y5=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},X5=e=>({cache:G5(e.cacheSize),parseClassName:K5(e),...U5(e)}),J5=/\s+/,Q5=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(J5);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=r(d);let w=!!p,v=s(w?m.substring(0,p):m);if(!v){if(!w){l=d+(l.length>0?" "+l:l);continue}if(v=s(m),!v){l=d+(l.length>0?" "+l:l);continue}w=!1}const x=Y5(u).join(":"),g=f?x+S2:x,y=g+v;if(o.includes(y))continue;o.push(y);const b=a(v,w);for(let j=0;j<b.length;++j){const S=b[j];o.push(g+S)}l=d+(l.length>0?" "+l:l)}return l};function Z5(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=_2(t))&&(s&&(s+=" "),s+=r);return s}const _2=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=_2(e[s]))&&(r&&(r+=" "),r+=t);return r};function e$(e,...t){let r,s,a,o=i;function i(c){const d=t.reduce((u,f)=>f(u),e());return r=X5(d),s=r.cache.get,a=r.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const u=Q5(c,r);return a(c,u),u}return function(){return o(Z5.apply(null,arguments))}}const gt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},C2=/^\[(?:([a-z-]+):)?(.+)\]$/i,t$=/^\d+\/\d+$/,r$=new Set(["px","full","screen"]),n$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,a$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,o$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,i$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Js=e=>Tl(e)||r$.has(e)||t$.test(e),Ia=e=>yc(e,"length",p$),Tl=e=>!!e&&!Number.isNaN(Number(e)),Hg=e=>yc(e,"number",Tl),Xc=e=>!!e&&Number.isInteger(Number(e)),l$=e=>e.endsWith("%")&&Tl(e.slice(0,-1)),He=e=>C2.test(e),Oa=e=>n$.test(e),c$=new Set(["length","size","percentage"]),d$=e=>yc(e,c$,E2),u$=e=>yc(e,"position",E2),f$=new Set(["image","url"]),h$=e=>yc(e,f$,x$),m$=e=>yc(e,"",g$),Jc=()=>!0,yc=(e,t,r)=>{const s=C2.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},p$=e=>s$.test(e)&&!a$.test(e),E2=()=>!1,g$=e=>o$.test(e),x$=e=>i$.test(e),v$=()=>{const e=gt("colors"),t=gt("spacing"),r=gt("blur"),s=gt("brightness"),a=gt("borderColor"),o=gt("borderRadius"),i=gt("borderSpacing"),l=gt("borderWidth"),c=gt("contrast"),d=gt("grayscale"),u=gt("hueRotate"),f=gt("invert"),m=gt("gap"),p=gt("gradientColorStops"),w=gt("gradientColorStopPositions"),v=gt("inset"),x=gt("margin"),g=gt("opacity"),y=gt("padding"),b=gt("saturate"),j=gt("scale"),S=gt("sepia"),N=gt("skew"),_=gt("space"),E=gt("translate"),D=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",He,t],P=()=>[He,t],R=()=>["",Js,Ia],A=()=>["auto",Tl,He],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",He],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Tl,He];return{cacheSize:500,separator:":",theme:{colors:[Jc],spacing:[Js,Ia],blur:["none","",Oa,He],brightness:q(),borderColor:[e],borderRadius:["none","","full",Oa,He],borderSpacing:P(),borderWidth:R(),contrast:q(),grayscale:M(),hueRotate:q(),invert:M(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[l$,Ia],inset:k(),margin:k(),opacity:q(),padding:P(),saturate:q(),scale:q(),sepia:M(),skew:q(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[Oa]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),He]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Xc,He]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",Xc,He]}],"grid-cols":[{"grid-cols":[Jc]}],"col-start-end":[{col:["auto",{span:["full",Xc,He]},He]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Jc]}],"row-start-end":[{row:["auto",{span:[Xc,He]},He]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,t]}],"min-w":[{"min-w":[He,t,"min","max","fit"]}],"max-w":[{"max-w":[He,t,"none","full","min","max","fit","prose",{screen:[Oa]},Oa]}],h:[{h:[He,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Oa,Ia]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Hg]}],"font-family":[{font:[Jc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",Tl,Hg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Js,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Js,Ia]}],"underline-offset":[{"underline-offset":["auto",Js,He]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),u$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",d$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},h$]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:F()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[Js,He]}],"outline-w":[{outline:[Js,Ia]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Js,Ia]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Oa,m$]}],"shadow-color":[{shadow:[Jc]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Oa,He]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Xc,He]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Js,Ia,Hg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},y$=e$(v$);function pe(...e){return y$(p2(e))}const w$=d5,k2=h.forwardRef(({className:e,...t},r)=>n.jsx(l2,{ref:r,className:pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));k2.displayName=l2.displayName;const b$=xc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),D2=h.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(c2,{ref:s,className:pe(b$({variant:t}),e),...r}));D2.displayName=c2.displayName;const j$=h.forwardRef(({className:e,...t},r)=>n.jsx(f2,{ref:r,className:pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));j$.displayName=f2.displayName;const T2=h.forwardRef(({className:e,...t},r)=>n.jsx(h2,{ref:r,className:pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Ro,{className:"h-4 w-4"})}));T2.displayName=h2.displayName;const P2=h.forwardRef(({className:e,...t},r)=>n.jsx(d2,{ref:r,className:pe("text-sm font-semibold",e),...t}));P2.displayName=d2.displayName;const R2=h.forwardRef(({className:e,...t},r)=>n.jsx(u2,{ref:r,className:pe("text-sm opacity-90",e),...t}));R2.displayName=u2.displayName;function RN(){const{toasts:e}=rt();return n.jsxs(w$,{children:[e.map(function({id:t,title:r,description:s,action:a,...o}){return n.jsxs(D2,{...o,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(P2,{children:r}),s&&n.jsx(R2,{children:s})]}),a,n.jsx(T2,{})]},t)}),n.jsx(k2,{})]})}var Hh=["light","dark"],J0="(prefers-color-scheme: dark)",N$=typeof window>"u",Q0=h.createContext(void 0),S$={setTheme:e=>{},themes:[]},A2=()=>{var e;return(e=h.useContext(Q0))!=null?e:S$},M2=e=>h.useContext(Q0)?e.children:h.createElement(C$,{...e}),_$=["light","dark"],C$=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:r=!0,enableColorScheme:s=!0,storageKey:a="theme",themes:o=_$,defaultTheme:i=r?"system":"light",attribute:l="data-theme",value:c,children:d,nonce:u})=>{let[f,m]=h.useState(()=>AN(a,i)),[p,w]=h.useState(()=>AN(a)),v=c?Object.values(c):o,x=h.useCallback(j=>{let S=j;if(!S)return;j==="system"&&r&&(S=MN());let N=c?c[S]:S,_=t?k$():null,E=document.documentElement;if(l==="class"?(E.classList.remove(...v),N&&E.classList.add(N)):N?E.setAttribute(l,N):E.removeAttribute(l),s){let D=Hh.includes(i)?i:null,C=Hh.includes(S)?S:D;E.style.colorScheme=C}_==null||_()},[]),g=h.useCallback(j=>{let S=typeof j=="function"?j(j):j;m(S);try{localStorage.setItem(a,S)}catch{}},[e]),y=h.useCallback(j=>{let S=MN(j);w(S),f==="system"&&r&&!e&&x("system")},[f,e]);h.useEffect(()=>{let j=window.matchMedia(J0);return j.addListener(y),y(j),()=>j.removeListener(y)},[y]),h.useEffect(()=>{let j=S=>{if(S.key!==a)return;let N=S.newValue||i;g(N)};return window.addEventListener("storage",j),()=>window.removeEventListener("storage",j)},[g]),h.useEffect(()=>{x(e??f)},[e,f]);let b=h.useMemo(()=>({theme:f,setTheme:g,forcedTheme:e,resolvedTheme:f==="system"?p:f,themes:r?[...o,"system"]:o,systemTheme:r?p:void 0}),[f,g,e,p,r,o]);return h.createElement(Q0.Provider,{value:b},h.createElement(E$,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:r,enableColorScheme:s,storageKey:a,themes:o,defaultTheme:i,attribute:l,value:c,children:d,attrs:v,nonce:u}),d)},E$=h.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:s,enableColorScheme:a,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let d=o==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?Hh.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(w,v=!1,x=!0)=>{let g=i?i[w]:w,y=v?w+"|| ''":`'${g}'`,b="";return a&&x&&!v&&Hh.includes(w)&&(b+=`d.style.colorScheme = '${w}';`),r==="class"?v||g?b+=`c.add(${y})`:b+="null":g&&(b+=`d[s](n,${y})`),b},p=e?`!function(){${u}${m(e)}}()`:s?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${J0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${d?"":"else{"+m(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(o,!1,!1)};}${f}}catch(t){}}();`;return h.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})}),AN=(e,t)=>{if(N$)return;let r;try{r=localStorage.getItem(e)||void 0}catch{}return r||t},k$=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},MN=e=>(e||(e=window.matchMedia(J0)),e.matches?"dark":"light"),D$=e=>{switch(e){case"success":return R$;case"info":return M$;case"warning":return A$;case"error":return I$;default:return null}},T$=Array(12).fill(0),P$=({visible:e,className:t})=>X.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},X.createElement("div",{className:"sonner-spinner"},T$.map((r,s)=>X.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),R$=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),A$=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),M$=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),I$=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),O$=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},X.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),X.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),L$=()=>{let[e,t]=X.useState(document.hidden);return X.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},qv=1,$$=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:qv++,o=this.toasts.find(l=>l.id===a),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:i,title:r}):l):this.addToast({title:r,...s,dismissible:i,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0,o,i=s.then(async c=>{if(o=["resolve",c],X.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(z$(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:u})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:u})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||qv++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Yr=new $$,F$=(e,t)=>{let r=(t==null?void 0:t.id)||qv++;return Yr.addToast({title:e,...t,id:r}),r},z$=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",B$=F$,U$=()=>Yr.toasts,V$=()=>Yr.getActiveToasts(),Pn=Object.assign(B$,{success:Yr.success,info:Yr.info,warning:Yr.warning,error:Yr.error,custom:Yr.custom,message:Yr.message,promise:Yr.promise,dismiss:Yr.dismiss,loading:Yr.loading},{getHistory:U$,getToasts:V$});function W$(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}W$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ef(e){return e.label!==void 0}var H$=3,q$="32px",G$="16px",IN=4e3,K$=356,Y$=14,X$=20,J$=200;function Jn(...e){return e.filter(Boolean).join(" ")}function Q$(e){let[t,r]=e.split("-"),s=[];return t&&s.push(t),r&&s.push(r),s}var Z$=e=>{var t,r,s,a,o,i,l,c,d,u,f;let{invert:m,toast:p,unstyled:w,interacting:v,setHeights:x,visibleToasts:g,heights:y,index:b,toasts:j,expanded:S,removeToast:N,defaultRichColors:_,closeButton:E,style:D,cancelButtonStyle:C,actionButtonStyle:k,className:P="",descriptionClassName:R="",duration:A,position:I,gap:F,loadingIcon:B,expandByDefault:T,classNames:M,icons:U,closeButtonAriaLabel:q="Close toast",pauseWhenPageIsHidden:Y}=e,[G,z]=X.useState(null),[Z,Q]=X.useState(null),[H,te]=X.useState(!1),[se,ne]=X.useState(!1),[we,he]=X.useState(!1),[be,de]=X.useState(!1),[Me,Be]=X.useState(!1),[Ke,et]=X.useState(0),[Xt,$]=X.useState(0),K=X.useRef(p.duration||A||IN),ee=X.useRef(null),ie=X.useRef(null),ge=b===0,xe=b+1<=g,Ne=p.type,$e=p.dismissible!==!1,Je=p.className||"",Ft=p.descriptionClassName||"",_n=X.useMemo(()=>y.findIndex(De=>De.toastId===p.id)||0,[y,p.id]),Jt=X.useMemo(()=>{var De;return(De=p.closeButton)!=null?De:E},[p.closeButton,E]),Vo=X.useMemo(()=>p.duration||A||IN,[p.duration,A]),Ys=X.useRef(0),Cn=X.useRef(0),Ra=X.useRef(0),En=X.useRef(null),[Oc,Wo]=I.split("-"),sf=X.useMemo(()=>y.reduce((De,We,Ge)=>Ge>=_n?De:De+We.height,0),[y,_n]),af=L$(),ug=p.invert||m,zt=Ne==="loading";Cn.current=X.useMemo(()=>_n*F+sf,[_n,sf]),X.useEffect(()=>{K.current=Vo},[Vo]),X.useEffect(()=>{te(!0)},[]),X.useEffect(()=>{let De=ie.current;if(De){let We=De.getBoundingClientRect().height;return $(We),x(Ge=>[{toastId:p.id,height:We,position:p.position},...Ge]),()=>x(Ge=>Ge.filter(Et=>Et.toastId!==p.id))}},[x,p.id]),X.useLayoutEffect(()=>{if(!H)return;let De=ie.current,We=De.style.height;De.style.height="auto";let Ge=De.getBoundingClientRect().height;De.style.height=We,$(Ge),x(Et=>Et.find(or=>or.toastId===p.id)?Et.map(or=>or.toastId===p.id?{...or,height:Ge}:or):[{toastId:p.id,height:Ge,position:p.position},...Et])},[H,p.title,p.description,x,p.id]);let Ct=X.useCallback(()=>{ne(!0),et(Cn.current),x(De=>De.filter(We=>We.toastId!==p.id)),setTimeout(()=>{N(p)},J$)},[p,N,x,Cn]);X.useEffect(()=>{if(p.promise&&Ne==="loading"||p.duration===1/0||p.type==="loading")return;let De;return S||v||Y&&af?(()=>{if(Ra.current<Ys.current){let We=new Date().getTime()-Ys.current;K.current=K.current-We}Ra.current=new Date().getTime()})():K.current!==1/0&&(Ys.current=new Date().getTime(),De=setTimeout(()=>{var We;(We=p.onAutoClose)==null||We.call(p,p),Ct()},K.current)),()=>clearTimeout(De)},[S,v,p,Ne,Y,af,Ct]),X.useEffect(()=>{p.delete&&Ct()},[Ct,p.delete]);function Tr(){var De,We,Ge;return U!=null&&U.loading?X.createElement("div",{className:Jn(M==null?void 0:M.loader,(De=p==null?void 0:p.classNames)==null?void 0:De.loader,"sonner-loader"),"data-visible":Ne==="loading"},U.loading):B?X.createElement("div",{className:Jn(M==null?void 0:M.loader,(We=p==null?void 0:p.classNames)==null?void 0:We.loader,"sonner-loader"),"data-visible":Ne==="loading"},B):X.createElement(P$,{className:Jn(M==null?void 0:M.loader,(Ge=p==null?void 0:p.classNames)==null?void 0:Ge.loader),visible:Ne==="loading"})}return X.createElement("li",{tabIndex:0,ref:ie,className:Jn(P,Je,M==null?void 0:M.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,M==null?void 0:M.default,M==null?void 0:M[Ne],(r=p==null?void 0:p.classNames)==null?void 0:r[Ne]),"data-sonner-toast":"","data-rich-colors":(s=p.richColors)!=null?s:_,"data-styled":!(p.jsx||p.unstyled||w),"data-mounted":H,"data-promise":!!p.promise,"data-swiped":Me,"data-removed":se,"data-visible":xe,"data-y-position":Oc,"data-x-position":Wo,"data-index":b,"data-front":ge,"data-swiping":we,"data-dismissible":$e,"data-type":Ne,"data-invert":ug,"data-swipe-out":be,"data-swipe-direction":Z,"data-expanded":!!(S||T&&H),style:{"--index":b,"--toasts-before":b,"--z-index":j.length-b,"--offset":`${se?Ke:Cn.current}px`,"--initial-height":T?"auto":`${Xt}px`,...D,...p.style},onDragEnd:()=>{he(!1),z(null),En.current=null},onPointerDown:De=>{zt||!$e||(ee.current=new Date,et(Cn.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(he(!0),En.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,We,Ge,Et;if(be||!$e)return;En.current=null;let or=Number(((De=ie.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ct=Number(((We=ie.current)==null?void 0:We.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),br=new Date().getTime()-((Ge=ee.current)==null?void 0:Ge.getTime()),kt=G==="x"?or:ct,ir=Math.abs(kt)/br;if(Math.abs(kt)>=X$||ir>.11){et(Cn.current),(Et=p.onDismiss)==null||Et.call(p,p),Q(G==="x"?or>0?"right":"left":ct>0?"down":"up"),Ct(),de(!0),Be(!1);return}he(!1),z(null)},onPointerMove:De=>{var We,Ge,Et,or;if(!En.current||!$e||((We=window.getSelection())==null?void 0:We.toString().length)>0)return;let ct=De.clientY-En.current.y,br=De.clientX-En.current.x,kt=(Ge=e.swipeDirections)!=null?Ge:Q$(I);!G&&(Math.abs(br)>1||Math.abs(ct)>1)&&z(Math.abs(br)>Math.abs(ct)?"x":"y");let ir={x:0,y:0};G==="y"?(kt.includes("top")||kt.includes("bottom"))&&(kt.includes("top")&&ct<0||kt.includes("bottom")&&ct>0)&&(ir.y=ct):G==="x"&&(kt.includes("left")||kt.includes("right"))&&(kt.includes("left")&&br<0||kt.includes("right")&&br>0)&&(ir.x=br),(Math.abs(ir.x)>0||Math.abs(ir.y)>0)&&Be(!0),(Et=ie.current)==null||Et.style.setProperty("--swipe-amount-x",`${ir.x}px`),(or=ie.current)==null||or.style.setProperty("--swipe-amount-y",`${ir.y}px`)}},Jt&&!p.jsx?X.createElement("button",{"aria-label":q,"data-disabled":zt,"data-close-button":!0,onClick:zt||!$e?()=>{}:()=>{var De;Ct(),(De=p.onDismiss)==null||De.call(p,p)},className:Jn(M==null?void 0:M.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(o=U==null?void 0:U.close)!=null?o:O$):null,p.jsx||h.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:X.createElement(X.Fragment,null,Ne||p.icon||p.promise?X.createElement("div",{"data-icon":"",className:Jn(M==null?void 0:M.icon,(i=p==null?void 0:p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Tr():null,p.type!=="loading"?p.icon||(U==null?void 0:U[Ne])||D$(Ne):null):null,X.createElement("div",{"data-content":"",className:Jn(M==null?void 0:M.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},X.createElement("div",{"data-title":"",className:Jn(M==null?void 0:M.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?X.createElement("div",{"data-description":"",className:Jn(R,Ft,M==null?void 0:M.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),h.isValidElement(p.cancel)?p.cancel:p.cancel&&Ef(p.cancel)?X.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||C,onClick:De=>{var We,Ge;Ef(p.cancel)&&$e&&((Ge=(We=p.cancel).onClick)==null||Ge.call(We,De),Ct())},className:Jn(M==null?void 0:M.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,h.isValidElement(p.action)?p.action:p.action&&Ef(p.action)?X.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||k,onClick:De=>{var We,Ge;Ef(p.action)&&((Ge=(We=p.action).onClick)==null||Ge.call(We,De),!De.defaultPrevented&&Ct())},className:Jn(M==null?void 0:M.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function ON(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function eF(e,t){let r={};return[e,t].forEach((s,a)=>{let o=a===1,i=o?"--mobile-offset":"--offset",l=o?G$:q$;function c(d){["top","right","bottom","left"].forEach(u=>{r[`${i}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?r[`${i}-${d}`]=l:r[`${i}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),r}var tF=h.forwardRef(function(e,t){let{invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:f,duration:m,style:p,visibleToasts:w=H$,toastOptions:v,dir:x=ON(),gap:g=Y$,loadingIcon:y,icons:b,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:S}=e,[N,_]=X.useState([]),E=X.useMemo(()=>Array.from(new Set([s].concat(N.filter(Y=>Y.position).map(Y=>Y.position)))),[N,s]),[D,C]=X.useState([]),[k,P]=X.useState(!1),[R,A]=X.useState(!1),[I,F]=X.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=X.useRef(null),T=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=X.useRef(null),U=X.useRef(!1),q=X.useCallback(Y=>{_(G=>{var z;return(z=G.find(Z=>Z.id===Y.id))!=null&&z.delete||Yr.dismiss(Y.id),G.filter(({id:Z})=>Z!==Y.id)})},[]);return X.useEffect(()=>Yr.subscribe(Y=>{if(Y.dismiss){_(G=>G.map(z=>z.id===Y.id?{...z,delete:!0}:z));return}setTimeout(()=>{$0.flushSync(()=>{_(G=>{let z=G.findIndex(Z=>Z.id===Y.id);return z!==-1?[...G.slice(0,z),{...G[z],...Y},...G.slice(z+1)]:[Y,...G]})})})}),[]),X.useEffect(()=>{if(u!=="system"){F(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:G})=>{F(G?"dark":"light")})}catch{Y.addListener(({matches:z})=>{try{F(z?"dark":"light")}catch(Z){console.error(Z)}})}},[u]),X.useEffect(()=>{N.length<=1&&P(!1)},[N]),X.useEffect(()=>{let Y=G=>{var z,Z;a.every(Q=>G[Q]||G.code===Q)&&(P(!0),(z=B.current)==null||z.focus()),G.code==="Escape"&&(document.activeElement===B.current||(Z=B.current)!=null&&Z.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[a]),X.useEffect(()=>{if(B.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,U.current=!1)}},[B.current]),X.createElement("section",{ref:t,"aria-label":`${j} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((Y,G)=>{var z;let[Z,Q]=Y.split("-");return N.length?X.createElement("ol",{key:Y,dir:x==="auto"?ON():x,tabIndex:-1,ref:B,className:l,"data-sonner-toaster":!0,"data-theme":I,"data-y-position":Z,"data-lifted":k&&N.length>1&&!o,"data-x-position":Q,style:{"--front-toast-height":`${((z=D[0])==null?void 0:z.height)||0}px`,"--width":`${K$}px`,"--gap":`${g}px`,...p,...eF(c,d)},onBlur:H=>{U.current&&!H.currentTarget.contains(H.relatedTarget)&&(U.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||U.current||(U.current=!0,M.current=H.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{R||P(!1)},onDragEnd:()=>P(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},N.filter(H=>!H.position&&G===0||H.position===Y).map((H,te)=>{var se,ne;return X.createElement(Z$,{key:H.id,icons:b,index:te,toast:H,defaultRichColors:f,duration:(se=v==null?void 0:v.duration)!=null?se:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:r,visibleToasts:w,closeButton:(ne=v==null?void 0:v.closeButton)!=null?ne:i,interacting:R,position:Y,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:q,toasts:N.filter(we=>we.position==H.position),heights:D.filter(we=>we.position==H.position),setHeights:C,expandByDefault:o,gap:g,loadingIcon:y,expanded:k,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const LN=({...e})=>{const{theme:t="system"}=A2();return n.jsx(tF,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var rF=Mm[" useId ".trim().toString()]||(()=>{}),nF=0;function zn(e){const[t,r]=h.useState(rF());return $t(()=>{e||r(s=>s??String(nF++))},[e]),e||(t?`radix-${t}`:"")}const sF=["top","right","bottom","left"],Co=Math.min,dn=Math.max,qh=Math.round,kf=Math.floor,Us=e=>({x:e,y:e}),aF={left:"right",right:"left",bottom:"top",top:"bottom"},oF={start:"end",end:"start"};function Gv(e,t,r){return dn(e,Co(t,r))}function ja(e,t){return typeof e=="function"?e(t):e}function Na(e){return e.split("-")[0]}function wc(e){return e.split("-")[1]}function Z0(e){return e==="x"?"y":"x"}function ew(e){return e==="y"?"height":"width"}const iF=new Set(["top","bottom"]);function Os(e){return iF.has(Na(e))?"y":"x"}function tw(e){return Z0(Os(e))}function lF(e,t,r){r===void 0&&(r=!1);const s=wc(e),a=tw(e),o=ew(a);let i=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Gh(i)),[i,Gh(i)]}function cF(e){const t=Gh(e);return[Kv(e),t,Kv(t)]}function Kv(e){return e.replace(/start|end/g,t=>oF[t])}const $N=["left","right"],FN=["right","left"],dF=["top","bottom"],uF=["bottom","top"];function fF(e,t,r){switch(e){case"top":case"bottom":return r?t?FN:$N:t?$N:FN;case"left":case"right":return t?dF:uF;default:return[]}}function hF(e,t,r,s){const a=wc(e);let o=fF(Na(e),r==="start",s);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(Kv)))),o}function Gh(e){return e.replace(/left|right|bottom|top/g,t=>aF[t])}function mF(e){return{top:0,right:0,bottom:0,left:0,...e}}function I2(e){return typeof e!="number"?mF(e):{top:e,right:e,bottom:e,left:e}}function Kh(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function zN(e,t,r){let{reference:s,floating:a}=e;const o=Os(t),i=tw(t),l=ew(i),c=Na(t),d=o==="y",u=s.x+s.width/2-a.width/2,f=s.y+s.height/2-a.height/2,m=s[l]/2-a[l]/2;let p;switch(c){case"top":p={x:u,y:s.y-a.height};break;case"bottom":p={x:u,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:f};break;case"left":p={x:s.x-a.width,y:f};break;default:p={x:s.x,y:s.y}}switch(wc(t)){case"start":p[i]-=m*(r&&d?-1:1);break;case"end":p[i]+=m*(r&&d?-1:1);break}return p}const pF=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:f}=zN(d,s,c),m=s,p={},w=0;for(let v=0;v<l.length;v++){const{name:x,fn:g}=l[v],{x:y,y:b,data:j,reset:S}=await g({x:u,y:f,initialPlacement:s,placement:m,strategy:a,middlewareData:p,rects:d,platform:i,elements:{reference:e,floating:t}});u=y??u,f=b??f,p={...p,[x]:{...p[x],...j}},S&&w<=50&&(w++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:u,y:f}=zN(d,m,c)),v=-1)}return{x:u,y:f,placement:m,strategy:a,middlewareData:p}};async function eu(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=ja(t,e),w=I2(p),x=l[m?f==="floating"?"reference":"floating":f],g=Kh(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(x)))==null||r?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),y=f==="floating"?{x:s,y:a,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),j=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Kh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(g.top-S.top+w.top)/j.y,bottom:(S.bottom-g.bottom+w.bottom)/j.y,left:(g.left-S.left+w.left)/j.x,right:(S.right-g.right+w.right)/j.x}}const gF=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=ja(e,t)||{};if(d==null)return{};const f=I2(u),m={x:r,y:s},p=tw(a),w=ew(p),v=await i.getDimensions(d),x=p==="y",g=x?"top":"left",y=x?"bottom":"right",b=x?"clientHeight":"clientWidth",j=o.reference[w]+o.reference[p]-m[p]-o.floating[w],S=m[p]-o.reference[p],N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let _=N?N[b]:0;(!_||!await(i.isElement==null?void 0:i.isElement(N)))&&(_=l.floating[b]||o.floating[w]);const E=j/2-S/2,D=_/2-v[w]/2-1,C=Co(f[g],D),k=Co(f[y],D),P=C,R=_-v[w]-k,A=_/2-v[w]/2+E,I=Gv(P,A,R),F=!c.arrow&&wc(a)!=null&&A!==I&&o.reference[w]/2-(A<P?C:k)-v[w]/2<0,B=F?A<P?A-P:A-R:0;return{[p]:m[p]+B,data:{[p]:I,centerOffset:A-I-B,...F&&{alignmentOffset:B}},reset:F}}}),xF=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,...x}=ja(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const g=Na(a),y=Os(l),b=Na(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(b||!v?[Gh(l)]:cF(l)),N=w!=="none";!m&&N&&S.push(...hF(l,v,w,j));const _=[l,...S],E=await eu(t,x),D=[];let C=((s=o.flip)==null?void 0:s.overflows)||[];if(u&&D.push(E[g]),f){const A=lF(a,i,j);D.push(E[A[0]],E[A[1]])}if(C=[...C,{placement:a,overflows:D}],!D.every(A=>A<=0)){var k,P;const A=(((k=o.flip)==null?void 0:k.index)||0)+1,I=_[A];if(I&&(!(f==="alignment"?y!==Os(I):!1)||C.every(T=>T.overflows[0]>0&&Os(T.placement)===y)))return{data:{index:A,overflows:C},reset:{placement:I}};let F=(P=C.filter(B=>B.overflows[0]<=0).sort((B,T)=>B.overflows[1]-T.overflows[1])[0])==null?void 0:P.placement;if(!F)switch(p){case"bestFit":{var R;const B=(R=C.filter(T=>{if(N){const M=Os(T.placement);return M===y||M==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(M=>M>0).reduce((M,U)=>M+U,0)]).sort((T,M)=>T[1]-M[1])[0])==null?void 0:R[0];B&&(F=B);break}case"initialPlacement":F=l;break}if(a!==F)return{reset:{placement:F}}}return{}}}};function BN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function UN(e){return sF.some(t=>e[t]>=0)}const vF=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=ja(e,t);switch(s){case"referenceHidden":{const o=await eu(t,{...a,elementContext:"reference"}),i=BN(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:UN(i)}}}case"escaped":{const o=await eu(t,{...a,altBoundary:!0}),i=BN(o,r.floating);return{data:{escapedOffsets:i,escaped:UN(i)}}}default:return{}}}}},O2=new Set(["left","top"]);async function yF(e,t){const{placement:r,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),i=Na(r),l=wc(r),c=Os(r)==="y",d=O2.has(i)?-1:1,u=o&&c?-1:1,f=ja(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof w=="number"&&(p=l==="end"?w*-1:w),c?{x:p*u,y:m*d}:{x:m*d,y:p*u}}const wF=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await yF(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},bF=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:x=>{let{x:g,y}=x;return{x:g,y}}},...c}=ja(e,t),d={x:r,y:s},u=await eu(t,c),f=Os(Na(a)),m=Z0(f);let p=d[m],w=d[f];if(o){const x=m==="y"?"top":"left",g=m==="y"?"bottom":"right",y=p+u[x],b=p-u[g];p=Gv(y,p,b)}if(i){const x=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=w+u[x],b=w-u[g];w=Gv(y,w,b)}const v=l.fn({...t,[m]:p,[f]:w});return{...v,data:{x:v.x-r,y:v.y-s,enabled:{[m]:o,[f]:i}}}}}},jF=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ja(e,t),u={x:r,y:s},f=Os(a),m=Z0(f);let p=u[m],w=u[f];const v=ja(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const b=m==="y"?"height":"width",j=o.reference[m]-o.floating[b]+x.mainAxis,S=o.reference[m]+o.reference[b]-x.mainAxis;p<j?p=j:p>S&&(p=S)}if(d){var g,y;const b=m==="y"?"width":"height",j=O2.has(Na(a)),S=o.reference[f]-o.floating[b]+(j&&((g=i.offset)==null?void 0:g[f])||0)+(j?0:x.crossAxis),N=o.reference[f]+o.reference[b]+(j?0:((y=i.offset)==null?void 0:y[f])||0)-(j?x.crossAxis:0);w<S?w=S:w>N&&(w=N)}return{[m]:p,[f]:w}}}},NF=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=ja(e,t),u=await eu(t,d),f=Na(a),m=wc(a),p=Os(a)==="y",{width:w,height:v}=o.floating;let x,g;f==="top"||f==="bottom"?(x=f,g=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(g=f,x=m==="end"?"top":"bottom");const y=v-u.top-u.bottom,b=w-u.left-u.right,j=Co(v-u[x],y),S=Co(w-u[g],b),N=!t.middlewareData.shift;let _=j,E=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(_=y),N&&!m){const C=dn(u.left,0),k=dn(u.right,0),P=dn(u.top,0),R=dn(u.bottom,0);p?E=w-2*(C!==0||k!==0?C+k:dn(u.left,u.right)):_=v-2*(P!==0||R!==0?P+R:dn(u.top,u.bottom))}await c({...t,availableWidth:E,availableHeight:_});const D=await i.getDimensions(l.floating);return w!==D.width||v!==D.height?{reset:{rects:!0}}:{}}}};function tp(){return typeof window<"u"}function bc(e){return L2(e)?(e.nodeName||"").toLowerCase():"#document"}function xn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qs(e){var t;return(t=(L2(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function L2(e){return tp()?e instanceof Node||e instanceof xn(e).Node:!1}function xs(e){return tp()?e instanceof Element||e instanceof xn(e).Element:!1}function Ws(e){return tp()?e instanceof HTMLElement||e instanceof xn(e).HTMLElement:!1}function VN(e){return!tp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof xn(e).ShadowRoot}const SF=new Set(["inline","contents"]);function Ru(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=vs(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!SF.has(a)}const _F=new Set(["table","td","th"]);function CF(e){return _F.has(bc(e))}const EF=[":popover-open",":modal"];function rp(e){return EF.some(t=>{try{return e.matches(t)}catch{return!1}})}const kF=["transform","translate","scale","rotate","perspective"],DF=["transform","translate","scale","rotate","perspective","filter"],TF=["paint","layout","strict","content"];function rw(e){const t=nw(),r=xs(e)?vs(e):e;return kF.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||DF.some(s=>(r.willChange||"").includes(s))||TF.some(s=>(r.contain||"").includes(s))}function PF(e){let t=Eo(e);for(;Ws(t)&&!Zl(t);){if(rw(t))return t;if(rp(t))return null;t=Eo(t)}return null}function nw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const RF=new Set(["html","body","#document"]);function Zl(e){return RF.has(bc(e))}function vs(e){return xn(e).getComputedStyle(e)}function np(e){return xs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Eo(e){if(bc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||VN(e)&&e.host||qs(e);return VN(t)?t.host:t}function $2(e){const t=Eo(e);return Zl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ws(t)&&Ru(t)?t:$2(t)}function tu(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=$2(e),o=a===((s=e.ownerDocument)==null?void 0:s.body),i=xn(a);if(o){const l=Yv(i);return t.concat(i,i.visualViewport||[],Ru(a)?a:[],l&&r?tu(l):[])}return t.concat(a,tu(a,[],r))}function Yv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function F2(e){const t=vs(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=Ws(e),o=a?e.offsetWidth:r,i=a?e.offsetHeight:s,l=qh(r)!==o||qh(s)!==i;return l&&(r=o,s=i),{width:r,height:s,$:l}}function sw(e){return xs(e)?e:e.contextElement}function Pl(e){const t=sw(e);if(!Ws(t))return Us(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:o}=F2(t);let i=(o?qh(r.width):r.width)/s,l=(o?qh(r.height):r.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const AF=Us(0);function z2(e){const t=xn(e);return!nw()||!t.visualViewport?AF:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function MF(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==xn(e)?!1:t}function _i(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),o=sw(e);let i=Us(1);t&&(s?xs(s)&&(i=Pl(s)):i=Pl(e));const l=MF(o,r,s)?z2(o):Us(0);let c=(a.left+l.x)/i.x,d=(a.top+l.y)/i.y,u=a.width/i.x,f=a.height/i.y;if(o){const m=xn(o),p=s&&xs(s)?xn(s):s;let w=m,v=Yv(w);for(;v&&s&&p!==w;){const x=Pl(v),g=v.getBoundingClientRect(),y=vs(v),b=g.left+(v.clientLeft+parseFloat(y.paddingLeft))*x.x,j=g.top+(v.clientTop+parseFloat(y.paddingTop))*x.y;c*=x.x,d*=x.y,u*=x.x,f*=x.y,c+=b,d+=j,w=xn(v),v=Yv(w)}}return Kh({width:u,height:f,x:c,y:d})}function aw(e,t){const r=np(e).scrollLeft;return t?t.left+r:_i(qs(e)).left+r}function B2(e,t,r){r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(r?0:aw(e,s)),o=s.top+t.scrollTop;return{x:a,y:o}}function IF(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const o=a==="fixed",i=qs(s),l=t?rp(t.floating):!1;if(s===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},d=Us(1);const u=Us(0),f=Ws(s);if((f||!f&&!o)&&((bc(s)!=="body"||Ru(i))&&(c=np(s)),Ws(s))){const p=_i(s);d=Pl(s),u.x=p.x+s.clientLeft,u.y=p.y+s.clientTop}const m=i&&!f&&!o?B2(i,c,!0):Us(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:r.y*d.y-c.scrollTop*d.y+u.y+m.y}}function OF(e){return Array.from(e.getClientRects())}function LF(e){const t=qs(e),r=np(e),s=e.ownerDocument.body,a=dn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=dn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-r.scrollLeft+aw(e);const l=-r.scrollTop;return vs(s).direction==="rtl"&&(i+=dn(t.clientWidth,s.clientWidth)-a),{width:a,height:o,x:i,y:l}}function $F(e,t){const r=xn(e),s=qs(e),a=r.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const d=nw();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:l,y:c}}const FF=new Set(["absolute","fixed"]);function zF(e,t){const r=_i(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,o=Ws(e)?Pl(e):Us(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,d=s*o.y;return{width:i,height:l,x:c,y:d}}function WN(e,t,r){let s;if(t==="viewport")s=$F(e,r);else if(t==="document")s=LF(qs(e));else if(xs(t))s=zF(t,r);else{const a=z2(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Kh(s)}function U2(e,t){const r=Eo(e);return r===t||!xs(r)||Zl(r)?!1:vs(r).position==="fixed"||U2(r,t)}function BF(e,t){const r=t.get(e);if(r)return r;let s=tu(e,[],!1).filter(l=>xs(l)&&bc(l)!=="body"),a=null;const o=vs(e).position==="fixed";let i=o?Eo(e):e;for(;xs(i)&&!Zl(i);){const l=vs(i),c=rw(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&FF.has(a.position)||Ru(i)&&!c&&U2(e,i))?s=s.filter(u=>u!==i):a=l,i=Eo(i)}return t.set(e,s),s}function UF(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const i=[...r==="clippingAncestors"?rp(t)?[]:BF(t,this._c):[].concat(r),s],l=i[0],c=i.reduce((d,u)=>{const f=WN(t,u,a);return d.top=dn(f.top,d.top),d.right=Co(f.right,d.right),d.bottom=Co(f.bottom,d.bottom),d.left=dn(f.left,d.left),d},WN(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function VF(e){const{width:t,height:r}=F2(e);return{width:t,height:r}}function WF(e,t,r){const s=Ws(t),a=qs(t),o=r==="fixed",i=_i(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Us(0);function d(){c.x=aw(a)}if(s||!s&&!o)if((bc(t)!=="body"||Ru(a))&&(l=np(t)),s){const p=_i(t,!0,o,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&d();o&&!s&&a&&d();const u=a&&!s&&!o?B2(a,l):Us(0),f=i.left+l.scrollLeft-c.x-u.x,m=i.top+l.scrollTop-c.y-u.y;return{x:f,y:m,width:i.width,height:i.height}}function qg(e){return vs(e).position==="static"}function HN(e,t){if(!Ws(e)||vs(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return qs(e)===r&&(r=r.ownerDocument.body),r}function V2(e,t){const r=xn(e);if(rp(e))return r;if(!Ws(e)){let a=Eo(e);for(;a&&!Zl(a);){if(xs(a)&&!qg(a))return a;a=Eo(a)}return r}let s=HN(e,t);for(;s&&CF(s)&&qg(s);)s=HN(s,t);return s&&Zl(s)&&qg(s)&&!rw(s)?r:s||PF(e)||r}const HF=async function(e){const t=this.getOffsetParent||V2,r=this.getDimensions,s=await r(e.floating);return{reference:WF(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function qF(e){return vs(e).direction==="rtl"}const GF={convertOffsetParentRelativeRectToViewportRelativeRect:IF,getDocumentElement:qs,getClippingRect:UF,getOffsetParent:V2,getElementRects:HF,getClientRects:OF,getDimensions:VF,getScale:Pl,isElement:xs,isRTL:qF};function W2(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function KF(e,t){let r=null,s;const a=qs(e);function o(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=e.getBoundingClientRect(),{left:u,top:f,width:m,height:p}=d;if(l||t(),!m||!p)return;const w=kf(f),v=kf(a.clientWidth-(u+m)),x=kf(a.clientHeight-(f+p)),g=kf(u),b={rootMargin:-w+"px "+-v+"px "+-x+"px "+-g+"px",threshold:dn(0,Co(1,c))||1};let j=!0;function S(N){const _=N[0].intersectionRatio;if(_!==c){if(!j)return i();_?i(!1,_):s=setTimeout(()=>{i(!1,1e-7)},1e3)}_===1&&!W2(d,e.getBoundingClientRect())&&i(),j=!1}try{r=new IntersectionObserver(S,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(S,b)}r.observe(e)}return i(!0),o}function YF(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=sw(e),u=a||o?[...d?tu(d):[],...tu(t)]:[];u.forEach(g=>{a&&g.addEventListener("scroll",r,{passive:!0}),o&&g.addEventListener("resize",r)});const f=d&&l?KF(d,r):null;let m=-1,p=null;i&&(p=new ResizeObserver(g=>{let[y]=g;y&&y.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let w,v=c?_i(e):null;c&&x();function x(){const g=_i(e);v&&!W2(v,g)&&r(),v=g,w=requestAnimationFrame(x)}return r(),()=>{var g;u.forEach(y=>{a&&y.removeEventListener("scroll",r),o&&y.removeEventListener("resize",r)}),f==null||f(),(g=p)==null||g.disconnect(),p=null,c&&cancelAnimationFrame(w)}}const XF=wF,JF=bF,QF=xF,ZF=NF,e6=vF,qN=gF,t6=jF,r6=(e,t,r)=>{const s=new Map,a={platform:GF,...r},o={...a.platform,_c:s};return pF(e,t,{...a,platform:o})};var n6=typeof document<"u",s6=function(){},lh=n6?h.useLayoutEffect:s6;function Yh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Yh(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const o=a[s];if(!(o==="_owner"&&e.$$typeof)&&!Yh(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function H2(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function GN(e,t){const r=H2(e);return Math.round(t*r)/r}function Gg(e){const t=h.useRef(e);return lh(()=>{t.current=e}),t}function a6(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,f]=h.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=h.useState(s);Yh(m,s)||p(s);const[w,v]=h.useState(null),[x,g]=h.useState(null),y=h.useCallback(T=>{T!==N.current&&(N.current=T,v(T))},[]),b=h.useCallback(T=>{T!==_.current&&(_.current=T,g(T))},[]),j=o||w,S=i||x,N=h.useRef(null),_=h.useRef(null),E=h.useRef(u),D=c!=null,C=Gg(c),k=Gg(a),P=Gg(d),R=h.useCallback(()=>{if(!N.current||!_.current)return;const T={placement:t,strategy:r,middleware:m};k.current&&(T.platform=k.current),r6(N.current,_.current,T).then(M=>{const U={...M,isPositioned:P.current!==!1};A.current&&!Yh(E.current,U)&&(E.current=U,en.flushSync(()=>{f(U)}))})},[m,t,r,k,P]);lh(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(T=>({...T,isPositioned:!1})))},[d]);const A=h.useRef(!1);lh(()=>(A.current=!0,()=>{A.current=!1}),[]),lh(()=>{if(j&&(N.current=j),S&&(_.current=S),j&&S){if(C.current)return C.current(j,S,R);R()}},[j,S,R,C,D]);const I=h.useMemo(()=>({reference:N,floating:_,setReference:y,setFloating:b}),[y,b]),F=h.useMemo(()=>({reference:j,floating:S}),[j,S]),B=h.useMemo(()=>{const T={position:r,left:0,top:0};if(!F.floating)return T;const M=GN(F.floating,u.x),U=GN(F.floating,u.y);return l?{...T,transform:"translate("+M+"px, "+U+"px)",...H2(F.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:M,top:U}},[r,l,F.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:R,refs:I,elements:F,floatingStyles:B}),[u,R,I,F,B])}const o6=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?qN({element:s.current,padding:a}).fn(r):{}:s?qN({element:s,padding:a}).fn(r):{}}}},i6=(e,t)=>({...XF(e),options:[e,t]}),l6=(e,t)=>({...JF(e),options:[e,t]}),c6=(e,t)=>({...t6(e),options:[e,t]}),d6=(e,t)=>({...QF(e),options:[e,t]}),u6=(e,t)=>({...ZF(e),options:[e,t]}),f6=(e,t)=>({...e6(e),options:[e,t]}),h6=(e,t)=>({...o6(e),options:[e,t]});var m6="Arrow",q2=h.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...o}=e;return n.jsx(je.svg,{...o,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});q2.displayName=m6;var p6=q2;function sp(e){const[t,r]=h.useState(void 0);return $t(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var ow="Popper",[G2,Ao]=sr(ow),[g6,K2]=G2(ow),Y2=e=>{const{__scopePopper:t,children:r}=e,[s,a]=h.useState(null);return n.jsx(g6,{scope:t,anchor:s,onAnchorChange:a,children:r})};Y2.displayName=ow;var X2="PopperAnchor",J2=h.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,o=K2(X2,r),i=h.useRef(null),l=Ae(t,i);return h.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:n.jsx(je.div,{...a,ref:l})});J2.displayName=X2;var iw="PopperContent",[x6,v6]=G2(iw),Q2=h.forwardRef((e,t)=>{var H,te,se,ne,we,he;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:w,...v}=e,x=K2(iw,r),[g,y]=h.useState(null),b=Ae(t,be=>y(be)),[j,S]=h.useState(null),N=sp(j),_=(N==null?void 0:N.width)??0,E=(N==null?void 0:N.height)??0,D=s+(o!=="center"?"-"+o:""),C=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(d)?d:[d],P=k.length>0,R={padding:C,boundary:k.filter(w6),altBoundary:P},{refs:A,floatingStyles:I,placement:F,isPositioned:B,middlewareData:T}=a6({strategy:"fixed",placement:D,whileElementsMounted:(...be)=>YF(...be,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[i6({mainAxis:a+E,alignmentAxis:i}),c&&l6({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?c6():void 0,...R}),c&&d6({...R}),u6({...R,apply:({elements:be,rects:de,availableWidth:Me,availableHeight:Be})=>{const{width:Ke,height:et}=de.reference,Xt=be.floating.style;Xt.setProperty("--radix-popper-available-width",`${Me}px`),Xt.setProperty("--radix-popper-available-height",`${Be}px`),Xt.setProperty("--radix-popper-anchor-width",`${Ke}px`),Xt.setProperty("--radix-popper-anchor-height",`${et}px`)}}),j&&h6({element:j,padding:l}),b6({arrowWidth:_,arrowHeight:E}),m&&f6({strategy:"referenceHidden",...R})]}),[M,U]=tk(F),q=Rt(w);$t(()=>{B&&(q==null||q())},[B,q]);const Y=(H=T.arrow)==null?void 0:H.x,G=(te=T.arrow)==null?void 0:te.y,z=((se=T.arrow)==null?void 0:se.centerOffset)!==0,[Z,Q]=h.useState();return $t(()=>{g&&Q(window.getComputedStyle(g).zIndex)},[g]),n.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:B?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[(ne=T.transformOrigin)==null?void 0:ne.x,(we=T.transformOrigin)==null?void 0:we.y].join(" "),...((he=T.hide)==null?void 0:he.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(x6,{scope:r,placedSide:M,onArrowChange:S,arrowX:Y,arrowY:G,shouldHideArrow:z,children:n.jsx(je.div,{"data-side":M,"data-align":U,...v,ref:b,style:{...v.style,animation:B?void 0:"none"}})})})});Q2.displayName=iw;var Z2="PopperArrow",y6={top:"bottom",right:"left",bottom:"top",left:"right"},ek=h.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,o=v6(Z2,s),i=y6[o.placedSide];return n.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:n.jsx(p6,{...a,ref:r,style:{...a.style,display:"block"}})})});ek.displayName=Z2;function w6(e){return e!==null}var b6=e=>({name:"transformOrigin",options:e,fn(t){var x,g,y;const{placement:r,rects:s,middlewareData:a}=t,i=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,u]=tk(r),f={start:"0%",center:"50%",end:"100%"}[u],m=(((g=a.arrow)==null?void 0:g.x)??0)+l/2,p=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let w="",v="";return d==="bottom"?(w=i?f:`${m}px`,v=`${-c}px`):d==="top"?(w=i?f:`${m}px`,v=`${s.floating.height+c}px`):d==="right"?(w=`${-c}px`,v=i?f:`${p}px`):d==="left"&&(w=`${s.floating.width+c}px`,v=i?f:`${p}px`),{data:{x:w,y:v}}}});function tk(e){const[t,r="center"]=e.split("-");return[t,r]}var ap=Y2,Au=J2,op=Q2,ip=ek,[lp,Xae]=sr("Tooltip",[Ao]),cp=Ao(),rk="TooltipProvider",j6=700,Xv="tooltip.open",[N6,lw]=lp(rk),nk=e=>{const{__scopeTooltip:t,delayDuration:r=j6,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=e,i=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),n.jsx(N6,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:o})};nk.displayName=rk;var ru="Tooltip",[S6,dp]=lp(ru),sk=e=>{const{__scopeTooltip:t,children:r,open:s,defaultOpen:a,onOpenChange:o,disableHoverableContent:i,delayDuration:l}=e,c=lw(ru,e.__scopeTooltip),d=cp(t),[u,f]=h.useState(null),m=zn(),p=h.useRef(0),w=i??c.disableHoverableContent,v=l??c.delayDuration,x=h.useRef(!1),[g,y]=Br({prop:s,defaultProp:a??!1,onChange:_=>{_?(c.onOpen(),document.dispatchEvent(new CustomEvent(Xv))):c.onClose(),o==null||o(_)},caller:ru}),b=h.useMemo(()=>g?x.current?"delayed-open":"instant-open":"closed",[g]),j=h.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x.current=!1,y(!0)},[y]),S=h.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),N=h.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{x.current=!0,y(!0),p.current=0},v)},[v,y]);return h.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),n.jsx(ap,{...d,children:n.jsx(S6,{scope:t,contentId:m,open:g,stateAttribute:b,trigger:u,onTriggerChange:f,onTriggerEnter:h.useCallback(()=>{c.isOpenDelayedRef.current?N():j()},[c.isOpenDelayedRef,N,j]),onTriggerLeave:h.useCallback(()=>{w?S():(window.clearTimeout(p.current),p.current=0)},[S,w]),onOpen:j,onClose:S,disableHoverableContent:w,children:r})})};sk.displayName=ru;var Jv="TooltipTrigger",ak=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=dp(Jv,r),o=lw(Jv,r),i=cp(r),l=h.useRef(null),c=Ae(t,l,a.onTriggerChange),d=h.useRef(!1),u=h.useRef(!1),f=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),n.jsx(Au,{asChild:!0,...i,children:n.jsx(je.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:ue(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ue(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ue(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ue(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:ue(e.onBlur,a.onClose),onClick:ue(e.onClick,a.onClose)})})});ak.displayName=Jv;var _6="TooltipPortal",[Jae,C6]=lp(_6,{forceMount:void 0}),ec="TooltipContent",ok=h.forwardRef((e,t)=>{const r=C6(ec,e.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...o}=e,i=dp(ec,e.__scopeTooltip);return n.jsx(mr,{present:s||i.open,children:i.disableHoverableContent?n.jsx(ik,{side:a,...o,ref:t}):n.jsx(E6,{side:a,...o,ref:t})})}),E6=h.forwardRef((e,t)=>{const r=dp(ec,e.__scopeTooltip),s=lw(ec,e.__scopeTooltip),a=h.useRef(null),o=Ae(t,a),[i,l]=h.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:f}=s,m=h.useCallback(()=>{l(null),f(!1)},[f]),p=h.useCallback((w,v)=>{const x=w.currentTarget,g={x:w.clientX,y:w.clientY},y=R6(g,x.getBoundingClientRect()),b=A6(g,y),j=M6(v.getBoundingClientRect()),S=O6([...b,...j]);l(S),f(!0)},[f]);return h.useEffect(()=>()=>m(),[m]),h.useEffect(()=>{if(c&&u){const w=x=>p(x,u),v=x=>p(x,c);return c.addEventListener("pointerleave",w),u.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",w),u.removeEventListener("pointerleave",v)}}},[c,u,p,m]),h.useEffect(()=>{if(i){const w=v=>{const x=v.target,g={x:v.clientX,y:v.clientY},y=(c==null?void 0:c.contains(x))||(u==null?void 0:u.contains(x)),b=!I6(g,i);y?m():b&&(m(),d())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,u,i,d,m]),n.jsx(ik,{...e,ref:o})}),[k6,D6]=lp(ru,{isInside:!1}),T6=WE("TooltipContent"),ik=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=dp(ec,r),d=cp(r),{onClose:u}=c;return h.useEffect(()=>(document.addEventListener(Xv,u),()=>document.removeEventListener(Xv,u)),[u]),h.useEffect(()=>{if(c.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),n.jsx(Li,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:n.jsxs(op,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(T6,{children:s}),n.jsx(k6,{scope:r,isInside:!0,children:n.jsx(q3,{id:c.contentId,role:"tooltip",children:a||s})})]})})});ok.displayName=ec;var lk="TooltipArrow",P6=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=cp(r);return D6(lk,r).isInside?null:n.jsx(ip,{...a,...s,ref:t})});P6.displayName=lk;function R6(e,t){const r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,s,a,o)){case o:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function A6(e,t,r=5){const s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return s}function M6(e){const{top:t,right:r,bottom:s,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:s},{x:a,y:s}]}function I6(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,u=l.y,f=c.x,m=c.y;u>s!=m>s&&r<(f-d)*(s-u)/(m-u)+d&&(a=!a)}return a}function O6(e){const t=e.slice();return t.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),L6(t)}function L6(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var $6=nk,F6=sk,z6=ak,ck=ok;const Xh=$6,dk=F6,uk=z6,cw=h.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(ck,{ref:s,sideOffset:t,className:pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));cw.displayName=ck.displayName;var up=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},fp=typeof window>"u"||"Deno"in globalThis;function ts(){}function B6(e,t){return typeof e=="function"?e(t):e}function U6(e){return typeof e=="number"&&e>=0&&e!==1/0}function V6(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Qv(e,t){return typeof e=="function"?e(t):e}function W6(e,t){return typeof e=="function"?e(t):e}function KN(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(s){if(t.queryHash!==dw(i,t.options))return!1}else if(!su(t.queryKey,i))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function YN(e,t){const{exact:r,status:s,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(nu(t.options.mutationKey)!==nu(o))return!1}else if(!su(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function dw(e,t){return((t==null?void 0:t.queryKeyHashFn)||nu)(e)}function nu(e){return JSON.stringify(e,(t,r)=>Zv(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function su(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>su(e[r],t[r])):!1}function fk(e,t){if(e===t)return e;const r=XN(e)&&XN(t);if(r||Zv(e)&&Zv(t)){const s=r?e:Object.keys(e),a=s.length,o=r?t:Object.keys(t),i=o.length,l=r?[]:{},c=new Set(s);let d=0;for(let u=0;u<i;u++){const f=r?u:o[u];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,d++):(l[f]=fk(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&d++)}return a===i&&d===a?e:l}return t}function XN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zv(e){if(!JN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!JN(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function JN(e){return Object.prototype.toString.call(e)==="[object Object]"}function H6(e){return new Promise(t=>{setTimeout(t,e)})}function q6(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?fk(e,t):t}function G6(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function K6(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var uw=Symbol();function hk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===uw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ii,Qa,Ll,b_,Y6=(b_=class extends up{constructor(){super();tt(this,ii);tt(this,Qa);tt(this,Ll);Fe(this,Ll,t=>{if(!fp&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){oe(this,Qa)||this.setEventListener(oe(this,Ll))}onUnsubscribe(){var t;this.hasListeners()||((t=oe(this,Qa))==null||t.call(this),Fe(this,Qa,void 0))}setEventListener(t){var r;Fe(this,Ll,t),(r=oe(this,Qa))==null||r.call(this),Fe(this,Qa,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){oe(this,ii)!==t&&(Fe(this,ii,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof oe(this,ii)=="boolean"?oe(this,ii):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ii=new WeakMap,Qa=new WeakMap,Ll=new WeakMap,b_),mk=new Y6,$l,Za,Fl,j_,X6=(j_=class extends up{constructor(){super();tt(this,$l,!0);tt(this,Za);tt(this,Fl);Fe(this,Fl,t=>{if(!fp&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){oe(this,Za)||this.setEventListener(oe(this,Fl))}onUnsubscribe(){var t;this.hasListeners()||((t=oe(this,Za))==null||t.call(this),Fe(this,Za,void 0))}setEventListener(t){var r;Fe(this,Fl,t),(r=oe(this,Za))==null||r.call(this),Fe(this,Za,t(this.setOnline.bind(this)))}setOnline(t){oe(this,$l)!==t&&(Fe(this,$l,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return oe(this,$l)}},$l=new WeakMap,Za=new WeakMap,Fl=new WeakMap,j_),Jh=new X6;function J6(){let e,t;const r=new Promise((a,o)=>{e=a,t=o});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}function Q6(e){return Math.min(1e3*2**e,3e4)}function pk(e){return(e??"online")==="online"?Jh.isOnline():!0}var gk=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Kg(e){return e instanceof gk}function xk(e){let t=!1,r=0,s=!1,a;const o=J6(),i=v=>{var x;s||(m(new gk(v)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>mk.isFocused()&&(e.networkMode==="always"||Jh.isOnline())&&e.canRun(),u=()=>pk(e.networkMode)&&e.canRun(),f=v=>{var x;s||(s=!0,(x=e.onSuccess)==null||x.call(e,v),a==null||a(),o.resolve(v))},m=v=>{var x;s||(s=!0,(x=e.onError)==null||x.call(e,v),a==null||a(),o.reject(v))},p=()=>new Promise(v=>{var x;a=g=>{(s||d())&&v(g)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;a=void 0,s||(v=e.onContinue)==null||v.call(e)}),w=()=>{if(s)return;let v;const x=r===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var N;if(s)return;const y=e.retry??(fp?0:3),b=e.retryDelay??Q6,j=typeof b=="function"?b(r,g):b,S=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,g);if(t||!S){m(g);return}r++,(N=e.onFail)==null||N.call(e,r,g),H6(j).then(()=>d()?void 0:p()).then(()=>{t?m(g):w()})})};return{promise:o,cancel:i,continue:()=>(a==null||a(),o),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?w():p().then(w),o)}}var Z6=e=>setTimeout(e,0);function ez(){let e=[],t=0,r=l=>{l()},s=l=>{l()},a=Z6;const o=l=>{t?e.push(l):a(()=>{r(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var Lr=ez(),li,N_,vk=(N_=class{constructor(){tt(this,li)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),U6(this.gcTime)&&Fe(this,li,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(fp?1/0:5*60*1e3))}clearGcTimeout(){oe(this,li)&&(clearTimeout(oe(this,li)),Fe(this,li,void 0))}},li=new WeakMap,N_),zl,ci,Tn,di,_r,Nu,ui,rs,ta,S_,tz=(S_=class extends vk{constructor(t){super();tt(this,rs);tt(this,zl);tt(this,ci);tt(this,Tn);tt(this,di);tt(this,_r);tt(this,Nu);tt(this,ui);Fe(this,ui,!1),Fe(this,Nu,t.defaultOptions),this.setOptions(t.options),this.observers=[],Fe(this,di,t.client),Fe(this,Tn,oe(this,di).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Fe(this,zl,nz(this.options)),this.state=t.state??oe(this,zl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=oe(this,_r))==null?void 0:t.promise}setOptions(t){this.options={...oe(this,Nu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,Tn).remove(this)}setData(t,r){const s=q6(this.state.data,t,this.options);return jr(this,rs,ta).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){jr(this,rs,ta).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=oe(this,_r))==null?void 0:s.promise;return(a=oe(this,_r))==null||a.cancel(t),r?r.then(ts).catch(ts):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,zl))}isActive(){return this.observers.some(t=>W6(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===uw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Qv(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!V6(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=oe(this,_r))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=oe(this,_r))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),oe(this,Tn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(oe(this,_r)&&(oe(this,ui)?oe(this,_r).cancel({revert:!0}):oe(this,_r).cancelRetry()),this.scheduleGc()),oe(this,Tn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||jr(this,rs,ta).call(this,{type:"invalidate"})}fetch(t,r){var d,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,_r))return oe(this,_r).continueRetry(),oe(this,_r).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Fe(this,ui,!0),s.signal)})},o=()=>{const m=hk(this.options,r),w=(()=>{const v={client:oe(this,di),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return Fe(this,ui,!1),this.options.persister?this.options.persister(m,w,this):m(w)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:oe(this,di),state:this.state,fetchFn:o};return a(m),m})();(d=this.options.behavior)==null||d.onFetch(l,this),Fe(this,ci,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&jr(this,rs,ta).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var p,w,v,x;Kg(m)&&m.silent||jr(this,rs,ta).call(this,{type:"error",error:m}),Kg(m)||((w=(p=oe(this,Tn).config).onError)==null||w.call(p,m,this),(x=(v=oe(this,Tn).config).onSettled)==null||x.call(v,this.state.data,m,this)),this.scheduleGc()};return Fe(this,_r,xk({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var p,w,v,x;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(g){c(g);return}(w=(p=oe(this,Tn).config).onSuccess)==null||w.call(p,m,this),(x=(v=oe(this,Tn).config).onSettled)==null||x.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{jr(this,rs,ta).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{jr(this,rs,ta).call(this,{type:"pause"})},onContinue:()=>{jr(this,rs,ta).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),oe(this,_r).start()}},zl=new WeakMap,ci=new WeakMap,Tn=new WeakMap,di=new WeakMap,_r=new WeakMap,Nu=new WeakMap,ui=new WeakMap,rs=new WeakSet,ta=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...rz(s.data,this.options),fetchMeta:t.meta??null};case"success":return Fe(this,ci,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Kg(a)&&a.revert&&oe(this,ci)?{...oe(this,ci),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Lr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),oe(this,Tn).notify({query:this,type:"updated",action:t})})},S_);function rz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pk(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function nz(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ks,__,sz=(__=class extends up{constructor(t={}){super();tt(this,ks);this.config=t,Fe(this,ks,new Map)}build(t,r,s){const a=r.queryKey,o=r.queryHash??dw(a,r);let i=this.get(o);return i||(i=new tz({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){oe(this,ks).has(t.queryHash)||(oe(this,ks).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=oe(this,ks).get(t.queryHash);r&&(t.destroy(),r===t&&oe(this,ks).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Lr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return oe(this,ks).get(t)}getAll(){return[...oe(this,ks).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>KN(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>KN(t,s)):r}notify(t){Lr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Lr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Lr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ks=new WeakMap,__),Ds,Mr,fi,Ts,za,C_,az=(C_=class extends vk{constructor(t){super();tt(this,Ts);tt(this,Ds);tt(this,Mr);tt(this,fi);this.mutationId=t.mutationId,Fe(this,Mr,t.mutationCache),Fe(this,Ds,[]),this.state=t.state||oz(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){oe(this,Ds).includes(t)||(oe(this,Ds).push(t),this.clearGcTimeout(),oe(this,Mr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Fe(this,Ds,oe(this,Ds).filter(r=>r!==t)),this.scheduleGc(),oe(this,Mr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){oe(this,Ds).length||(this.state.status==="pending"?this.scheduleGc():oe(this,Mr).remove(this))}continue(){var t;return((t=oe(this,fi))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,l,c,d,u,f,m,p,w,v,x,g,y,b,j,S,N,_,E;const r=()=>{jr(this,Ts,za).call(this,{type:"continue"})};Fe(this,fi,xk({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(D,C)=>{jr(this,Ts,za).call(this,{type:"failed",failureCount:D,error:C})},onPause:()=>{jr(this,Ts,za).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,Mr).canRun(this)}));const s=this.state.status==="pending",a=!oe(this,fi).canStart();try{if(s)r();else{jr(this,Ts,za).call(this,{type:"pending",variables:t,isPaused:a}),await((i=(o=oe(this,Mr).config).onMutate)==null?void 0:i.call(o,t,this));const C=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));C!==this.state.context&&jr(this,Ts,za).call(this,{type:"pending",context:C,variables:t,isPaused:a})}const D=await oe(this,fi).start();return await((u=(d=oe(this,Mr).config).onSuccess)==null?void 0:u.call(d,D,t,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,D,t,this.state.context)),await((w=(p=oe(this,Mr).config).onSettled)==null?void 0:w.call(p,D,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,D,null,t,this.state.context)),jr(this,Ts,za).call(this,{type:"success",data:D}),D}catch(D){try{throw await((y=(g=oe(this,Mr).config).onError)==null?void 0:y.call(g,D,t,this.state.context,this)),await((j=(b=this.options).onError)==null?void 0:j.call(b,D,t,this.state.context)),await((N=(S=oe(this,Mr).config).onSettled)==null?void 0:N.call(S,void 0,D,this.state.variables,this.state.context,this)),await((E=(_=this.options).onSettled)==null?void 0:E.call(_,void 0,D,t,this.state.context)),D}finally{jr(this,Ts,za).call(this,{type:"error",error:D})}}finally{oe(this,Mr).runNext(this)}}},Ds=new WeakMap,Mr=new WeakMap,fi=new WeakMap,Ts=new WeakSet,za=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Lr.batch(()=>{oe(this,Ds).forEach(s=>{s.onMutationUpdate(t)}),oe(this,Mr).notify({mutation:this,type:"updated",action:t})})},C_);function oz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oa,ns,Su,E_,iz=(E_=class extends up{constructor(t={}){super();tt(this,oa);tt(this,ns);tt(this,Su);this.config=t,Fe(this,oa,new Set),Fe(this,ns,new Map),Fe(this,Su,0)}build(t,r,s){const a=new az({mutationCache:this,mutationId:++of(this,Su)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){oe(this,oa).add(t);const r=Df(t);if(typeof r=="string"){const s=oe(this,ns).get(r);s?s.push(t):oe(this,ns).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(oe(this,oa).delete(t)){const r=Df(t);if(typeof r=="string"){const s=oe(this,ns).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&oe(this,ns).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Df(t);if(typeof r=="string"){const s=oe(this,ns).get(r),a=s==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=Df(t);if(typeof r=="string"){const a=(s=oe(this,ns).get(r))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Lr.batch(()=>{oe(this,oa).forEach(t=>{this.notify({type:"removed",mutation:t})}),oe(this,oa).clear(),oe(this,ns).clear()})}getAll(){return Array.from(oe(this,oa))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>YN(r,s))}findAll(t={}){return this.getAll().filter(r=>YN(t,r))}notify(t){Lr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Lr.batch(()=>Promise.all(t.map(r=>r.continue().catch(ts))))}},oa=new WeakMap,ns=new WeakMap,Su=new WeakMap,E_);function Df(e){var t;return(t=e.options.scope)==null?void 0:t.id}function QN(e){return{onFetch:(t,r)=>{var u,f,m,p,w;const s=t.options,a=(m=(f=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,o=((p=t.state.data)==null?void 0:p.pages)||[],i=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=hk(t.options,t.fetchOptions),y=async(b,j,S)=>{if(v)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const _=(()=>{const k={client:t.client,queryKey:t.queryKey,pageParam:j,direction:S?"backward":"forward",meta:t.options.meta};return x(k),k})(),E=await g(_),{maxPages:D}=t.options,C=S?K6:G6;return{pages:C(b.pages,E,D),pageParams:C(b.pageParams,j,D)}};if(a&&o.length){const b=a==="backward",j=b?lz:ZN,S={pages:o,pageParams:i},N=j(s,S);l=await y(S,N,b)}else{const b=e??o.length;do{const j=c===0?i[0]??s.initialPageParam:ZN(s,l);if(c>0&&j==null)break;l=await y(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function ZN(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function lz(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Dt,eo,to,Bl,Ul,ro,Vl,Wl,k_,cz=(k_=class{constructor(e={}){tt(this,Dt);tt(this,eo);tt(this,to);tt(this,Bl);tt(this,Ul);tt(this,ro);tt(this,Vl);tt(this,Wl);Fe(this,Dt,e.queryCache||new sz),Fe(this,eo,e.mutationCache||new iz),Fe(this,to,e.defaultOptions||{}),Fe(this,Bl,new Map),Fe(this,Ul,new Map),Fe(this,ro,0)}mount(){of(this,ro)._++,oe(this,ro)===1&&(Fe(this,Vl,mk.subscribe(async e=>{e&&(await this.resumePausedMutations(),oe(this,Dt).onFocus())})),Fe(this,Wl,Jh.subscribe(async e=>{e&&(await this.resumePausedMutations(),oe(this,Dt).onOnline())})))}unmount(){var e,t;of(this,ro)._--,oe(this,ro)===0&&((e=oe(this,Vl))==null||e.call(this),Fe(this,Vl,void 0),(t=oe(this,Wl))==null||t.call(this),Fe(this,Wl,void 0))}isFetching(e){return oe(this,Dt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return oe(this,eo).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=oe(this,Dt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=oe(this,Dt).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Qv(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return oe(this,Dt).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=oe(this,Dt).get(s.queryHash),o=a==null?void 0:a.state.data,i=B6(t,o);if(i!==void 0)return oe(this,Dt).build(this,s).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return Lr.batch(()=>oe(this,Dt).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=oe(this,Dt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=oe(this,Dt);Lr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=oe(this,Dt);return Lr.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=Lr.batch(()=>oe(this,Dt).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(ts).catch(ts)}invalidateQueries(e,t={}){return Lr.batch(()=>(oe(this,Dt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=Lr.batch(()=>oe(this,Dt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(ts)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(ts)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=oe(this,Dt).build(this,t);return r.isStaleByTime(Qv(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ts).catch(ts)}fetchInfiniteQuery(e){return e.behavior=QN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ts).catch(ts)}ensureInfiniteQueryData(e){return e.behavior=QN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Jh.isOnline()?oe(this,eo).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,Dt)}getMutationCache(){return oe(this,eo)}getDefaultOptions(){return oe(this,to)}setDefaultOptions(e){Fe(this,to,e)}setQueryDefaults(e,t){oe(this,Bl).set(nu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...oe(this,Bl).values()],r={};return t.forEach(s=>{su(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){oe(this,Ul).set(nu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...oe(this,Ul).values()],r={};return t.forEach(s=>{su(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...oe(this,to).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=dw(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===uw&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...oe(this,to).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){oe(this,Dt).clear(),oe(this,eo).clear()}},Dt=new WeakMap,eo=new WeakMap,to=new WeakMap,Bl=new WeakMap,Ul=new WeakMap,ro=new WeakMap,Vl=new WeakMap,Wl=new WeakMap,k_),dz=h.createContext(void 0),e1=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(dz.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},au.apply(this,arguments)}var io;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(io||(io={}));const t1="popstate";function uz(e){e===void 0&&(e={});function t(s,a){let{pathname:o,search:i,hash:l}=s.location;return ey("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Qh(a)}return hz(t,r,null,e)}function It(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fz(){return Math.random().toString(36).substr(2,8)}function r1(e,t){return{usr:e.state,key:e.key,idx:t}}function ey(e,t,r,s){return r===void 0&&(r=null),au({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jc(t):t,{state:r,key:t&&t.key||s||fz()})}function Qh(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function jc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function hz(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,i=a.history,l=io.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(au({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function f(){l=io.Pop;let x=u(),g=x==null?null:x-d;d=x,c&&c({action:l,location:v.location,delta:g})}function m(x,g){l=io.Push;let y=ey(v.location,x,g);d=u()+1;let b=r1(y,d),j=v.createHref(y);try{i.pushState(b,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(j)}o&&c&&c({action:l,location:v.location,delta:1})}function p(x,g){l=io.Replace;let y=ey(v.location,x,g);d=u();let b=r1(y,d),j=v.createHref(y);i.replaceState(b,"",j),o&&c&&c({action:l,location:v.location,delta:0})}function w(x){let g=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof x=="string"?x:Qh(x);return y=y.replace(/ $/,"%20"),It(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let v={get action(){return l},get location(){return e(a,i)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(t1,f),c=x,()=>{a.removeEventListener(t1,f),c=null}},createHref(x){return t(a,x)},createURL:w,encodeLocation(x){let g=w(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:p,go(x){return i.go(x)}};return v}var n1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(n1||(n1={}));function mz(e,t,r){return r===void 0&&(r="/"),pz(e,t,r,!1)}function pz(e,t,r,s){let a=typeof t=="string"?jc(t):t,o=fw(a.pathname||"/",r);if(o==null)return null;let i=wk(e);gz(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=Ez(o);l=_z(i[c],d,s)}return l}function wk(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(It(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=xo([s,c.relativePath]),u=r.concat(c);o.children&&o.children.length>0&&(It(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),wk(o.children,t,u,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:Nz(d,o.index),routesMeta:u})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of bk(o.path))a(o,i,c)}),t}function bk(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let i=bk(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function gz(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Sz(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const xz=/^:[\w-]+$/,vz=3,yz=2,wz=1,bz=10,jz=-2,s1=e=>e==="*";function Nz(e,t){let r=e.split("/"),s=r.length;return r.some(s1)&&(s+=jz),t&&(s+=yz),r.filter(a=>!s1(a)).reduce((a,o)=>a+(xz.test(o)?vz:o===""?wz:bz),s)}function Sz(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function _z(e,t,r){let{routesMeta:s}=e,a={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=o==="/"?t:t.slice(o.length)||"/",f=a1({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!f&&d&&r&&!s[s.length-1].route.index&&(f=a1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(a,f.params),i.push({params:a,pathname:xo([o,f.pathname]),pathnameBase:Pz(xo([o,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(o=xo([o,f.pathnameBase]))}return i}function a1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=Cz(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,u,f)=>{let{paramName:m,isOptional:p}=u;if(m==="*"){let v=l[f]||"";i=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const w=l[f];return p&&!w?d[m]=void 0:d[m]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function Cz(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),yk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function Ez(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fw(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function kz(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?jc(e):e;return{pathname:r?r.startsWith("/")?r:Dz(r,t):t,search:Rz(s),hash:Az(a)}}function Dz(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Yg(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Tz(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function hw(e,t){let r=Tz(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function mw(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=jc(e):(a=au({},e),It(!a.pathname||!a.pathname.includes("?"),Yg("?","pathname","search",a)),It(!a.pathname||!a.pathname.includes("#"),Yg("#","pathname","hash",a)),It(!a.search||!a.search.includes("#"),Yg("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=r;else{let f=t.length-1;if(!s&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=kz(a,l),d=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const xo=e=>e.join("/").replace(/\/\/+/g,"/"),Pz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Rz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Az=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Mz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jk=["post","put","patch","delete"];new Set(jk);const Iz=["get",...jk];new Set(Iz);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ou.apply(this,arguments)}const pw=h.createContext(null),Oz=h.createContext(null),Mo=h.createContext(null),hp=h.createContext(null),Io=h.createContext({outlet:null,matches:[],isDataRoute:!1}),Nk=h.createContext(null);function Lz(e,t){let{relative:r}=t===void 0?{}:t;Nc()||It(!1);let{basename:s,navigator:a}=h.useContext(Mo),{hash:o,pathname:i,search:l}=_k(e,{relative:r}),c=i;return s!=="/"&&(c=i==="/"?s:xo([s,i])),a.createHref({pathname:c,search:l,hash:o})}function Nc(){return h.useContext(hp)!=null}function Fi(){return Nc()||It(!1),h.useContext(hp).location}function Sk(e){h.useContext(Mo).static||h.useLayoutEffect(e)}function Kn(){let{isDataRoute:e}=h.useContext(Io);return e?Xz():$z()}function $z(){Nc()||It(!1);let e=h.useContext(pw),{basename:t,future:r,navigator:s}=h.useContext(Mo),{matches:a}=h.useContext(Io),{pathname:o}=Fi(),i=JSON.stringify(hw(a,r.v7_relativeSplatPath)),l=h.useRef(!1);return Sk(()=>{l.current=!0}),h.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let f=mw(d,JSON.parse(i),o,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:xo([t,f.pathname])),(u.replace?s.replace:s.push)(f,u.state,u)},[t,s,i,o,e])}function _k(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=h.useContext(Mo),{matches:a}=h.useContext(Io),{pathname:o}=Fi(),i=JSON.stringify(hw(a,s.v7_relativeSplatPath));return h.useMemo(()=>mw(e,JSON.parse(i),o,r==="path"),[e,i,o,r])}function Fz(e,t){return zz(e,t)}function zz(e,t,r,s){Nc()||It(!1);let{navigator:a}=h.useContext(Mo),{matches:o}=h.useContext(Io),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Fi(),u;if(t){var f;let x=typeof t=="string"?jc(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||It(!1),u=x}else u=d;let m=u.pathname||"/",p=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let w=mz(e,{pathname:p}),v=Hz(w&&w.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:xo([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:xo([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,r,s);return t&&v?h.createElement(hp.Provider,{value:{location:ou({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:io.Pop}},v):v}function Bz(){let e=Yz(),t=Mz(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),r?h.createElement("pre",{style:a},r):null,null)}const Uz=h.createElement(Bz,null);class Vz extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?h.createElement(Io.Provider,{value:this.props.routeContext},h.createElement(Nk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Wz(e){let{routeContext:t,match:r,children:s}=e,a=h.useContext(pw);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(Io.Provider,{value:t},s)}function Hz(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);u>=0||It(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:m,errors:p}=r,w=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||w){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,f,m)=>{let p,w=!1,v=null,x=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||Uz,c&&(d<0&&m===0?(w=!0,x=null):d===m&&(w=!0,x=f.route.hydrateFallbackElement||null)));let g=t.concat(i.slice(0,m+1)),y=()=>{let b;return p?b=v:w?b=x:f.route.Component?b=h.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=u,h.createElement(Wz,{match:f,routeContext:{outlet:u,matches:g,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?h.createElement(Vz,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var Ck=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ck||{}),Zh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zh||{});function qz(e){let t=h.useContext(pw);return t||It(!1),t}function Gz(e){let t=h.useContext(Oz);return t||It(!1),t}function Kz(e){let t=h.useContext(Io);return t||It(!1),t}function Ek(e){let t=Kz(),r=t.matches[t.matches.length-1];return r.route.id||It(!1),r.route.id}function Yz(){var e;let t=h.useContext(Nk),r=Gz(Zh.UseRouteError),s=Ek(Zh.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function Xz(){let{router:e}=qz(Ck.UseNavigateStable),t=Ek(Zh.UseNavigateStable),r=h.useRef(!1);return Sk(()=>{r.current=!0}),h.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ou({fromRouteId:t},o)))},[e,t])}function Jz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function kk(e){let{to:t,replace:r,state:s,relative:a}=e;Nc()||It(!1);let{future:o,static:i}=h.useContext(Mo),{matches:l}=h.useContext(Io),{pathname:c}=Fi(),d=Kn(),u=mw(t,hw(l,o.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(u);return h.useEffect(()=>d(JSON.parse(f),{replace:r,state:s,relative:a}),[d,f,a,r,s]),null}function Ut(e){It(!1)}function Qz(e){let{basename:t="/",children:r=null,location:s,navigationType:a=io.Pop,navigator:o,static:i=!1,future:l}=e;Nc()&&It(!1);let c=t.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:o,static:i,future:ou({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=jc(s));let{pathname:u="/",search:f="",hash:m="",state:p=null,key:w="default"}=s,v=h.useMemo(()=>{let x=fw(u,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:p,key:w},navigationType:a}},[c,u,f,m,p,w,a]);return v==null?null:h.createElement(Mo.Provider,{value:d},h.createElement(hp.Provider,{children:r,value:v}))}function Dk(e){let{children:t,location:r}=e;return Fz(ty(t),r)}new Promise(()=>{});function ty(e,t){t===void 0&&(t=[]);let r=[];return h.Children.forEach(e,(s,a)=>{if(!h.isValidElement(s))return;let o=[...t,a];if(s.type===h.Fragment){r.push.apply(r,ty(s.props.children,o));return}s.type!==Ut&&It(!1),!s.props.index||!s.props.children||It(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=ty(s.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ry.apply(this,arguments)}function Zz(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function e8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function t8(e,t){return e.button===0&&(!t||t==="_self")&&!e8(e)}function ny(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function r8(e,t){let r=ny(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(o=>{r.append(a,o)})}),r}const n8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],s8="6";try{window.__reactRouterVersion=s8}catch{}const a8="startTransition",o1=Mm[a8];function i1(e){let{basename:t,children:r,future:s,window:a}=e,o=h.useRef();o.current==null&&(o.current=uz({window:a,v5Compat:!0}));let i=o.current,[l,c]=h.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},u=h.useCallback(f=>{d&&o1?o1(()=>c(f)):c(f)},[c,d]);return h.useLayoutEffect(()=>i.listen(u),[i,u]),h.useEffect(()=>Jz(s),[s]),h.createElement(Qz,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:s})}const o8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ho=h.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f}=t,m=Zz(t,n8),{basename:p}=h.useContext(Mo),w,v=!1;if(typeof d=="string"&&i8.test(d)&&(w=d,o8))try{let b=new URL(window.location.href),j=d.startsWith("//")?new URL(b.protocol+d):new URL(d),S=fw(j.pathname,p);j.origin===b.origin&&S!=null?d=S+j.search+j.hash:v=!0}catch{}let x=Lz(d,{relative:a}),g=l8(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:f});function y(b){s&&s(b),b.defaultPrevented||g(b)}return h.createElement("a",ry({},m,{href:w||x,onClick:v||o?s:y,ref:r,target:c}))});var l1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(l1||(l1={}));var c1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(c1||(c1={}));function l8(e,t){let{target:r,replace:s,state:a,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=Kn(),d=Fi(),u=_k(e,{relative:i});return h.useCallback(f=>{if(t8(f,r)){f.preventDefault();let m=s!==void 0?s:Qh(d)===Qh(u);c(e,{replace:m,state:a,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,u,s,a,r,e,o,i,l])}function gw(e){let t=h.useRef(ny(e)),r=h.useRef(!1),s=Fi(),a=h.useMemo(()=>r8(s.search,r.current?null:t.current),[s.search]),o=Kn(),i=h.useCallback((l,c)=>{const d=ny(typeof l=="function"?l(a):l);r.current=!0,o("?"+d,c)},[o,a]);return[a,i]}function c8(e){const t=h.useRef(e);return t.current=e,h.useCallback((...s)=>t.current(...s),[])}const d8="modulepreload",u8=function(e){return"/"+e},d1={},Mu=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=u8(c),c in d1)return;d1[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":d8,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},f8=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Mu(async()=>{const{default:s}=await Promise.resolve().then(()=>Sc);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class xw extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class h8 extends xw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class u1 extends xw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class f1 extends xw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var sy;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(sy||(sy={}));var m8=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class p8{constructor(t,{headers:r={},customFetch:s,region:a=sy.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=f8(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return m8(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:i}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;i&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(l["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(l["Content-Type"]="application/json",u=JSON.stringify(i)));const f=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(v=>{throw new h8(v)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new u1(f);if(!f.ok)throw new f1(f);let p=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return p==="application/json"?w=yield f.json():p==="application/octet-stream"?w=yield f.blob():p==="text/event-stream"?w=f:p==="multipart/form-data"?w=yield f.formData():w=yield f.text(),{data:w,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof f1||a instanceof u1?a.context:void 0}}})}}var Jr={},vw={},mp={},Iu={},pp={},gp={},g8=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},tc=g8();const x8=tc.fetch,Tk=tc.fetch.bind(tc),Pk=tc.Headers,v8=tc.Request,y8=tc.Response,Sc=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pk,Request:v8,Response:y8,default:Tk,fetch:x8},Symbol.toStringTag,{value:"Module"})),w8=WI(Sc);var xp={};Object.defineProperty(xp,"__esModule",{value:!0});let b8=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};xp.default=b8;var Rk=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gp,"__esModule",{value:!0});const j8=Rk(w8),N8=Rk(xp);let S8=class{constructor(t){var r,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=j8.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c,d;let u=null,f=null,m=null,p=o.status,w=o.statusText;if(o.ok){if(this.method!=="HEAD"){const y=await o.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const x=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");x&&g&&g.length>1&&(m=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,p=406,w="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const x=await o.text();try{u=JSON.parse(x),Array.isArray(u)&&o.status===404&&(f=[],u=null,p=200,w="OK")}catch{o.status===404&&x===""?(p=204,w="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,p=200,w="OK"),u&&this.shouldThrowOnError)throw new N8.default(u)}return{error:u,data:f,count:m,status:p,statusText:w}});return this.shouldThrowOnError||(a=a.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};gp.default=S8;var _8=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pp,"__esModule",{value:!0});const C8=_8(gp);let E8=class extends C8.default{select(t){let r=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:o=a}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"offset":`${a}.offset`,i=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};pp.default=E8;var k8=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Iu,"__esModule",{value:!0});const D8=k8(pp);let T8=class extends D8.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${o}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};Iu.default=T8;var P8=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mp,"__esModule",{value:!0});const Qc=P8(Iu);let R8=class{constructor(t,{headers:r={},schema:s,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=s,this.fetch=a}select(t,{head:r=!1,count:s}={}){const a=r?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),s&&this.headers.append("Prefer",`count=${s}`),new Qc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:s=!0}={}){var a;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Qc.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:o=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Qc.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:r}={}){var s;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Qc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var r;const s="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Qc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};mp.default=R8;var Ak=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vw,"__esModule",{value:!0});const A8=Ak(mp),M8=Ak(Iu);let I8=class Mk{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new A8.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Mk(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:o}={}){var i;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;s||a?(l=s?"HEAD":"GET",Object.entries(r).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{c.searchParams.append(f,m)})):(l="POST",d=r);const u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new M8.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};vw.default=I8;var _c=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.PostgrestError=Jr.PostgrestBuilder=Jr.PostgrestTransformBuilder=Jr.PostgrestFilterBuilder=Jr.PostgrestQueryBuilder=Jr.PostgrestClient=void 0;const Ik=_c(vw);Jr.PostgrestClient=Ik.default;const Ok=_c(mp);Jr.PostgrestQueryBuilder=Ok.default;const Lk=_c(Iu);Jr.PostgrestFilterBuilder=Lk.default;const $k=_c(pp);Jr.PostgrestTransformBuilder=$k.default;const Fk=_c(gp);Jr.PostgrestBuilder=Fk.default;const zk=_c(xp);Jr.PostgrestError=zk.default;var O8=Jr.default={PostgrestClient:Ik.default,PostgrestQueryBuilder:Ok.default,PostgrestFilterBuilder:Lk.default,PostgrestTransformBuilder:$k.default,PostgrestBuilder:Fk.default,PostgrestError:zk.default};const{PostgrestClient:L8,PostgrestQueryBuilder:noe,PostgrestFilterBuilder:soe,PostgrestTransformBuilder:aoe,PostgrestBuilder:ooe,PostgrestError:ioe}=O8;class $8{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const F8="2.15.5",z8=`realtime-js/${F8}`,B8="1.0.0",ay=1e4,U8=1e3,V8=100;var _d;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(_d||(_d={}));var Qt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Qt||(Qt={}));var as;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(as||(as={}));var oy;(function(e){e.websocket="websocket"})(oy||(oy={}));var ti;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ti||(ti={}));class W8{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const a=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(t.slice(i,i+a));i=i+a;const c=s.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(s.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Bk{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(dt||(dt={}));const h1=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((o,i)=>(o[i]=H8(i,e,t,a),o),{})},H8=(e,t,r,s)=>{const a=t.find(l=>l.name===e),o=a==null?void 0:a.type,i=r[e];return o&&!s.includes(o)?Uk(o,i):iy(i)},Uk=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Y8(t,r)}switch(e){case dt.bool:return q8(t);case dt.float4:case dt.float8:case dt.int2:case dt.int4:case dt.int8:case dt.numeric:case dt.oid:return G8(t);case dt.json:case dt.jsonb:return K8(t);case dt.timestamp:return X8(t);case dt.abstime:case dt.date:case dt.daterange:case dt.int4range:case dt.int8range:case dt.money:case dt.reltime:case dt.text:case dt.time:case dt.timestamptz:case dt.timetz:case dt.tsrange:case dt.tstzrange:return iy(t);default:return iy(t)}},iy=e=>e,q8=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},G8=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},K8=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Y8=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>Uk(t,l))}return e},X8=e=>typeof e=="string"?e.replace(" ","T"):e,Vk=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Xg{constructor(t,r,s={},a=ay){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var m1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(m1||(m1={}));class Cd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cd.syncState(this.state,a,o,i),this.pendingDiffs.forEach(c=>{this.state=Cd.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Cd.syncDiff(this.state,a,o,i),l())}),this.onJoin((a,o,i)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:i})}),this.onLeave((a,o,i)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const o=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(o,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const f=o[d];if(f){const m=u.map(x=>x.presence_ref),p=f.map(x=>x.presence_ref),w=u.filter(x=>p.indexOf(x.presence_ref)<0),v=f.filter(x=>m.indexOf(x.presence_ref)<0);w.length>0&&(l[d]=w),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(o,{joins:l,leaves:c},s,a)}static syncDiff(t,r,s,a){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const f=t[l].map(p=>p.presence_ref),m=u.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...m)}s(l,u,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var p1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(p1||(p1={}));var Ed;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ed||(Ed={}));var sa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(sa||(sa={}));class yw{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Xg(this,as.join,this.params,this.timeout),this.rejoinTimer=new Bk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(as.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Cd(this),this.broadcastEndpointURL=Vk(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Qt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Ed.PRESENCE]&&this.bindings[Ed.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},m={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(sa.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(sa.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var w;if(this.socket.setAuth(),p===void 0){t==null||t(sa.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(w=v==null?void 0:v.length)!==null&&w!==void 0?w:0,g=[];for(let y=0;y<x;y++){const b=v[y],{filter:{event:j,schema:S,table:N,filter:_}}=b,E=p&&p[y];if(E&&E.event===j&&E.schema===S&&E.table===N&&E.filter===_)g.push(Object.assign(Object.assign({},b),{id:E.id}));else{this.unsubscribe(),this.state=Qt.errored,t==null||t(sa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(sa.SUBSCRIBED);return}}).receive("error",p=>{this.state=Qt.errored,t==null||t(sa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(sa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Qt.joined&&t===Ed.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,s)}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Qt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(as.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Xg(this,as.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qt.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),i}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Xg(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>V8){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=as;if(s&&[l,c,d,u].indexOf(i)>=0&&s!==this._joinRef())return;let m=this._onMessage(i,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var w,v,x;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((x=(v=p.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===i}).map(p=>p.callback(m,s)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var w,v,x,g,y,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const j=p.id,S=(w=p.filter)===null||w===void 0?void 0:w.event;return j&&((v=r.ids)===null||v===void 0?void 0:v.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(y=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return j==="*"||j===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const w=m.data,{schema:v,table:x,commit_timestamp:g,type:y,errors:b}=w;m=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:g,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(w))}p.callback(m,s)})}_isClosed(){return this.state===Qt.closed}_isJoined(){return this.state===Qt.joined}_isJoining(){return this.state===Qt.joining}_isLeaving(){return this.state===Qt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),o={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&yw.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(as.close,{},t)}_onError(t){this._on(as.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=h1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=h1(t.columns,t.old_record)),r}}const Jg=()=>{},Tf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},J8=[1e3,2e3,5e3,1e4],Q8=1e4,Z8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class eB{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ay,this.transport=null,this.heartbeatIntervalMs=Tf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jg,this.ref=0,this.reconnectTimer=null,this.logger=Jg,this.conn=null,this.sendBuffer=[],this.serializer=new W8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...i)=>Mu(async()=>{const{default:l}=await Promise.resolve().then(()=>Sc);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${oy.websocket}`,this.httpEndpoint=Vk(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$8.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:B8}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case _d.connecting:return ti.Connecting;case _d.open:return ti.Open;case _d.closing:return ti.Closing;default:return ti.Closed}}isConnected(){return this.connectionState()===ti.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new yw(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:s,payload:a,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${o})`,a),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(U8,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Tf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:i}=r,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${s} ${a} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(a,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(as.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([Z8],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:z8};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(as.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Bk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,o,i,l,c,d,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:ay,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Tf.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Jg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:f=>J8[f-1]||Q8,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(f,m)=>m(JSON.stringify(f)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class ww extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Zt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class tB extends ww{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ly extends ww{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var rB=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Wk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Mu(async()=>{const{default:s}=await Promise.resolve().then(()=>Sc);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},nB=()=>rB(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Mu(()=>Promise.resolve().then(()=>Sc),void 0)).Response:Response}),cy=e=>{if(Array.isArray(e))return e.map(r=>cy(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=cy(s)}),t},sB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var zi=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Qg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),aB=(e,t,r)=>zi(void 0,void 0,void 0,function*(){const s=yield nB();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const o=e.status||500,i=(a==null?void 0:a.statusCode)||o+"";t(new tB(Qg(a),o,i))}).catch(a=>{t(new ly(Qg(a),a))}):t(new ly(Qg(e),e))}),oB=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(sB(s)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Ou(e,t,r,s,a,o){return zi(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,oB(t,s,a,o)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>aB(c,l,s))})})}function em(e,t,r,s){return zi(this,void 0,void 0,function*(){return Ou(e,"GET",t,r,s)})}function Cs(e,t,r,s,a){return zi(this,void 0,void 0,function*(){return Ou(e,"POST",t,s,a,r)})}function dy(e,t,r,s,a){return zi(this,void 0,void 0,function*(){return Ou(e,"PUT",t,s,a,r)})}function iB(e,t,r,s){return zi(this,void 0,void 0,function*(){return Ou(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Hk(e,t,r,s,a){return zi(this,void 0,void 0,function*(){return Ou(e,"DELETE",t,s,a,r)})}var Pr=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const lB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},g1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cB{constructor(t,r={},s,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=Wk(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,a){return Pr(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},g1),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),f=yield(t=="PUT"?dy:Cs)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Zt(o))return{data:null,error:o};throw o}})}upload(t,r,s){return Pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Pr(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:g1.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield dy(this.fetch,l.toString(),c,{headers:u});return{data:{path:o,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Zt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Pr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield Cs(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new ww("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Zt(s))return{data:null,error:s};throw s}})}update(t,r,s){return Pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Pr(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Pr(this,void 0,void 0,function*(){try{return{data:{path:(yield Cs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Pr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),o=yield Cs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Pr(this,void 0,void 0,function*(){try{const a=yield Cs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}download(t,r){return Pr(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield em(this.fetch,`${this.url}/${a}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Zt(l))return{data:null,error:l};throw l}})}info(t){return Pr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield em(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:cy(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Zt(s))return{data:null,error:s};throw s}})}exists(t){return Pr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield iB(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Zt(s)&&s instanceof ly){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return Pr(this,void 0,void 0,function*(){try{return{data:yield Hk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}list(t,r,s){return Pr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},lB),r),{prefix:t||""});return{data:yield Cs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}listV2(t,r){return Pr(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield Cs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Zt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const dB="2.12.1",uB={"X-Client-Info":`storage-js/${dB}`};var qi=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class fB{constructor(t,r={},s,a){this.shouldThrowOnError=!1;const o=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},uB),r),this.fetch=Wk(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return qi(this,void 0,void 0,function*(){try{return{data:yield em(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zt(t))return{data:null,error:t};throw t}})}getBucket(t){return qi(this,void 0,void 0,function*(){try{return{data:yield em(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return qi(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Zt(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return qi(this,void 0,void 0,function*(){try{return{data:yield dy(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Zt(s))return{data:null,error:s};throw s}})}emptyBucket(t){return qi(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return qi(this,void 0,void 0,function*(){try{return{data:yield Hk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zt(r))return{data:null,error:r};throw r}})}}class hB extends fB{constructor(t,r={},s,a){super(t,r,s,a)}from(t){return new cB(this.url,this.headers,t,this.fetch)}}const mB="2.57.4";let dd="";typeof Deno<"u"?dd="deno":typeof document<"u"?dd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dd="react-native":dd="node";const pB={"X-Client-Info":`supabase-js-${dd}/${mB}`},gB={headers:pB},xB={schema:"public"},vB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yB={};var wB=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const bB=e=>{let t;return e?t=e:typeof fetch>"u"?t=Tk:t=fetch,(...r)=>t(...r)},jB=()=>typeof Headers>"u"?Pk:Headers,NB=(e,t,r)=>{const s=bB(r),a=jB();return(o,i)=>wB(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(o,Object.assign(Object.assign({},i),{headers:d}))})};var SB=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};function _B(e){return e.endsWith("/")?e:e+"/"}function CB(e,t){var r,s;const{db:a,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:u,global:f}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>SB(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function EB(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_B(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const qk="2.71.1",il=30*1e3,uy=3,Zg=uy*il,kB="http://localhost:9999",DB="supabase.auth.token",TB={"X-Client-Info":`gotrue-js/${qk}`},fy="X-Supabase-Api-Version",Gk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PB=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RB=10*60*1e3;class bw extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class AB extends bw{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function MB(e){return Ue(e)&&e.name==="AuthApiError"}class Kk extends bw{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Oo extends bw{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class Ba extends Oo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IB(e){return Ue(e)&&e.name==="AuthSessionMissingError"}class Pf extends Oo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rf extends Oo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Af extends Oo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function OB(e){return Ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class x1 extends Oo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hy extends Oo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ex(e){return Ue(e)&&e.name==="AuthRetryableFetchError"}class v1 extends Oo{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class my extends Oo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const tm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),y1=` 	
\r=`.split(""),LB=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<y1.length;t+=1)e[y1[t].charCodeAt(0)]=-2;for(let t=0;t<tm.length;t+=1)e[tm[t].charCodeAt(0)]=t;return e})();function w1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(tm[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(tm[s]),t.queuedBits-=6}}function Yk(e,t,r){const s=LB[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function b1(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=i=>{zB(i,s,r)};for(let i=0;i<e.length;i+=1)Yk(e.charCodeAt(i),a,o);return t.join("")}function $B(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function FB(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}$B(s,t)}}function zB(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function BB(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Yk(e.charCodeAt(a),r,s);return new Uint8Array(t)}function UB(e){const t=[];return FB(e,r=>t.push(r)),new Uint8Array(t)}function VB(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>w1(a,r,s)),w1(null,r,s),t.join("")}function WB(e){return Math.round(Date.now()/1e3)+e}function HB(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Qn=()=>typeof window<"u"&&typeof document<"u",qo={tested:!1,writable:!1},Xk=()=>{if(!Qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qo.tested)return qo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),qo.tested=!0,qo.writable=!0}catch{qo.tested=!0,qo.writable=!1}return qo.writable};function qB(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const Jk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Mu(async()=>{const{default:s}=await Promise.resolve().then(()=>Sc);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},GB=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ll=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Go=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},La=async(e,t)=>{await e.removeItem(t)};class vp{constructor(){this.promise=new vp.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}vp.promiseConstructor=Promise;function tx(e){const t=e.split(".");if(t.length!==3)throw new my("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!PB.test(t[s]))throw new my("JWT not in base64url format");return{header:JSON.parse(b1(t[0])),payload:JSON.parse(b1(t[1])),signature:BB(t[2]),raw:{header:t[0],payload:t[1]}}}async function KB(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function YB(e,t){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){s(i);return}}catch(i){if(!t(o,i)){a(i);return}}})()})}function XB(e){return("0"+e.toString(16)).substr(-2)}function JB(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,XB).join("")}async function QB(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function ZB(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await QB(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gi(e,t,r=!1){const s=JB();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await ll(e,`${t}-code-verifier`,a);const o=await ZB(s);return[o,s===o?"plain":"s256"]}const eU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tU(e){const t=e.headers.get(fy);if(!t||!t.match(eU))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rU(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function nU(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ki(e){if(!sU.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rx(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function j1(e){return JSON.parse(JSON.stringify(e))}var aU=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};const Qo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oU=[502,503,504];async function N1(e){var t;if(!GB(e))throw new hy(Qo(e),0);if(oU.includes(e.status))throw new hy(Qo(e),e.status);let r;try{r=await e.json()}catch(o){throw new Kk(Qo(o),o)}let s;const a=tU(e);if(a&&a.getTime()>=Gk["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new v1(Qo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Ba}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new v1(Qo(r),e.status,r.weak_password.reasons);throw new AB(Qo(r),e.status||500,s)}const iU=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function Ye(e,t,r,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[fy]||(o[fy]=Gk["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const i=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await lU(e,t,r+l,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function lU(e,t,r,s,a,o){const i=iU(t,s,a,o);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new hy(Qo(c),0)}if(l.ok||await N1(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await N1(c)}}function ra(e){var t;let r=null;fU(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=WB(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function S1(e){const t=ra(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ka(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function cU(e){return{data:e,error:null}}function dU(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o}=e,i=aU(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function uU(e){return e}function fU(e){return e.access_token&&e.refresh_token&&e.expires_in}const nx=["global","local","others"];var hU=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class mU{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=Jk(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=nx[0]){if(nx.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nx.join(", ")}`);try{return await Ye(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await Ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ka})}catch(s){if(Ue(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=hU(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:dU,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ye(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ka})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:uU});if(u.error)throw u.error;const f=await u.json(),m=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(w.split(";")[1].split("=")[1]);d[`${x}Page`]=v}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Ue(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Ki(t);try{return await Ye(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ka})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ki(t);try{return await Ye(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ka})}catch(s){if(Ue(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Ki(t);try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ka})}catch(s){if(Ue(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Ki(t.userId);try{const{data:r,error:s}=await Ye(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ki(t.userId),Ki(t.id);try{return{data:await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}}function _1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function pU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Yi={debug:!!(globalThis&&Xk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class gU extends Qk{}async function xU(e,t,r){Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new gU(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Yi.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}pU();const vU={url:kB,storageKey:DB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:TB,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function C1(e,t,r){return await r()}const Xi={};class iu{constructor(t){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=iu.nextInstanceID,iu.nextInstanceID+=1,this.instanceID>0&&Qn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},vU),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new mU({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Jk(a.fetch),this.lock=a.lock||C1,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Qn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=xU:this.lock=C1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Xk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_1(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=_1(this.memoryStorage)),Qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Xi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Xi[this.storageKey]=Object.assign(Object.assign({},Xi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Xi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xi[this.storageKey]=Object.assign(Object.assign({},Xi[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=qB(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Qn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),OB(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ue(r)?{error:r}:{error:new Kk("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const o=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ra}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Ue(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,s,a;try{let o;if("email"in t){const{email:u,password:f,options:m}=t;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await Gi(this.storage,this.storageKey)),o=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:w},xform:ra})}else if("phone"in t){const{phone:u,password:f,options:m}=t;o=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ra})}else throw new Rf("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Ue(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:l}=t;r=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:S1})}else if("phone"in t){const{phone:o,password:i,options:l}=t;r=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:S1})}else throw new Rf("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Pf}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,a,o,i,l,c,d,u,f,m,p;let w,v;if("message"in t)w=t.message,v=t.signature;else{const{chain:x,wallet:g,statement:y,options:b}=t;let j;if(Qn())if(typeof g=="object")j=g;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=g}const S=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),y?{statement:y}:null));let _;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")_=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)_=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)w=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),v=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(w),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=N}}try{const{data:x,error:g}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:VB(v)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ra});if(g)throw g;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Pf}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:g})}catch(x){if(Ue(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const r=await Go(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:o,error:i}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:ra});if(await La(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Pf}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:i})}catch(o){if(Ue(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:o,nonce:i}=t,l=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ra}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Pf}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,a,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Gi(this.storage,this.storageKey));const{error:f}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Rf("You must provide either an email or phone number.")}catch(l){if(Ue(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,s;try{let a,o;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await Ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ra});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Ue(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,s,a;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Gi(this.storage,this.storageKey)),await Ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:cU})}catch(o){if(Ue(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Ba;const{error:a}=await Ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:o}=t,{error:i}=await Ye(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:s,type:a,options:o}=t,{data:i,error:l}=await Ye(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Rf("You must provide either an email or phone number and a type")}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Go(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Zg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const i=await Go(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=rx()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ka}):await this._useSession(async r=>{var s,a,o;const{data:i,error:l}=r;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ba}:await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Ka})})}catch(r){if(Ue(r))return IB(r)&&(await this._removeSession(),await La(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Ba;const i=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Gi(this.storage,this.storageKey));const{data:d,error:u}=await Ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Ka});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(Ue(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ba;const r=Date.now()/1e3;let s=r,a=!0,o=null;const{payload:i}=tx(t.access_token);if(i.exp&&(s=i.exp,a=s<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(Ue(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Ba;const{session:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Qn())throw new Af("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Af(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new x1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Af("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new x1("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new Af("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let m=u+f;c&&(m=parseInt(c));const p=m-u;p*1e3<=il&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const w=m-f;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,m,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,m,u);const{data:v,error:x}=await this._getUser(o);if(x)throw x;const g={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:f,expires_at:m,refresh_token:i,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(s){if(Ue(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Go(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{error:o};const i=(s=a.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(MB(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await La(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=HB(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:o},error:i}=r;if(i)throw i;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Gi(this.storage,this.storageKey,!0));try{return await Ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(Ue(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:a}=await this._useSession(async o=>{var i,l,c,d,u;const{data:f,error:m}=o;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ye(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Qn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Ue(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:o,error:i}=r;if(i)throw i;return await Ye(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await YB(async a=>(a>0&&await KB(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ra})),(a,o)=>{const i=200*Math.pow(2,a);return o&&ex(o)&&Date.now()+i-s<il})}catch(s){if(this._debug(r,"error",s),Ue(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Qn()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Go(this.storage,this.storageKey);if(a&&this.userStorage){let i=await Go(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:a.user},await ll(this.userStorage,this.storageKey+"-user",i)),a.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:rx()}else if(a&&!a.user&&!a.user){const i=await Go(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(a.user=i.user,await La(this.storage,this.storageKey+"-user"),await ll(this.storage,this.storageKey,a)):a.user=rx()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Zg;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Zg}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),ex(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(a.access_token);!l&&(i!=null&&i.user)?(a.user=i.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Ba;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new vp;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Ba;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(a,"error",o),Ue(o)){const i={session:null,error:o};return ex(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await ll(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=j1(a);await ll(this.storage,this.storageKey,o)}else{const a=j1(r);await ll(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await La(this.storage,this.storageKey),await La(this.storage,this.storageKey+"-code-verifier"),await La(this.storage,this.storageKey+"-user"),this.userStorage&&await La(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),il);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/il);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${il}ms, refresh threshold is ${uy} ticks`),a<=uy&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Qk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,i]=await Gi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;return o?{data:null,error:o}:await Ye(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await Ye(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:l}=await Ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;return o?{data:null,error:o}:await Ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(t==null?void 0:t.factors)||[],a=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:a},error:o}=t;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=tx(a.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+RB>a)return s;const{data:o,error:i}=await Ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:p,error:w}=await this.getSession();if(w||!p.session)return{data:null,error:w};s=p.session.access_token}const{header:a,payload:o,signature:i,raw:{header:l,payload:c}}=tx(s);r!=null&&r.allowExpired||rU(o.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:o,header:a,signature:i},error:null}}const u=nU(a.alg),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,i,UB(`${l}.${c}`)))throw new my("Invalid JWT signature");return{data:{claims:o,header:a,signature:i},error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}}}iu.nextInstanceID=0;const yU=iu;class wU extends yU{constructor(t){super(t)}}var bU=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(s.next(u))}catch(f){i(f)}}function c(u){try{d(s.throw(u))}catch(f){i(f)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class jU{constructor(t,r,s){var a,o,i;this.supabaseUrl=t,this.supabaseKey=r;const l=EB(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:xB,realtime:yB,auth:Object.assign(Object.assign({},vB),{storageKey:c}),global:gB},u=CB(s??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=NB(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new L8(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new hB(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new p8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return bU(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:i,flowType:l,lock:c,debug:d},u,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wU({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,flowType:l,lock:c,debug:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new eB(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const NU=(e,t,r)=>new jU(e,t,r);function SU(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}SU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _U="https://qliinxtanjdnwxlvnxji.supabase.co",CU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsaWlueHRhbmpkbnd4bHZueGppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNjg2MTMsImV4cCI6MjA3Mjc0NDYxM30.13wLfMNJ2Joxpw9GWq2_ymJgPtQizZZUzRUDNVRhQzM",O=NU(_U,CU,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"supabase.auth.token",flowType:"pkce"},global:{headers:{Accept:"application/json","Content-Type":"application/json"}}});O.auth.onAuthStateChange((e,t)=>{e==="TOKEN_REFRESHED"&&console.log(" Token rafrachi avec succs"),e==="SIGNED_OUT"&&(console.log(" Utilisateur dconnect - Nettoyage du localStorage"),localStorage.removeItem("lastActivity"),localStorage.removeItem("manualLogout"))});const lu=xc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),L=h.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},o)=>{const i=s?N3:"button";return n.jsx(i,{className:pe(lu({variant:t,size:r,className:e})),ref:o,...a})});L.displayName="Button";const ye=h.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));ye.displayName="Input";const V=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:pe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));V.displayName="Card";const le=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:pe("flex flex-col space-y-1.5 p-6",e),...t}));le.displayName="CardHeader";const ce=h.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:pe("text-2xl font-semibold leading-none tracking-tight",e),...t}));ce.displayName="CardTitle";const sn=h.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:pe("text-sm text-muted-foreground",e),...t}));sn.displayName="CardDescription";const W=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:pe("p-6 pt-0",e),...t}));W.displayName="CardContent";const EU=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:pe("flex items-center p-6 pt-0",e),...t}));EU.displayName="CardFooter";var kU="Label",Zk=h.forwardRef((e,t)=>n.jsx(je.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Zk.displayName=kU;var eD=Zk;const DU=xc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),J=h.forwardRef(({className:e,...t},r)=>n.jsx(eD,{ref:r,className:pe(DU(),e),...t}));J.displayName=eD.displayName;const Lu=e=>{const[t,r]=h.useState({});h.useState({});const s=h.useCallback(c=>{r(d=>({...d,[c]:!0}))},[]),a=h.useCallback(c=>{r(c?d=>({...d,[c]:!1}):{})},[]),o=h.useCallback(c=>{r(d=>({...d,[c]:!0}))},[]),i=h.useCallback(c=>{r(d=>({...d,[c]:!1}))},[]),l=h.useCallback((c,d)=>{const u=t[c]||!1,f=e[c]||"";return u||d!==""?"":f},[t,e]);return{handleFocus:s,resetFocus:a,getPlaceholder:l,focusedFields:t,forceHidePlaceholder:o,handleFieldClear:i}},TU=()=>{const{toast:e}=rt(),t=async()=>{try{const{data:s,error:a}=await O.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(a)throw a}catch(s){e({title:"Erreur",description:s.message||"Erreur lors de la connexion Google",variant:"destructive"})}},r=async()=>{try{const{data:s,error:a}=await O.auth.signInWithOAuth({provider:"azure",options:{scopes:"email profile openid",redirectTo:`${window.location.origin}/auth/callback`}});if(a)throw a}catch(s){e({title:"Erreur",description:s.message||"Erreur lors de la connexion Microsoft",variant:"destructive"})}};return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-3 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Continuer avec Google"})]}),n.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-3 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",children:[n.jsx("path",{fill:"#f35325",d:"M1 1h10v10H1z"}),n.jsx("path",{fill:"#81bc06",d:"M12 1h10v10H12z"}),n.jsx("path",{fill:"#05a6f0",d:"M1 12h10v10H1z"}),n.jsx("path",{fill:"#ffba08",d:"M12 12h10v10H12z"})]}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Continuer avec Microsoft"})]}),n.jsxs("div",{className:"relative my-4",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-300"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Ou"})})]})]})},jw=({onAuthStateChange:e})=>{const[t,r]=h.useState(""),[s,a]=h.useState(""),[o,i]=h.useState(""),[l,c]=h.useState(!1),[d,u]=h.useState(""),{handleFocus:f,getPlaceholder:m,forceHidePlaceholder:p}=Lu({email:"admin@example.com",password:"Votre mot de passe",fullName:"Votre nom complet"});h.useEffect(()=>{t&&p("email"),s&&p("password"),o&&p("fullName")},[t,s,o,p]);const[w,v]=h.useState(!1),[x,g]=h.useState(!1),{toast:y}=rt(),b=async(E,D)=>{var P,R;const{data:C,error:k}=await O.auth.signInWithPassword({email:E,password:D});return(P=k==null?void 0:k.message)!=null&&P.includes("MFA")||(R=k==null?void 0:k.message)!=null&&R.includes("verification required")?(c(!0),{error:null}):{error:k}},j=async()=>{var D;if(!d||d.length!==6)return{error:new Error("Code  6 chiffres requis")};const E=await O.auth.mfa.listFactors();if((D=E.data)!=null&&D.totp&&E.data.totp.length>0){const C=E.data.totp[0].id,{data:k,error:P}=await O.auth.mfa.challengeAndVerify({factorId:C,code:d});return{data:k,error:P}}return{error:new Error("Aucun facteur MFA trouv")}},S=async(E,D,C)=>{const k=`Entreprise ${C}`,{data:P,error:R}=await O.from("tenants").insert({name:k,slug:k.toLowerCase().replace(/\s+/g,"-"),status:"active"}).select().single();if(R||!P)return console.error("Erreur lors de la cration du tenant:",R),{error:R||new Error("Impossible de crer le tenant.")};const A=P.id,{error:I}=await O.from("invitations").insert({email:E,full_name:C,status:"pending",invitation_type:"tenant_owner",tenant_id:A});if(I)return console.error("Erreur lors de la cration de l'invitation:",I),await O.from("tenants").delete().eq("id",A),{error:I};const F=`${window.location.origin}/auth/callback`,{error:B}=await O.auth.signUp({email:E,password:D,options:{emailRedirectTo:F,data:{full_name:C}}});return{error:B}},N=async E=>{var D,C,k,P,R,A,I,F,B;E.preventDefault(),v(!0);try{const{error:T}=x?await S(t,s,o):await b(t,s);if(T){let M=" Erreur d'authentification",U=T.message||"Une erreur s'est produite.";(D=T.message)!=null&&D.toLowerCase().includes("email")&&((C=T.message)!=null&&C.toLowerCase().includes("already")||(k=T.message)!=null&&k.toLowerCase().includes("exists")||(P=T.message)!=null&&P.toLowerCase().includes("taken"))?(M=" Email dj utilis",U="Cette adresse email est dj utilise. Veuillez en choisir une autre."):(R=T.message)!=null&&R.toLowerCase().includes("invalid")||(A=T.message)!=null&&A.toLowerCase().includes("credentials")?(M=" Email ou mot de passe incorrect",U="L'email et/ou le mot de passe sont errons. Veuillez vrifier vos informations."):(I=T.message)!=null&&I.toLowerCase().includes("password")&&((F=T.message)!=null&&F.toLowerCase().includes("weak")||(B=T.message)!=null&&B.toLowerCase().includes("strength"))&&(M=" Mot de passe trop faible",U="Votre mot de passe doit contenir au moins 8 caractres avec majuscules, minuscules, chiffres et symboles."),y({title:M,description:U,variant:"destructive"})}else x?y({title:"Inscription russie",description:"Vrifiez votre email pour confirmer votre compte"}):l||y({title:"Connexion russie",description:"Vous tes maintenant connect"})}catch(T){y({title:"Erreur",description:T.message,variant:"destructive"})}finally{v(!1)}},_=async E=>{E.preventDefault(),v(!0);try{const{error:D}=await j();y(D?{title:" Code incorrect",description:"Le code MFA est incorrect. Veuillez ressayer.",variant:"destructive"}:{title:" Connexion russie",description:"Authentification  deux facteurs valide"})}catch(D){y({title:"Erreur",description:D.message,variant:"destructive"})}finally{v(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsxs(V,{className:"w-full max-w-md",children:[n.jsxs(le,{children:[n.jsx(ce,{children:x?"Crer un compte":"Connexion"}),n.jsx(sn,{children:x?"Crez votre compte admin pour accder  l'application":"Connectez-vous avec vos identifiants admin"})]}),n.jsxs(W,{children:[!l&&!x&&n.jsx(TU,{}),l?n.jsxs("form",{onSubmit:_,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"mfaCode",children:"Code d'authentification  deux facteurs"}),n.jsx(ye,{id:"mfaCode",type:"text",value:d,onChange:E=>{const D=E.target.value.replace(/\D/g,"").slice(0,6);u(D)},placeholder:"000000",maxLength:6,className:"text-center text-2xl font-mono tracking-widest",autoComplete:"off",required:!0}),n.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Entrez le code  6 chiffres depuis votre application d'authentification"})]}),n.jsx(L,{type:"submit",className:"w-full",disabled:w||d.length!==6,children:w?"Vrification...":"Vrifier"}),n.jsx(L,{type:"button",variant:"outline",className:"w-full",onClick:()=>{c(!1),u("")},children:"Retour"})]}):n.jsxs("form",{onSubmit:N,className:"space-y-4",autoComplete:"off",children:[x&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"fullName",children:"Nom complet"}),n.jsx(ye,{id:"fullName",type:"text",value:o,onChange:E=>i(E.target.value),onFocus:()=>f("fullName"),onClick:()=>f("fullName"),placeholder:m("fullName",o),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"email",children:"Email"}),n.jsx(ye,{id:"email",type:"email",value:t,onChange:E=>r(E.target.value),onFocus:()=>f("email"),onClick:()=>f("email"),placeholder:m("email",t),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"password",children:"Mot de passe"}),n.jsx(ye,{id:"password",type:"password",value:s,onChange:E=>a(E.target.value),onFocus:()=>f("password"),onClick:()=>f("password"),placeholder:m("password",s),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0})]}),n.jsx(L,{type:"submit",className:"w-full",disabled:w,children:w?"Chargement...":x?"Crer le compte":"Se connecter"})]}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx(L,{variant:"link",onClick:()=>g(!x),className:"text-sm",children:x?"Dj un compte ? Se connecter":"Crer un compte admin"})})]})]})})};function Nw(){const{theme:e,setTheme:t}=A2(),[r,s]=h.useState(!1);return h.useEffect(()=>{s(!0)},[]),r?n.jsxs(L,{variant:"outline",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),className:"transition-smooth hover-glow glass border-primary/30",children:[e==="light"?n.jsx(T5,{className:"h-4 w-4 text-primary"}):n.jsx(L5,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"sr-only",children:"Changer de thme"})]}):n.jsx(L,{variant:"outline",size:"icon",className:"transition-smooth",children:n.jsx("div",{className:"h-4 w-4"})})}const PU=xc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function re({className:e,variant:t,...r}){return n.jsx("div",{className:pe(PU({variant:t}),e),...r})}var sx="focusScope.autoFocusOnMount",ax="focusScope.autoFocusOnUnmount",E1={bubbles:!1,cancelable:!0},RU="FocusScope",$u=h.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=h.useState(null),d=Rt(a),u=Rt(o),f=h.useRef(null),m=Ae(t,v=>c(v)),p=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(s){let v=function(b){if(p.paused||!l)return;const j=b.target;l.contains(j)?f.current=j:Ua(f.current,{select:!0})},x=function(b){if(p.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||Ua(f.current,{select:!0}))},g=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Ua(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const y=new MutationObserver(g);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),y.disconnect()}}},[s,l,p.paused]),h.useEffect(()=>{if(l){D1.add(p);const v=document.activeElement;if(!l.contains(v)){const g=new CustomEvent(sx,E1);l.addEventListener(sx,d),l.dispatchEvent(g),g.defaultPrevented||(AU($U(tD(l)),{select:!0}),document.activeElement===v&&Ua(l))}return()=>{l.removeEventListener(sx,d),setTimeout(()=>{const g=new CustomEvent(ax,E1);l.addEventListener(ax,u),l.dispatchEvent(g),g.defaultPrevented||Ua(v??document.body,{select:!0}),l.removeEventListener(ax,u),D1.remove(p)},0)}}},[l,d,u,p]);const w=h.useCallback(v=>{if(!r&&!s||p.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,g=document.activeElement;if(x&&g){const y=v.currentTarget,[b,j]=MU(y);b&&j?!v.shiftKey&&g===j?(v.preventDefault(),r&&Ua(b,{select:!0})):v.shiftKey&&g===b&&(v.preventDefault(),r&&Ua(j,{select:!0})):g===y&&v.preventDefault()}},[r,s,p.paused]);return n.jsx(je.div,{tabIndex:-1,...i,ref:m,onKeyDown:w})});$u.displayName=RU;function AU(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(Ua(s,{select:t}),document.activeElement!==r)return}function MU(e){const t=tD(e),r=k1(t,e),s=k1(t.reverse(),e);return[r,s]}function tD(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function k1(e,t){for(const r of e)if(!IU(r,{upTo:t}))return r}function IU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function OU(e){return e instanceof HTMLInputElement&&"select"in e}function Ua(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&OU(e)&&t&&e.select()}}var D1=LU();function LU(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=T1(e,t),e.unshift(t)},remove(t){var r;e=T1(e,t),(r=e[0])==null||r.resume()}}}function T1(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function $U(e){return e.filter(t=>t.tagName!=="A")}var ox=0;function yp(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??P1()),document.body.insertAdjacentElement("beforeend",e[1]??P1()),ox++,()=>{ox===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ox--}},[])}function P1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Rs=function(){return Rs=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Rs.apply(this,arguments)};function rD(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function FU(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var ch="right-scroll-bar-position",dh="width-before-scroll-bar",zU="with-scroll-bars-hidden",BU="--removed-body-scroll-bar-size";function ix(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function UU(e,t){var r=h.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var VU=typeof window<"u"?h.useLayoutEffect:h.useEffect,R1=new WeakMap;function WU(e,t){var r=UU(null,function(s){return e.forEach(function(a){return ix(a,s)})});return VU(function(){var s=R1.get(r);if(s){var a=new Set(s),o=new Set(e),i=r.current;a.forEach(function(l){o.has(l)||ix(l,null)}),o.forEach(function(l){a.has(l)||ix(l,i)})}R1.set(r,e)},[e]),r}function HU(e){return e}function qU(e,t){t===void 0&&(t=HU);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var i=t(o,s);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){s=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var u=i;i=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),r}}}};return a}function GU(e){e===void 0&&(e={});var t=qU(null);return t.options=Rs({async:!0,ssr:!1},e),t}var nD=function(e){var t=e.sideCar,r=rD(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return h.createElement(s,Rs({},r))};nD.isSideCarExport=!0;function KU(e,t){return e.useMedium(t),nD}var sD=GU(),lx=function(){},wp=h.forwardRef(function(e,t){var r=h.useRef(null),s=h.useState({onScrollCapture:lx,onWheelCapture:lx,onTouchMoveCapture:lx}),a=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,f=e.shards,m=e.sideCar,p=e.noRelative,w=e.noIsolation,v=e.inert,x=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,b=e.gapMode,j=rD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,N=WU([r,t]),_=Rs(Rs({},j),a);return h.createElement(h.Fragment,null,u&&h.createElement(S,{sideCar:sD,removeScrollBar:d,shards:f,noRelative:p,noIsolation:w,inert:v,setCallbacks:o,allowPinchZoom:!!x,lockRef:r,gapMode:b}),i?h.cloneElement(h.Children.only(l),Rs(Rs({},_),{ref:N})):h.createElement(y,Rs({},_,{className:c,ref:N}),l))});wp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wp.classNames={fullWidth:dh,zeroRight:ch};var YU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XU(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=YU();return t&&e.setAttribute("nonce",t),e}function JU(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function QU(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ZU=function(){var e=0,t=null;return{add:function(r){e==0&&(t=XU())&&(JU(t,r),QU(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eV=function(){var e=ZU();return function(t,r){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},aD=function(){var e=eV(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},tV={left:0,top:0,right:0,gap:0},cx=function(e){return parseInt(e||"",10)||0},rV=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[cx(r),cx(s),cx(a)]},nV=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tV;var t=rV(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},sV=aD(),Rl="data-scroll-locked",aV=function(e,t,r,s){var a=e.left,o=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(zU,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Rl,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ch,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(dh,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(ch," .").concat(ch,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(dh," .").concat(dh,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Rl,`] {
    `).concat(BU,": ").concat(l,`px;
  }
`)},A1=function(){var e=parseInt(document.body.getAttribute(Rl)||"0",10);return isFinite(e)?e:0},oV=function(){h.useEffect(function(){return document.body.setAttribute(Rl,(A1()+1).toString()),function(){var e=A1()-1;e<=0?document.body.removeAttribute(Rl):document.body.setAttribute(Rl,e.toString())}},[])},iV=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;oV();var o=h.useMemo(function(){return nV(a)},[a]);return h.createElement(sV,{styles:aV(o,!t,a,r?"":"!important")})},py=!1;if(typeof window<"u")try{var Mf=Object.defineProperty({},"passive",{get:function(){return py=!0,!0}});window.addEventListener("test",Mf,Mf),window.removeEventListener("test",Mf,Mf)}catch{py=!1}var Ji=py?{passive:!1}:!1,lV=function(e){return e.tagName==="TEXTAREA"},oD=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!lV(e)&&r[t]==="visible")},cV=function(e){return oD(e,"overflowY")},dV=function(e){return oD(e,"overflowX")},M1=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=iD(e,s);if(a){var o=lD(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},uV=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},fV=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},iD=function(e,t){return e==="v"?cV(t):dV(t)},lD=function(e,t){return e==="v"?uV(t):fV(t)},hV=function(e,t){return e==="h"&&t==="rtl"?-1:1},mV=function(e,t,r,s,a){var o=hV(e,window.getComputedStyle(t).direction),i=o*s,l=r.target,c=t.contains(l),d=!1,u=i>0,f=0,m=0;do{if(!l)break;var p=lD(e,l),w=p[0],v=p[1],x=p[2],g=v-x-o*w;(w||g)&&iD(e,l)&&(f+=g,m+=w);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(f)<1||!a)||!u&&(Math.abs(m)<1||!a))&&(d=!0),d},If=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},I1=function(e){return[e.deltaX,e.deltaY]},O1=function(e){return e&&"current"in e?e.current:e},pV=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gV=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},xV=0,Qi=[];function vV(e){var t=h.useRef([]),r=h.useRef([0,0]),s=h.useRef(),a=h.useState(xV++)[0],o=h.useState(aD)[0],i=h.useRef(e);h.useEffect(function(){i.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=FU([e.lockRef.current],(e.shards||[]).map(O1),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var g=If(v),y=r.current,b="deltaX"in v?v.deltaX:y[0]-g[0],j="deltaY"in v?v.deltaY:y[1]-g[1],S,N=v.target,_=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in v&&_==="h"&&N.type==="range")return!1;var E=M1(_,N);if(!E)return!0;if(E?S=_:(S=_==="v"?"h":"v",E=M1(_,N)),!E)return!1;if(!s.current&&"changedTouches"in v&&(b||j)&&(s.current=S),!S)return!0;var D=s.current||S;return mV(D,x,v,D==="h"?b:j,!0)},[]),c=h.useCallback(function(v){var x=v;if(!(!Qi.length||Qi[Qi.length-1]!==o)){var g="deltaY"in x?I1(x):If(x),y=t.current.filter(function(S){return S.name===x.type&&(S.target===x.target||x.target===S.shadowParent)&&pV(S.delta,g)})[0];if(y&&y.should){x.cancelable&&x.preventDefault();return}if(!y){var b=(i.current.shards||[]).map(O1).filter(Boolean).filter(function(S){return S.contains(x.target)}),j=b.length>0?l(x,b[0]):!i.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),d=h.useCallback(function(v,x,g,y){var b={name:v,delta:x,target:g,should:y,shadowParent:yV(g)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),u=h.useCallback(function(v){r.current=If(v),s.current=void 0},[]),f=h.useCallback(function(v){d(v.type,I1(v),v.target,l(v,e.lockRef.current))},[]),m=h.useCallback(function(v){d(v.type,If(v),v.target,l(v,e.lockRef.current))},[]);h.useEffect(function(){return Qi.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Ji),document.addEventListener("touchmove",c,Ji),document.addEventListener("touchstart",u,Ji),function(){Qi=Qi.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,Ji),document.removeEventListener("touchmove",c,Ji),document.removeEventListener("touchstart",u,Ji)}},[]);var p=e.removeScrollBar,w=e.inert;return h.createElement(h.Fragment,null,w?h.createElement(o,{styles:gV(a)}):null,p?h.createElement(iV,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function yV(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const wV=KU(sD,vV);var Fu=h.forwardRef(function(e,t){return h.createElement(wp,Rs({},e,{ref:t,sideCar:wV}))});Fu.classNames=wp.classNames;var bV=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Zi=new WeakMap,Of=new WeakMap,Lf={},dx=0,cD=function(e){return e&&(e.host||cD(e.parentNode))},jV=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=cD(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},NV=function(e,t,r,s){var a=jV(t,Array.isArray(e)?e:[e]);Lf[r]||(Lf[r]=new WeakMap);var o=Lf[r],i=[],l=new Set,c=new Set(a),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};a.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))u(m);else try{var p=m.getAttribute(s),w=p!==null&&p!=="false",v=(Zi.get(m)||0)+1,x=(o.get(m)||0)+1;Zi.set(m,v),o.set(m,x),i.push(m),v===1&&w&&Of.set(m,!0),x===1&&m.setAttribute(r,"true"),w||m.setAttribute(s,"true")}catch(g){console.error("aria-hidden: cannot operate on ",m,g)}})};return u(t),l.clear(),dx++,function(){i.forEach(function(f){var m=Zi.get(f)-1,p=o.get(f)-1;Zi.set(f,m),o.set(f,p),m||(Of.has(f)||f.removeAttribute(s),Of.delete(f)),p||f.removeAttribute(r)}),dx--,dx||(Zi=new WeakMap,Zi=new WeakMap,Of=new WeakMap,Lf={})}},bp=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=bV(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),NV(s,a,r,"aria-hidden")):function(){return null}},jp="Dialog",[dD,uD]=sr(jp),[SV,js]=dD(jp),fD=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=h.useRef(null),c=h.useRef(null),[d,u]=Br({prop:s,defaultProp:a??!1,onChange:o,caller:jp});return n.jsx(SV,{scope:t,triggerRef:l,contentRef:c,contentId:zn(),titleId:zn(),descriptionId:zn(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(f=>!f),[u]),modal:i,children:r})};fD.displayName=jp;var hD="DialogTrigger",mD=h.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=js(hD,r),o=Ae(t,a.triggerRef);return n.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Cw(a.open),...s,ref:o,onClick:ue(e.onClick,a.onOpenToggle)})});mD.displayName=hD;var Sw="DialogPortal",[_V,pD]=dD(Sw,{forceMount:void 0}),gD=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:a}=e,o=js(Sw,t);return n.jsx(_V,{scope:t,forceMount:r,children:h.Children.map(s,i=>n.jsx(mr,{present:r||o.open,children:n.jsx(gc,{asChild:!0,container:a,children:i})}))})};gD.displayName=Sw;var rm="DialogOverlay",xD=h.forwardRef((e,t)=>{const r=pD(rm,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=js(rm,e.__scopeDialog);return o.modal?n.jsx(mr,{present:s||o.open,children:n.jsx(EV,{...a,ref:t})}):null});xD.displayName=rm;var CV=_o("DialogOverlay.RemoveScroll"),EV=h.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=js(rm,r);return n.jsx(Fu,{as:CV,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(je.div,{"data-state":Cw(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Ci="DialogContent",vD=h.forwardRef((e,t)=>{const r=pD(Ci,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=js(Ci,e.__scopeDialog);return n.jsx(mr,{present:s||o.open,children:o.modal?n.jsx(kV,{...a,ref:t}):n.jsx(DV,{...a,ref:t})})});vD.displayName=Ci;var kV=h.forwardRef((e,t)=>{const r=js(Ci,e.__scopeDialog),s=h.useRef(null),a=Ae(t,r.contentRef,s);return h.useEffect(()=>{const o=s.current;if(o)return bp(o)},[]),n.jsx(yD,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:ue(e.onFocusOutside,o=>o.preventDefault())})}),DV=h.forwardRef((e,t)=>{const r=js(Ci,e.__scopeDialog),s=h.useRef(!1),a=h.useRef(!1);return n.jsx(yD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),yD=h.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=js(Ci,r),c=h.useRef(null),d=Ae(t,c);return yp(),n.jsxs(n.Fragment,{children:[n.jsx($u,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(Li,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Cw(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(PV,{titleId:l.titleId}),n.jsx(AV,{contentRef:c,descriptionId:l.descriptionId})]})]})}),_w="DialogTitle",wD=h.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=js(_w,r);return n.jsx(je.h2,{id:a.titleId,...s,ref:t})});wD.displayName=_w;var bD="DialogDescription",jD=h.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=js(bD,r);return n.jsx(je.p,{id:a.descriptionId,...s,ref:t})});jD.displayName=bD;var ND="DialogClose",SD=h.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=js(ND,r);return n.jsx(je.button,{type:"button",...s,ref:t,onClick:ue(e.onClick,()=>a.onOpenChange(!1))})});SD.displayName=ND;function Cw(e){return e?"open":"closed"}var _D="DialogTitleWarning",[TV,CD]=b3(_D,{contentName:Ci,titleName:_w,docsSlug:"dialog"}),PV=({titleId:e})=>{const t=CD(_D),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},RV="DialogDescriptionWarning",AV=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${CD(RV).contentName}}.`;return h.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},ED=fD,kD=mD,DD=gD,Ew=xD,kw=vD,Dw=wD,Tw=jD,Pw=SD;const yt=ED,bn=kD,MV=DD,TD=h.forwardRef(({className:e,...t},r)=>n.jsx(Ew,{ref:r,className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));TD.displayName=Ew.displayName;const ft=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(MV,{children:[n.jsx(TD,{}),n.jsxs(kw,{ref:s,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(Pw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[n.jsx(Ro,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ft.displayName=kw.displayName;const ht=({className:e,...t})=>n.jsx("div",{className:pe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ht.displayName="DialogHeader";const Np=({className:e,...t})=>n.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Np.displayName="DialogFooter";const mt=h.forwardRef(({className:e,...t},r)=>n.jsx(Dw,{ref:r,className:pe("text-lg font-semibold leading-none tracking-tight",e),...t}));mt.displayName=Dw.displayName;const Sp=h.forwardRef(({className:e,...t},r)=>n.jsx(Tw,{ref:r,className:pe("text-sm text-muted-foreground",e),...t}));Sp.displayName=Tw.displayName;function _p(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Cp="Switch",[IV,loe]=sr(Cp),[OV,LV]=IV(Cp),PD=h.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...f}=e,[m,p]=h.useState(null),w=Ae(t,b=>p(b)),v=h.useRef(!1),x=m?u||!!m.closest("form"):!0,[g,y]=Br({prop:a,defaultProp:o??!1,onChange:d,caller:Cp});return n.jsxs(OV,{scope:r,checked:g,disabled:l,children:[n.jsx(je.button,{type:"button",role:"switch","aria-checked":g,"aria-required":i,"data-state":ID(g),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:w,onClick:ue(e.onClick,b=>{y(j=>!j),x&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),x&&n.jsx(MD,{control:m,bubbles:!v.current,name:s,value:c,checked:g,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});PD.displayName=Cp;var RD="SwitchThumb",AD=h.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,a=LV(RD,r);return n.jsx(je.span,{"data-state":ID(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});AD.displayName=RD;var $V="SwitchBubbleInput",MD=h.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:s=!0,...a},o)=>{const i=h.useRef(null),l=Ae(i,o),c=_p(r),d=sp(t);return h.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&p){const w=new Event("click",{bubbles:s});p.call(u,r),u.dispatchEvent(w)}},[c,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});MD.displayName=$V;function ID(e){return e?"checked":"unchecked"}var OD=PD,FV=AD;const rc=h.forwardRef(({className:e,...t},r)=>n.jsx(OD,{className:pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:n.jsx(FV,{className:pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));rc.displayName=OD.displayName;var zV=h.createContext(void 0);function Bi(e){const t=h.useContext(zV);return e||t||"ltr"}var ux="rovingFocusGroup.onEntryFocus",BV={bubbles:!1,cancelable:!0},zu="RovingFocusGroup",[gy,LD,UV]=Tu(zu),[VV,Cc]=sr(zu,[UV]),[WV,HV]=VV(zu),$D=h.forwardRef((e,t)=>n.jsx(gy.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(gy.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(qV,{...e,ref:t})})}));$D.displayName=zu;var qV=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=e,m=h.useRef(null),p=Ae(t,m),w=Bi(o),[v,x]=Br({prop:i,defaultProp:l??null,onChange:c,caller:zu}),[g,y]=h.useState(!1),b=Rt(d),j=LD(r),S=h.useRef(!1),[N,_]=h.useState(0);return h.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(ux,b),()=>E.removeEventListener(ux,b)},[b]),n.jsx(WV,{scope:r,orientation:s,dir:w,loop:a,currentTabStopId:v,onItemFocus:h.useCallback(E=>x(E),[x]),onItemShiftTab:h.useCallback(()=>y(!0),[]),onFocusableItemAdd:h.useCallback(()=>_(E=>E+1),[]),onFocusableItemRemove:h.useCallback(()=>_(E=>E-1),[]),children:n.jsx(je.div,{tabIndex:g||N===0?-1:0,"data-orientation":s,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:ue(e.onMouseDown,()=>{S.current=!0}),onFocus:ue(e.onFocus,E=>{const D=!S.current;if(E.target===E.currentTarget&&D&&!g){const C=new CustomEvent(ux,BV);if(E.currentTarget.dispatchEvent(C),!C.defaultPrevented){const k=j().filter(F=>F.focusable),P=k.find(F=>F.active),R=k.find(F=>F.id===v),I=[P,R,...k].filter(Boolean).map(F=>F.ref.current);BD(I,u)}}S.current=!1}),onBlur:ue(e.onBlur,()=>y(!1))})})}),FD="RovingFocusGroupItem",zD=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:o,children:i,...l}=e,c=zn(),d=o||c,u=HV(FD,r),f=u.currentTabStopId===d,m=LD(r),{onFocusableItemAdd:p,onFocusableItemRemove:w,currentTabStopId:v}=u;return h.useEffect(()=>{if(s)return p(),()=>w()},[s,p,w]),n.jsx(gy.ItemSlot,{scope:r,id:d,focusable:s,active:a,children:n.jsx(je.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:ue(e.onMouseDown,x=>{s?u.onItemFocus(d):x.preventDefault()}),onFocus:ue(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:ue(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const g=YV(x,u.orientation,u.dir);if(g!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=m().filter(j=>j.focusable).map(j=>j.ref.current);if(g==="last")b.reverse();else if(g==="prev"||g==="next"){g==="prev"&&b.reverse();const j=b.indexOf(x.currentTarget);b=u.loop?XV(b,j+1):b.slice(j+1)}setTimeout(()=>BD(b))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:v!=null}):i})})});zD.displayName=FD;var GV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function KV(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function YV(e,t,r){const s=KV(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return GV[s]}function BD(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function XV(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var Rw=$D,Aw=zD,Ep="Tabs",[JV,coe]=sr(Ep,[Cc]),UD=Cc(),[QV,Mw]=JV(Ep),VD=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Bi(l),[f,m]=Br({prop:s,onChange:a,defaultProp:o??"",caller:Ep});return n.jsx(QV,{scope:r,baseId:zn(),value:f,onValueChange:m,orientation:i,dir:u,activationMode:c,children:n.jsx(je.div,{dir:u,"data-orientation":i,...d,ref:t})})});VD.displayName=Ep;var WD="TabsList",HD=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,o=Mw(WD,r),i=UD(r);return n.jsx(Rw,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:n.jsx(je.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});HD.displayName=WD;var qD="TabsTrigger",GD=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...o}=e,i=Mw(qD,r),l=UD(r),c=XD(i.baseId,s),d=JD(i.baseId,s),u=s===i.value;return n.jsx(Aw,{asChild:!0,...l,focusable:!a,active:u,children:n.jsx(je.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:ue(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?i.onValueChange(s):f.preventDefault()}),onKeyDown:ue(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(s)}),onFocus:ue(e.onFocus,()=>{const f=i.activationMode!=="manual";!u&&!a&&f&&i.onValueChange(s)})})})});GD.displayName=qD;var KD="TabsContent",YD=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:o,...i}=e,l=Mw(KD,r),c=XD(l.baseId,s),d=JD(l.baseId,s),u=s===l.value,f=h.useRef(u);return h.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),n.jsx(mr,{present:a||u,children:({present:m})=>n.jsx(je.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&o})})});YD.displayName=KD;function XD(e,t){return`${e}-trigger-${t}`}function JD(e,t){return`${e}-content-${t}`}var ZV=VD,QD=HD,ZD=GD,eT=YD;const pr=ZV,ar=h.forwardRef(({className:e,...t},r)=>n.jsx(QD,{ref:r,className:pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ar.displayName=QD.displayName;const Ce=h.forwardRef(({className:e,...t},r)=>n.jsx(ZD,{ref:r,className:pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Ce.displayName=ZD.displayName;const Ee=h.forwardRef(({className:e,...t},r)=>n.jsx(eT,{ref:r,className:pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ee.displayName=eT.displayName;function cu(e,[t,r]){return Math.min(r,Math.max(t,e))}function eW(e,t){return h.useReducer((r,s)=>t[r][s]??r,e)}var Iw="ScrollArea",[tT,doe]=sr(Iw),[tW,Yn]=tT(Iw),rT=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:o=600,...i}=e,[l,c]=h.useState(null),[d,u]=h.useState(null),[f,m]=h.useState(null),[p,w]=h.useState(null),[v,x]=h.useState(null),[g,y]=h.useState(0),[b,j]=h.useState(0),[S,N]=h.useState(!1),[_,E]=h.useState(!1),D=Ae(t,k=>c(k)),C=Bi(a);return n.jsx(tW,{scope:r,type:s,dir:C,scrollHideDelay:o,scrollArea:l,viewport:d,onViewportChange:u,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:w,scrollbarXEnabled:S,onScrollbarXEnabledChange:N,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:_,onScrollbarYEnabledChange:E,onCornerWidthChange:y,onCornerHeightChange:j,children:n.jsx(je.div,{dir:C,...i,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});rT.displayName=Iw;var nT="ScrollAreaViewport",sT=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:a,...o}=e,i=Yn(nT,r),l=h.useRef(null),c=Ae(t,l,i.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(je.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});sT.displayName=nT;var Gs="ScrollAreaScrollbar",Ow=h.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Yn(Gs,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,l=e.orientation==="horizontal";return h.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),a.type==="hover"?n.jsx(rW,{...s,ref:t,forceMount:r}):a.type==="scroll"?n.jsx(nW,{...s,ref:t,forceMount:r}):a.type==="auto"?n.jsx(aT,{...s,ref:t,forceMount:r}):a.type==="always"?n.jsx(Lw,{...s,ref:t}):null});Ow.displayName=Gs;var rW=h.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Yn(Gs,e.__scopeScrollArea),[o,i]=h.useState(!1);return h.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},u=()=>{c=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(mr,{present:r||o,children:n.jsx(aT,{"data-state":o?"visible":"hidden",...s,ref:t})})}),nW=h.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Yn(Gs,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Dp(()=>c("SCROLL_END"),100),[l,c]=eW("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),h.useEffect(()=>{const d=a.viewport,u=o?"scrollLeft":"scrollTop";if(d){let f=d[u];const m=()=>{const p=d[u];f!==p&&(c("SCROLL"),i()),f=p};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,o,c,i]),n.jsx(mr,{present:r||l!=="hidden",children:n.jsx(Lw,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:ue(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ue(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),aT=h.forwardRef((e,t)=>{const r=Yn(Gs,e.__scopeScrollArea),{forceMount:s,...a}=e,[o,i]=h.useState(!1),l=e.orientation==="horizontal",c=Dp(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?d:u)}},10);return nc(r.viewport,c),nc(r.content,c),n.jsx(mr,{present:s||o,children:n.jsx(Lw,{"data-state":o?"visible":"hidden",...a,ref:t})})}),Lw=h.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=Yn(Gs,e.__scopeScrollArea),o=h.useRef(null),i=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=dT(l.viewport,l.content),u={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function f(m,p){return cW(m,i.current,l,p)}return r==="horizontal"?n.jsx(sW,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollLeft,p=L1(m,l,a.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=f(m,a.dir))}}):r==="vertical"?n.jsx(aW,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollTop,p=L1(m,l);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=f(m))}}):null}),sW=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Yn(Gs,e.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=Ae(t,c,o.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(iT,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":kp(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(o.viewport){const m=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(m),fT(m,f)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:sm(i.paddingLeft),paddingEnd:sm(i.paddingRight)}})}})}),aW=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Yn(Gs,e.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=Ae(t,c,o.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(iT,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":kp(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(o.viewport){const m=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(m),fT(m,f)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:sm(i.paddingTop),paddingEnd:sm(i.paddingBottom)}})}})}),[oW,oT]=tT(Gs),iT=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:f,...m}=e,p=Yn(Gs,r),[w,v]=h.useState(null),x=Ae(t,D=>v(D)),g=h.useRef(null),y=h.useRef(""),b=p.viewport,j=s.content-s.viewport,S=Rt(u),N=Rt(c),_=Dp(f,10);function E(D){if(g.current){const C=D.clientX-g.current.left,k=D.clientY-g.current.top;d({x:C,y:k})}}return h.useEffect(()=>{const D=C=>{const k=C.target;(w==null?void 0:w.contains(k))&&S(C,j)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[b,w,j,S]),h.useEffect(N,[s,N]),nc(w,_),nc(p.content,_),n.jsx(oW,{scope:r,scrollbar:w,hasThumb:a,onThumbChange:Rt(o),onThumbPointerUp:Rt(i),onThumbPositionChange:N,onThumbPointerDown:Rt(l),children:n.jsx(je.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:ue(e.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),g.current=w.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(D))}),onPointerMove:ue(e.onPointerMove,E),onPointerUp:ue(e.onPointerUp,D=>{const C=D.target;C.hasPointerCapture(D.pointerId)&&C.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),g.current=null})})})}),nm="ScrollAreaThumb",lT=h.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=oT(nm,e.__scopeScrollArea);return n.jsx(mr,{present:r||a.hasThumb,children:n.jsx(iW,{ref:t,...s})})}),iW=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...a}=e,o=Yn(nm,r),i=oT(nm,r),{onThumbPositionChange:l}=i,c=Ae(t,f=>i.onThumbChange(f)),d=h.useRef(void 0),u=Dp(()=>{d.current&&(d.current(),d.current=void 0)},100);return h.useEffect(()=>{const f=o.viewport;if(f){const m=()=>{if(u(),!d.current){const p=dW(f,l);d.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[o.viewport,u,l]),n.jsx(je.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ue(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),w=f.clientX-p.left,v=f.clientY-p.top;i.onThumbPointerDown({x:w,y:v})}),onPointerUp:ue(e.onPointerUp,i.onThumbPointerUp)})});lT.displayName=nm;var $w="ScrollAreaCorner",cT=h.forwardRef((e,t)=>{const r=Yn($w,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?n.jsx(lW,{...e,ref:t}):null});cT.displayName=$w;var lW=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,a=Yn($w,r),[o,i]=h.useState(0),[l,c]=h.useState(0),d=!!(o&&l);return nc(a.scrollbarX,()=>{var f;const u=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),nc(a.scrollbarY,()=>{var f;const u=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(u),i(u)}),d?n.jsx(je.div,{...s,ref:t,style:{width:o,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function sm(e){return e?parseInt(e,10):0}function dT(e,t){const r=e/t;return isNaN(r)?0:r}function kp(e){const t=dT(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function cW(e,t,r,s="ltr"){const a=kp(r),o=a/2,i=t||o,l=a-i,c=r.scrollbar.paddingStart+i,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,f=s==="ltr"?[0,u]:[u*-1,0];return uT([c,d],f)(e)}function L1(e,t,r="ltr"){const s=kp(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,i=t.content-t.viewport,l=o-s,c=r==="ltr"?[0,i]:[i*-1,0],d=cu(e,c);return uT([0,i],[0,l])(d)}function uT(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function fT(e,t){return e>0&&e<t}var dW=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},i=r.left!==o.left,l=r.top!==o.top;(i||l)&&t(),r=o,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Dp(e,t){const r=Rt(e),s=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(s.current),[]),h.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function nc(e,t){const r=Rt(t);$t(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var hT=rT,uW=sT,fW=cT;const $r=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(hT,{ref:s,className:pe("relative overflow-hidden",e),...r,children:[n.jsx(uW,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(mT,{}),n.jsx(fW,{})]}));$r.displayName=hT.displayName;const mT=h.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(Ow,{ref:s,orientation:t,className:pe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(lT,{className:"relative flex-1 rounded-full bg-border"})}));mT.displayName=Ow.displayName;const pT=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState(!0),[i,l]=h.useState(0),[c,d]=h.useState(0),[u,f]=h.useState(null),{toast:m}=rt(),p=async()=>{try{const{data:D}=await O.auth.getUser();if(!D.user)return;const{data:C,error:k}=await O.from("notifications").select("*").eq("recipient_id",D.user.id).order("created_at",{ascending:!1}).limit(50);if(k)throw k;const P=C||[];t(P),l(P.filter(A=>!A.read_at).length);const R=localStorage.getItem("notifications_last_viewed");if(R){f(R);const A=new Date(R);d(P.filter(I=>new Date(I.created_at)>A&&!I.dismissed_at).length)}else d(P.filter(A=>!A.dismissed_at).length)}catch(D){console.error("Error fetching notifications:",D),m({title:"Erreur",description:"Impossible de charger les notifications",variant:"destructive"})}},w=async()=>{try{const{data:D,error:C}=await O.from("notification_preferences").select("*");if(C)throw C;s(D||[])}catch(D){console.error("Error fetching preferences:",D)}},v=async D=>{try{const{error:C}=await O.rpc("mark_notifications_read",{notification_ids:D});if(C)throw C;t(k=>k.map(P=>D.includes(P.id)?{...P,read_at:new Date().toISOString()}:P)),l(k=>Math.max(0,k-D.length))}catch(C){console.error("Error marking notifications as read:",C),m({title:"Erreur",description:"Impossible de marquer les notifications comme lues",variant:"destructive"})}},x=async()=>{const D=e.filter(C=>!C.read_at).map(C=>C.id);D.length>0&&await v(D)},g=async()=>{const D=new Date().toISOString();localStorage.setItem("notifications_last_viewed",D),f(D),d(0);try{const C=e.filter(k=>!u||new Date(k.created_at)>new Date(u)).map(k=>k.id);if(C.length>0){const{error:k}=await O.from("notifications").update({viewed_at:D}).in("id",C);if(k)throw k}}catch(C){console.error("Error marking notifications as viewed:",C)}},y=async D=>{try{const C=new Date().toISOString(),{error:k}=await O.from("notifications").update({dismissed_at:C}).in("id",D);if(k)throw k;t(P=>P.map(R=>D.includes(R.id)?{...R,dismissed_at:C}:R)),localStorage.setItem("notifications_last_viewed",C),f(C),d(0),m({title:" Notifications fermes",description:"Les notifications ont t marques comme vues.",variant:"default"})}catch(C){console.error("Error dismissing notifications:",C),m({title:"Erreur",description:"Impossible de fermer les notifications",variant:"destructive"})}},b=async(D,C,k)=>{try{const{data:P}=await O.auth.getUser();if(!P.user)throw new Error("User not authenticated");const{error:R}=await O.from("notification_preferences").upsert({user_id:P.user.id,notification_type:D,enabled:C,email_enabled:k??!1,in_app_enabled:C});if(R)throw R;s(A=>A.find(F=>F.notification_type===D)?A.map(F=>F.notification_type===D?{...F,enabled:C,in_app_enabled:C,email_enabled:k??F.email_enabled}:F):[...A,{id:crypto.randomUUID(),notification_type:D,enabled:C,email_enabled:k??!1,in_app_enabled:C}]),m({title:"Succs",description:"Prfrences de notification mises  jour"})}catch(P){console.error("Error updating preference:",P),m({title:"Erreur",description:"Impossible de mettre  jour les prfrences",variant:"destructive"})}},j=D=>e.filter(C=>C.notification_type===D),S=()=>e.filter(D=>!D.read_at),N=()=>{if(!u)return e.filter(C=>!C.dismissed_at);const D=new Date(u);return e.filter(C=>new Date(C.created_at)>D&&!C.dismissed_at)},_=()=>e.filter(D=>!D.dismissed_at),E=()=>e.filter(D=>D.priority==="urgent"||D.priority==="high");return h.useEffect(()=>{p(),w();let D=null;return(async()=>{const{data:k}=await O.auth.getUser();k.user&&(D=O.channel("notifications_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${k.user.id}`},P=>{const R=P.new;t(A=>[R,...A]),l(A=>A+1),d(A=>A+1),(R.priority==="urgent"||R.priority==="high")&&m({title:R.title,description:R.message,variant:R.priority==="urgent"?"destructive":"default"})}).subscribe())})(),o(!1),()=>{D&&O.removeChannel(D)}},[]),{notifications:e,preferences:r,loading:a,unreadCount:i,unviewedCount:c,lastViewedAt:u,fetchNotifications:p,markAsRead:v,markAllAsRead:x,markAsViewed:g,markAsDismissed:y,updatePreference:b,getNotificationsByType:j,getUnreadNotifications:S,getUnviewedNotifications:N,getActiveNotifications:_,getPriorityNotifications:E}},hW=()=>{const[e,t]=h.useState([]),[r,s]=h.useState(!1),{toast:a}=rt(),o=async u=>{try{s(!0);const{data:f,error:m}=await O.functions.invoke("send-notifications",{body:{notificationIds:u,type:"send_emails"}});if(m)throw m;return a({title:"Succs",description:`${f.results.filter(p=>p.status==="email_sent").length} emails envoys`}),f}catch(f){console.error("Error sending email notifications:",f),a({title:"Erreur",description:"Impossible d'envoyer les emails de notification",variant:"destructive"})}finally{s(!1)}},i=async(u,f)=>{try{s(!0);const{data:m,error:p}=await O.functions.invoke("send-notifications",{body:{notificationIds:u,type:"send_webhook",webhookUrl:f}});if(p)throw p;return a({title:"Succs",description:"Notifications Slack envoyes"}),m}catch(m){console.error("Error sending Slack notification:",m),a({title:"Erreur",description:"Impossible d'envoyer les notifications Slack",variant:"destructive"})}finally{s(!1)}},l=async(u,f)=>{try{s(!0);const m=await Promise.all(u.map(async p=>{const{data:w}=await O.from("notifications").select("*").eq("id",p).single(),{data:v}=await O.from("profiles").select("full_name").eq("id",w==null?void 0:w.recipient_id).single();return{"@type":"MessageCard","@context":"http://schema.org/extensions",themeColor:(w==null?void 0:w.priority)==="urgent"?"d63384":"0078d4",summary:w==null?void 0:w.title,sections:[{activityTitle:w==null?void 0:w.title,activitySubtitle:`Pour: ${(v==null?void 0:v.full_name)||"Utilisateur"}`,activityImage:"https://via.placeholder.com/64/0078d4/ffffff?text=",facts:[{name:"Message:",value:w==null?void 0:w.message},{name:"Priorit:",value:w==null?void 0:w.priority},{name:"Type:",value:w==null?void 0:w.notification_type}]}]}}));for(const p of m){const w=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!w.ok)throw new Error(`Teams webhook failed: ${w.statusText}`)}a({title:"Succs",description:"Notifications Teams envoyes"})}catch(m){console.error("Error sending Teams notification:",m),a({title:"Erreur",description:"Impossible d'envoyer les notifications Teams",variant:"destructive"})}finally{s(!1)}},c=async(u,f,m)=>{if(!("Notification"in window)){a({title:"Non support",description:"Les notifications push ne sont pas supportes sur ce navigateur",variant:"destructive"});return}if(Notification.permission==="denied"){a({title:"Permission refuse",description:"Les notifications push sont bloques. Veuillez les autoriser dans les paramtres du navigateur.",variant:"destructive"});return}if(Notification.permission!=="granted"&&await Notification.requestPermission()!=="granted"){a({title:"Permission refuse",description:"Permission de notification refuse",variant:"destructive"});return}new Notification(u,{body:f,icon:"/favicon.ico",badge:"/favicon.ico",...m})},d=[{id:"email",name:"Email",type:"email",config:{enabled:!0},enabled:!0},{id:"browser",name:"Notifications navigateur",type:"webhook",config:{type:"browser_push"},enabled:!0},{id:"slack",name:"Slack",type:"slack",config:{webhookUrl:""},enabled:!1},{id:"teams",name:"Microsoft Teams",type:"teams",config:{webhookUrl:""},enabled:!1}];return h.useEffect(()=>{t(d)},[]),{channels:e,loading:r,sendEmailNotifications:o,sendSlackNotification:i,sendTeamsNotification:l,sendWebPushNotification:c,setChannels:t}};function Te(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function an(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ht(e,t){const r=Te(e);return isNaN(t)?an(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Ur(e,t){const r=Te(e);if(isNaN(t))return an(e,NaN);if(!t)return r;const s=r.getDate(),a=an(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const o=a.getDate();return s>=o?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}const Fw=6048e5,mW=864e5,gT=6e4,xT=36e5,$f=43200,$1=1440;let pW={};function Ec(){return pW}function Vr(e,t){var l,c,d,u;const r=Ec(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Te(e),o=a.getDay(),i=(o<s?7:0)+o-s;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function Ei(e){return Vr(e,{weekStartsOn:1})}function vT(e){const t=Te(e),r=t.getFullYear(),s=an(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Ei(s),o=an(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=Ei(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function Sa(e){const t=Te(e);return t.setHours(0,0,0,0),t}function sc(e){const t=Te(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Ls(e,t){const r=Sa(e),s=Sa(t),a=+r-sc(r),o=+s-sc(s);return Math.round((a-o)/mW)}function gW(e){const t=vT(e),r=an(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ei(r)}function xy(e,t){const r=t*7;return Ht(e,r)}function xW(e,t){return Ur(e,t*12)}function vW(e){let t;return e.forEach(function(r){const s=Te(r);(t===void 0||t<s||isNaN(Number(s)))&&(t=s)}),t||new Date(NaN)}function yW(e){let t;return e.forEach(r=>{const s=Te(r);(!t||t>s||isNaN(+s))&&(t=s)}),t||new Date(NaN)}function uh(e,t){const r=Te(e),s=Te(t),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}function zw(e){return an(e,Date.now())}function kr(e,t){const r=Sa(e),s=Sa(t);return+r==+s}function Bw(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function wW(e){if(!Bw(e)&&typeof e!="number")return!1;const t=Te(e);return!isNaN(Number(t))}function ac(e,t){const r=Te(e),s=Te(t),a=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return a*12+o}function bW(e,t,r){const s=Vr(e,r),a=Vr(t,r),o=+s-sc(s),i=+a-sc(a);return Math.round((o-i)/Fw)}function jW(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function NW(e,t){return+Te(e)-+Te(t)}function SW(e){const t=Te(e);return t.setHours(23,59,59,999),t}function Bu(e){const t=Te(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function _W(e){const t=Te(e);return+SW(t)==+Bu(t)}function CW(e,t){const r=Te(e),s=Te(t),a=uh(r,s),o=Math.abs(ac(r,s));let i;if(o<1)i=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*o);let l=uh(r,s)===-a;_W(Te(e))&&o===1&&uh(e,s)===1&&(l=!1),i=a*(o-Number(l))}return i===0?0:i}function EW(e,t,r){const s=NW(e,t)/1e3;return jW(r==null?void 0:r.roundingMethod)(s)}function F1(e,t){const r=Te(e.start),s=Te(e.end);let a=+r>+s;const o=a?+r:+s,i=a?s:r;i.setHours(0,0,0,0);let l=1;const c=[];for(;+i<=o;)c.push(Te(i)),i.setDate(i.getDate()+l),i.setHours(0,0,0,0);return a?c.reverse():c}function zr(e){const t=Te(e);return t.setDate(1),t.setHours(0,0,0,0),t}function yT(e){const t=Te(e),r=an(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function oc(e,t){var l,c,d,u;const r=Ec(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Te(e),o=a.getDay(),i=(o<s?-7:0)+6-(o-s);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function wT(e){return oc(e,{weekStartsOn:1})}const kW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},DW=(e,t,r)=>{let s;const a=kW[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Al(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const TW={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},PW={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},RW={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},AW={date:Al({formats:TW,defaultWidth:"full"}),time:Al({formats:PW,defaultWidth:"full"}),dateTime:Al({formats:RW,defaultWidth:"full"})},MW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},IW=(e,t,r,s)=>MW[e];function As(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const OW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},LW={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$W={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},FW={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},BW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},UW=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},VW={ordinalNumber:UW,era:As({values:OW,defaultWidth:"wide"}),quarter:As({values:LW,defaultWidth:"wide",argumentCallback:e=>e-1}),month:As({values:$W,defaultWidth:"wide"}),day:As({values:FW,defaultWidth:"wide"}),dayPeriod:As({values:zW,defaultWidth:"wide",formattingValues:BW,defaultFormattingWidth:"wide"})};function Ms(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?HW(l,f=>f.test(i)):WW(l,f=>f.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}function WW(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function HW(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function bT(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const l=t.slice(a.length);return{value:i,rest:l}}}const qW=/^(\d+)(th|st|nd|rd)?/i,GW=/\d+/i,KW={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},YW={any:[/^b/i,/^(a|c)/i]},XW={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JW={any:[/1/i,/2/i,/3/i,/4/i]},QW={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ZW={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sH={ordinalNumber:bT({matchPattern:qW,parsePattern:GW,valueCallback:e=>parseInt(e,10)}),era:Ms({matchPatterns:KW,defaultMatchWidth:"wide",parsePatterns:YW,defaultParseWidth:"any"}),quarter:Ms({matchPatterns:XW,defaultMatchWidth:"wide",parsePatterns:JW,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ms({matchPatterns:QW,defaultMatchWidth:"wide",parsePatterns:ZW,defaultParseWidth:"any"}),day:Ms({matchPatterns:eH,defaultMatchWidth:"wide",parsePatterns:tH,defaultParseWidth:"any"}),dayPeriod:Ms({matchPatterns:rH,defaultMatchWidth:"any",parsePatterns:nH,defaultParseWidth:"any"})},Uw={code:"en-US",formatDistance:DW,formatLong:AW,formatRelative:IW,localize:VW,match:sH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aH(e){const t=Te(e);return Ls(t,yT(t))+1}function jT(e){const t=Te(e),r=+Ei(t)-+gW(t);return Math.round(r/Fw)+1}function NT(e,t){var u,f,m,p;const r=Te(e),s=r.getFullYear(),a=Ec(),o=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(m=a.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=an(e,0);i.setFullYear(s+1,0,o),i.setHours(0,0,0,0);const l=Vr(i,t),c=an(e,0);c.setFullYear(s,0,o),c.setHours(0,0,0,0);const d=Vr(c,t);return r.getTime()>=l.getTime()?s+1:r.getTime()>=d.getTime()?s:s-1}function oH(e,t){var l,c,d,u;const r=Ec(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=NT(e,t),o=an(e,0);return o.setFullYear(a,0,s),o.setHours(0,0,0,0),Vr(o,t)}function ST(e,t){const r=Te(e),s=+Vr(r,t)-+oH(r,t);return Math.round(s/Fw)+1}function at(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const $a={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return at(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):at(r+1,2)},d(e,t){return at(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return at(e.getHours()%12||12,t.length)},H(e,t){return at(e.getHours(),t.length)},m(e,t){return at(e.getMinutes(),t.length)},s(e,t){return at(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return at(a,t.length)}},el={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},z1={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return $a.y(e,t)},Y:function(e,t,r,s){const a=NT(e,s),o=a>0?a:1-a;if(t==="YY"){const i=o%100;return at(i,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):at(o,t.length)},R:function(e,t){const r=vT(e);return at(r,t.length)},u:function(e,t){const r=e.getFullYear();return at(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return at(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return at(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return $a.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return at(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=ST(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):at(a,t.length)},I:function(e,t,r){const s=jT(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):at(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):$a.d(e,t)},D:function(e,t,r){const s=aH(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):at(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return at(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return at(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return at(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=el.noon:s===0?a=el.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=el.evening:s>=12?a=el.afternoon:s>=4?a=el.morning:a=el.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return $a.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):$a.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):at(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):at(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):$a.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):$a.s(e,t)},S:function(e,t){return $a.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return U1(s);case"XXXX":case"XX":return Zo(s);case"XXXXX":case"XXX":default:return Zo(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return U1(s);case"xxxx":case"xx":return Zo(s);case"xxxxx":case"xxx":default:return Zo(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+B1(s,":");case"OOOO":default:return"GMT"+Zo(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+B1(s,":");case"zzzz":default:return"GMT"+Zo(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return at(s,t.length)},T:function(e,t,r){const s=e.getTime();return at(s,t.length)}};function B1(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),o=s%60;return o===0?r+String(a):r+String(a)+t+at(o,2)}function U1(e,t){return e%60===0?(e>0?"-":"+")+at(Math.abs(e)/60,2):Zo(e,t)}function Zo(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=at(Math.trunc(s/60),2),o=at(s%60,2);return r+a+t+o}const V1=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},_T=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},iH=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return V1(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",V1(s,t)).replace("{{time}}",_T(a,t))},lH={p:_T,P:iH},cH=/^D+$/,dH=/^Y+$/,uH=["D","DD","YY","YYYY"];function fH(e){return cH.test(e)}function hH(e){return dH.test(e)}function mH(e,t,r){const s=pH(e,t,r);if(console.warn(s),uH.includes(e))throw new RangeError(s)}function pH(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vH=/^'([^]*?)'?$/,yH=/''/g,wH=/[a-zA-Z]/;function Ve(e,t,r){var u,f,m,p,w,v,x,g;const s=Ec(),a=(r==null?void 0:r.locale)??s.locale??Uw,o=(r==null?void 0:r.firstWeekContainsDate)??((f=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((v=(w=r==null?void 0:r.locale)==null?void 0:w.options)==null?void 0:v.weekStartsOn)??s.weekStartsOn??((g=(x=s.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??0,l=Te(e);if(!wW(l))throw new RangeError("Invalid time value");let c=t.match(xH).map(y=>{const b=y[0];if(b==="p"||b==="P"){const j=lH[b];return j(y,a.formatLong)}return y}).join("").match(gH).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:bH(y)};if(z1[b])return{isToken:!0,value:y};if(b.match(wH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const b=y.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&hH(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&fH(b))&&mH(b,t,String(e));const j=z1[b[0]];return j(l,b,a.localize,d)}).join("")}function bH(e){const t=e.match(vH);return t?t[1].replace(yH,"'"):e}function jH(e,t,r){const s=Ec(),a=(r==null?void 0:r.locale)??s.locale??Uw,o=2520,i=uh(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:i});let c,d;i>0?(c=Te(t),d=Te(e)):(c=Te(e),d=Te(t));const u=EW(d,c),f=(sc(d)-sc(c))/1e3,m=Math.round((u-f)/60);let p;if(m<2)return r!=null&&r.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):m===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",m,l);if(m<45)return a.formatDistance("xMinutes",m,l);if(m<90)return a.formatDistance("aboutXHours",1,l);if(m<$1){const w=Math.round(m/60);return a.formatDistance("aboutXHours",w,l)}else{if(m<o)return a.formatDistance("xDays",1,l);if(m<$f){const w=Math.round(m/$1);return a.formatDistance("xDays",w,l)}else if(m<$f*2)return p=Math.round(m/$f),a.formatDistance("aboutXMonths",p,l)}if(p=CW(d,c),p<12){const w=Math.round(m/$f);return a.formatDistance("xMonths",w,l)}else{const w=p%12,v=Math.trunc(p/12);return w<3?a.formatDistance("aboutXYears",v,l):w<9?a.formatDistance("overXYears",v,l):a.formatDistance("almostXYears",v+1,l)}}function Tp(e,t){return jH(e,zw(e),t)}function NH(e){const t=Te(e),r=t.getFullYear(),s=t.getMonth(),a=an(e,0);return a.setFullYear(r,s+1,0),a.setHours(0,0,0,0),a.getDate()}function SH(e){return Math.trunc(+Te(e)/1e3)}function _H(e){const t=Te(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function CH(e,t){return bW(_H(e),zr(e),t)+1}function vy(e,t){const r=Te(e),s=Te(t);return r.getTime()>s.getTime()}function ic(e,t){const r=Te(e),s=Te(t);return+r<+s}function EH(e,t,r){const s=Vr(e,r),a=Vr(t,r);return+s==+a}function Vw(e,t){const r=Te(e),s=Te(t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function kH(e,t){const r=Te(e),s=Te(t);return r.getFullYear()===s.getFullYear()}function DH(e,t){return EH(e,zw(e),t)}function yy(e){return kr(e,zw(e))}function TH(e,t){const r=+Te(e),[s,a]=[+Te(t.start),+Te(t.end)].sort((o,i)=>o-i);return r>=s&&r<=a}function fh(e,t){return Ht(e,-t)}function mn(e,t){const s=MH(e);let a;if(s.date){const c=IH(s.date,2);a=OH(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const o=a.getTime();let i=0,l;if(s.time&&(i=LH(s.time),isNaN(i)))return new Date(NaN);if(s.timezone){if(l=$H(s.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(o+i),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(o+i+l)}const Ff={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},PH=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,RH=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,AH=/^([+-])(\d{2})(?::?(\d{2}))?$/;function MH(e){const t={},r=e.split(Ff.dateTimeDelimiter);let s;if(r.length>2)return t;if(/:/.test(r[0])?s=r[0]:(t.date=r[0],s=r[1],Ff.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Ff.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const a=Ff.timezone.exec(s);a?(t.time=s.replace(a[1],""),t.timezone=a[1]):t.time=s}return t}function IH(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};const a=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?a:o*100,restDateString:e.slice((s[1]||s[2]).length)}}function OH(e,t){if(t===null)return new Date(NaN);const r=e.match(PH);if(!r)return new Date(NaN);const s=!!r[4],a=Zc(r[1]),o=Zc(r[2])-1,i=Zc(r[3]),l=Zc(r[4]),c=Zc(r[5])-1;if(s)return VH(t,l,c)?FH(t,l,c):new Date(NaN);{const d=new Date(0);return!BH(t,o,i)||!UH(t,a)?new Date(NaN):(d.setUTCFullYear(t,o,Math.max(a,i)),d)}}function Zc(e){return e?parseInt(e):1}function LH(e){const t=e.match(RH);if(!t)return NaN;const r=fx(t[1]),s=fx(t[2]),a=fx(t[3]);return WH(r,s,a)?r*xT+s*gT+a*1e3:NaN}function fx(e){return e&&parseFloat(e.replace(",","."))||0}function $H(e){if(e==="Z")return 0;const t=e.match(AH);if(!t)return 0;const r=t[1]==="+"?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return HH(s,a)?r*(s*xT+a*gT):NaN}function FH(e,t,r){const s=new Date(0);s.setUTCFullYear(e,0,4);const a=s.getUTCDay()||7,o=(t-1)*7+r+1-a;return s.setUTCDate(s.getUTCDate()+o),s}const zH=[31,null,31,30,31,30,31,31,30,31,30,31];function CT(e){return e%400===0||e%4===0&&e%100!==0}function BH(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(zH[t]||(CT(e)?29:28))}function UH(e,t){return t>=1&&t<=(CT(e)?366:365)}function VH(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function WH(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function HH(e,t){return t>=0&&t<=59}function hx(e,t){const r=Te(e),s=r.getFullYear(),a=r.getDate(),o=an(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const i=NH(o);return r.setMonth(t,Math.min(a,i)),r}function W1(e,t){const r=Te(e);return isNaN(+r)?an(e,NaN):(r.setFullYear(t),r)}function qH(e,t){return Ur(e,-t)}const GH={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},KH=(e,t,r)=>{let s;const a=GH[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+s:"il y a "+s:s},YH={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},XH={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},JH={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QH={date:Al({formats:YH,defaultWidth:"full"}),time:Al({formats:XH,defaultWidth:"full"}),dateTime:Al({formats:JH,defaultWidth:"full"})},ZH={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},e9=(e,t,r,s)=>ZH[e],t9={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},r9={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},n9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},s9={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},a9={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},o9=(e,t)=>{const r=Number(e),s=t==null?void 0:t.unit;if(r===0)return"0";const a=["year","week","hour","minute","second"];let o;return r===1?o=s&&a.includes(s)?"re":"er":o="me",r+o},i9=["MMM","MMMM"],l9={preprocessor:(e,t)=>e.getDate()===1||!t.some(s=>s.isToken&&i9.includes(s.value))?t:t.map(s=>s.isToken&&s.value==="do"?{isToken:!0,value:"d"}:s),ordinalNumber:o9,era:As({values:t9,defaultWidth:"wide"}),quarter:As({values:r9,defaultWidth:"wide",argumentCallback:e=>e-1}),month:As({values:n9,defaultWidth:"wide"}),day:As({values:s9,defaultWidth:"wide"}),dayPeriod:As({values:a9,defaultWidth:"wide"})},c9=/^(\d+)(ime|re|me|er|e)?/i,d9=/\d+/i,u9={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},f9={any:[/^av/i,/^ap/i]},h9={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},m9={any:[/1/i,/2/i,/3/i,/4/i]},p9={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},g9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},x9={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},v9={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},y9={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},w9={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},b9={ordinalNumber:bT({matchPattern:c9,parsePattern:d9,valueCallback:e=>parseInt(e)}),era:Ms({matchPatterns:u9,defaultMatchWidth:"wide",parsePatterns:f9,defaultParseWidth:"any"}),quarter:Ms({matchPatterns:h9,defaultMatchWidth:"wide",parsePatterns:m9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ms({matchPatterns:p9,defaultMatchWidth:"wide",parsePatterns:g9,defaultParseWidth:"any"}),day:Ms({matchPatterns:x9,defaultMatchWidth:"wide",parsePatterns:v9,defaultParseWidth:"any"}),dayPeriod:Ms({matchPatterns:y9,defaultMatchWidth:"any",parsePatterns:w9,defaultParseWidth:"any"})},ot={code:"fr",formatDistance:KH,formatLong:QH,formatRelative:e9,localize:l9,match:b9,options:{weekStartsOn:1,firstWeekContainsDate:4}},j9=({open:e,onOpenChange:t})=>{const{getUnviewedNotifications:r,getActiveNotifications:s,markAsRead:a,markAsViewed:o,markAsDismissed:i,unviewedCount:l}=pT(),{channels:c,loading:d,sendEmailNotifications:u,sendSlackNotification:f,sendTeamsNotification:m,sendWebPushNotification:p,setChannels:w}=hW(),[v,x]=h.useState(""),[g,y]=h.useState(""),[b,j]=h.useState([]),S=r(),N=s();h.useEffect(()=>{if(e&&(o(),S.length>0)){const A=S.filter(I=>I.priority==="urgent"||I.priority==="high").map(I=>I.id);j(A)}},[e,S.length,o]);const _=async()=>{b.length!==0&&(await u(b),a(b))},E=async()=>{b.length===0||!v||await f(b,v)},D=async()=>{b.length===0||!g||await m(b,g)},C=async()=>{for(const A of N.filter(I=>b.includes(I.id)))await p(A.title,A.message,{tag:A.id,requireInteraction:A.priority==="urgent",silent:A.priority==="low"})},k=async()=>{b.length!==0&&(await i(b),j([]),t(!1))},P=A=>{switch(A){case"email":return n.jsx(Ql,{className:"h-4 w-4"});case"slack":return n.jsx(Vv,{className:"h-4 w-4"});case"teams":return n.jsx(At,{className:"h-4 w-4"});case"webhook":return n.jsx(DN,{className:"h-4 w-4"});case"sms":return n.jsx(O5,{className:"h-4 w-4"});default:return n.jsx(K0,{className:"h-4 w-4"})}},R=A=>{switch(A){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-blue-500";case"low":return"bg-gray-500";default:return"bg-gray-500"}};return n.jsx(yt,{open:e,onOpenChange:t,children:n.jsxs(ft,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsx(ht,{children:n.jsxs(mt,{className:"flex items-center gap-2",children:[" Nouvelles notifications",n.jsx(re,{variant:"destructive",children:S.length}),N.length>S.length&&n.jsxs(re,{variant:"outline",children:[N.length-S.length," anciennes"]})]})}),n.jsxs(pr,{defaultValue:"notifications",className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs(ar,{className:"grid w-full grid-cols-2",children:[n.jsxs(Ce,{value:"notifications",children:["Notifications (",N.length,")"]}),n.jsx(Ce,{value:"channels",children:"Canaux de diffusion"})]}),n.jsx(Ee,{value:"notifications",className:"flex-1 flex flex-col overflow-hidden",children:N.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ea,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),n.jsx("h3",{className:"text-lg font-medium",children:"Tout est  jour !"}),n.jsx("p",{children:"Aucune nouvelle notification"})]})}):n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1 overflow-hidden",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"font-medium",children:["Notifications",S.length>0&&n.jsxs(re,{variant:"destructive",className:"ml-2",children:[S.length," nouvelles"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{variant:"outline",size:"sm",onClick:()=>{b.length===N.length?j([]):j(N.map(A=>A.id))},children:b.length===N.length?"Dslectionner tout":"Slectionner tout"}),n.jsxs(L,{variant:"destructive",size:"sm",onClick:k,disabled:b.length===0,children:["Fermer (",b.length,")"]})]})]}),n.jsx($r,{className:"h-[400px]",children:n.jsx("div",{className:"space-y-2",children:N.map(A=>{const I=S.some(F=>F.id===A.id);return n.jsxs(V,{className:`cursor-pointer transition-all ${b.includes(A.id)?"ring-2 ring-primary bg-accent/50":"hover:bg-accent/30"} ${I?"border-l-4 border-l-blue-500":""}`,onClick:()=>{j(F=>F.includes(A.id)?F.filter(B=>B!==A.id):[...F,A.id])},children:[n.jsx(le,{className:"pb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${R(A.priority)}`}),n.jsxs(ce,{className:"text-sm flex items-center gap-2",children:[A.title,I&&n.jsx(re,{variant:"secondary",className:"text-xs",children:"Nouveau"})]}),n.jsx(re,{variant:"outline",className:"text-xs ml-auto",children:A.priority})]})}),n.jsxs(W,{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:A.message}),n.jsx("div",{className:"text-xs text-muted-foreground",children:Tp(new Date(A.created_at),{addSuffix:!0,locale:ot})})]})]},A.id)})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-medium",children:"Diffuser via"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(V,{children:[n.jsx(le,{className:"pb-2",children:n.jsxs(ce,{className:"text-sm flex items-center gap-2",children:[n.jsx(Ql,{className:"h-4 w-4"}),"Email"]})}),n.jsxs(W,{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Envoyer des emails avec templates professionnels"}),n.jsxs(L,{onClick:_,disabled:b.length===0||d,className:"w-full",size:"sm",children:[n.jsx(oo,{className:"h-4 w-4 mr-2"}),"Envoyer emails (",b.length,")"]})]})]}),n.jsxs(V,{children:[n.jsx(le,{className:"pb-2",children:n.jsxs(ce,{className:"text-sm flex items-center gap-2",children:[n.jsx(DN,{className:"h-4 w-4"}),"Notifications navigateur"]})}),n.jsxs(W,{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Notifications push directes dans le navigateur"}),n.jsxs(L,{onClick:C,disabled:b.length===0,variant:"outline",className:"w-full",size:"sm",children:[n.jsx(oo,{className:"h-4 w-4 mr-2"}),"Notifier navigateur"]})]})]}),n.jsxs(V,{children:[n.jsx(le,{className:"pb-2",children:n.jsxs(ce,{className:"text-sm flex items-center gap-2",children:[n.jsx(Vv,{className:"h-4 w-4"}),"Slack"]})}),n.jsx(W,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(ye,{placeholder:"Webhook URL Slack...",value:v,onChange:A=>x(A.target.value),className:"text-xs"}),n.jsxs(L,{onClick:E,disabled:b.length===0||!v||d,variant:"outline",className:"w-full",size:"sm",children:[n.jsx(oo,{className:"h-4 w-4 mr-2"}),"Envoyer Slack"]})]})})]}),n.jsxs(V,{children:[n.jsx(le,{className:"pb-2",children:n.jsxs(ce,{className:"text-sm flex items-center gap-2",children:[n.jsx(At,{className:"h-4 w-4"}),"Microsoft Teams"]})}),n.jsx(W,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(ye,{placeholder:"Webhook URL Teams...",value:g,onChange:A=>y(A.target.value),className:"text-xs"}),n.jsxs(L,{onClick:D,disabled:b.length===0||!g||d,variant:"outline",className:"w-full",size:"sm",children:[n.jsx(oo,{className:"h-4 w-4 mr-2"}),"Envoyer Teams"]})]})})]})]})]})]})}),n.jsx(Ee,{value:"channels",className:"flex-1 overflow-hidden",children:n.jsx($r,{className:"h-full",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Configurez les diffrents canaux de notification disponibles."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(A=>n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[P(A.type),A.name,n.jsx(rc,{checked:A.enabled,onCheckedChange:I=>{w(F=>F.map(B=>B.id===A.id?{...B,enabled:I}:B))},className:"ml-auto"})]})}),n.jsx(W,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[A.type==="email"&&"Notifications par email avec templates HTML",A.type==="slack"&&"Intgration Slack via webhook",A.type==="teams"&&"Intgration Microsoft Teams",A.type==="webhook"&&A.config.type==="browser_push"&&"Notifications push navigateur"]}),(A.type==="slack"||A.type==="teams")&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsx("p",{children:"Pour configurer :"}),n.jsxs("p",{children:["1. Crez un webhook dans ",A.name]}),n.jsx("p",{children:"2. Copiez l'URL du webhook"}),n.jsx("p",{children:"3. Utilisez-la dans la section notifications"})]})]})})]},A.id))})]})})})]})]})})},N9=()=>{const[e,t]=h.useState(!1),{unviewedCount:r}=pT(),s=r,a=r>0;return n.jsxs(n.Fragment,{children:[n.jsxs(L,{variant:"ghost",size:"sm",className:"relative",onClick:()=>t(!0),children:[a?n.jsx(m5,{className:"h-4 w-4 text-blue-600"}):n.jsx(p5,{className:"h-4 w-4"}),s>0&&n.jsx(re,{variant:a?"destructive":"secondary",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center text-xs p-0 min-w-[20px]",children:s>99?"99+":s})]}),n.jsx(j9,{open:e,onOpenChange:t})]})};var S9=[" ","Enter","ArrowUp","ArrowDown"],_9=[" ","Enter"],ki="Select",[Pp,Rp,C9]=Tu(ki),[kc,uoe]=sr(ki,[C9,Ao]),Ap=Ao(),[E9,Lo]=kc(ki),[k9,D9]=kc(ki),ET=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:m,required:p,form:w}=e,v=Ap(t),[x,g]=h.useState(null),[y,b]=h.useState(null),[j,S]=h.useState(!1),N=Bi(d),[_,E]=Br({prop:s,defaultProp:a??!1,onChange:o,caller:ki}),[D,C]=Br({prop:i,defaultProp:l,onChange:c,caller:ki}),k=h.useRef(null),P=x?w||!!x.closest("form"):!0,[R,A]=h.useState(new Set),I=Array.from(R).map(F=>F.props.value).join(";");return n.jsx(ap,{...v,children:n.jsxs(E9,{required:p,scope:t,trigger:x,onTriggerChange:g,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:zn(),value:D,onValueChange:C,open:_,onOpenChange:E,dir:N,triggerPointerDownPosRef:k,disabled:m,children:[n.jsx(Pp.Provider,{scope:t,children:n.jsx(k9,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(F=>{A(B=>new Set(B).add(F))},[]),onNativeOptionRemove:h.useCallback(F=>{A(B=>{const T=new Set(B);return T.delete(F),T})},[]),children:r})}),P?n.jsxs(JT,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:D,onChange:F=>C(F.target.value),disabled:m,form:w,children:[D===void 0?n.jsx("option",{value:""}):null,Array.from(R)]},I):null]})})};ET.displayName=ki;var kT="SelectTrigger",DT=h.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,o=Ap(r),i=Lo(kT,r),l=i.disabled||s,c=Ae(t,i.onTriggerChange),d=Rp(r),u=h.useRef("touch"),[f,m,p]=ZT(v=>{const x=d().filter(b=>!b.disabled),g=x.find(b=>b.value===i.value),y=eP(x,v,g);y!==void 0&&i.onValueChange(y.value)}),w=v=>{l||(i.onOpenChange(!0),p()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return n.jsx(Au,{asChild:!0,...o,children:n.jsx(je.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":QT(i.value)?"":void 0,...a,ref:c,onClick:ue(a.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&w(v)}),onPointerDown:ue(a.onPointerDown,v=>{u.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:ue(a.onKeyDown,v=>{const x=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(x&&v.key===" ")&&S9.includes(v.key)&&(w(),v.preventDefault())})})})});DT.displayName=kT;var TT="SelectValue",PT=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:o,placeholder:i="",...l}=e,c=Lo(TT,r),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,f=Ae(t,c.onValueNodeChange);return $t(()=>{d(u)},[d,u]),n.jsx(je.span,{...l,ref:f,style:{pointerEvents:"none"},children:QT(c.value)?n.jsx(n.Fragment,{children:i}):o})});PT.displayName=TT;var T9="SelectIcon",RT=h.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return n.jsx(je.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});RT.displayName=T9;var P9="SelectPortal",AT=e=>n.jsx(gc,{asChild:!0,...e});AT.displayName=P9;var Di="SelectContent",MT=h.forwardRef((e,t)=>{const r=Lo(Di,e.__scopeSelect),[s,a]=h.useState();if($t(()=>{a(new DocumentFragment)},[]),!r.open){const o=s;return o?en.createPortal(n.jsx(IT,{scope:e.__scopeSelect,children:n.jsx(Pp.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),o):null}return n.jsx(OT,{...e,ref:t})});MT.displayName=Di;var Zn=10,[IT,$o]=kc(Di),R9="SelectContentImpl",A9=_o("SelectContent.RemoveScroll"),OT=h.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:v,avoidCollisions:x,...g}=e,y=Lo(Di,r),[b,j]=h.useState(null),[S,N]=h.useState(null),_=Ae(t,H=>j(H)),[E,D]=h.useState(null),[C,k]=h.useState(null),P=Rp(r),[R,A]=h.useState(!1),I=h.useRef(!1);h.useEffect(()=>{if(b)return bp(b)},[b]),yp();const F=h.useCallback(H=>{const[te,...se]=P().map(he=>he.ref.current),[ne]=se.slice(-1),we=document.activeElement;for(const he of H)if(he===we||(he==null||he.scrollIntoView({block:"nearest"}),he===te&&S&&(S.scrollTop=0),he===ne&&S&&(S.scrollTop=S.scrollHeight),he==null||he.focus(),document.activeElement!==we))return},[P,S]),B=h.useCallback(()=>F([E,b]),[F,E,b]);h.useEffect(()=>{R&&B()},[R,B]);const{onOpenChange:T,triggerPointerDownPosRef:M}=y;h.useEffect(()=>{if(b){let H={x:0,y:0};const te=ne=>{var we,he;H={x:Math.abs(Math.round(ne.pageX)-(((we=M.current)==null?void 0:we.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((he=M.current)==null?void 0:he.y)??0))}},se=ne=>{H.x<=10&&H.y<=10?ne.preventDefault():b.contains(ne.target)||T(!1),document.removeEventListener("pointermove",te),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",se,{capture:!0})}}},[b,T,M]),h.useEffect(()=>{const H=()=>T(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[T]);const[U,q]=ZT(H=>{const te=P().filter(we=>!we.disabled),se=te.find(we=>we.ref.current===document.activeElement),ne=eP(te,H,se);ne&&setTimeout(()=>ne.ref.current.focus())}),Y=h.useCallback((H,te,se)=>{const ne=!I.current&&!se;(y.value!==void 0&&y.value===te||ne)&&(D(H),ne&&(I.current=!0))},[y.value]),G=h.useCallback(()=>b==null?void 0:b.focus(),[b]),z=h.useCallback((H,te,se)=>{const ne=!I.current&&!se;(y.value!==void 0&&y.value===te||ne)&&k(H)},[y.value]),Z=s==="popper"?wy:LT,Q=Z===wy?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:v,avoidCollisions:x}:{};return n.jsx(IT,{scope:r,content:b,viewport:S,onViewportChange:N,itemRefCallback:Y,selectedItem:E,onItemLeave:G,itemTextRefCallback:z,focusSelectedItem:B,selectedItemText:C,position:s,isPositioned:R,searchRef:U,children:n.jsx(Fu,{as:A9,allowPinchZoom:!0,children:n.jsx($u,{asChild:!0,trapped:y.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:ue(a,H=>{var te;(te=y.trigger)==null||te.focus({preventScroll:!0}),H.preventDefault()}),children:n.jsx(Li,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:n.jsx(Z,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:H=>H.preventDefault(),...g,...Q,onPlaced:()=>A(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:ue(g.onKeyDown,H=>{const te=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!te&&H.key.length===1&&q(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let ne=P().filter(we=>!we.disabled).map(we=>we.ref.current);if(["ArrowUp","End"].includes(H.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const we=H.target,he=ne.indexOf(we);ne=ne.slice(he+1)}setTimeout(()=>F(ne)),H.preventDefault()}})})})})})})});OT.displayName=R9;var M9="SelectItemAlignedPosition",LT=h.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,o=Lo(Di,r),i=$o(Di,r),[l,c]=h.useState(null),[d,u]=h.useState(null),f=Ae(t,_=>u(_)),m=Rp(r),p=h.useRef(!1),w=h.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:g,focusSelectedItem:y}=i,b=h.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&v&&x&&g){const _=o.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),D=o.valueNode.getBoundingClientRect(),C=g.getBoundingClientRect();if(o.dir!=="rtl"){const we=C.left-E.left,he=D.left-we,be=_.left-he,de=_.width+be,Me=Math.max(de,E.width),Be=window.innerWidth-Zn,Ke=cu(he,[Zn,Math.max(Zn,Be-Me)]);l.style.minWidth=de+"px",l.style.left=Ke+"px"}else{const we=E.right-C.right,he=window.innerWidth-D.right-we,be=window.innerWidth-_.right-he,de=_.width+be,Me=Math.max(de,E.width),Be=window.innerWidth-Zn,Ke=cu(he,[Zn,Math.max(Zn,Be-Me)]);l.style.minWidth=de+"px",l.style.right=Ke+"px"}const k=m(),P=window.innerHeight-Zn*2,R=v.scrollHeight,A=window.getComputedStyle(d),I=parseInt(A.borderTopWidth,10),F=parseInt(A.paddingTop,10),B=parseInt(A.borderBottomWidth,10),T=parseInt(A.paddingBottom,10),M=I+F+R+T+B,U=Math.min(x.offsetHeight*5,M),q=window.getComputedStyle(v),Y=parseInt(q.paddingTop,10),G=parseInt(q.paddingBottom,10),z=_.top+_.height/2-Zn,Z=P-z,Q=x.offsetHeight/2,H=x.offsetTop+Q,te=I+F+H,se=M-te;if(te<=z){const we=k.length>0&&x===k[k.length-1].ref.current;l.style.bottom="0px";const he=d.clientHeight-v.offsetTop-v.offsetHeight,be=Math.max(Z,Q+(we?G:0)+he+B),de=te+be;l.style.height=de+"px"}else{const we=k.length>0&&x===k[0].ref.current;l.style.top="0px";const be=Math.max(z,I+v.offsetTop+(we?Y:0)+Q)+se;l.style.height=be+"px",v.scrollTop=te-z+v.offsetTop}l.style.margin=`${Zn}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=P+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[m,o.trigger,o.valueNode,l,d,v,x,g,o.dir,s]);$t(()=>b(),[b]);const[j,S]=h.useState();$t(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const N=h.useCallback(_=>{_&&w.current===!0&&(b(),y==null||y(),w.current=!1)},[b,y]);return n.jsx(O9,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:n.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:n.jsx(je.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});LT.displayName=M9;var I9="SelectPopperPosition",wy=h.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=Zn,...o}=e,i=Ap(r);return n.jsx(op,{...i,...o,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wy.displayName=I9;var[O9,Ww]=kc(Di,{}),by="SelectViewport",$T=h.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...a}=e,o=$o(by,r),i=Ww(by,r),l=Ae(t,o.onViewportChange),c=h.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(Pp.Slot,{scope:r,children:n.jsx(je.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ue(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&f){const p=Math.abs(c.current-u.scrollTop);if(p>0){const w=window.innerHeight-Zn*2,v=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),g=Math.max(v,x);if(g<w){const y=g+p,b=Math.min(w,y),j=y-b;f.style.height=b+"px",f.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});$T.displayName=by;var FT="SelectGroup",[L9,$9]=kc(FT),F9=h.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=zn();return n.jsx(L9,{scope:r,id:a,children:n.jsx(je.div,{role:"group","aria-labelledby":a,...s,ref:t})})});F9.displayName=FT;var zT="SelectLabel",BT=h.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=$9(zT,r);return n.jsx(je.div,{id:a.id,...s,ref:t})});BT.displayName=zT;var am="SelectItem",[z9,UT]=kc(am),VT=h.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:o,...i}=e,l=Lo(am,r),c=$o(am,r),d=l.value===s,[u,f]=h.useState(o??""),[m,p]=h.useState(!1),w=Ae(t,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,s,a)}),v=zn(),x=h.useRef("touch"),g=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(z9,{scope:r,value:s,disabled:a,textId:v,isSelected:d,onItemTextChange:h.useCallback(y=>{f(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:n.jsx(Pp.ItemSlot,{scope:r,value:s,disabled:a,textValue:u,children:n.jsx(je.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:w,onFocus:ue(i.onFocus,()=>p(!0)),onBlur:ue(i.onBlur,()=>p(!1)),onClick:ue(i.onClick,()=>{x.current!=="mouse"&&g()}),onPointerUp:ue(i.onPointerUp,()=>{x.current==="mouse"&&g()}),onPointerDown:ue(i.onPointerDown,y=>{x.current=y.pointerType}),onPointerMove:ue(i.onPointerMove,y=>{var b;x.current=y.pointerType,a?(b=c.onItemLeave)==null||b.call(c):x.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(i.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ue(i.onKeyDown,y=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&y.key===" "||(_9.includes(y.key)&&g(),y.key===" "&&y.preventDefault())})})})})});VT.displayName=am;var ud="SelectItemText",WT=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...o}=e,i=Lo(ud,r),l=$o(ud,r),c=UT(ud,r),d=D9(ud,r),[u,f]=h.useState(null),m=Ae(t,g=>f(g),c.onItemTextChange,g=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,g,c.value,c.disabled)}),p=u==null?void 0:u.textContent,w=h.useMemo(()=>n.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=d;return $t(()=>(v(w),()=>x(w)),[v,x,w]),n.jsxs(n.Fragment,{children:[n.jsx(je.span,{id:c.textId,...o,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?en.createPortal(o.children,i.valueNode):null]})});WT.displayName=ud;var HT="SelectItemIndicator",qT=h.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return UT(HT,r).isSelected?n.jsx(je.span,{"aria-hidden":!0,...s,ref:t}):null});qT.displayName=HT;var jy="SelectScrollUpButton",GT=h.forwardRef((e,t)=>{const r=$o(jy,e.__scopeSelect),s=Ww(jy,e.__scopeSelect),[a,o]=h.useState(!1),i=Ae(t,s.onScrollButtonChange);return $t(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(YT,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});GT.displayName=jy;var Ny="SelectScrollDownButton",KT=h.forwardRef((e,t)=>{const r=$o(Ny,e.__scopeSelect),s=Ww(Ny,e.__scopeSelect),[a,o]=h.useState(!1),i=Ae(t,s.onScrollButtonChange);return $t(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(YT,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});KT.displayName=Ny;var YT=h.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,o=$o("SelectScrollButton",r),i=h.useRef(null),l=Rp(r),c=h.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),$t(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),n.jsx(je.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ue(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:ue(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:ue(a.onPointerLeave,()=>{c()})})}),B9="SelectSeparator",XT=h.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(je.div,{"aria-hidden":!0,...s,ref:t})});XT.displayName=B9;var Sy="SelectArrow",U9=h.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=Ap(r),o=Lo(Sy,r),i=$o(Sy,r);return o.open&&i.position==="popper"?n.jsx(ip,{...a,...s,ref:t}):null});U9.displayName=Sy;var V9="SelectBubbleInput",JT=h.forwardRef(({__scopeSelect:e,value:t,...r},s)=>{const a=h.useRef(null),o=Ae(s,a),i=_p(t);return h.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&u){const f=new Event("change",{bubbles:!0});u.call(l,t),l.dispatchEvent(f)}},[i,t]),n.jsx(je.select,{...r,style:{...KE,...r.style},ref:o,defaultValue:t})});JT.displayName=V9;function QT(e){return e===""||e===void 0}function ZT(e){const t=Rt(e),r=h.useRef(""),s=h.useRef(0),a=h.useCallback(i=>{const l=r.current+i;t(l),function c(d){r.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=h.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,o]}function eP(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=W9(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function W9(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var H9=ET,tP=DT,q9=PT,G9=RT,K9=AT,rP=MT,Y9=$T,nP=BT,sP=VT,X9=WT,J9=qT,aP=GT,oP=KT,iP=XT;const Ie=H9,Oe=q9,Pe=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(tP,{ref:s,className:pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(G9,{asChild:!0,children:n.jsx(W0,{className:"h-4 w-4 opacity-50"})})]}));Pe.displayName=tP.displayName;const lP=h.forwardRef(({className:e,...t},r)=>n.jsx(aP,{ref:r,className:pe("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(v5,{className:"h-4 w-4"})}));lP.displayName=aP.displayName;const cP=h.forwardRef(({className:e,...t},r)=>n.jsx(oP,{ref:r,className:pe("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(W0,{className:"h-4 w-4"})}));cP.displayName=oP.displayName;const Re=h.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(K9,{children:n.jsxs(rP,{ref:a,className:pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(lP,{}),n.jsx(Y9,{className:pe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(cP,{})]})}));Re.displayName=rP.displayName;const Q9=h.forwardRef(({className:e,...t},r)=>n.jsx(nP,{ref:r,className:pe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Q9.displayName=nP.displayName;const ae=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(sP,{ref:s,className:pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(J9,{children:n.jsx(Ea,{className:"h-4 w-4"})})}),n.jsx(X9,{children:t})]}));ae.displayName=sP.displayName;const Z9=h.forwardRef(({className:e,...t},r)=>n.jsx(iP,{ref:r,className:pe("-mx-1 my-1 h-px bg-muted",e),...t}));Z9.displayName=iP.displayName;var Mp="Checkbox",[e7,foe]=sr(Mp),[t7,Hw]=e7(Mp);function r7(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:o,form:i,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:f}=e,[m,p]=Br({prop:r,defaultProp:a??!1,onChange:c,caller:Mp}),[w,v]=h.useState(null),[x,g]=h.useState(null),y=h.useRef(!1),b=w?!!i||!!w.closest("form"):!0,j={checked:m,disabled:o,setChecked:p,control:w,setControl:v,name:l,form:i,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:vo(a)?!1:a,isFormControl:b,bubbleInput:x,setBubbleInput:g};return n.jsx(t7,{scope:t,...j,children:n7(f)?f(j):s})}var dP="CheckboxTrigger",uP=h.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:o,value:i,disabled:l,checked:c,required:d,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:w}=Hw(dP,e),v=Ae(a,u),x=h.useRef(c);return h.useEffect(()=>{const g=o==null?void 0:o.form;if(g){const y=()=>f(x.current);return g.addEventListener("reset",y),()=>g.removeEventListener("reset",y)}},[o,f]),n.jsx(je.button,{type:"button",role:"checkbox","aria-checked":vo(c)?"mixed":c,"aria-required":d,"data-state":gP(c),"data-disabled":l?"":void 0,disabled:l,value:i,...s,ref:v,onKeyDown:ue(t,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:ue(r,g=>{f(y=>vo(y)?!0:!y),w&&p&&(m.current=g.isPropagationStopped(),m.current||g.stopPropagation())})})});uP.displayName=dP;var qw=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:o,required:i,disabled:l,value:c,onCheckedChange:d,form:u,...f}=e;return n.jsx(r7,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:l,required:i,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:({isFormControl:m})=>n.jsxs(n.Fragment,{children:[n.jsx(uP,{...f,ref:t,__scopeCheckbox:r}),m&&n.jsx(pP,{__scopeCheckbox:r})]})})});qw.displayName=Mp;var fP="CheckboxIndicator",hP=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,o=Hw(fP,r);return n.jsx(mr,{present:s||vo(o.checked)||o.checked===!0,children:n.jsx(je.span,{"data-state":gP(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});hP.displayName=fP;var mP="CheckboxBubbleInput",pP=h.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:i,required:l,disabled:c,name:d,value:u,form:f,bubbleInput:m,setBubbleInput:p}=Hw(mP,e),w=Ae(r,p),v=_p(o),x=sp(s);h.useEffect(()=>{const y=m;if(!y)return;const b=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(b,"checked").set,N=!a.current;if(v!==o&&S){const _=new Event("click",{bubbles:N});y.indeterminate=vo(o),S.call(y,vo(o)?!1:o),y.dispatchEvent(_)}},[m,v,o,a]);const g=h.useRef(vo(o)?!1:o);return n.jsx(je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??g.current,required:l,disabled:c,name:d,value:u,form:f,...t,tabIndex:-1,ref:w,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});pP.displayName=mP;function n7(e){return typeof e=="function"}function vo(e){return e==="indeterminate"}function gP(e){return vo(e)?"indeterminate":e?"checked":"unchecked"}const ha=h.forwardRef(({className:e,...t},r)=>n.jsx(qw,{ref:r,className:pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(hP,{className:pe("flex items-center justify-center text-current"),children:n.jsx(Ea,{className:"h-4 w-4"})})}));ha.displayName=qw.displayName;const xP=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState([]),[i,l]=h.useState(!0),{toast:c}=rt(),d=async()=>{try{const{data:j,error:S}=await O.from("roles").select("*").order("hierarchy_level");if(S)throw S;t(j||[])}catch(j){console.error("Error fetching roles:",j),c({title:"Erreur",description:"Impossible de charger les rles",variant:"destructive"})}},u=async()=>{try{const{data:j,error:S}=await O.from("permissions").select("*").order("resource, action");if(S)throw S;s(j||[])}catch(j){console.error("Error fetching permissions:",j),c({title:"Erreur",description:"Impossible de charger les permissions",variant:"destructive"})}},f=async()=>{try{const{data:j,error:S}=await O.from("user_roles").select(`
          *,
          role:roles(*)
        `).eq("is_active",!0).order("created_at",{ascending:!1});if(S)throw S;o(j||[])}catch(j){console.error("Error fetching user roles:",j),c({title:"Erreur",description:"Impossible de charger les rles utilisateurs",variant:"destructive"})}},m=async(j,S,N,_,E)=>{try{const{error:D}=await O.from("user_roles").insert({user_id:j,role_id:S,context_type:N,context_id:_,expires_at:E});if(D)throw D;c({title:"Succs",description:"Rle assign avec succs"}),f()}catch(D){console.error("Error assigning role:",D),c({title:"Erreur",description:"Impossible d'assigner le rle",variant:"destructive"})}},p=async j=>{try{const{error:S}=await O.from("user_roles").update({is_active:!1}).eq("id",j);if(S)throw S;c({title:"Succs",description:"Rle retir avec succs"}),f()}catch(S){console.error("Error removing role:",S),c({title:"Erreur",description:"Impossible de retirer le rle",variant:"destructive"})}},w=async j=>{try{const{data:S,error:N}=await O.rpc("get_user_roles",{p_user_id:j});if(N)throw N;return S||[]}catch(S){return console.error("Error fetching user permissions:",S),[]}},v=async(j,S,N,_)=>{try{const{data:{user:E}}=await O.auth.getUser();if(!E)return!1;const{data:D,error:C}=await O.from("user_roles").select(`
          *,
          roles:role_id (name)
        `).eq("user_id",E.id).eq("is_active",!0);return C?!1:(D==null?void 0:D.some(k=>["admin","tenant_admin","owner"].includes(k.roles.name)))||!1}catch(E){return console.error("Error checking permission:",E),!1}},x=async(j,S,N="read")=>await v(),g=async j=>{try{const{data:S,error:N}=await O.from("role_permissions").select(`
          permission:permissions(*)
        `).eq("role_id",j);if(N)throw N;return(S==null?void 0:S.map(_=>_.permission))||[]}catch(S){return console.error("Error fetching role permissions:",S),[]}},y=async(j,S)=>{try{await O.from("role_permissions").delete().eq("role_id",j);const{error:N}=await O.from("role_permissions").insert(S.map(_=>({role_id:j,permission_id:_})));if(N)throw N;c({title:"Succs",description:"Permissions du rle mises  jour"})}catch(N){console.error("Error updating role permissions:",N),c({title:"Erreur",description:"Impossible de mettre  jour les permissions",variant:"destructive"})}},b=()=>r.reduce((S,N)=>(S[N.resource]||(S[N.resource]=[]),S[N.resource].push(N),S),{});return h.useEffect(()=>{(async()=>{l(!0),await Promise.all([d(),u(),f()]),l(!1)})()},[]),{roles:e,permissions:r,userRoles:a,loading:i,assignUserRole:m,removeUserRole:p,getUserPermissions:w,checkUserPermission:v,canAccessResource:x,getRolePermissions:g,updateRolePermissions:y,getPermissionsByResource:b,refetch:()=>{d(),u(),f()}}},s7=()=>{const[e,t]=h.useState(!1),[r,s]=h.useState(!1),[a,o]=h.useState(!1),[i,l]=h.useState(!1);h.useEffect(()=>{(async()=>{try{const{data:{user:w}}=await O.auth.getUser();if(!w)return;const{data:v,error:x}=await O.from("user_roles").select(`
            *,
            roles:role_id (name, hierarchy_level)
          `).eq("user_id",w.id).eq("is_active",!0);if(x){console.error("Error fetching user roles:",x);return}const g=(v==null?void 0:v.some(y=>["admin","tenant_admin","owner"].includes(y.roles.name)))||!1;t(g),s(g),o(g),l(g)}catch(w){console.error("Error checking permissions:",w)}})()},[]);const c=async p=>p,d=async p=>p,u=async p=>p,f=async(p,w,v)=>{try{const{data:{user:x}}=await O.auth.getUser();if(!x)return!1;const{data:g,error:y}=await O.from("user_roles").select(`
          *,
          roles:role_id (name)
        `).eq("user_id",x.id).eq("is_active",!0);return y?!1:(g==null?void 0:g.some(b=>["admin","tenant_admin","owner"].includes(b.roles.name)))||!1}catch{return!1}};return{canViewAllTasks:e,canViewAllProjects:r,canViewAllEmployees:a,canViewHRData:i,filterTasksByPermissions:c,filterProjectsByPermissions:d,filterEmployeesByPermissions:u,checkUserPermission:f,canAccessResource:async(p,w,v="read")=>await f()}},Ip=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState(!0),[i,l]=h.useState(null),{filterEmployeesByPermissions:c}=s7();h.useEffect(()=>{d()},[]);const d=async()=>{try{o(!0);const{data:{session:x}}=await O.auth.getSession(),{data:g,error:y}=await O.from("profiles").select("*").order("full_name");if(y)throw y;const{data:b,error:j}=await O.from("departments").select("*").order("name");if(j)throw j;const S=(g||[]).map(_=>({..._,employee_id:_.employee_id||`EMP${_.id.slice(-4)}`})),N=await c(S);t(N),s(b||[])}catch(x){l(x instanceof Error?x.message:"Une erreur est survenue"),console.error("Error fetching employees data:",x)}finally{o(!1)}};return{employees:e,departments:r,loading:a,error:i,createEmployee:async x=>{try{const{data:g,error:y}=await O.from("profiles").insert([{full_name:x.full_name,job_title:x.job_title,employee_id:x.employee_id||`EMP${Date.now().toString().slice(-6)}`,hire_date:x.hire_date,contract_type:x.contract_type||"CDI",phone:x.phone,salary:x.salary,weekly_hours:x.weekly_hours||35,manager_id:x.manager_id,emergency_contact:x.emergency_contact}]).select().single();if(y)throw y;const b={...g,employee_id:g.employee_id||`EMP${g.id.slice(-4)}`};return t(j=>[...j,b]),b}catch(g){throw console.error("Error creating employee:",g),g}},updateEmployee:async(x,g)=>{try{const{data:y,error:b}=await O.from("profiles").update(g).eq("user_id",x).select().single();if(b)throw b;return t(j=>j.map(S=>S.user_id===x?{...S,...y}:S)),y}catch(y){throw console.error("Error updating employee:",y),y}},deleteEmployee:async x=>{try{const{error:g}=await O.from("profiles").delete().eq("user_id",x);if(g)throw g;t(y=>y.filter(b=>b.user_id!==x))}catch(g){throw console.error("Error deleting employee:",g),g}},createDepartment:async x=>{try{const{data:g,error:y}=await O.from("departments").insert([x]).select().single();if(y)throw y;return s(b=>[...b,g]),g}catch(g){throw console.error("Error creating department:",g),g}},updateDepartment:async(x,g)=>{try{const{data:y,error:b}=await O.from("departments").update(g).eq("id",x).select().single();if(b)throw b;return s(j=>j.map(S=>S.id===x?{...S,...y}:S)),y}catch(y){throw console.error("Error updating department:",y),y}},deleteDepartment:async x=>{try{const{error:g}=await O.from("departments").delete().eq("id",x);if(g)throw g;s(y=>y.filter(b=>b.id!==x))}catch(g){throw console.error("Error deleting department:",g),g}},refetch:d}},a7=({open:e,onOpenChange:t})=>{var B;const{roles:r,permissions:s,userRoles:a,loading:o,assignUserRole:i,removeUserRole:l,getRolePermissions:c,updateRolePermissions:d,getPermissionsByResource:u}=xP(),{employees:f}=Ip(),[m,p]=h.useState(""),[w,v]=h.useState(""),[x,g]=h.useState("global"),[y,b]=h.useState(""),[j,S]=h.useState(""),[N,_]=h.useState(""),[E,D]=h.useState([]),C=T=>{switch(T){case"tenant_admin":return n.jsx(H0,{className:"h-4 w-4 text-yellow-500"});case"hr_manager":return n.jsx(At,{className:"h-4 w-4 text-blue-500"});case"project_manager":return n.jsx(V0,{className:"h-4 w-4 text-green-500"});case"team_lead":return n.jsx(At,{className:"h-4 w-4 text-purple-500"});case"employee":return n.jsx(nr,{className:"h-4 w-4 text-gray-500"});case"contractor":return n.jsx(nr,{className:"h-4 w-4 text-orange-500"});case"intern":return n.jsx(nr,{className:"h-4 w-4 text-pink-500"});case"viewer":return n.jsx(Ni,{className:"h-4 w-4 text-gray-400"});default:return n.jsx(hs,{className:"h-4 w-4"})}},k=T=>T<=10?{label:"Direction",variant:"default"}:T<=30?{label:"Management",variant:"secondary"}:T<=50?{label:"Oprationnel",variant:"outline"}:{label:"Externe",variant:"destructive"},P=a.filter(T=>{const M=f.find(U=>U.user_id===T.user_id);return(M==null?void 0:M.full_name.toLowerCase().includes(j.toLowerCase()))||T.role.display_name.toLowerCase().includes(j.toLowerCase())}),R=async()=>{!w||!m||(await i(w,m,x,void 0,y||void 0),v(""),p(""),g("global"),b(""))},A=async T=>{_(T);const M=await c(T);D(M.map(U=>U.id))},I=async()=>{N&&(await d(N,E),_(""),D([]))},F=u();return n.jsx(yt,{open:e,onOpenChange:t,children:n.jsxs(ft,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsx(ht,{children:n.jsxs(mt,{className:"flex items-center gap-2",children:[n.jsx(hs,{className:"h-5 w-5"}),"Gestion des Rles et Permissions"]})}),n.jsxs(pr,{defaultValue:"user-roles",className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs(ar,{className:"grid w-full grid-cols-3",children:[n.jsx(Ce,{value:"user-roles",children:"Rles Utilisateurs"}),n.jsx(Ce,{value:"roles",children:"Rles Systme"}),n.jsx(Ce,{value:"permissions",children:"Permissions"})]}),n.jsx(Ee,{value:"user-roles",className:"flex-1 flex flex-col overflow-hidden",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1 overflow-hidden",children:[n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(gs,{className:"h-4 w-4"}),"Assigner un Rle"]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"employee",children:"Employ"}),n.jsxs(Ie,{value:w,onValueChange:v,children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un employ"})}),n.jsx(Re,{children:f.map(T=>n.jsxs(ae,{value:T.user_id||T.id,children:[T.full_name," - ",T.job_title]},T.id))})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"role",children:"Rle"}),n.jsxs(Ie,{value:m,onValueChange:p,children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un rle"})}),n.jsx(Re,{children:r.map(T=>n.jsx(ae,{value:T.id,children:n.jsxs("div",{className:"flex items-center gap-2",children:[C(T.name),T.display_name]})},T.id))})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"context",children:"Contexte"}),n.jsxs(Ie,{value:x,onValueChange:g,children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"global",children:"Global"}),n.jsx(ae,{value:"project",children:"Projet spcifique"}),n.jsx(ae,{value:"department",children:"Dpartement spcifique"})]})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"expires",children:"Date d'expiration (optionnel)"}),n.jsx(ye,{id:"expires",type:"date",value:y,onChange:T=>b(T.target.value)})]}),n.jsx(L,{onClick:R,disabled:!w||!m||o,className:"w-full",children:"Assigner le Rle"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium",children:"Rles Assigns"}),n.jsxs("div",{className:"relative",children:[n.jsx(vc,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{placeholder:"Rechercher...",value:j,onChange:T=>S(T.target.value),className:"pl-8 w-64"})]})]}),n.jsx($r,{className:"h-[400px]",children:n.jsx("div",{className:"space-y-2",children:P.map(T=>{const M=f.find(q=>q.user_id===T.user_id),U=k(T.role.hierarchy_level);return n.jsx(V,{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[C(T.role.name),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:(M==null?void 0:M.full_name)||"Utilisateur inconnu"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:M==null?void 0:M.job_title})]})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(re,{variant:U.variant,children:T.role.display_name}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(re,{variant:"outline",className:"text-xs",children:T.context_type||"Global"}),T.expires_at&&n.jsxs(re,{variant:"secondary",className:"text-xs",children:[n.jsx(ze,{className:"h-3 w-3 mr-1"}),"Expire ",Tp(new Date(T.expires_at),{addSuffix:!0,locale:ot})]})]})]})]}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>l(T.id),children:"Retirer"})]})},T.id)})})})]})]})}),n.jsx(Ee,{value:"roles",className:"flex-1 overflow-hidden",children:n.jsx($r,{className:"h-full",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(T=>{const M=k(T.hierarchy_level);return n.jsxs(V,{children:[n.jsx(le,{className:"pb-3",children:n.jsxs(ce,{className:"flex items-center gap-2 text-base",children:[C(T.name),T.display_name,T.is_system_role&&n.jsx(re,{variant:"outline",className:"text-xs",children:"Systme"})]})}),n.jsx(W,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:T.description}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(re,{variant:M.variant,className:"text-xs",children:M.label}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Niveau ",T.hierarchy_level]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.filter(U=>U.role_id===T.id).length," utilisateur(s)"]}),n.jsxs(L,{size:"sm",variant:"outline",onClick:()=>A(T.id),className:"w-full",children:[n.jsx(K0,{className:"h-3 w-3 mr-1"}),"Permissions"]})]})})]},T.id)})})})}),n.jsx(Ee,{value:"permissions",className:"flex-1 overflow-hidden",children:n.jsx($r,{className:"h-full",children:n.jsx("div",{className:"space-y-6",children:Object.entries(F).map(([T,M])=>n.jsxs(V,{children:[n.jsx(le,{children:n.jsx(ce,{className:"capitalize",children:T})}),n.jsx(W,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:M.map(U=>n.jsxs("div",{className:"border rounded p-3",children:[n.jsx("div",{className:"font-medium text-sm",children:U.display_name}),n.jsx("div",{className:"text-xs text-muted-foreground",children:U.description}),n.jsxs("div",{className:"flex gap-1 mt-2",children:[n.jsx(re,{variant:"outline",className:"text-xs",children:U.action}),U.context&&n.jsx(re,{variant:"secondary",className:"text-xs",children:U.context})]})]},U.id))})})]},T))})})})]}),n.jsx(yt,{open:!!N,onOpenChange:()=>_(""),children:n.jsxs(ft,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[n.jsx(ht,{children:n.jsxs(mt,{children:["Permissions - ",(B=r.find(T=>T.id===N))==null?void 0:B.display_name]})}),n.jsx($r,{className:"flex-1",children:n.jsx("div",{className:"space-y-4",children:Object.entries(F).map(([T,M])=>n.jsxs(V,{children:[n.jsx(le,{children:n.jsx(ce,{className:"text-base capitalize",children:T})}),n.jsx(W,{children:n.jsx("div",{className:"space-y-2",children:M.map(U=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ha,{id:U.id,checked:E.includes(U.id),onCheckedChange:q=>{D(q?Y=>[...Y,U.id]:Y=>Y.filter(G=>G!==U.id))}}),n.jsxs("label",{htmlFor:U.id,className:"flex-1",children:[n.jsx("div",{className:"font-medium text-sm",children:U.display_name}),n.jsx("div",{className:"text-xs text-muted-foreground",children:U.description})]})]},U.id))})})]},T))})}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx(L,{variant:"outline",onClick:()=>_(""),children:"Annuler"}),n.jsx(L,{onClick:I,children:"Sauvegarder"})]})]})})]})})},o7=()=>{const[e,t]=h.useState(!1),{userRoles:r}=xP();return n.jsxs(n.Fragment,{children:[n.jsxs(L,{variant:"outline",size:"sm",className:"relative",onClick:()=>t(!0),children:[n.jsx(hs,{className:"h-4 w-4 mr-2"}),"Rles & Permissions",r.length>0&&n.jsx(re,{variant:"secondary",className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs",children:r.length})]}),n.jsx(a7,{open:e,onOpenChange:t})]})},i7=({onSignOut:e})=>{const{toast:t}=rt(),r=async()=>{try{await e(),t({title:"Dconnexion russie",description:"Vous avez t dconnect en toute scurit",variant:"default"})}catch{t({title:"Erreur",description:"Erreur lors de la dconnexion",variant:"destructive"})}};return n.jsxs(L,{variant:"outline",size:"sm",onClick:r,className:"flex items-center gap-2",children:[n.jsx(k5,{className:"h-4 w-4"}),"Se dconnecter"]})},l7=15*60*1e3,c7="lastActivity",d7=()=>{const[e,t]=h.useState(0);h.useEffect(()=>{const a=()=>{const i=localStorage.getItem(c7);if(!i)return;const l=Date.now()-parseInt(i),c=Math.max(0,l7-l);t(c)};a();const o=setInterval(a,1e3);return()=>clearInterval(o)},[]);const r=a=>{const o=Math.floor(a/6e4),i=Math.floor(a%6e4/1e3);return`${o}:${i.toString().padStart(2,"0")}`},s=()=>e>5*60*1e3?"default":e>2*60*1e3?"secondary":"destructive";return e===0?null:n.jsxs(re,{variant:s(),className:"flex items-center gap-1",children:[n.jsx(lt,{className:"h-3 w-3"}),r(e)]})},vP=async()=>{console.log(" Nettoyage complet de la session...");try{await O.auth.signOut(),["lastActivity","manualLogout","supabase.auth.token","sb-qliinxtanjdnwxlvnxji-auth-token"].forEach(t=>{localStorage.removeItem(t)}),Object.keys(localStorage).forEach(t=>{(t.startsWith("sb-")||t.includes("supabase"))&&localStorage.removeItem(t)}),console.log(" Session nettoye avec succs")}catch(e){console.error(" Erreur lors du nettoyage de la session:",e),localStorage.clear()}},u7=async()=>{console.group(" Debug Session");try{const{data:{session:e},error:t}=await O.auth.getSession();console.log("Session:",e),console.log("Erreur:",t),console.log("User:",e==null?void 0:e.user),console.log("Access Token:",e!=null&&e.access_token?" Prsent":" Absent"),console.log("Refresh Token:",e!=null&&e.refresh_token?" Prsent":" Absent"),console.log("Expires At:",e!=null&&e.expires_at?new Date(e.expires_at*1e3).toLocaleString():"N/A"),console.log(`
 LocalStorage:`),Object.keys(localStorage).forEach(r=>{var s;(r.includes("supabase")||r.includes("auth")||r==="lastActivity"||r==="manualLogout")&&console.log(`  ${r}:`,((s=localStorage.getItem(r))==null?void 0:s.substring(0,50))+"...")})}catch(e){console.error("Erreur lors du debug:",e)}console.groupEnd()};typeof window<"u"&&(window.debugSession=u7,window.cleanupSession=vP);const f7=xc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),qn=h.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:pe(f7({variant:t}),e),...r}));qn.displayName="Alert";const Op=h.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:pe("mb-1 font-medium leading-none tracking-tight",e),...t}));Op.displayName="AlertTitle";const Gn=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:pe("text-sm [&_p]:leading-relaxed",e),...t}));Gn.displayName="AlertDescription";const h7=({children:e})=>{const[t,r]=h.useState(!1),[s,a]=h.useState(!1);h.useEffect(()=>{const{data:{subscription:i}}=O.auth.onAuthStateChange(async(c,d)=>{c==="TOKEN_REFRESHED"&&!d&&(console.error(" chec du rafrachissement du token dtect"),r(!0)),(c==="SIGNED_IN"||c==="TOKEN_REFRESHED")&&r(!1)});return(async()=>{try{const{error:c}=await O.auth.getSession();c&&(c.message.includes("refresh")||c.message.includes("Invalid")||c.message.includes("Not Found"))&&r(!0)}catch(c){console.error("Erreur lors de la vrification de la session:",c)}})(),()=>i.unsubscribe()},[]);const o=async()=>{a(!0);try{await vP(),window.location.href="/"}catch(i){console.error("Erreur lors du nettoyage:",i),a(!1)}};return t?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:n.jsxs("div",{className:"max-w-md w-full space-y-4",children:[n.jsxs(qn,{variant:"destructive",children:[n.jsx(Kt,{className:"h-4 w-4"}),n.jsx(Op,{children:"Session Expire"}),n.jsx(Gn,{children:"Votre session a expir ou n'est plus valide. Veuillez vous reconnecter."})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Que s'est-il pass ?"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Votre token de rafrachissement n'est plus valide. Cela peut arriver si :"}),n.jsxs("ul",{className:"text-sm text-gray-600 list-disc list-inside space-y-1 ml-2",children:[n.jsx("li",{children:"Vous vous tes dconnect sur un autre appareil"}),n.jsx("li",{children:"Votre session a expir aprs une longue priode d'inactivit"}),n.jsx("li",{children:"Les donnes de session ont t corrompues"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Solution"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Cliquez sur le bouton ci-dessous pour nettoyer votre session et vous reconnecter."})]}),n.jsx(L,{onClick:o,disabled:s,className:"w-full",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Bs,{className:"mr-2 h-4 w-4 animate-spin"}),"Nettoyage en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Bs,{className:"mr-2 h-4 w-4"}),"Nettoyer et Se Reconnecter"]})})]}),n.jsx("p",{className:"text-xs text-center text-gray-500",children:"Si le problme persiste, contactez le support technique."})]})}):n.jsx(n.Fragment,{children:e})},yP=h.createContext(void 0);let ed=null;const m7=({children:e})=>{const[t,r]=h.useState(null),[s,a]=h.useState(null),[o,i]=h.useState(!0);h.useEffect(()=>{if(ed&&!ed.loading){r(ed.currentTenant),a(ed.userMembership),i(!1);return}let c=!0;return(async()=>{try{i(!0);const{data:{user:u}}=await O.auth.getUser();if(!u){i(!1);return}const{data:f,error:m}=await O.from("profiles").select("*").eq("user_id",u.id).single();if(m){if(m.code==="PGRST116"){console.log("Aucun profil trouv - possiblement un nouveau tenant owner"),i(!1);return}console.error("Error fetching profile:",m),i(!1);return}if(f&&f.tenant_id){const p={id:f.tenant_id,name:"Wadashaqeen SaaS",slug:"wadashaqeen",status:"active"},w={id:f.id,tenant_id:f.tenant_id,user_id:f.user_id,role:f.role||"admin",status:"active",permissions:{admin:!0,manage_all:!0},tenant:p};ed={currentTenant:p,userMembership:w,tenantId:f.tenant_id,loading:!1},c&&(r(p),a(w))}}catch(u){console.error("Error in TenantProvider:",u)}finally{c&&i(!1)}})(),()=>{c=!1}},[]);const l=(t==null?void 0:t.id)||null;return n.jsx(yP.Provider,{value:{currentTenant:t,userMembership:s,tenantId:l,loading:o},children:e})},Ui=()=>{const e=h.useContext(yP);if(e===void 0)throw new Error("useTenant must be used within a TenantProvider");return e},wP=h.createContext(void 0),p7=()=>{const e=h.useContext(wP);if(!e)throw new Error("useViewMode must be used within a ViewModeProvider");return e},g7=({children:e})=>{const[t,r]=h.useState("tasks"),s=()=>{r("tasks")};return n.jsx(wP.Provider,{value:{defaultDisplayMode:t,setDefaultDisplayMode:r,resetToDefault:s},children:e})},mx=768;function Sn(){const[e,t]=h.useState(void 0);return h.useEffect(()=>{const r=window.matchMedia(`(max-width: ${mx-1}px)`),s=()=>{t(window.innerWidth<mx)};return r.addEventListener("change",s),t(window.innerWidth<mx),()=>r.removeEventListener("change",s)},[]),!!e}function bP({children:e,className:t=""}){const r=Sn();return n.jsxs("div",{className:`
      ${r?"px-4 py-4":"px-6 py-6"} 
      min-h-screen relative overflow-hidden
      ${t}
    `,children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:`
          absolute -top-40 -right-40 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full blur-3xl animate-pulse
          ${r?"w-40 h-40":"w-80 h-80"}
        `}),n.jsx("div",{className:`
          absolute -bottom-40 -left-40 bg-gradient-to-tr from-accent/20 to-tech-cyan/20 rounded-full blur-3xl animate-pulse
          ${r?"w-40 h-40":"w-80 h-80"}
        `,style:{animationDelay:"2s"}}),n.jsx("div",{className:`
          absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-br from-tech-purple/10 to-tech-blue/10 rounded-full blur-3xl animate-pulse
          ${r?"w-48 h-48":"w-96 h-96"}
        `,style:{animationDelay:"4s"}})]}),n.jsx("div",{className:`mx-auto relative z-10 ${r?"max-w-full":"max-w-7xl"}`,children:e})]})}const jP=e=>{const t=h.useRef(new Map),r=h.useCallback(c=>{const d=t.current.get(c);return d?Date.now()-d.timestamp>e.ttl?(t.current.delete(c),null):d.data:null},[e.ttl]),s=h.useCallback((c,d)=>{t.current.set(c,{data:d,timestamp:Date.now()})},[]),a=h.useCallback(c=>{t.current.delete(c)},[]),o=h.useCallback(()=>{t.current.clear()},[]),i=h.useCallback(()=>{const c=Array.from(t.current.entries());return{size:c.length,keys:c.map(([d])=>d),totalSize:c.reduce((d,[,u])=>d+JSON.stringify(u.data).length,0)}},[]),l=h.useCallback(c=>{const d=t.current.get(c);return d?Date.now()-d.timestamp>e.ttl:!0},[e.ttl]);return{get:r,set:s,invalidate:a,clear:o,getStats:i,isStale:l}},x7=()=>{const e=h.useRef(null),t=h.useCallback(()=>{e.current&&e.current.abort();const s=new AbortController;return e.current=s,s.signal},[]),r=h.useCallback(()=>{e.current&&(e.current.abort(),e.current=null)},[]);return h.useEffect(()=>()=>{e.current&&e.current.abort()},[]),{getSignal:t,abort:r}},NP=()=>{const[e,t]=h.useState({fetchTime:0,cacheHit:!1,dataSize:0,lastUpdate:new Date,queryComplexity:"simple"}),r=h.useCallback(()=>performance.now(),[]),s=h.useCallback((a,o,i,l="simple")=>{const c=performance.now()-a,d=JSON.stringify(o).length;return t({fetchTime:c,cacheHit:i,dataSize:d,lastUpdate:new Date,queryComplexity:l}),{fetchTime:c,dataSize:d}},[]);return{metrics:e,startTimer:r,recordMetrics:s}},SP=()=>{const e=h.useRef(!1),t=h.useRef(""),r=h.useCallback(o=>{const i=JSON.stringify(o);return!(e.current&&t.current===i)},[]),s=h.useCallback(o=>{e.current=!0,t.current=JSON.stringify(o)},[]),a=h.useCallback(()=>{e.current=!1,t.current=""},[]);return{shouldFetch:r,markAsFetched:s,reset:a}},_P=()=>{const e=h.useCallback((s,a,o)=>{var l,c;let i=O.from("tasks").select("*, task_actions!task_actions_task_id_fkey(*)",{count:"exact"});return!a&&s&&(i=i.eq("tenant_id",s)),o&&(o.onlyMainTasks?i=i.is("parent_id",null):o.parentId!==void 0&&(o.parentId===null?i=i.is("parent_id",null):i=i.eq("parent_id",o.parentId)),(l=o.status)!=null&&l.length&&(i=i.in("status",o.status)),(c=o.priority)!=null&&c.length&&(i=i.in("priority",o.priority)),o.projectId&&(i=i.eq("project_id",o.projectId)),o.assignedTo&&(i=i.eq("assignee_id",o.assignedTo)),o.createdBy&&(i=i.eq("created_by",o.createdBy)),o.search&&(i=i.or(`title.ilike.%${o.search}%,description.ilike.%${o.search}%`)),o.dateRange&&(i=i.gte("start_date",o.dateRange.start).lte("due_date",o.dateRange.end))),i.order("display_order",{ascending:!0,nullsFirst:!1})},[]),t=h.useCallback((s,a,o)=>{var l,c;let i=O.from("projects").select("*",{count:"exact"});return!a&&s&&(i=i.eq("tenant_id",s)),o&&((l=o.status)!=null&&l.length&&(i=i.in("status",o.status)),(c=o.priority)!=null&&c.length&&(i=i.in("priority",o.priority)),o.search&&(i=i.or(`name.ilike.%${o.search}%,description.ilike.%${o.search}%`)),o.createdBy&&(i=i.eq("created_by",o.createdBy)),o.dateRange&&(i=i.gte("start_date",o.dateRange.start).lte("end_date",o.dateRange.end))),i.order("created_at",{ascending:!1})},[]),r=h.useCallback((s,a)=>s&&Object.keys(s).length>2?"complex":a?"medium":"simple",[]);return{buildTasksQuery:e,buildProjectsQuery:t,getComplexity:r}};var hh=(e=>(e.SUPER_ADMIN="super_admin",e.TENANT_ADMIN="tenant_admin",e.MANAGER_HR="manager_hr",e.PROJECT_MANAGER="project_manager",e.EMPLOYEE="employee",e))(hh||{}),Dn=(e=>(e.CREATE_TENANT="create_tenant",e.MANAGE_USERS="manage_users",e.VIEW_REPORTS="view_reports",e.MANAGE_PROJECTS="manage_projects",e.MANAGE_TASKS="manage_tasks",e.MANAGE_EMPLOYEES="manage_employees",e.VIEW_ANALYTICS="view_analytics",e))(Dn||{});const CP=(e,t)=>e.some(r=>r.roles.name===t),v7=(e,t)=>e.some(r=>r.permission_name===t),y7=e=>CP(e,"super_admin"),Fa={TTL_ROLES:15*60*1e3,TTL_PERMISSIONS:10*60*1e3,TTL_ACCESS_RIGHTS:5*60*1e3,STORAGE_PREFIX:"wadashaqeen_auth_",INVALIDATION_EVENTS:["role_updated","permission_changed","user_role_assigned","user_role_revoked","tenant_changed"]};class w7{constructor(){Xs(this,"cache",new Map);Xs(this,"eventListeners",new Set);Xs(this,"refreshPromises",new Map);this.startCleanupInterval(),this.setupAuthListeners(),this.restoreFromStorage()}generateCacheKey(t,r,s){const a=`${Fa.STORAGE_PREFIX}${t}_${r}`;return s?`${a}_${s}`:a}isValidCacheEntry(t){const r=Date.now();return t.expiresAt>r&&t.data!==null}getCacheEntry(t){const r=this.cache.get(t);return!r||!this.isValidCacheEntry(r)?(this.cache.delete(t),this.removeFromStorage(t),null):r.data}setCacheEntry(t,r,s,a,o){const i=Date.now(),l={data:r,timestamp:i,expiresAt:i+s,version:this.generateVersion(),userId:a,tenantId:o};this.cache.set(t,l),this.saveToStorage(t,l)}generateVersion(){return`${Date.now()}_${Math.random().toString(36).substr(2,9)}`}saveToStorage(t,r){try{const s=JSON.stringify(r);localStorage.setItem(t,s)}catch(s){console.warn("Impossible de sauvegarder le cache dans localStorage:",s)}}restoreFromStorage(){try{Object.keys(localStorage).filter(r=>r.startsWith(Fa.STORAGE_PREFIX)).forEach(r=>{try{const s=localStorage.getItem(r);if(s){const a=JSON.parse(s);this.isValidCacheEntry(a)?this.cache.set(r,a):localStorage.removeItem(r)}}catch(s){console.warn(`Erreur lors de la restauration du cache ${r}:`,s),localStorage.removeItem(r)}})}catch(t){console.warn("Erreur lors de la restauration du cache:",t)}}removeFromStorage(t){try{localStorage.removeItem(t)}catch(r){console.warn("Erreur lors de la suppression du cache:",r)}}startCleanupInterval(){setInterval(()=>{const t=Date.now(),r=[];this.cache.forEach((s,a)=>{s.expiresAt<=t&&r.push(a)}),r.forEach(s=>{this.cache.delete(s),this.removeFromStorage(s)}),r.length>0&&console.log(` Cache nettoy: ${r.length} entres expires supprimes`)},6e4)}setupAuthListeners(){window.addEventListener("storage",t=>{var r;(r=t.key)!=null&&r.startsWith(Fa.STORAGE_PREFIX)&&(this.restoreFromStorage(),this.notifyListeners("cache_updated",{key:t.key}))}),Fa.INVALIDATION_EVENTS.forEach(t=>{window.addEventListener(t,()=>{this.invalidateAll()})})}async getRoles(t,r,s){const a=this.generateCacheKey("roles",t,r),o=this.getCacheEntry(a);if(o)return console.log(" Rles rcuprs depuis le cache:",t),o;if(this.refreshPromises.has(a))return console.log(" Attente de la requte en cours pour les rles:",t),this.refreshPromises.get(a);const i=this.fetchWithRetry(s,3).then(l=>(console.log(" Rles rcuprs depuis la DB et mis en cache:",t),this.setCacheEntry(a,l,Fa.TTL_ROLES,t,r),this.refreshPromises.delete(a),l)).catch(l=>{throw console.error(" Erreur lors de la rcupration des rles:",l),this.refreshPromises.delete(a),l});return this.refreshPromises.set(a,i),i}async getPermissions(t,r,s,a){const o=this.generateCacheKey("permissions",t,r),i=this.getCacheEntry(o);if(i)return console.log(" Permissions rcupres depuis le cache:",t),i;if(this.refreshPromises.has(o))return this.refreshPromises.get(o);const l=this.fetchWithRetry(a,3).then(c=>(console.log(" Permissions rcupres depuis la DB et mises en cache:",t),this.setCacheEntry(o,c,Fa.TTL_PERMISSIONS,t,r),this.refreshPromises.delete(o),c)).catch(c=>{throw console.error(" Erreur lors de la rcupration des permissions:",c),this.refreshPromises.delete(o),c});return this.refreshPromises.set(o,l),l}getAccessRights(t,r){const s=this.generateCacheKey("access_rights",t,r);return this.getCacheEntry(s)}setAccessRights(t,r,s){const a=this.generateCacheKey("access_rights",t,r);this.setCacheEntry(a,s,Fa.TTL_ACCESS_RIGHTS,t,r)}async fetchWithRetry(t,r){let s;for(let a=1;a<=r;a++)try{return await t()}catch(o){if(s=o,a<r){const i=Math.min(1e3*Math.pow(2,a-1),5e3);console.warn(`Tentative ${a} choue, retry dans ${i}ms:`,o),await new Promise(l=>setTimeout(l,i))}}throw s}invalidateUser(t,r){const s=[];this.cache.forEach((a,o)=>{a.userId===t&&(!r||a.tenantId===r)&&s.push(o)}),s.forEach(a=>{this.cache.delete(a),this.removeFromStorage(a)}),console.log(` Cache invalid pour l'utilisateur ${t}: ${s.length} entres supprimes`),this.notifyListeners("user_cache_invalidated",{userId:t,tenantId:r})}invalidateAll(){console.log(" Invalidation complte du cache des rles"),this.cache.clear();try{Object.keys(localStorage).filter(r=>r.startsWith(Fa.STORAGE_PREFIX)).forEach(r=>localStorage.removeItem(r))}catch(t){console.warn("Erreur lors du nettoyage du localStorage:",t)}this.notifyListeners("cache_cleared")}async refreshUser(t,r,s,a){console.log(" Rafrachissement forc du cache pour:",t),this.invalidateUser(t,r);try{await Promise.all([this.getRoles(t,r,s),this.getPermissions(t,r,[],a)]),this.notifyListeners("user_cache_refreshed",{userId:t,tenantId:r})}catch(o){throw console.error("Erreur lors du rafrachissement du cache:",o),o}}addEventListener(t){return this.eventListeners.add(t),()=>this.eventListeners.delete(t)}notifyListeners(t,r){this.eventListeners.forEach(s=>{try{s(t,r)}catch(a){console.error("Erreur dans le listener de cache:",a)}})}getStats(){const t=Date.now();let r=0,s=0;return this.cache.forEach(a=>{a.expiresAt>t?r++:s++}),{totalEntries:this.cache.size,validEntries:r,expiredEntries:s,memoryUsage:`${Math.round(JSON.stringify([...this.cache.entries()]).length/1024)}KB`}}async preloadUser(t,r,s,a){console.log(" Prchargement du cache pour:",t);try{await Promise.all([this.getRoles(t,r,s),this.getPermissions(t,r,[],a)]),console.log(" Cache prcharg avec succs pour:",t)}catch(o){console.error(" Erreur lors du prchargement du cache:",o)}}}const tl=new w7,Fo=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState(!0);rt(),h.useEffect(()=>{c()},[]);const i=h.useCallback(async g=>{console.log(" Fetching roles for user:",g);const{data:y,error:b}=await O.from("user_roles").select(`
        id,
        user_id,
        role_id,
        is_active,
        tenant_id,
        created_at,
        roles!inner(name)
      `).eq("user_id",g).eq("is_active",!0);if(console.log(" Roles query result:",{data:y,error:b}),b){if(console.error(" Error fetching roles:",b),b.code==="42501")return console.log(" Pas d'accs  user_roles - Aucun rle assign"),[];throw b}return console.log(" Roles fetched successfully:",(y==null?void 0:y.length)||0,"roles"),y||[]},[]),l=h.useCallback(async g=>{if(g.length===0)return[];const{data:y,error:b}=await O.from("role_permissions").select(`
        permissions!inner(name),
        roles!inner(name)
      `).in("role_id",g);if(b){if(b.code==="42501")return[];throw b}return(y||[]).map(j=>{var S,N;return{permission_name:((S=j.permissions)==null?void 0:S.name)||"",role_name:((N=j.roles)==null?void 0:N.name)||""}})},[]),c=async()=>{var g,y,b,j;try{const{data:{user:S},error:N}=await O.auth.getUser();if(N||!S){t([]),s([]),o(!1);return}const _=((g=S.user_metadata)==null?void 0:g.tenant_id)||((y=S.app_metadata)==null?void 0:y.tenant_id);try{const E=await tl.getRoles(S.id,_,()=>i(S.id));if(console.log(" Rles rcuprs pour l'utilisateur:",E),console.log(" Dtail du rle:",((j=(b=E[0])==null?void 0:b.roles)==null?void 0:j.name)||"Aucun rle"),t(E),E.length>0){const D=E.map(k=>k.role_id),C=await tl.getPermissions(S.id,_,D,()=>l(D));s(C)}else s([])}catch(E){E.code==="42501"?(t([]),s([])):(console.error(" Erreur lors de la rcupration des rles:",E),t([]),s([]))}}catch(S){console.error(" Erreur lors de la rcupration des rles et permissions:",S),t([]),s([])}finally{o(!1)}},d=g=>CP(e,g),u=g=>v7(r,g),f=()=>y7(e),m=()=>d(hh.TENANT_ADMIN),p=()=>d(hh.MANAGER_HR),w=()=>d(hh.PROJECT_MANAGER),v=()=>e.map(g=>g.roles.name),x=async()=>{var g,y;o(!0);try{const{data:{user:b}}=await O.auth.getUser();if(b){const j=((g=b.user_metadata)==null?void 0:g.tenant_id)||((y=b.app_metadata)==null?void 0:y.tenant_id);await tl.refreshUser(b.id,j,()=>i(b.id),()=>{const S=e.map(N=>N.role_id);return l(S)}),await c()}}catch(b){console.error("Erreur lors du rafrachissement des rles:",b)}finally{o(!1)}};return h.useEffect(()=>tl.addEventListener((y,b)=>{(y==="user_cache_refreshed"||y==="cache_updated")&&c()}),[]),{userRoles:e,userPermissions:r,isLoading:a,hasRole:d,hasPermission:u,isSuperAdmin:f,isTenantAdmin:m,isHRManager:p,isProjectManager:w,getRoleNames:v,refreshRoles:x,invalidateCache:async()=>{var y,b;const{data:{user:g}}=await O.auth.getUser();if(g){const j=((y=g.user_metadata)==null?void 0:y.tenant_id)||((b=g.app_metadata)==null?void 0:b.tenant_id);tl.invalidateUser(g.id,j)}},getCacheStats:()=>tl.getStats()}},Uu=()=>{var f;const{userRoles:e,isLoading:t}=Fo(),r=(f=e[0])==null?void 0:f.tenant_id,s=r?{id:r,name:"Mon Organisation",status:"active"}:null,a=r&&e[0]?{id:e[0].id,tenant_id:r,user_id:e[0].user_id,role:e[0].roles.name,status:"active",permissions:{}}:null;return{currentTenant:s,userMembership:a,userRoles:e,loading:t,tenantId:r,fetchUserTenant:async()=>Promise.resolve(),switchTenant:async m=>(console.warn("switchTenant not implemented in simplified version"),Promise.resolve()),hasPermission:m=>!0,canManage:m=>e.some(p=>["tenant_admin","super_admin"].includes(p.roles.name)),hasRole:m=>e.some(p=>p.roles.name===m&&p.is_active),getActiveRoles:()=>e.filter(m=>m.is_active).map(m=>m.roles.name),isAdmin:e.some(m=>["tenant_admin","super_admin","owner"].includes(m.roles.name))}},b7=3*60*1e3,j7=e=>{const[t,r]=h.useState([]),[s,a]=h.useState({total:0,active:0,completed:0,overdue:0}),[o,i]=h.useState(!0),[l,c]=h.useState(null),{tenantId:d}=Uu(),{isSuperAdmin:u,isLoading:f}=Fo(),m=jP({ttl:b7});x7();const{metrics:p,startTimer:w,recordMetrics:v}=NP(),{shouldFetch:x,markAsFetched:g,reset:y}=SP(),{buildTasksQuery:b,getComplexity:j}=_P(),S=h.useCallback(()=>u()?"tasks_super_admin":`tasks_${d}`,[d,u,e]),N=h.useCallback(C=>{const k=new Date;return{total:C.length,active:C.filter(P=>P.status!=="done").length,completed:C.filter(P=>P.status==="done").length,overdue:C.filter(P=>P.due_date&&new Date(P.due_date)<k&&P.status!=="done").length}},[]),_=h.useCallback(C=>{const k=C.filter(F=>!F.parent_id),P=C.filter(F=>F.parent_id),R=new Map;P.forEach(F=>{const B=F.parent_id;R.has(B)||R.set(B,[]),R.get(B).push({...F,isSubtask:!0})}),R.forEach(F=>{F.sort((B,T)=>{const M=parseFloat(B.display_order||"999"),U=parseFloat(T.display_order||"999");return M-U})});const A=[];return[...k].sort((F,B)=>{const T=parseFloat(F.display_order||"999"),M=parseFloat(B.display_order||"999");return T-M}).forEach(F=>{const B={...F,subtasks:R.get(F.id)||[],isSubtask:!1};A.push(B);const T=R.get(F.id)||[];A.push(...T)}),A},[]),E=h.useCallback(async(C=!1)=>{if(f)return;if(!d&&!u()){i(!1);return}const k={tenantId:d,filters:e,isSuperAdmin:u()};if(!C&&!x(k))return;const P=S();if(!C){const R=m.get(P);if(R){r(R.tasks),a(R.stats),i(!1);return}}try{const R=w();i(!0),c(null);const A=b(d,u(),e),{data:I,error:F}=await A;if(F)throw F;const B=I||[],T=_(B),M=N(B);m.set(P,{tasks:T,stats:M}),r(T),a(M),g(k),v(R,{tasks:T,stats:M},!1,j(e,u()))}catch(R){console.error("Error fetching tasks:",R),c(R.message)}finally{i(!1)}},[d,f,e,u,x,S,m,w,b,N,_,g,v,j]),D=h.useCallback(()=>{m.invalidate(S()),y(),E(!0)},[m,S,y,E]);return h.useEffect(()=>{E()},[E]),{tasks:t,stats:s,loading:o,error:l,metrics:p,refresh:D,clearCache:m.clear,isStale:()=>m.isStale(S())}},N7=()=>{const{toast:e}=rt(),t=h.useCallback(async l=>{try{const{data:c,error:d}=await O.from("tasks").insert([l]).select().single();if(d)throw d;return e({title:"Succs",description:"Tche cre avec succs"}),c}catch(c){throw console.error("Error creating task:",c),e({title:"Erreur",description:c.message,variant:"destructive"}),c}},[e]),r=h.useCallback(async(l,c)=>{try{const{data:d,error:u}=await O.from("tasks").update(c).eq("id",l).select().single();if(u)throw u;return e({title:"Succs",description:"Tche mise  jour"}),d}catch(d){throw console.error("Error updating task:",d),e({title:"Erreur",description:d.message,variant:"destructive"}),d}},[e]),s=h.useCallback(async l=>{try{const{error:c}=await O.from("tasks").delete().eq("id",l);if(c)throw c;e({title:"Succs",description:"Tche supprime"})}catch(c){throw console.error("Error deleting task:",c),e({title:"Erreur",description:c.message,variant:"destructive"}),c}},[e]),a=h.useCallback(async l=>{try{const{data:c,error:d}=await O.from("tasks").select("*").eq("id",l).single();if(d)throw d;const{id:u,created_at:f,updated_at:m,...p}=c,w={...p,title:`${p.title} (Copie)`},{data:v,error:x}=await O.from("tasks").insert([w]).select().single();if(x)throw x;return e({title:"Succs",description:"Tche duplique"}),v}catch(c){throw console.error("Error duplicating task:",c),e({title:"Erreur",description:c.message,variant:"destructive"}),c}},[e]),o=h.useCallback(async(l,c)=>r(l,{status:c}),[r]),i=h.useCallback(async(l,c)=>r(l,{progress:c}),[r]);return{createTask:t,updateTask:r,deleteTask:s,duplicateTask:a,updateTaskStatus:o,updateTaskProgress:i}},S7=()=>{rt();const e=h.useCallback(async(l,c)=>{try{const{data:d,error:u}=await O.from("task_actions").select("is_done, tenant_id").eq("id",c).single();if(u)throw u;const{error:f}=await O.from("task_actions").update({is_done:!d.is_done,updated_at:new Date().toISOString()}).eq("id",c).eq("tenant_id",d.tenant_id);if(f)throw f}catch(d){throw console.error("Error toggling action:",d),d}},[]),t=h.useCallback(async(l,c)=>{try{if(!l.trim())return;const d=O.from("tasks").select("id");c&&d.eq("id",c);const{data:u,error:f}=await d;if(f)throw f;if(u&&u.length>0){const{data:m,error:p}=await O.from("tasks").select("tenant_id").eq("id",u[0].id).single();if(p)throw p;const w=u.map(x=>({task_id:x.id,title:l,weight_percentage:0,is_done:!1,tenant_id:m.tenant_id})),{error:v}=await O.from("task_actions").insert(w);if(v)throw v;for(const x of u)await O.rpc("distribute_equal_weights",{p_task_id:x.id})}}catch(d){throw console.error("Error adding action column:",d),d}},[]),r=h.useCallback(async(l,c)=>{try{const{data:d,error:u}=await O.from("tasks").select("tenant_id").eq("id",l).single();if(u)throw u;const{error:f}=await O.from("task_actions").insert([{task_id:l,title:c.title,weight_percentage:c.weight_percentage,due_date:c.due_date,notes:c.notes,is_done:!1,tenant_id:d.tenant_id}]);if(f)throw f;await O.rpc("distribute_equal_weights",{p_task_id:l})}catch(d){throw console.error("Error adding detailed action:",d),d}},[]),s=h.useCallback(async(l,c,d)=>{try{const{data:u,error:f}=await O.from("tasks").select("*").eq("id",l).maybeSingle();if(f)throw f;if(!u)throw new Error("Parent task not found");const m=(u.task_level||0)+1,{data:p,error:w}=await O.rpc("generate_display_order",{p_parent_id:l,p_task_level:m});if(w)throw w;const v=(d==null?void 0:d.assignee)||u.assigned_name;if(!v||v==="Non assign")throw new Error("Un responsable doit tre assign  la sous-tche");const x={title:(d==null?void 0:d.title)||`Sous-tche de ${u.title}`,start_date:(d==null?void 0:d.start_date)||u.start_date,due_date:(d==null?void 0:d.due_date)||u.due_date,priority:u.priority,status:"todo",effort_estimate_h:(d==null?void 0:d.effort_estimate_h)||1,progress:0,assigned_name:v,department_name:u.department_name,project_name:u.project_name,parent_id:l,task_level:m,display_order:p,tenant_id:u.tenant_id},{data:g,error:y}=await O.from("tasks").insert([x]).select().single();if(y)throw y;return g}catch(u){throw console.error("Error creating subtask:",u),u}},[]),a=h.useCallback(async(l,c,d)=>{try{const u=await s(l,void 0,c);if(!u)throw new Error("Failed to create subtask");if(d.length>0){const{data:f}=await O.from("tasks").select("tenant_id").eq("id",u.id).single(),m=d.map(p=>({task_id:u.id,title:p.title,weight_percentage:p.weight_percentage,due_date:p.due_date,notes:p.notes,is_done:!1,tenant_id:f==null?void 0:f.tenant_id}));await O.from("task_actions").insert(m),await O.rpc("distribute_equal_weights",{p_task_id:u.id})}return u}catch(u){throw console.error("Error creating subtask with actions:",u),u}},[s]),o=h.useCallback(async(l,c)=>{try{const{error:d}=await O.from("tasks").update({assigned_name:c}).eq("id",l);if(d)throw d}catch(d){throw console.error("Error updating task assignee:",d),d}},[]),i=h.useCallback(async(l,c,d)=>{try{const{error:u}=await O.from("tasks").update({start_date:c,due_date:d}).eq("id",l);if(u)throw u}catch(u){throw console.error("Error updating task dates:",u),u}},[]);return{toggleAction:e,addActionColumn:t,addDetailedAction:r,createSubTask:s,createSubTaskWithActions:a,updateTaskAssignee:o,updateTaskDates:i}},Ns=e=>{const{tasks:t,stats:r,loading:s,error:a,metrics:o,refresh:i,clearCache:l,isStale:c}=j7(e),d=N7(),u=S7();return{tasks:t,stats:r,loading:s,error:a,metrics:o,refresh:i,refetch:i,clearCache:l,isStale:c,...d,...u}},_7=5*60*1e3,C7=e=>{const[t,r]=h.useState([]),[s,a]=h.useState({total:0,active:0,completed:0,overdue:0}),[o,i]=h.useState(!0),[l,c]=h.useState(null),{tenantId:d}=Uu(),{isSuperAdmin:u,isLoading:f}=Fo(),m=jP({ttl:_7}),{metrics:p,startTimer:w,recordMetrics:v}=NP(),{shouldFetch:x,markAsFetched:g,reset:y}=SP(),{buildProjectsQuery:b,getComplexity:j}=_P(),S=h.useCallback(()=>u()?"projects_super_admin":`projects_${d}`,[d,u,e]),N=h.useCallback(D=>{const C=new Date;return{total:D.length,active:D.filter(k=>k.status==="active").length,completed:D.filter(k=>k.status==="completed").length,overdue:D.filter(k=>k.end_date&&new Date(k.end_date)<C&&k.status!=="completed").length}},[]),_=h.useCallback(async(D=!1)=>{if(f)return;if(!d&&!u()){i(!1);return}const C={tenantId:d,filters:e,isSuperAdmin:u()};if(!D&&!x(C))return;const k=S();if(!D){const P=m.get(k);if(P){r(P.projects),a(P.stats),i(!1);return}}try{const P=w();i(!0),c(null);const R=b(d,u(),e),{data:A,error:I}=await R;if(I)throw I;const F=A||[],B=N(F);m.set(k,{projects:F,stats:B}),r(F),a(B),g(C),v(P,{projects:F,stats:B},!1,j(e,u()))}catch(P){console.error("Error fetching projects:",P),c(P.message)}finally{i(!1)}},[d,f,e,u,x,S,m,w,b,N,g,v,j]),E=h.useCallback(()=>{m.invalidate(S()),y(),_(!0)},[m,S,y,_]);return h.useEffect(()=>{_()},[_]),{projects:t,stats:s,loading:o,error:l,metrics:p,refresh:E,clearCache:m.clear,isStale:()=>m.isStale(S())}},Vu=e=>{const{toast:t}=rt(),{projects:r,stats:s,loading:a,error:o,metrics:i,refresh:l,clearCache:c,isStale:d}=C7(e),u=h.useCallback(async p=>{try{const{data:w,error:v}=await O.from("projects").insert([p]).select().single();if(v)throw v;return t({title:"Succs",description:"Projet cr"}),l(),w}catch(w){throw t({title:"Erreur",description:w.message,variant:"destructive"}),w}},[t,l]),f=h.useCallback(async(p,w)=>{try{const{data:v,error:x}=await O.from("projects").update(w).eq("id",p).select().single();if(x)throw x;return t({title:"Succs",description:"Projet mis  jour"}),l(),v}catch(v){throw t({title:"Erreur",description:v.message,variant:"destructive"}),v}},[t,l]),m=h.useCallback(async p=>{try{const{error:w}=await O.from("projects").delete().eq("id",p);if(w)throw w;t({title:"Succs",description:"Projet supprim"}),l()}catch(w){throw t({title:"Erreur",description:w.message,variant:"destructive"}),w}},[t,l]);return{projects:r,stats:s,loading:a,error:o,metrics:i,refresh:l,refetch:l,clearCache:c,isStale:d,createProject:u,updateProject:f,deleteProject:m}},EP=({viewMode:e,onViewModeChange:t})=>n.jsx(le,{className:"pb-4 bg-gradient-to-r from-primary/10 to-accent/10 rounded-t-xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ce,{className:"text-foreground text-xl bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Diagramme de Gantt Interactif"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{variant:e==="day"?"default":"outline",size:"sm",onClick:()=>t("day"),className:"gap-1 transition-smooth hover-glow",children:[n.jsx(lt,{className:"h-4 w-4"}),"Jour"]}),n.jsxs(L,{variant:e==="week"?"default":"outline",size:"sm",onClick:()=>t("week"),className:"gap-1 transition-smooth hover-glow",children:[n.jsx(Zd,{className:"h-4 w-4"}),"Semaine"]}),n.jsxs(L,{variant:e==="month"?"default":"outline",size:"sm",onClick:()=>t("month"),className:"gap-1 transition-smooth hover-glow",children:[n.jsx(ze,{className:"h-4 w-4"}),"Mois"]})]})]})}),E7={todo:"muted-foreground",doing:"tech-blue",blocked:"tech-red",done:"success"},k7=e=>{switch(e){case"day":return{unitWidth:40,headerHeight:80,getUnit:t=>t.getDate().toString(),getSubUnit:t=>t.toLocaleDateString("fr-FR",{month:"short"}),unitDuration:1};case"week":return{unitWidth:120,headerHeight:80,getUnit:t=>`S${Math.ceil(t.getDate()/7)}`,getSubUnit:t=>t.toLocaleDateString("fr-FR",{month:"short",year:"2-digit"}),unitDuration:7};case"month":return{unitWidth:200,headerHeight:80,getUnit:t=>t.toLocaleDateString("fr-FR",{month:"long",year:"numeric"}),getSubUnit:t=>`${t.toLocaleDateString("fr-FR",{month:"short"})} ${t.getFullYear()}`,unitDuration:30};default:return{unitWidth:40,headerHeight:80,getUnit:()=>"",getSubUnit:()=>"",unitDuration:1}}},D7=(e,t,r)=>Math.ceil((e.getTime()-t.getTime())/864e5)/r.unitDuration*r.unitWidth,T7=(e,t)=>Math.ceil((e.endDate.getTime()-e.startDate.getTime())/864e5)/t.unitDuration*t.unitWidth,_y=(e,t,r)=>{if(r.unitDuration===30){const a=(t.getFullYear()-e.getFullYear())*12+(t.getMonth()-e.getMonth());return Math.max(1,a+1)}const s=Math.ceil((t.getTime()-e.getTime())/(1e3*60*60*24));return Math.ceil(s/r.unitDuration)},om=["#10b981","#f97316","#3b82f6","#ef4444","#eab308","#8b5cf6","#06b6d4","#ec4899","#84cc16","#6366f1","#059669","#fb923c","#2563eb","#dc2626","#fbbf24","#34d399","#fdba74","#60a5fa","#f87171","#fde047","#7c3aed","#0891b2","#f43f5e","#65a30d","#4f46e5","#a78bfa","#22d3ee","#fb7185","#a3e635","#818cf8","#14b8a6","#ea580c","#1e40af","#b91c1c","#ca8a04","#d946ef","#0ea5e9","#f472b6","#22c55e","#f59e0b","#c026d3","#2dd4bf","#be123c","#16a34a","#9333ea"];function P7(e){const t={};return e.forEach((r,s)=>{const a=om[s%om.length];t[r.id]=a}),t}function R7(e,t,r,s){if(e.project_id&&t[e.project_id])return t[e.project_id];const a=(s+r)%om.length;return om[a]}function kP(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function A7(e,t=30){const r=kP(e);if(!r)return e;const s=(100-t)/100,a=Math.round(r.r*s),o=Math.round(r.g*s),i=Math.round(r.b*s);return`#${a.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}function M7(e,t=50){const r=kP(e);if(!r)return e;const s=t/100,a=Math.round(r.r+(255-r.r)*s),o=Math.round(r.g+(255-r.g)*s),i=Math.round(r.b+(255-r.b)*s);return`#${a.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}const I7=({task:e,index:t,rowHeight:r,startDate:s,config:a,isDragging:o,isResizing:i,onMouseDown:l})=>{const c=D7(e.startDate,s,a),d=T7(e,a),u=e.color,f=A7(u,20),m=M7(u,40);return n.jsx("div",{"data-task-id":e.id,className:"absolute",style:{top:t*r+10,left:c,width:d,height:r-20},children:n.jsxs("div",{className:`relative h-full rounded-lg border-2 group overflow-hidden ${o||i?"shadow-lg scale-105 z-10":"hover:shadow-md"} transition-all duration-200 shadow-sm`,style:{backgroundColor:m,borderColor:u},children:[n.jsx("div",{className:"h-full rounded-l-lg transition-all duration-300",style:{width:`${e.progress}%`,backgroundColor:f}}),n.jsx("div",{className:"absolute left-0 top-0 h-full w-4 cursor-ew-resize bg-white/20 dark:bg-white/10 opacity-0 group-hover:opacity-100 hover:!opacity-100 hover:bg-white/40 dark:hover:bg-white/30 transition-all flex items-center justify-center border-r border-white/30",onMouseDown:p=>{p.stopPropagation(),p.preventDefault(),l(p,e.id,"resize-left")},title:"Redimensionner le dbut",children:n.jsx("div",{className:"w-0.5 h-8 bg-white rounded opacity-90"})}),n.jsx("div",{className:"absolute right-0 top-0 h-full w-4 cursor-ew-resize bg-white/20 dark:bg-white/10 opacity-0 group-hover:opacity-100 hover:!opacity-100 hover:bg-white/40 dark:hover:bg-white/30 transition-all flex items-center justify-center border-l border-white/30",onMouseDown:p=>{p.stopPropagation(),p.preventDefault(),l(p,e.id,"resize-right")},title:"Redimensionner la fin",children:n.jsx("div",{className:"w-0.5 h-8 bg-white rounded opacity-90"})}),n.jsx("div",{className:"absolute inset-x-4 inset-y-0 cursor-move flex items-center justify-center px-2",onMouseDown:p=>l(p,e.id,"drag"),title:"Dplacer la tche",children:n.jsxs("span",{className:"text-2xl font-extrabold pointer-events-none text-white dark:text-white drop-shadow-[0_2px_6px_rgba(0,0,0,0.9)] whitespace-nowrap",children:[e.progress,"%"]})})]})})},O7=({tasks:e,config:t,startDate:r,endDate:s,rowHeight:a,draggedTask:o,resizeTask:i,onTaskMouseDown:l,displayMode:c="tasks"})=>{const d=_y(r,s,t),u=m=>{if(c==="projects")return e.findIndex(v=>v.id===m);const p=e.reduce((v,x)=>{const g=x.project_id||"no-project";return v[g]||(v[g]=[]),v[g].push(x),v},{});let w=0;for(const[v,x]of Object.entries(p)){w++;const g=x.findIndex(y=>y.id===m);if(g!==-1)return w+g;w+=x.length}return 0},f=()=>{if(c==="projects")return e.length*a;const m=e.reduce((w,v)=>{const x=v.project_id||"no-project";return w[x]||(w[x]=[]),w[x].push(v),w},{});return(Object.keys(m).length+e.length)*a};return n.jsx("div",{className:"w-full h-full",children:n.jsxs("div",{className:"gantt-chart relative bg-gantt-task-bg/60 backdrop-blur-sm",style:{minWidth:d*t.unitWidth,height:f()},children:[Array.from({length:Math.ceil(f()/a)}).map((m,p)=>n.jsx("div",{className:"absolute w-full border-b border-gantt-grid/60",style:{top:(p+1)*a}},p)),Array.from({length:d}).map((m,p)=>n.jsx("div",{className:"absolute h-full border-r border-gantt-grid/60",style:{left:(p+1)*t.unitWidth}},p)),e.map(m=>n.jsx(I7,{task:m,index:u(m.id),rowHeight:a,startDate:r,config:t,isDragging:o===m.id,isResizing:(i==null?void 0:i.taskId)===m.id,onMouseDown:l},m.id))]})})},DP=()=>n.jsx(V,{className:"w-full modern-card glow-primary",children:n.jsxs(W,{className:"flex items-center justify-center p-8",children:[n.jsx(Vs,{className:"h-8 w-8 animate-spin text-primary"}),n.jsx("span",{className:"ml-2 text-foreground",children:"Chargement du diagramme de Gantt..."})]})}),TP=({error:e})=>n.jsx(V,{className:"w-full modern-card border-destructive/50",children:n.jsx(W,{className:"p-8",children:n.jsxs("div",{className:"text-center text-destructive",children:[n.jsx("p",{className:"font-semibold",children:"Erreur lors du chargement du diagramme"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:e})]})})});var Gw="Progress",Kw=100,[L7,hoe]=sr(Gw),[$7,F7]=L7(Gw),PP=h.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:o=z7,...i}=e;(a||a===0)&&!H1(a)&&console.error(B7(`${a}`,"Progress"));const l=H1(a)?a:Kw;s!==null&&!q1(s,l)&&console.error(U7(`${s}`,"Progress"));const c=q1(s,l)?s:null,d=im(c)?o(c,l):void 0;return n.jsx($7,{scope:r,value:c,max:l,children:n.jsx(je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":im(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":MP(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});PP.displayName=Gw;var RP="ProgressIndicator",AP=h.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=F7(RP,r);return n.jsx(je.div,{"data-state":MP(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});AP.displayName=RP;function z7(e,t){return`${Math.round(e/t*100)}%`}function MP(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function im(e){return typeof e=="number"}function H1(e){return im(e)&&!isNaN(e)&&e>0}function q1(e,t){return im(e)&&!isNaN(e)&&e<=t&&e>=0}function B7(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Kw}\`.`}function U7(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Kw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var IP=PP,V7=AP;const Ot=h.forwardRef(({className:e,value:t,...r},s)=>n.jsx(IP,{ref:s,className:pe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(V7,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ot.displayName=IP.displayName;var OP={exports:{}},LP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lc=h;function W7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var H7=typeof Object.is=="function"?Object.is:W7,q7=lc.useState,G7=lc.useEffect,K7=lc.useLayoutEffect,Y7=lc.useDebugValue;function X7(e,t){var r=t(),s=q7({inst:{value:r,getSnapshot:t}}),a=s[0].inst,o=s[1];return K7(function(){a.value=r,a.getSnapshot=t,px(a)&&o({inst:a})},[e,r,t]),G7(function(){return px(a)&&o({inst:a}),e(function(){px(a)&&o({inst:a})})},[e]),Y7(r),r}function px(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!H7(e,r)}catch{return!0}}function J7(e,t){return t()}var Q7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?J7:X7;LP.useSyncExternalStore=lc.useSyncExternalStore!==void 0?lc.useSyncExternalStore:Q7;OP.exports=LP;var Z7=OP.exports;function eq(){return Z7.useSyncExternalStore(tq,()=>!0,()=>!1)}function tq(){return()=>{}}var Yw="Avatar",[rq,moe]=sr(Yw),[nq,$P]=rq(Yw),FP=h.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[a,o]=h.useState("idle");return n.jsx(nq,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:n.jsx(je.span,{...s,ref:t})})});FP.displayName=Yw;var zP="AvatarImage",BP=h.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...o}=e,i=$P(zP,r),l=sq(s,o),c=Rt(d=>{a(d),i.onImageLoadingStatusChange(d)});return $t(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?n.jsx(je.img,{...o,ref:t,src:s}):null});BP.displayName=zP;var UP="AvatarFallback",VP=h.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...a}=e,o=$P(UP,r),[i,l]=h.useState(s===void 0);return h.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),i&&o.imageLoadingStatus!=="loaded"?n.jsx(je.span,{...a,ref:t}):null});VP.displayName=UP;function G1(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function sq(e,{referrerPolicy:t,crossOrigin:r}){const s=eq(),a=h.useRef(null),o=s?(a.current||(a.current=new window.Image),a.current):null,[i,l]=h.useState(()=>G1(o,e));return $t(()=>{l(G1(o,e))},[o,e]),$t(()=>{const c=f=>()=>{l(f)};if(!o)return;const d=c("loaded"),u=c("error");return o.addEventListener("load",d),o.addEventListener("error",u),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",d),o.removeEventListener("error",u)}},[o,r,t]),i}var WP=FP,HP=BP,qP=VP;const ka=h.forwardRef(({className:e,...t},r)=>n.jsx(WP,{ref:r,className:pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ka.displayName=WP.displayName;const zo=h.forwardRef(({className:e,...t},r)=>n.jsx(HP,{ref:r,className:pe("aspect-square h-full w-full",e),...t}));zo.displayName=HP.displayName;const Da=h.forwardRef(({className:e,...t},r)=>n.jsx(qP,{ref:r,className:pe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Da.displayName=qP.displayName;const aq={low:"bg-muted text-muted-foreground",medium:"bg-warning/20 text-warning border-warning/30",high:"bg-tech-orange/20 text-tech-orange border-tech-orange/30",urgent:"bg-destructive/20 text-destructive border-destructive/30"};function oq({task:e}){const t=E7[e.status];return n.jsx(V,{className:"mb-4 glass border-primary/30 bg-card/40 backdrop-blur-sm",children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx("h3",{className:"font-semibold text-foreground text-base leading-tight flex-1 mr-2",children:e.title}),n.jsx(re,{className:"shrink-0 text-xs font-medium",style:{backgroundColor:`${t}20`,color:t,borderColor:`${t}50`},children:e.status})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ka,{className:"h-6 w-6 ring-2 ring-primary/40",children:[n.jsx(zo,{src:"",alt:e.assignee||e.assigned_name||"NA"}),n.jsx(Da,{className:"text-xs bg-primary/40 text-primary-foreground font-semibold",children:(e.assignee||e.assigned_name||"NA").slice(0,2).toUpperCase()})]}),n.jsx("span",{className:"text-sm text-foreground/80",children:e.assignee||e.assigned_name||"Non assign"})]}),n.jsx(re,{className:`text-xs border font-medium ${aq[e.priority]}`,children:e.priority})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-foreground/70",children:[n.jsxs("div",{children:[n.jsx("span",{className:"block font-medium",children:"Dbut"}),n.jsx("span",{children:new Date(e.start_date).toLocaleDateString("fr-FR")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"block font-medium",children:"Fin"}),n.jsx("span",{children:new Date(e.due_date).toLocaleDateString("fr-FR")})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-foreground/80 font-medium",children:"Progrs"}),n.jsxs("span",{className:"text-primary font-semibold",children:[e.progress,"%"]})]}),n.jsx(Ot,{value:e.progress,className:"h-2"})]}),e.effort_estimate_h>0&&n.jsxs("div",{className:"text-xs text-foreground/70 flex items-center gap-1",children:[n.jsx("span",{className:"w-1 h-1 bg-accent rounded-full"}),"Estim: ",e.effort_estimate_h,"h"]})]})})})}function iq({tasks:e,loading:t,error:r,updateTaskDates:s}){const[a,o]=h.useState("week"),i=Ns(),l=e||i.tasks,c=t!==void 0?t:i.loading,d=r||i.error;if(c)return n.jsx(DP,{});if(d)return n.jsx(TP,{error:d});const u={todo:l.filter(m=>m.status==="todo"),doing:l.filter(m=>m.status==="doing"),blocked:l.filter(m=>m.status==="blocked"),done:l.filter(m=>m.status==="done")},f={todo:" faire",doing:"En cours",blocked:"Bloqu",done:"Termin"};return n.jsxs(V,{className:"w-full modern-card glow-primary transition-smooth",children:[n.jsx(EP,{viewMode:a,onViewModeChange:o}),n.jsx(W,{className:"p-4 bg-gantt-header/50 backdrop-blur-sm",children:n.jsx($r,{className:"h-[calc(100vh-250px)]",children:n.jsx("div",{className:"space-y-6",children:Object.entries(u).map(([m,p])=>p.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:f[m]}),n.jsx(re,{variant:"secondary",className:"bg-primary/40 text-primary-foreground border-primary/50",children:p.length})]}),n.jsx("div",{className:"space-y-3",children:p.map(w=>n.jsx(oq,{task:w},w.id))})]},m))})})})]})}const lq=(e,t,r,s)=>{const[a,o]=h.useState(null),[i,l]=h.useState(null),[c,d]=h.useState(null),u=h.useRef(null),f=h.useCallback((w,v,x,g)=>{w.preventDefault();const y=g.find(b=>b.id===v);y&&(d({x:w.clientX,originalStartDate:new Date(y.startDate),originalEndDate:new Date(y.endDate)}),x==="drag"?o(v):(x==="resize-left"||x==="resize-right")&&l({taskId:v,side:x==="resize-left"?"left":"right"}))},[]),m=h.useCallback(w=>{if(!c||!u.current)return;const v=w.clientX-c.x,x=e.unitWidth/e.unitDuration,y=v/x*24*60*60*1e3;if(a){const b=new Date(c.originalStartDate.getTime()+y);new Date(c.originalEndDate.getTime()+y);const j=document.querySelector(`[data-task-id="${a}"]`);if(j){const S=(b.getTime()-t.getTime())/864e5/e.unitDuration*e.unitWidth;j.style.left=`${S}px`}}else if(i){let b=new Date(c.originalStartDate),j=new Date(c.originalEndDate);i.side==="left"?(b=new Date(c.originalStartDate.getTime()+y),b>=c.originalEndDate&&(b=new Date(c.originalEndDate.getTime()-24*60*60*1e3))):(j=new Date(c.originalEndDate.getTime()+y),j<=c.originalStartDate&&(j=new Date(c.originalStartDate.getTime()+24*60*60*1e3)));const S=document.querySelector(`[data-task-id="${i.taskId}"]`);if(S){const N=(b.getTime()-t.getTime())/864e5/e.unitDuration*e.unitWidth,E=Math.max(1,Math.ceil((j.getTime()-b.getTime())/(1e3*60*60*24)))/e.unitDuration*e.unitWidth;S.style.left=`${N}px`,S.style.width=`${E}px`}}},[c,a,i,e]),p=h.useCallback(async w=>{if(!(!c||!r))try{const v=w.clientX-c.x,x=e.unitWidth/e.unitDuration,y=Math.round(v/x)*24*60*60*1e3;if(a){const b=new Date(c.originalStartDate.getTime()+y),j=new Date(c.originalEndDate.getTime()+y);await r(a,b.toISOString().split("T")[0],j.toISOString().split("T")[0])}else if(i){let b=new Date(c.originalStartDate),j=new Date(c.originalEndDate);i.side==="left"?(b=new Date(c.originalStartDate.getTime()+y),b>=c.originalEndDate&&(b=new Date(c.originalEndDate.getTime()-24*60*60*1e3))):(j=new Date(c.originalEndDate.getTime()+y),j<=c.originalStartDate&&(j=new Date(c.originalStartDate.getTime()+24*60*60*1e3))),await r(i.taskId,b.toISOString().split("T")[0],j.toISOString().split("T")[0])}}catch(v){if(console.error("Error updating task:",v),s){const x=a||(i==null?void 0:i.taskId);x&&await s(x)}else window.location.reload()}finally{o(null),l(null),d(null)}},[c,a,i,e,r,s]);return{draggedTask:a,resizeTask:i,chartRef:u,taskMouseDownHandler:f,handleMouseMove:m,handleMouseUp:p}};var GP="Toggle",Xw=h.forwardRef((e,t)=>{const{pressed:r,defaultPressed:s,onPressedChange:a,...o}=e,[i,l]=Br({prop:r,onChange:a,defaultProp:s??!1,caller:GP});return n.jsx(je.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:ue(e.onClick,()=>{e.disabled||l(!i)})})});Xw.displayName=GP;var KP=Xw,Bo="ToggleGroup",[YP,poe]=sr(Bo,[Cc]),XP=Cc(),Jw=X.forwardRef((e,t)=>{const{type:r,...s}=e;if(r==="single"){const a=s;return n.jsx(cq,{...a,ref:t})}if(r==="multiple"){const a=s;return n.jsx(dq,{...a,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Bo}\``)});Jw.displayName=Bo;var[JP,QP]=YP(Bo),cq=X.forwardRef((e,t)=>{const{value:r,defaultValue:s,onValueChange:a=()=>{},...o}=e,[i,l]=Br({prop:r,defaultProp:s??"",onChange:a,caller:Bo});return n.jsx(JP,{scope:e.__scopeToggleGroup,type:"single",value:X.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:X.useCallback(()=>l(""),[l]),children:n.jsx(ZP,{...o,ref:t})})}),dq=X.forwardRef((e,t)=>{const{value:r,defaultValue:s,onValueChange:a=()=>{},...o}=e,[i,l]=Br({prop:r,defaultProp:s??[],onChange:a,caller:Bo}),c=X.useCallback(u=>l((f=[])=>[...f,u]),[l]),d=X.useCallback(u=>l((f=[])=>f.filter(m=>m!==u)),[l]);return n.jsx(JP,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:d,children:n.jsx(ZP,{...o,ref:t})})});Jw.displayName=Bo;var[uq,fq]=YP(Bo),ZP=X.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:s=!1,rovingFocus:a=!0,orientation:o,dir:i,loop:l=!0,...c}=e,d=XP(r),u=Bi(i),f={role:"group",dir:u,...c};return n.jsx(uq,{scope:r,rovingFocus:a,disabled:s,children:a?n.jsx(Rw,{asChild:!0,...d,orientation:o,dir:u,loop:l,children:n.jsx(je.div,{...f,ref:t})}):n.jsx(je.div,{...f,ref:t})})}),lm="ToggleGroupItem",eR=X.forwardRef((e,t)=>{const r=QP(lm,e.__scopeToggleGroup),s=fq(lm,e.__scopeToggleGroup),a=XP(e.__scopeToggleGroup),o=r.value.includes(e.value),i=s.disabled||e.disabled,l={...e,pressed:o,disabled:i},c=X.useRef(null);return s.rovingFocus?n.jsx(Aw,{asChild:!0,...a,focusable:!i,active:o,ref:c,children:n.jsx(K1,{...l,ref:t})}):n.jsx(K1,{...l,ref:t})});eR.displayName=lm;var K1=X.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:s,...a}=e,o=QP(lm,r),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=o.type==="single"?i:void 0;return n.jsx(Xw,{...l,...a,ref:t,onPressedChange:c=>{c?o.onItemActivate(s):o.onItemDeactivate(s)}})}),tR=Jw,rR=eR;const nR=xc("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),hq=h.forwardRef(({className:e,variant:t,size:r,...s},a)=>n.jsx(KP,{ref:a,className:pe(nR({variant:t,size:r,className:e})),...s}));hq.displayName=KP.displayName;const sR=h.createContext({size:"default",variant:"default"}),Lp=h.forwardRef(({className:e,variant:t,size:r,children:s,...a},o)=>n.jsx(tR,{ref:o,className:pe("flex items-center justify-center gap-1",e),...a,children:n.jsx(sR.Provider,{value:{variant:t,size:r},children:s})}));Lp.displayName=tR.displayName;const Ti=h.forwardRef(({className:e,children:t,variant:r,size:s,...a},o)=>{const i=h.useContext(sR);return n.jsx(rR,{ref:o,className:pe(nR({variant:i.variant||r,size:i.size||s}),e),...a,children:t})});Ti.displayName=rR.displayName;const mq=()=>{const{toast:e}=rt(),[t,r]=h.useState("week"),[s,a]=h.useState("tasks"),[o,i]=h.useState(null),[l,c]=h.useState(null),{tasks:d,loading:u,error:f,updateTaskDates:m,refresh:p}=Ns(),{projects:w,loading:v,error:x}=Vu(),g=Sn();X.useRef(null);const y=X.useRef(null),b=X.useRef(null),j=k7(t),S=60,N=X.useMemo(()=>P7(w),[w]),_=()=>{const z=s==="tasks"?d:w;if(z.length===0)return{start:new Date(new Date().getFullYear(),0,1),end:new Date(new Date().getFullYear(),11,31)};let Z=null,Q=null;if(z.forEach(se=>{const ne=se.start_date,we=se.due_date||se.end_date;if(!ne||!we)return;const he=new Date(ne),be=new Date(we);isNaN(he.getTime())||isNaN(be.getTime())||((Z===null||he<Z)&&(Z=he),(Q===null||be>Q)&&(Q=be))}),!Z||!Q)return{start:new Date(new Date().getFullYear(),0,1),end:new Date(new Date().getFullYear(),11,31)};const H=new Date(Z);H.setMonth(H.getMonth()-1);const te=new Date(Q);return te.setMonth(te.getMonth()+1),{start:H,end:te}},{start:E,end:D}=_(),C=X.useCallback(async()=>{if(await p(),l){const{taskId:z}=l;setTimeout(()=>{const Z=document.querySelector(`[data-task-id="${z}"]`);Z&&(Z.style.outline="3px solid #ef4444",Z.style.transition="outline 0.3s ease-out",setTimeout(()=>{Z.style.outline="",setTimeout(()=>{Z.style.transition=""},300)},500))},100)}},[l,p]),k=async(z,Z,Q)=>{try{i(null),c(null),await m(z,Z,Q)}catch(H){console.error("Erreur lors de la mise  jour des dates:",H);const te=d.find(he=>he.id===z);te&&(c({taskId:z,originalStartDate:new Date(te.start_date),originalEndDate:new Date(te.due_date)}),setTimeout(()=>{C()},100));let se="Erreur lors de la mise  jour des dates",ne="",we="";if(H!=null&&H.message){const he=H.message.match(/ (.+?)\n\n/);he&&(se=he[1]);const be=H.message.match(/ (.+?)\n/);be&&(ne=be[1]);const de=H.message.match(/ (.+)/);de&&(we=de[1])}e({variant:"destructive",title:" "+se,description:n.jsxs("div",{className:"mt-2 space-y-2",children:[ne&&n.jsxs("p",{className:"text-sm",children:[" ",ne]}),we&&n.jsxs("p",{className:"text-sm font-medium",children:[" ",we]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"La barre a t replace  sa position valide."})]}),duration:7e3}),i({message:se,details:ne,suggestion:we}),setTimeout(()=>{i(null)},6e3)}},P=z=>Z=>{const Q=Z.currentTarget.scrollTop;b.current&&(b.current.scrollTop=Q)},R=(z,Z,Q)=>{const H=_y(z,Z,Q),te=[];let se=new Date(z);for(let ne=0;ne<H;ne++)Q.unitDuration===30?se=new Date(z.getFullYear(),z.getMonth()+ne,1):se=new Date(z.getTime()+ne*Q.unitDuration*24*60*60*1e3),te.push(n.jsx("div",{className:"flex h-full items-center justify-center border-r border-gantt-grid text-xs text-foreground/70",style:{minWidth:Q.unitWidth},children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-medium text-foreground",children:Q.getUnit(se)}),n.jsx("div",{className:"text-xs opacity-60 text-foreground/60",children:Q.getSubUnit(se)})]})},ne));return te};X.useMemo(()=>d.filter(z=>!z.project_id),[d]);const A=(z,Z)=>{const Q=R7({project_id:z.project_id},N,Z,w.length);return{id:z.id,name:z.title,startDate:new Date(z.start_date),endDate:new Date(z.due_date),progress:z.progress||0,color:Q,assignee:z.assigned_name||"Non assign",priority:z.priority,status:z.status,project_id:z.project_id}},I=(z,Z)=>{const Q=N[z.id]||"#6b7280";return{id:z.id,name:z.name,startDate:z.start_date?new Date(z.start_date):new Date,endDate:z.end_date?new Date(z.end_date):new Date,progress:z.progress||0,color:Q,assignee:z.manager_name||"Non assign",priority:z.priority||"medium",status:z.status||"planning",project_id:z.id}},F=s==="tasks"?d.map(A):w.map(I),{draggedTask:B,resizeTask:T,chartRef:M,taskMouseDownHandler:U,handleMouseMove:q,handleMouseUp:Y}=lq(j,E,k,C),G=(z,Z,Q)=>{U(z,Z,Q,F)};return h.useEffect(()=>{if(B||T)return document.addEventListener("mousemove",q),document.addEventListener("mouseup",Y),()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",Y)}},[B,T,q,Y]),u||s==="projects"&&v?n.jsx(DP,{}):f||s==="projects"&&x?n.jsx(TP,{error:f||x}):g?n.jsx(iq,{tasks:F,loading:u,error:f,updateTaskDates:k}):n.jsxs(V,{className:"w-full modern-card glow-primary transition-smooth",children:[n.jsx(EP,{viewMode:t,onViewModeChange:r}),n.jsxs("div",{className:"px-6 pb-4 bg-gantt-header/20",children:[n.jsxs(Lp,{type:"single",value:s,onValueChange:z=>z&&a(z),className:"justify-start",children:[n.jsx(Ti,{value:"tasks",className:"data-[state=on]:bg-primary data-[state=on]:text-primary-foreground",children:" Tches"}),n.jsx(Ti,{value:"projects",className:"data-[state=on]:bg-primary data-[state=on]:text-primary-foreground",children:" Projets"})]}),s==="projects"&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Vue Gantt des projets - Chaque barre reprsente la dure complte d'un projet"})]}),n.jsx(W,{className:"p-0 bg-gantt-header/50 backdrop-blur-sm",children:n.jsxs("div",{className:"h-[600px] lg:h-[700px] rounded-b-xl flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"flex border-b border-gantt-grid/50 flex-shrink-0 z-20",children:[n.jsx("div",{className:"w-64 h-20 flex items-center px-4 bg-gantt-header border-r border-gantt-grid/50",children:n.jsx("span",{className:"font-medium text-foreground",children:s==="projects"?"Projets":"Tches"})}),n.jsx("div",{ref:M,className:"flex-1 bg-gantt-header overflow-x-auto overflow-y-hidden scrollbar-thin",onScroll:z=>{b.current&&(b.current.scrollLeft=z.currentTarget.scrollLeft)},children:n.jsx("div",{className:"flex border-b border-gantt-grid h-20",style:{minWidth:_y(E,D,j)*j.unitWidth},children:R(E,D,j)})})]}),n.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[n.jsx("div",{ref:y,className:"w-64 overflow-y-auto overflow-x-hidden scrollbar-thin border-r border-gantt-grid/50 bg-gantt-task-bg/30",onScroll:P(),children:s==="projects"?F.map(z=>n.jsx("div",{className:"flex items-center px-4 border-b border-gantt-grid/30 hover:bg-gantt-hover/20 transition-smooth cursor-pointer",style:{height:S},children:n.jsxs("div",{children:[n.jsxs("div",{className:"font-bold text-lg text-foreground",children:[" ",z.name]}),n.jsx("div",{className:"text-sm text-foreground/70",children:z.assignee})]})},z.id)):(()=>{const z=F.reduce((Q,H)=>{const te=H.project_id||"no-project";return Q[te]||(Q[te]=[]),Q[te].push(H),Q},{}),Z=w.filter(Q=>z[Q.id]).map((Q,H)=>({projectId:Q.id,projectName:Q.name,projectNumber:H+1,projectColor:N[Q.id],tasks:z[Q.id]}));return z["no-project"]&&Z.push({projectId:"no-project",projectName:"Sans projet",projectNumber:null,projectColor:"#6b7280",tasks:z["no-project"]}),Z.map(({projectId:Q,projectName:H,projectNumber:te,projectColor:se,tasks:ne})=>n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center px-4 border-b-2 border-gantt-grid/50",style:{height:S,backgroundColor:se,opacity:.9},children:n.jsxs("div",{className:"font-bold text-white flex items-center gap-2",children:[te&&n.jsxs("span",{className:"bg-white/20 px-2 py-0.5 rounded text-sm",children:["#",te]})," ",H]})}),ne.map(we=>n.jsx("div",{className:"flex items-center px-6 border-b border-gantt-grid/30 hover:bg-gantt-hover/20 transition-smooth cursor-pointer",style:{height:S},children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:we.name}),n.jsx("div",{className:"text-sm text-foreground/70",children:we.assignee})]})},we.id))]},Q))})()}),n.jsx("div",{ref:b,className:"flex-1 min-w-0 bg-gantt-task-bg/30 overflow-auto scrollbar-thin",onScroll:z=>{y.current&&(y.current.scrollTop=z.currentTarget.scrollTop),M.current&&(M.current.scrollLeft=z.currentTarget.scrollLeft)},children:n.jsx(O7,{tasks:F,config:j,startDate:E,endDate:D,rowHeight:S,draggedTask:B,resizeTask:T,onTaskMouseDown:G,displayMode:s})})]})]})})]})},$p=h.createContext(null);$p.displayName="PanelGroupContext";const Pt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Qw=10,gi=h.useLayoutEffect,Y1=Mm.useId,pq=typeof Y1=="function"?Y1:()=>null;let gq=0;function Zw(e=null){const t=pq(),r=h.useRef(e||t||null);return r.current===null&&(r.current=""+gq++),e??r.current}function aR({children:e,className:t="",collapsedSize:r,collapsible:s,defaultSize:a,forwardedRef:o,id:i,maxSize:l,minSize:c,onCollapse:d,onExpand:u,onResize:f,order:m,style:p,tagName:w="div",...v}){const x=h.useContext($p);if(x===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:g,expandPanel:y,getPanelSize:b,getPanelStyle:j,groupId:S,isPanelCollapsed:N,reevaluatePanelConstraints:_,registerPanel:E,resizePanel:D,unregisterPanel:C}=x,k=Zw(i),P=h.useRef({callbacks:{onCollapse:d,onExpand:u,onResize:f},constraints:{collapsedSize:r,collapsible:s,defaultSize:a,maxSize:l,minSize:c},id:k,idIsFromProps:i!==void 0,order:m});h.useRef({didLogMissingDefaultSizeWarning:!1}),gi(()=>{const{callbacks:A,constraints:I}=P.current,F={...I};P.current.id=k,P.current.idIsFromProps=i!==void 0,P.current.order=m,A.onCollapse=d,A.onExpand=u,A.onResize=f,I.collapsedSize=r,I.collapsible=s,I.defaultSize=a,I.maxSize=l,I.minSize=c,(F.collapsedSize!==I.collapsedSize||F.collapsible!==I.collapsible||F.maxSize!==I.maxSize||F.minSize!==I.minSize)&&_(P.current,F)}),gi(()=>{const A=P.current;return E(A),()=>{C(A)}},[m,k,E,C]),h.useImperativeHandle(o,()=>({collapse:()=>{g(P.current)},expand:A=>{y(P.current,A)},getId(){return k},getSize(){return b(P.current)},isCollapsed(){return N(P.current)},isExpanded(){return!N(P.current)},resize:A=>{D(P.current,A)}}),[g,y,b,N,k,D]);const R=j(P.current,a);return h.createElement(w,{...v,children:e,className:t,id:k,style:{...R,...p},[Pt.groupId]:S,[Pt.panel]:"",[Pt.panelCollapsible]:s||void 0,[Pt.panelId]:k,[Pt.panelSize]:parseFloat(""+R.flexGrow).toFixed(1)})}const oR=h.forwardRef((e,t)=>h.createElement(aR,{...e,forwardedRef:t}));aR.displayName="Panel";oR.displayName="forwardRef(Panel)";let Cy=null,mh=-1,Ya=null;function xq(e,t){if(t){const r=(t&uR)!==0,s=(t&fR)!==0,a=(t&hR)!==0,o=(t&mR)!==0;if(r)return a?"se-resize":o?"ne-resize":"e-resize";if(s)return a?"sw-resize":o?"nw-resize":"w-resize";if(a)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function vq(){Ya!==null&&(document.head.removeChild(Ya),Cy=null,Ya=null,mh=-1)}function gx(e,t){var r,s;const a=xq(e,t);if(Cy!==a){if(Cy=a,Ya===null&&(Ya=document.createElement("style"),document.head.appendChild(Ya)),mh>=0){var o;(o=Ya.sheet)===null||o===void 0||o.removeRule(mh)}mh=(r=(s=Ya.sheet)===null||s===void 0?void 0:s.insertRule(`*{cursor: ${a} !important;}`))!==null&&r!==void 0?r:-1}}function iR(e){return e.type==="keydown"}function lR(e){return e.type.startsWith("pointer")}function cR(e){return e.type.startsWith("mouse")}function Fp(e){if(lR(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(cR(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function yq(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function wq(e,t,r){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function bq(e,t){if(e===t)throw new Error("Cannot compare node with itself");const r={a:Q1(e),b:Q1(t)};let s;for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),s=e;qe(s,"Stacking order can only be calculated for elements with a common ancestor");const a={a:J1(X1(r.a)),b:J1(X1(r.b))};if(a.a===a.b){const o=s.childNodes,i={a:r.a.at(-1),b:r.b.at(-1)};let l=o.length;for(;l--;){const c=o[l];if(c===i.a)return 1;if(c===i.b)return-1}}return Math.sign(a.a-a.b)}const jq=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Nq(e){var t;const r=getComputedStyle((t=dR(e))!==null&&t!==void 0?t:e).display;return r==="flex"||r==="inline-flex"}function Sq(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Nq(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||jq.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function X1(e){let t=e.length;for(;t--;){const r=e[t];if(qe(r,"Missing node"),Sq(r))return r}return null}function J1(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Q1(e){const t=[];for(;e;)t.push(e),e=dR(e);return t}function dR(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const uR=1,fR=2,hR=4,mR=8,_q=yq()==="coarse";let ms=[],Ml=!1,ri=new Map,zp=new Map;const du=new Set;function Cq(e,t,r,s,a){var o;const{ownerDocument:i}=t,l={direction:r,element:t,hitAreaMargins:s,setResizeHandlerState:a},c=(o=ri.get(i))!==null&&o!==void 0?o:0;return ri.set(i,c+1),du.add(l),cm(),function(){var u;zp.delete(e),du.delete(l);const f=(u=ri.get(i))!==null&&u!==void 0?u:1;if(ri.set(i,f-1),cm(),f===1&&ri.delete(i),ms.includes(l)){const m=ms.indexOf(l);m>=0&&ms.splice(m,1),tb(),a("up",!0,null)}}}function Eq(e){const{target:t}=e,{x:r,y:s}=Fp(e);Ml=!0,eb({target:t,x:r,y:s}),cm(),ms.length>0&&(dm("down",e),e.preventDefault(),pR(t)||e.stopImmediatePropagation())}function xx(e){const{x:t,y:r}=Fp(e);if(Ml&&e.buttons===0&&(Ml=!1,dm("up",e)),!Ml){const{target:s}=e;eb({target:s,x:t,y:r})}dm("move",e),tb(),ms.length>0&&e.preventDefault()}function vx(e){const{target:t}=e,{x:r,y:s}=Fp(e);zp.clear(),Ml=!1,ms.length>0&&(e.preventDefault(),pR(t)||e.stopImmediatePropagation()),dm("up",e),eb({target:t,x:r,y:s}),tb(),cm()}function pR(e){let t=e;for(;t;){if(t.hasAttribute(Pt.resizeHandle))return!0;t=t.parentElement}return!1}function eb({target:e,x:t,y:r}){ms.splice(0);let s=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(s=e),du.forEach(a=>{const{element:o,hitAreaMargins:i}=a,l=o.getBoundingClientRect(),{bottom:c,left:d,right:u,top:f}=l,m=_q?i.coarse:i.fine;if(t>=d-m&&t<=u+m&&r>=f-m&&r<=c+m){if(s!==null&&document.contains(s)&&o!==s&&!o.contains(s)&&!s.contains(o)&&bq(s,o)>0){let w=s,v=!1;for(;w&&!w.contains(o);){if(wq(w.getBoundingClientRect(),l)){v=!0;break}w=w.parentElement}if(v)return}ms.push(a)}})}function yx(e,t){zp.set(e,t)}function tb(){let e=!1,t=!1;ms.forEach(s=>{const{direction:a}=s;a==="horizontal"?e=!0:t=!0});let r=0;zp.forEach(s=>{r|=s}),e&&t?gx("intersection",r):e?gx("horizontal",r):t?gx("vertical",r):vq()}let wx=new AbortController;function cm(){wx.abort(),wx=new AbortController;const e={capture:!0,signal:wx.signal};du.size&&(Ml?(ms.length>0&&ri.forEach((t,r)=>{const{body:s}=r;t>0&&(s.addEventListener("contextmenu",vx,e),s.addEventListener("pointerleave",xx,e),s.addEventListener("pointermove",xx,e))}),window.addEventListener("pointerup",vx,e),window.addEventListener("pointercancel",vx,e)):ri.forEach((t,r)=>{const{body:s}=r;t>0&&(s.addEventListener("pointerdown",Eq,e),s.addEventListener("pointermove",xx,e))}))}function dm(e,t){du.forEach(r=>{const{setResizeHandlerState:s}=r,a=ms.includes(r);s(e,a,t)})}function kq(){const[e,t]=h.useState(0);return h.useCallback(()=>t(r=>r+1),[])}function qe(e,t){if(!e)throw console.error(t),Error(t)}function Pi(e,t,r=Qw){return e.toFixed(r)===t.toFixed(r)?0:e>t?1:-1}function ia(e,t,r=Qw){return Pi(e,t,r)===0}function cn(e,t,r){return Pi(e,t,r)===0}function Dq(e,t,r){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++){const a=e[s],o=t[s];if(!cn(a,o,r))return!1}return!0}function jl({panelConstraints:e,panelIndex:t,size:r}){const s=e[t];qe(s!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:a=0,collapsible:o,maxSize:i=100,minSize:l=0}=s;if(Pi(r,l)<0)if(o){const c=(a+l)/2;Pi(r,c)<0?r=a:r=l}else r=l;return r=Math.min(i,r),r=parseFloat(r.toFixed(Qw)),r}function fd({delta:e,initialLayout:t,panelConstraints:r,pivotIndices:s,prevLayout:a,trigger:o}){if(cn(e,0))return t;const i=[...t],[l,c]=s;qe(l!=null,"Invalid first pivot index"),qe(c!=null,"Invalid second pivot index");let d=0;if(o==="keyboard"){{const f=e<0?c:l,m=r[f];qe(m,`Panel constraints not found for index ${f}`);const{collapsedSize:p=0,collapsible:w,minSize:v=0}=m;if(w){const x=t[f];if(qe(x!=null,`Previous layout not found for panel index ${f}`),cn(x,p)){const g=v-x;Pi(g,Math.abs(e))>0&&(e=e<0?0-g:g)}}}{const f=e<0?l:c,m=r[f];qe(m,`No panel constraints found for index ${f}`);const{collapsedSize:p=0,collapsible:w,minSize:v=0}=m;if(w){const x=t[f];if(qe(x!=null,`Previous layout not found for panel index ${f}`),cn(x,v)){const g=x-p;Pi(g,Math.abs(e))>0&&(e=e<0?0-g:g)}}}}{const f=e<0?1:-1;let m=e<0?c:l,p=0;for(;;){const v=t[m];qe(v!=null,`Previous layout not found for panel index ${m}`);const g=jl({panelConstraints:r,panelIndex:m,size:100})-v;if(p+=g,m+=f,m<0||m>=r.length)break}const w=Math.min(Math.abs(e),Math.abs(p));e=e<0?0-w:w}{let m=e<0?l:c;for(;m>=0&&m<r.length;){const p=Math.abs(e)-Math.abs(d),w=t[m];qe(w!=null,`Previous layout not found for panel index ${m}`);const v=w-p,x=jl({panelConstraints:r,panelIndex:m,size:v});if(!cn(w,x)&&(d+=w-x,i[m]=x,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?m--:m++}}if(Dq(a,i))return a;{const f=e<0?c:l,m=t[f];qe(m!=null,`Previous layout not found for panel index ${f}`);const p=m+d,w=jl({panelConstraints:r,panelIndex:f,size:p});if(i[f]=w,!cn(w,p)){let v=p-w,g=e<0?c:l;for(;g>=0&&g<r.length;){const y=i[g];qe(y!=null,`Previous layout not found for panel index ${g}`);const b=y+v,j=jl({panelConstraints:r,panelIndex:g,size:b});if(cn(y,j)||(v-=j-y,i[g]=j),cn(v,0))break;e>0?g--:g++}}}const u=i.reduce((f,m)=>m+f,0);return cn(u,100)?i:a}function Tq({layout:e,panelsArray:t,pivotIndices:r}){let s=0,a=100,o=0,i=0;const l=r[0];qe(l!=null,"No pivot index found"),t.forEach((f,m)=>{const{constraints:p}=f,{maxSize:w=100,minSize:v=0}=p;m===l?(s=v,a=w):(o+=v,i+=w)});const c=Math.min(a,100-o),d=Math.max(s,100-i),u=e[l];return{valueMax:c,valueMin:d,valueNow:u}}function uu(e,t=document){return Array.from(t.querySelectorAll(`[${Pt.resizeHandleId}][data-panel-group-id="${e}"]`))}function gR(e,t,r=document){const a=uu(e,r).findIndex(o=>o.getAttribute(Pt.resizeHandleId)===t);return a??null}function xR(e,t,r){const s=gR(e,t,r);return s!=null?[s,s+1]:[-1,-1]}function vR(e,t=document){var r;if(t instanceof HTMLElement&&(t==null||(r=t.dataset)===null||r===void 0?void 0:r.panelGroupId)==e)return t;const s=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return s||null}function Bp(e,t=document){const r=t.querySelector(`[${Pt.resizeHandleId}="${e}"]`);return r||null}function Pq(e,t,r,s=document){var a,o,i,l;const c=Bp(t,s),d=uu(e,s),u=c?d.indexOf(c):-1,f=(a=(o=r[u])===null||o===void 0?void 0:o.id)!==null&&a!==void 0?a:null,m=(i=(l=r[u+1])===null||l===void 0?void 0:l.id)!==null&&i!==void 0?i:null;return[f,m]}function Rq({committedValuesRef:e,eagerValuesRef:t,groupId:r,layout:s,panelDataArray:a,panelGroupElement:o,setLayout:i}){h.useRef({didWarnAboutMissingResizeHandle:!1}),gi(()=>{if(!o)return;const l=uu(r,o);for(let c=0;c<a.length-1;c++){const{valueMax:d,valueMin:u,valueNow:f}=Tq({layout:s,panelsArray:a,pivotIndices:[c,c+1]}),m=l[c];if(m!=null){const p=a[c];qe(p,`No panel data found for index "${c}"`),m.setAttribute("aria-controls",p.id),m.setAttribute("aria-valuemax",""+Math.round(d)),m.setAttribute("aria-valuemin",""+Math.round(u)),m.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{l.forEach((c,d)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[r,s,a,o]),h.useEffect(()=>{if(!o)return;const l=t.current;qe(l,"Eager values not found");const{panelDataArray:c}=l,d=vR(r,o);qe(d!=null,`No group found for id "${r}"`);const u=uu(r,o);qe(u,`No resize handles found for group id "${r}"`);const f=u.map(m=>{const p=m.getAttribute(Pt.resizeHandleId);qe(p,"Resize handle element has no handle id attribute");const[w,v]=Pq(r,p,c,o);if(w==null||v==null)return()=>{};const x=g=>{if(!g.defaultPrevented)switch(g.key){case"Enter":{g.preventDefault();const y=c.findIndex(b=>b.id===w);if(y>=0){const b=c[y];qe(b,`No panel data found for index ${y}`);const j=s[y],{collapsedSize:S=0,collapsible:N,minSize:_=0}=b.constraints;if(j!=null&&N){const E=fd({delta:cn(j,S)?_-S:S-j,initialLayout:s,panelConstraints:c.map(D=>D.constraints),pivotIndices:xR(r,p,o),prevLayout:s,trigger:"keyboard"});s!==E&&i(E)}}break}}};return m.addEventListener("keydown",x),()=>{m.removeEventListener("keydown",x)}});return()=>{f.forEach(m=>m())}},[o,e,t,r,s,a,i])}function Z1(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function yR(e,t){const r=e==="horizontal",{x:s,y:a}=Fp(t);return r?s:a}function Aq(e,t,r,s,a){const o=r==="horizontal",i=Bp(t,a);qe(i,`No resize handle element found for id "${t}"`);const l=i.getAttribute(Pt.groupId);qe(l,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=s;const d=yR(r,e),u=vR(l,a);qe(u,`No group element found for id "${l}"`);const f=u.getBoundingClientRect(),m=o?f.width:f.height;return(d-c)/m*100}function Mq(e,t,r,s,a,o){if(iR(e)){const i=r==="horizontal";let l=0;e.shiftKey?l=100:a!=null?l=a:l=10;let c=0;switch(e.key){case"ArrowDown":c=i?0:l;break;case"ArrowLeft":c=i?-l:0;break;case"ArrowRight":c=i?l:0;break;case"ArrowUp":c=i?0:-l;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return s==null?0:Aq(e,t,r,s,o)}function Iq({panelDataArray:e}){const t=Array(e.length),r=e.map(o=>o.constraints);let s=0,a=100;for(let o=0;o<e.length;o++){const i=r[o];qe(i,`Panel constraints not found for index ${o}`);const{defaultSize:l}=i;l!=null&&(s++,t[o]=l,a-=l)}for(let o=0;o<e.length;o++){const i=r[o];qe(i,`Panel constraints not found for index ${o}`);const{defaultSize:l}=i;if(l!=null)continue;const c=e.length-s,d=a/c;s++,t[o]=d,a-=d}return t}function rl(e,t,r){t.forEach((s,a)=>{const o=e[a];qe(o,`Panel data not found for index ${a}`);const{callbacks:i,constraints:l,id:c}=o,{collapsedSize:d=0,collapsible:u}=l,f=r[c];if(f==null||s!==f){r[c]=s;const{onCollapse:m,onExpand:p,onResize:w}=i;w&&w(s,f),u&&(m||p)&&(p&&(f==null||ia(f,d))&&!ia(s,d)&&p(),m&&(f==null||!ia(f,d))&&ia(s,d)&&m())}})}function zf(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function Oq({defaultSize:e,dragState:t,layout:r,panelData:s,panelIndex:a,precision:o=3}){const i=r[a];let l;return i==null?l=e!=null?e.toPrecision(o):"1":s.length===1?l="1":l=i.toPrecision(o),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function Lq(e,t=10){let r=null;return(...a)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{e(...a)},t)}}function eS(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,r)=>{localStorage.setItem(t,r)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function wR(e){return`react-resizable-panels:${e}`}function bR(e){return e.map(t=>{const{constraints:r,id:s,idIsFromProps:a,order:o}=t;return a?s:o?`${o}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((t,r)=>t.localeCompare(r)).join(",")}function jR(e,t){try{const r=wR(e),s=t.getItem(r);if(s){const a=JSON.parse(s);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function $q(e,t,r){var s,a;const o=(s=jR(e,r))!==null&&s!==void 0?s:{},i=bR(t);return(a=o[i])!==null&&a!==void 0?a:null}function Fq(e,t,r,s,a){var o;const i=wR(e),l=bR(t),c=(o=jR(e,a))!==null&&o!==void 0?o:{};c[l]={expandToSizes:Object.fromEntries(r.entries()),layout:s};try{a.setItem(i,JSON.stringify(c))}catch(d){console.error(d)}}function tS({layout:e,panelConstraints:t}){const r=[...e],s=r.reduce((o,i)=>o+i,0);if(r.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${r.map(o=>`${o}%`).join(", ")}`);if(!cn(s,100)&&r.length>0)for(let o=0;o<t.length;o++){const i=r[o];qe(i!=null,`No layout data found for index ${o}`);const l=100/s*i;r[o]=l}let a=0;for(let o=0;o<t.length;o++){const i=r[o];qe(i!=null,`No layout data found for index ${o}`);const l=jl({panelConstraints:t,panelIndex:o,size:i});i!=l&&(a+=i-l,r[o]=l)}if(!cn(a,0))for(let o=0;o<t.length;o++){const i=r[o];qe(i!=null,`No layout data found for index ${o}`);const l=i+a,c=jl({panelConstraints:t,panelIndex:o,size:l});if(i!==c&&(a-=c-i,r[o]=c,cn(a,0)))break}return r}const zq=100,hd={getItem:e=>(eS(hd),hd.getItem(e)),setItem:(e,t)=>{eS(hd),hd.setItem(e,t)}},rS={};function NR({autoSaveId:e=null,children:t,className:r="",direction:s,forwardedRef:a,id:o=null,onLayout:i=null,keyboardResizeBy:l=null,storage:c=hd,style:d,tagName:u="div",...f}){const m=Zw(o),p=h.useRef(null),[w,v]=h.useState(null),[x,g]=h.useState([]),y=kq(),b=h.useRef({}),j=h.useRef(new Map),S=h.useRef(0),N=h.useRef({autoSaveId:e,direction:s,dragState:w,id:m,keyboardResizeBy:l,onLayout:i,storage:c}),_=h.useRef({layout:x,panelDataArray:[],panelDataArrayChanged:!1});h.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),h.useImperativeHandle(a,()=>({getId:()=>N.current.id,getLayout:()=>{const{layout:G}=_.current;return G},setLayout:G=>{const{onLayout:z}=N.current,{layout:Z,panelDataArray:Q}=_.current,H=tS({layout:G,panelConstraints:Q.map(te=>te.constraints)});Z1(Z,H)||(g(H),_.current.layout=H,z&&z(H),rl(Q,H,b.current))}}),[]),gi(()=>{N.current.autoSaveId=e,N.current.direction=s,N.current.dragState=w,N.current.id=m,N.current.onLayout=i,N.current.storage=c}),Rq({committedValuesRef:N,eagerValuesRef:_,groupId:m,layout:x,panelDataArray:_.current.panelDataArray,setLayout:g,panelGroupElement:p.current}),h.useEffect(()=>{const{panelDataArray:G}=_.current;if(e){if(x.length===0||x.length!==G.length)return;let z=rS[e];z==null&&(z=Lq(Fq,zq),rS[e]=z);const Z=[...G],Q=new Map(j.current);z(e,Z,Q,x,c)}},[e,x,c]),h.useEffect(()=>{});const E=h.useCallback(G=>{const{onLayout:z}=N.current,{layout:Z,panelDataArray:Q}=_.current;if(G.constraints.collapsible){const H=Q.map(we=>we.constraints),{collapsedSize:te=0,panelSize:se,pivotIndices:ne}=Ko(Q,G,Z);if(qe(se!=null,`Panel size not found for panel "${G.id}"`),!ia(se,te)){j.current.set(G.id,se);const he=cl(Q,G)===Q.length-1?se-te:te-se,be=fd({delta:he,initialLayout:Z,panelConstraints:H,pivotIndices:ne,prevLayout:Z,trigger:"imperative-api"});zf(Z,be)||(g(be),_.current.layout=be,z&&z(be),rl(Q,be,b.current))}}},[]),D=h.useCallback((G,z)=>{const{onLayout:Z}=N.current,{layout:Q,panelDataArray:H}=_.current;if(G.constraints.collapsible){const te=H.map(de=>de.constraints),{collapsedSize:se=0,panelSize:ne=0,minSize:we=0,pivotIndices:he}=Ko(H,G,Q),be=z??we;if(ia(ne,se)){const de=j.current.get(G.id),Me=de!=null&&de>=be?de:be,Ke=cl(H,G)===H.length-1?ne-Me:Me-ne,et=fd({delta:Ke,initialLayout:Q,panelConstraints:te,pivotIndices:he,prevLayout:Q,trigger:"imperative-api"});zf(Q,et)||(g(et),_.current.layout=et,Z&&Z(et),rl(H,et,b.current))}}},[]),C=h.useCallback(G=>{const{layout:z,panelDataArray:Z}=_.current,{panelSize:Q}=Ko(Z,G,z);return qe(Q!=null,`Panel size not found for panel "${G.id}"`),Q},[]),k=h.useCallback((G,z)=>{const{panelDataArray:Z}=_.current,Q=cl(Z,G);return Oq({defaultSize:z,dragState:w,layout:x,panelData:Z,panelIndex:Q})},[w,x]),P=h.useCallback(G=>{const{layout:z,panelDataArray:Z}=_.current,{collapsedSize:Q=0,collapsible:H,panelSize:te}=Ko(Z,G,z);return qe(te!=null,`Panel size not found for panel "${G.id}"`),H===!0&&ia(te,Q)},[]),R=h.useCallback(G=>{const{layout:z,panelDataArray:Z}=_.current,{collapsedSize:Q=0,collapsible:H,panelSize:te}=Ko(Z,G,z);return qe(te!=null,`Panel size not found for panel "${G.id}"`),!H||Pi(te,Q)>0},[]),A=h.useCallback(G=>{const{panelDataArray:z}=_.current;z.push(G),z.sort((Z,Q)=>{const H=Z.order,te=Q.order;return H==null&&te==null?0:H==null?-1:te==null?1:H-te}),_.current.panelDataArrayChanged=!0,y()},[y]);gi(()=>{if(_.current.panelDataArrayChanged){_.current.panelDataArrayChanged=!1;const{autoSaveId:G,onLayout:z,storage:Z}=N.current,{layout:Q,panelDataArray:H}=_.current;let te=null;if(G){const ne=$q(G,H,Z);ne&&(j.current=new Map(Object.entries(ne.expandToSizes)),te=ne.layout)}te==null&&(te=Iq({panelDataArray:H}));const se=tS({layout:te,panelConstraints:H.map(ne=>ne.constraints)});Z1(Q,se)||(g(se),_.current.layout=se,z&&z(se),rl(H,se,b.current))}}),gi(()=>{const G=_.current;return()=>{G.layout=[]}},[]);const I=h.useCallback(G=>{let z=!1;const Z=p.current;return Z&&window.getComputedStyle(Z,null).getPropertyValue("direction")==="rtl"&&(z=!0),function(H){H.preventDefault();const te=p.current;if(!te)return()=>null;const{direction:se,dragState:ne,id:we,keyboardResizeBy:he,onLayout:be}=N.current,{layout:de,panelDataArray:Me}=_.current,{initialLayout:Be}=ne??{},Ke=xR(we,G,te);let et=Mq(H,G,se,ne,he,te);const Xt=se==="horizontal";Xt&&z&&(et=-et);const $=Me.map(ie=>ie.constraints),K=fd({delta:et,initialLayout:Be??de,panelConstraints:$,pivotIndices:Ke,prevLayout:de,trigger:iR(H)?"keyboard":"mouse-or-touch"}),ee=!zf(de,K);(lR(H)||cR(H))&&S.current!=et&&(S.current=et,!ee&&et!==0?Xt?yx(G,et<0?uR:fR):yx(G,et<0?hR:mR):yx(G,0)),ee&&(g(K),_.current.layout=K,be&&be(K),rl(Me,K,b.current))}},[]),F=h.useCallback((G,z)=>{const{onLayout:Z}=N.current,{layout:Q,panelDataArray:H}=_.current,te=H.map(de=>de.constraints),{panelSize:se,pivotIndices:ne}=Ko(H,G,Q);qe(se!=null,`Panel size not found for panel "${G.id}"`);const he=cl(H,G)===H.length-1?se-z:z-se,be=fd({delta:he,initialLayout:Q,panelConstraints:te,pivotIndices:ne,prevLayout:Q,trigger:"imperative-api"});zf(Q,be)||(g(be),_.current.layout=be,Z&&Z(be),rl(H,be,b.current))},[]),B=h.useCallback((G,z)=>{const{layout:Z,panelDataArray:Q}=_.current,{collapsedSize:H=0,collapsible:te}=z,{collapsedSize:se=0,collapsible:ne,maxSize:we=100,minSize:he=0}=G.constraints,{panelSize:be}=Ko(Q,G,Z);be!=null&&(te&&ne&&ia(be,H)?ia(H,se)||F(G,se):be<he?F(G,he):be>we&&F(G,we))},[F]),T=h.useCallback((G,z)=>{const{direction:Z}=N.current,{layout:Q}=_.current;if(!p.current)return;const H=Bp(G,p.current);qe(H,`Drag handle element not found for id "${G}"`);const te=yR(Z,z);v({dragHandleId:G,dragHandleRect:H.getBoundingClientRect(),initialCursorPosition:te,initialLayout:Q})},[]),M=h.useCallback(()=>{v(null)},[]),U=h.useCallback(G=>{const{panelDataArray:z}=_.current,Z=cl(z,G);Z>=0&&(z.splice(Z,1),delete b.current[G.id],_.current.panelDataArrayChanged=!0,y())},[y]),q=h.useMemo(()=>({collapsePanel:E,direction:s,dragState:w,expandPanel:D,getPanelSize:C,getPanelStyle:k,groupId:m,isPanelCollapsed:P,isPanelExpanded:R,reevaluatePanelConstraints:B,registerPanel:A,registerResizeHandle:I,resizePanel:F,startDragging:T,stopDragging:M,unregisterPanel:U,panelGroupElement:p.current}),[E,w,s,D,C,k,m,P,R,B,A,I,F,T,M,U]),Y={display:"flex",flexDirection:s==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return h.createElement($p.Provider,{value:q},h.createElement(u,{...f,children:t,className:r,id:o,ref:p,style:{...Y,...d},[Pt.group]:"",[Pt.groupDirection]:s,[Pt.groupId]:m}))}const SR=h.forwardRef((e,t)=>h.createElement(NR,{...e,forwardedRef:t}));NR.displayName="PanelGroup";SR.displayName="forwardRef(PanelGroup)";function cl(e,t){return e.findIndex(r=>r===t||r.id===t.id)}function Ko(e,t,r){const s=cl(e,t),o=s===e.length-1?[s-1,s]:[s,s+1],i=r[s];return{...t.constraints,panelSize:i,pivotIndices:o}}function Bq({disabled:e,handleId:t,resizeHandler:r,panelGroupElement:s}){h.useEffect(()=>{if(e||r==null||s==null)return;const a=Bp(t,s);if(a==null)return;const o=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),r(i);break}case"F6":{i.preventDefault();const l=a.getAttribute(Pt.groupId);qe(l,`No group element found for id "${l}"`);const c=uu(l,s),d=gR(l,t,s);qe(d!==null,`No resize element found for id "${t}"`);const u=i.shiftKey?d>0?d-1:c.length-1:d+1<c.length?d+1:0;c[u].focus();break}}};return a.addEventListener("keydown",o),()=>{a.removeEventListener("keydown",o)}},[s,e,t,r])}function _R({children:e=null,className:t="",disabled:r=!1,hitAreaMargins:s,id:a,onBlur:o,onClick:i,onDragging:l,onFocus:c,onPointerDown:d,onPointerUp:u,style:f={},tabIndex:m=0,tagName:p="div",...w}){var v,x;const g=h.useRef(null),y=h.useRef({onClick:i,onDragging:l,onPointerDown:d,onPointerUp:u});h.useEffect(()=>{y.current.onClick=i,y.current.onDragging=l,y.current.onPointerDown=d,y.current.onPointerUp=u});const b=h.useContext($p);if(b===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:S,registerResizeHandle:N,startDragging:_,stopDragging:E,panelGroupElement:D}=b,C=Zw(a),[k,P]=h.useState("inactive"),[R,A]=h.useState(!1),[I,F]=h.useState(null),B=h.useRef({state:k});gi(()=>{B.current.state=k}),h.useEffect(()=>{if(r)F(null);else{const q=N(C);F(()=>q)}},[r,C,N]);const T=(v=s==null?void 0:s.coarse)!==null&&v!==void 0?v:15,M=(x=s==null?void 0:s.fine)!==null&&x!==void 0?x:5;h.useEffect(()=>{if(r||I==null)return;const q=g.current;qe(q,"Element ref not attached");let Y=!1;return Cq(C,q,j,{coarse:T,fine:M},(z,Z,Q)=>{if(!Z){P("inactive");return}switch(z){case"down":{P("drag"),Y=!1,qe(Q,'Expected event to be defined for "down" action'),_(C,Q);const{onDragging:H,onPointerDown:te}=y.current;H==null||H(!0),te==null||te();break}case"move":{const{state:H}=B.current;Y=!0,H!=="drag"&&P("hover"),qe(Q,'Expected event to be defined for "move" action'),I(Q);break}case"up":{P("hover"),E();const{onClick:H,onDragging:te,onPointerUp:se}=y.current;te==null||te(!1),se==null||se(),Y||H==null||H();break}}})},[T,j,r,M,N,C,I,_,E]),Bq({disabled:r,handleId:C,resizeHandler:I,panelGroupElement:D});const U={touchAction:"none",userSelect:"none"};return h.createElement(p,{...w,children:e,className:t,id:a,onBlur:()=>{A(!1),o==null||o()},onFocus:()=>{A(!0),c==null||c()},ref:g,role:"separator",style:{...U,...f},tabIndex:m,[Pt.groupDirection]:j,[Pt.groupId]:S,[Pt.resizeHandle]:"",[Pt.resizeHandleActive]:k==="drag"?"pointer":R?"keyboard":void 0,[Pt.resizeHandleEnabled]:!r,[Pt.resizeHandleId]:C,[Pt.resizeHandleState]:k})}_R.displayName="PanelResizeHandle";const CR=({className:e,...t})=>n.jsx(SR,{className:pe("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),um=oR,ER=({withHandle:e,className:t,...r})=>n.jsx(_R,{className:pe("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...r,children:e&&n.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:n.jsx(w2,{className:"h-2.5 w-2.5"})})}),kR=()=>n.jsx(V,{className:"w-full",children:n.jsxs(W,{className:"flex items-center justify-center p-8",children:[n.jsx(Vs,{className:"h-8 w-8 animate-spin"}),n.jsx("span",{className:"ml-2",children:"Chargement des tches..."})]})}),DR=({error:e})=>n.jsx(V,{className:"w-full",children:n.jsx(W,{className:"p-8",children:n.jsxs("div",{className:"text-center text-destructive",children:[n.jsx("p",{children:"Erreur lors du chargement des tches"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:e})]})})}),Uq={low:"bg-muted text-muted-foreground",medium:"bg-warning/20 text-warning border-warning/30",high:"bg-tech-orange/20 text-tech-orange border-tech-orange/30",urgent:"bg-destructive/20 text-destructive border-destructive/30"},Vq={todo:"bg-muted text-muted-foreground",doing:"bg-info/20 text-info border-info/30",blocked:"bg-warning/20 text-warning border-warning/30",done:"bg-success/20 text-success border-success/30"};function Wq({task:e,onToggleAction:t,isSelected:r,onSelect:s}){return n.jsxs(V,{className:`mb-4 glass border-primary/30 bg-card/40 backdrop-blur-sm transition-smooth ${r?"ring-2 ring-primary/50 glow-primary":""}`,children:[n.jsxs(le,{className:"pb-3",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx(ce,{className:"text-base font-semibold text-foreground leading-tight flex-1 mr-2",children:e.title}),n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>s(e.id),className:`shrink-0 h-8 w-8 p-0 ${r?"bg-primary/20 text-primary":""}`,children:n.jsx(fs,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(re,{className:`text-xs border font-medium ${Vq[e.status]}`,children:e.status}),n.jsx(re,{className:`text-xs border font-medium ${Uq[e.priority]}`,children:e.priority}),n.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[n.jsxs(ka,{className:"h-6 w-6 ring-2 ring-primary/40",children:[n.jsx(zo,{src:"",alt:e.assignee||e.assigned_name||"NA"}),n.jsx(Da,{className:"text-xs bg-primary/40 text-primary-foreground font-semibold",children:(e.assignee||e.assigned_name||"NA").slice(0,2).toUpperCase()})]}),n.jsx("span",{className:"text-xs text-foreground/80",children:e.assignee||e.assigned_name||"Non assign"})]})]})]}),n.jsxs(W,{className:"pt-0 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"block font-medium text-foreground/80",children:"Dbut"}),n.jsx("span",{className:"text-foreground/70",children:new Date(e.start_date).toLocaleDateString("fr-FR")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"block font-medium text-foreground/80",children:"Fin"}),n.jsx("span",{className:"text-foreground/70",children:new Date(e.due_date).toLocaleDateString("fr-FR")})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-foreground/80 font-medium",children:"Progrs"}),n.jsxs("span",{className:"text-primary font-semibold",children:[e.progress,"%"]})]}),n.jsx(Ot,{value:e.progress,className:"h-2"})]}),e.effort_estimate_h>0&&n.jsxs("div",{className:"text-xs text-foreground/70 flex items-center gap-1",children:[n.jsx("span",{className:"w-1 h-1 bg-accent rounded-full"}),"Estim: ",e.effort_estimate_h,"h"]}),e.task_actions&&e.task_actions.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground/80",children:"Actions"}),n.jsx("div",{className:"space-y-2",children:e.task_actions.map(a=>n.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/20",children:[n.jsx(ha,{checked:a.is_done,onCheckedChange:()=>t(e.id,a.id),className:"shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("span",{className:`text-sm ${a.is_done?"line-through text-foreground/50":"text-foreground"}`,children:a.title}),a.weight_percentage>0&&n.jsxs("span",{className:"text-xs text-foreground/60 ml-2",children:["(",a.weight_percentage,"%)"]})]})]},a.id))})]})]})]})}function Hq({tasks:e,loading:t,error:r,duplicateTask:s,deleteTask:a,toggleAction:o,addActionColumn:i,createSubTask:l,updateTaskAssignee:c,refetch:d}){var P;const u=Ns(),f=e||u.tasks,m=t!==void 0?t:u.loading,p=r||u.error,w=o||u.toggleAction,v=i||u.addActionColumn,x=d||u.refetch,[g,y]=h.useState(""),[b,j]=h.useState(),[S,N]=h.useState([]);h.useEffect(()=>{N(f)},[f]);const _=async()=>{if(g.trim()&&b&&v)try{await v(g.trim(),b),y(""),j(void 0),x&&await x()}catch(R){console.error("Error adding action column:",R)}},E=async(R,A)=>{if(w)try{const I=S.map(F=>{if(F.id===R&&F.task_actions){const B=F.task_actions.map(Y=>Y.id===A?{...Y,is_done:!Y.is_done}:Y),T=B.reduce((Y,G)=>Y+G.weight_percentage,0),M=B.filter(Y=>Y.is_done).reduce((Y,G)=>Y+G.weight_percentage,0),U=T===0?0:Math.round(M);let q=F.status;return U===100?q="done":U>0?q="doing":q="todo",{...F,task_actions:B,progress:U,status:q}}return F});N(I),await w(R,A)}catch(I){console.error("Error in handleToggleAction:",I),x&&await x()}},D=R=>{j(R===b?void 0:R)};if(m)return n.jsx(kR,{});if(p)return n.jsx(DR,{error:p});const C={todo:S.filter(R=>R.status==="todo"),doing:S.filter(R=>R.status==="doing"),blocked:S.filter(R=>R.status==="blocked"),done:S.filter(R=>R.status==="done")},k={todo:" faire",doing:"En cours",blocked:"Bloqu",done:"Termin"};return n.jsxs(V,{className:"w-full modern-card glow-accent transition-smooth",children:[n.jsxs(le,{className:"bg-gradient-to-r from-primary/10 via-accent/10 to-tech-purple/10 backdrop-blur-sm border-b",children:[n.jsx(ce,{className:"text-lg font-semibold text-foreground",children:"Tableau Dynamique Mobile"}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsx(ye,{placeholder:"Nouvelle action...",value:g,onChange:R=>y(R.target.value),className:"flex-1 text-sm"}),n.jsx(L,{onClick:_,disabled:!b||!g.trim(),size:"sm",className:"shrink-0",children:n.jsx(jt,{className:"h-4 w-4"})})]}),b&&n.jsxs("p",{className:"text-xs text-foreground/70",children:["Action slectionne pour: ",(P=S.find(R=>R.id===b))==null?void 0:P.title]})]}),n.jsx(W,{className:"p-0",children:n.jsxs(pr,{defaultValue:"todo",className:"w-full",children:[n.jsx(ar,{className:"grid w-full grid-cols-4 bg-gradient-to-r from-primary/5 via-accent/5 to-tech-purple/5",children:Object.entries(k).map(([R,A])=>n.jsxs(Ce,{value:R,className:"text-xs transition-smooth data-[state=active]:bg-primary/20 data-[state=active]:text-primary font-semibold",children:[A,n.jsx(re,{variant:"secondary",className:"ml-1 text-xs bg-primary/30 text-primary-foreground",children:C[R].length})]},R))}),Object.entries(C).map(([R,A])=>n.jsx(Ee,{value:R,className:"p-4 bg-card/30 backdrop-blur-sm",children:n.jsx($r,{className:"h-[calc(100vh-300px)]",children:n.jsx("div",{className:"space-y-4",children:A.map(I=>n.jsx(Wq,{task:I,onToggleAction:E,isSelected:b===I.id,onSelect:D},I.id))})})},R))]})})]})}var TR=["PageUp","PageDown"],PR=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],RR={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Dc="Slider",[Ey,qq,Gq]=Tu(Dc),[AR,goe]=sr(Dc,[Gq]),[Kq,Up]=AR(Dc),MR=h.forwardRef((e,t)=>{const{name:r,min:s=0,max:a=100,step:o=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:w,...v}=e,x=h.useRef(new Set),g=h.useRef(0),b=i==="horizontal"?Yq:Xq,[j=[],S]=Br({prop:u,defaultProp:d,onChange:k=>{var R;(R=[...x.current][g.current])==null||R.focus(),f(k)}}),N=h.useRef(j);function _(k){const P=tG(j,k);C(k,P)}function E(k){C(k,g.current)}function D(){const k=N.current[g.current];j[g.current]!==k&&m(j)}function C(k,P,{commit:R}={commit:!1}){const A=aG(o),I=oG(Math.round((k-s)/o)*o+s,A),F=cu(I,[s,a]);S((B=[])=>{const T=Zq(B,F,P);if(sG(T,c*o)){g.current=T.indexOf(F);const M=String(T)!==String(B);return M&&R&&m(T),M?T:B}else return B})}return n.jsx(Kq,{scope:e.__scopeSlider,name:r,disabled:l,min:s,max:a,valueIndexToChangeRef:g,thumbs:x.current,values:j,orientation:i,form:w,children:n.jsx(Ey.Provider,{scope:e.__scopeSlider,children:n.jsx(Ey.Slot,{scope:e.__scopeSlider,children:n.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...v,ref:t,onPointerDown:ue(v.onPointerDown,()=>{l||(N.current=j)}),min:s,max:a,inverted:p,onSlideStart:l?void 0:_,onSlideMove:l?void 0:E,onSlideEnd:l?void 0:D,onHomeKeyDown:()=>!l&&C(s,0,{commit:!0}),onEndKeyDown:()=>!l&&C(a,j.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:P})=>{if(!l){const I=TR.includes(k.key)||k.shiftKey&&PR.includes(k.key)?10:1,F=g.current,B=j[F],T=o*I*P;C(B+T,F,{commit:!0})}}})})})})});MR.displayName=Dc;var[IR,OR]=AR(Dc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Yq=h.forwardRef((e,t)=>{const{min:r,max:s,dir:a,inverted:o,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[f,m]=h.useState(null),p=Ae(t,b=>m(b)),w=h.useRef(void 0),v=Bi(a),x=v==="ltr",g=x&&!o||!x&&o;function y(b){const j=w.current||f.getBoundingClientRect(),S=[0,j.width],_=rb(S,g?[r,s]:[s,r]);return w.current=j,_(b-j.left)}return n.jsx(IR,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:n.jsx(LR,{dir:v,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const j=y(b.clientX);i==null||i(j)},onSlideMove:b=>{const j=y(b.clientX);l==null||l(j)},onSlideEnd:()=>{w.current=void 0,c==null||c()},onStepKeyDown:b=>{const S=RR[g?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:S?-1:1})}})})}),Xq=h.forwardRef((e,t)=>{const{min:r,max:s,inverted:a,onSlideStart:o,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=h.useRef(null),f=Ae(t,u),m=h.useRef(void 0),p=!a;function w(v){const x=m.current||u.current.getBoundingClientRect(),g=[0,x.height],b=rb(g,p?[s,r]:[r,s]);return m.current=x,b(v-x.top)}return n.jsx(IR,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:n.jsx(LR,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const x=w(v.clientY);o==null||o(x)},onSlideMove:v=>{const x=w(v.clientY);i==null||i(x)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:v=>{const g=RR[p?"from-bottom":"from-top"].includes(v.key);c==null||c({event:v,direction:g?-1:1})}})})}),LR=h.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=Up(Dc,r);return n.jsx(je.span,{...d,ref:t,onKeyDown:ue(e.onKeyDown,f=>{f.key==="Home"?(i(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):TR.concat(PR).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:ue(e.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(m)?m.focus():s(f)}),onPointerMove:ue(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:ue(e.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),o(f))})})}),$R="SliderTrack",FR=h.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=Up($R,r);return n.jsx(je.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});FR.displayName=$R;var ky="SliderRange",zR=h.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=Up(ky,r),o=OR(ky,r),i=h.useRef(null),l=Ae(t,i),c=a.values.length,d=a.values.map(m=>VR(m,a.min,a.max)),u=c>1?Math.min(...d):0,f=100-Math.max(...d);return n.jsx(je.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:l,style:{...e.style,[o.startEdge]:u+"%",[o.endEdge]:f+"%"}})});zR.displayName=ky;var Dy="SliderThumb",BR=h.forwardRef((e,t)=>{const r=qq(e.__scopeSlider),[s,a]=h.useState(null),o=Ae(t,l=>a(l)),i=h.useMemo(()=>s?r().findIndex(l=>l.ref.current===s):-1,[r,s]);return n.jsx(Jq,{...e,ref:o,index:i})}),Jq=h.forwardRef((e,t)=>{const{__scopeSlider:r,index:s,name:a,...o}=e,i=Up(Dy,r),l=OR(Dy,r),[c,d]=h.useState(null),u=Ae(t,y=>d(y)),f=c?i.form||!!c.closest("form"):!0,m=sp(c),p=i.values[s],w=p===void 0?0:VR(p,i.min,i.max),v=eG(s,i.values.length),x=m==null?void 0:m[l.size],g=x?rG(x,w,l.direction):0;return h.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${w}% + ${g}px)`},children:[n.jsx(Ey.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(je.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:u,style:p===void 0?{display:"none"}:e.style,onFocus:ue(e.onFocus,()=>{i.valueIndexToChangeRef.current=s})})}),f&&n.jsx(UR,{name:a??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:p},s)]})});BR.displayName=Dy;var Qq="RadioBubbleInput",UR=h.forwardRef(({__scopeSlider:e,value:t,...r},s)=>{const a=h.useRef(null),o=Ae(a,s),i=_p(t);return h.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&u){const f=new Event("input",{bubbles:!0});u.call(l,t),l.dispatchEvent(f)}},[i,t]),n.jsx(je.input,{style:{display:"none"},...r,ref:o,defaultValue:t})});UR.displayName=Qq;function Zq(e=[],t,r){const s=[...e];return s[r]=t,s.sort((a,o)=>a-o)}function VR(e,t,r){const o=100/(r-t)*(e-t);return cu(o,[0,100])}function eG(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function tG(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),s=Math.min(...r);return r.indexOf(s)}function rG(e,t,r){const s=e/2,o=rb([0,50],[0,s]);return(s-o(t)*r)*r}function nG(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function sG(e,t){if(t>0){const r=nG(e);return Math.min(...r)>=t}return!0}function rb(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function aG(e){return(String(e).split(".")[1]||"").length}function oG(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var WR=MR,iG=FR,lG=zR,cG=BR;const nb=h.forwardRef(({className:e,...t},r)=>n.jsxs(WR,{ref:r,className:pe("relative flex w-full touch-none select-none items-center",e),...t,children:[n.jsx(iG,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:n.jsx(lG,{className:"absolute h-full bg-primary"})}),n.jsx(cG,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));nb.displayName=WR.displayName;var Le=function(){return Le=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Le.apply(this,arguments)};function dG(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function HR(e,t,r){for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}function Wu(e){return e.mode==="multiple"}function Hu(e){return e.mode==="range"}function Vp(e){return e.mode==="single"}var uG={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function fG(e,t){return Ve(e,"LLLL y",t)}function hG(e,t){return Ve(e,"d",t)}function mG(e,t){return Ve(e,"LLLL",t)}function pG(e){return"".concat(e)}function gG(e,t){return Ve(e,"cccccc",t)}function xG(e,t){return Ve(e,"yyyy",t)}var vG=Object.freeze({__proto__:null,formatCaption:fG,formatDay:hG,formatMonthCaption:mG,formatWeekNumber:pG,formatWeekdayName:gG,formatYearCaption:xG}),yG=function(e,t,r){return Ve(e,"do MMMM (EEEE)",r)},wG=function(){return"Month: "},bG=function(){return"Go to next month"},jG=function(){return"Go to previous month"},NG=function(e,t){return Ve(e,"cccc",t)},SG=function(e){return"Week n. ".concat(e)},_G=function(){return"Year: "},CG=Object.freeze({__proto__:null,labelDay:yG,labelMonthDropdown:wG,labelNext:bG,labelPrevious:jG,labelWeekNumber:SG,labelWeekday:NG,labelYearDropdown:_G});function EG(){var e="buttons",t=uG,r=Uw,s={},a={},o=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:vG,labels:CG,locale:r,modifiersClassNames:s,modifiers:a,numberOfMonths:o,styles:i,today:l,mode:"default"}}function kG(e){var t=e.fromYear,r=e.toYear,s=e.fromMonth,a=e.toMonth,o=e.fromDate,i=e.toDate;return s?o=zr(s):t&&(o=new Date(t,0,1)),a?i=Bu(a):r&&(i=new Date(r,11,31)),{fromDate:o?Sa(o):void 0,toDate:i?Sa(i):void 0}}var qR=h.createContext(void 0);function DG(e){var t,r=e.initialProps,s=EG(),a=kG(r),o=a.fromDate,i=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:s.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(Vp(r)||Wu(r)||Hu(r))&&(c=r.onSelect);var d=Le(Le(Le({},s),r),{captionLayout:l,classNames:Le(Le({},s.classNames),r.classNames),components:Le({},r.components),formatters:Le(Le({},s.formatters),r.formatters),fromDate:o,labels:Le(Le({},s.labels),r.labels),mode:r.mode||s.mode,modifiers:Le(Le({},s.modifiers),r.modifiers),modifiersClassNames:Le(Le({},s.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Le(Le({},s.styles),r.styles),toDate:i});return n.jsx(qR.Provider,{value:d,children:e.children})}function pt(){var e=h.useContext(qR);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function GR(e){var t=pt(),r=t.locale,s=t.classNames,a=t.styles,o=t.formatters.formatCaption;return n.jsx("div",{className:s.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:r})})}function TG(e){return n.jsx("svg",Le({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:n.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function KR(e){var t,r,s=e.onChange,a=e.value,o=e.children,i=e.caption,l=e.className,c=e.style,d=pt(),u=(r=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:TG;return n.jsxs("div",{className:l,style:c,children:[n.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),n.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:s,children:o}),n.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[i,n.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function PG(e){var t,r=pt(),s=r.fromDate,a=r.toDate,o=r.styles,i=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!s)return n.jsx(n.Fragment,{});if(!a)return n.jsx(n.Fragment,{});var f=[];if(kH(s,a))for(var m=zr(s),p=s.getMonth();p<=a.getMonth();p++)f.push(hx(m,p));else for(var m=zr(new Date),p=0;p<=11;p++)f.push(hx(m,p));var w=function(x){var g=Number(x.target.value),y=hx(zr(e.displayMonth),g);e.onChange(y)},v=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:KR;return n.jsx(v,{name:"months","aria-label":u(),className:c.dropdown_month,style:o.dropdown_month,onChange:w,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:f.map(function(x){return n.jsx("option",{value:x.getMonth(),children:l(x,{locale:i})},x.getMonth())})})}function RG(e){var t,r=e.displayMonth,s=pt(),a=s.fromDate,o=s.toDate,i=s.locale,l=s.styles,c=s.classNames,d=s.components,u=s.formatters.formatYearCaption,f=s.labels.labelYearDropdown,m=[];if(!a)return n.jsx(n.Fragment,{});if(!o)return n.jsx(n.Fragment,{});for(var p=a.getFullYear(),w=o.getFullYear(),v=p;v<=w;v++)m.push(W1(yT(new Date),v));var x=function(y){var b=W1(zr(r),Number(y.target.value));e.onChange(b)},g=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:KR;return n.jsx(g,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:r.getFullYear(),caption:u(r,{locale:i}),children:m.map(function(y){return n.jsx("option",{value:y.getFullYear(),children:u(y,{locale:i})},y.getFullYear())})})}function AG(e,t){var r=h.useState(e),s=r[0],a=r[1],o=t===void 0?s:t;return[o,a]}function MG(e){var t=e.month,r=e.defaultMonth,s=e.today,a=t||r||s||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(o&&ac(o,a)<0){var d=-1*(c-1);a=Ur(o,d)}return i&&ac(a,i)<0&&(a=i),zr(a)}function IG(){var e=pt(),t=MG(e),r=AG(t,e.month),s=r[0],a=r[1],o=function(i){var l;if(!e.disableNavigation){var c=zr(i);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[s,o]}function OG(e,t){for(var r=t.reverseMonths,s=t.numberOfMonths,a=zr(e),o=zr(Ur(a,s)),i=ac(o,a),l=[],c=0;c<i;c++){var d=Ur(a,c);l.push(d)}return r&&(l=l.reverse()),l}function LG(e,t){if(!t.disableNavigation){var r=t.toDate,s=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=s?o:1,l=zr(e);if(!r)return Ur(l,i);var c=ac(r,e);if(!(c<o))return Ur(l,i)}}function $G(e,t){if(!t.disableNavigation){var r=t.fromDate,s=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=s?o:1,l=zr(e);if(!r)return Ur(l,-i);var c=ac(l,r);if(!(c<=0))return Ur(l,-i)}}var YR=h.createContext(void 0);function FG(e){var t=pt(),r=IG(),s=r[0],a=r[1],o=OG(s,t),i=LG(s,t),l=$G(s,t),c=function(f){return o.some(function(m){return Vw(f,m)})},d=function(f,m){c(f)||(m&&ic(f,m)?a(Ur(f,1+t.numberOfMonths*-1)):a(f))},u={currentMonth:s,displayMonths:o,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:i,isDateDisplayed:c};return n.jsx(YR.Provider,{value:u,children:e.children})}function qu(){var e=h.useContext(YR);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function nS(e){var t,r=pt(),s=r.classNames,a=r.styles,o=r.components,i=qu().goToMonth,l=function(u){i(Ur(u,e.displayIndex?-e.displayIndex:0))},c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:GR,d=n.jsx(c,{id:e.id,displayMonth:e.displayMonth});return n.jsxs("div",{className:s.caption_dropdowns,style:a.caption_dropdowns,children:[n.jsx("div",{className:s.vhidden,children:d}),n.jsx(PG,{onChange:l,displayMonth:e.displayMonth}),n.jsx(RG,{onChange:l,displayMonth:e.displayMonth})]})}function zG(e){return n.jsx("svg",Le({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function BG(e){return n.jsx("svg",Le({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var fm=h.forwardRef(function(e,t){var r=pt(),s=r.classNames,a=r.styles,o=[s.button_reset,s.button];e.className&&o.push(e.className);var i=o.join(" "),l=Le(Le({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),n.jsx("button",Le({},e,{ref:t,type:"button",className:i,style:l}))});function UG(e){var t,r,s=pt(),a=s.dir,o=s.locale,i=s.classNames,l=s.styles,c=s.labels,d=c.labelPrevious,u=c.labelNext,f=s.components;if(!e.nextMonth&&!e.previousMonth)return n.jsx(n.Fragment,{});var m=d(e.previousMonth,{locale:o}),p=[i.nav_button,i.nav_button_previous].join(" "),w=u(e.nextMonth,{locale:o}),v=[i.nav_button,i.nav_button_next].join(" "),x=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:BG,g=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:zG;return n.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&n.jsx(fm,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?n.jsx(x,{className:i.nav_icon,style:l.nav_icon}):n.jsx(g,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&n.jsx(fm,{name:"next-month","aria-label":w,className:v,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?n.jsx(g,{className:i.nav_icon,style:l.nav_icon}):n.jsx(x,{className:i.nav_icon,style:l.nav_icon})})]})}function sS(e){var t=pt().numberOfMonths,r=qu(),s=r.previousMonth,a=r.nextMonth,o=r.goToMonth,i=r.displayMonths,l=i.findIndex(function(w){return Vw(e.displayMonth,w)}),c=l===0,d=l===i.length-1,u=t>1&&(c||!d),f=t>1&&(d||!c),m=function(){s&&o(s)},p=function(){a&&o(a)};return n.jsx(UG,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:f,nextMonth:a,previousMonth:s,onPreviousClick:m,onNextClick:p})}function VG(e){var t,r=pt(),s=r.classNames,a=r.disableNavigation,o=r.styles,i=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:GR,d;return a?d=n.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?d=n.jsx(nS,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?d=n.jsxs(n.Fragment,{children:[n.jsx(nS,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),n.jsx(sS,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=n.jsxs(n.Fragment,{children:[n.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(sS,{displayMonth:e.displayMonth,id:e.id})]}),n.jsx("div",{className:s.caption,style:o.caption,children:d})}function WG(e){var t=pt(),r=t.footer,s=t.styles,a=t.classNames.tfoot;return r?n.jsx("tfoot",{className:a,style:s.tfoot,children:n.jsx("tr",{children:n.jsx("td",{colSpan:8,children:r})})}):n.jsx(n.Fragment,{})}function HG(e,t,r){for(var s=r?Ei(new Date):Vr(new Date,{locale:e,weekStartsOn:t}),a=[],o=0;o<7;o++){var i=Ht(s,o);a.push(i)}return a}function qG(){var e=pt(),t=e.classNames,r=e.styles,s=e.showWeekNumber,a=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=HG(a,o,i);return n.jsxs("tr",{style:r.head_row,className:t.head_row,children:[s&&n.jsx("td",{style:r.head_cell,className:t.head_cell}),d.map(function(u,f){return n.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(u,{locale:a}),children:l(u,{locale:a})},f)})]})}function GG(){var e,t=pt(),r=t.classNames,s=t.styles,a=t.components,o=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:qG;return n.jsx("thead",{style:s.head,className:r.head,children:n.jsx(o,{})})}function KG(e){var t=pt(),r=t.locale,s=t.formatters.formatDay;return n.jsx(n.Fragment,{children:s(e.date,{locale:r})})}var sb=h.createContext(void 0);function YG(e){if(!Wu(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return n.jsx(sb.Provider,{value:t,children:e.children})}return n.jsx(XG,{initialProps:e.initialProps,children:e.children})}function XG(e){var t=e.initialProps,r=e.children,s=t.selected,a=t.min,o=t.max,i=function(d,u,f){var m,p;(m=t.onDayClick)===null||m===void 0||m.call(t,d,u,f);var w=!!(u.selected&&a&&(s==null?void 0:s.length)===a);if(!w){var v=!!(!u.selected&&o&&(s==null?void 0:s.length)===o);if(!v){var x=s?HR([],s):[];if(u.selected){var g=x.findIndex(function(y){return kr(d,y)});x.splice(g,1)}else x.push(d);(p=t.onSelect)===null||p===void 0||p.call(t,x,d,u,f)}}},l={disabled:[]};s&&l.disabled.push(function(d){var u=o&&s.length>o-1,f=s.some(function(m){return kr(m,d)});return!!(u&&!f)});var c={selected:s,onDayClick:i,modifiers:l};return n.jsx(sb.Provider,{value:c,children:r})}function ab(){var e=h.useContext(sb);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function JG(e,t){var r=t||{},s=r.from,a=r.to;return s&&a?kr(a,e)&&kr(s,e)?void 0:kr(a,e)?{from:a,to:void 0}:kr(s,e)?void 0:vy(s,e)?{from:e,to:a}:{from:s,to:e}:a?vy(e,a)?{from:a,to:e}:{from:e,to:a}:s?ic(e,s)?{from:e,to:s}:{from:s,to:e}:{from:e,to:void 0}}var ob=h.createContext(void 0);function QG(e){if(!Hu(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return n.jsx(ob.Provider,{value:t,children:e.children})}return n.jsx(ZG,{initialProps:e.initialProps,children:e.children})}function ZG(e){var t=e.initialProps,r=e.children,s=t.selected,a=s||{},o=a.from,i=a.to,l=t.min,c=t.max,d=function(p,w,v){var x,g;(x=t.onDayClick)===null||x===void 0||x.call(t,p,w,v);var y=JG(p,s);(g=t.onSelect)===null||g===void 0||g.call(t,y,p,w,v)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(u.range_start=[o],i?(u.range_end=[i],kr(o,i)||(u.range_middle=[{after:o,before:i}])):u.range_end=[o]):i&&(u.range_start=[i],u.range_end=[i]),l&&(o&&!i&&u.disabled.push({after:fh(o,l-1),before:Ht(o,l-1)}),o&&i&&u.disabled.push({after:o,before:Ht(o,l-1)}),!o&&i&&u.disabled.push({after:fh(i,l-1),before:Ht(i,l-1)})),c){if(o&&!i&&(u.disabled.push({before:Ht(o,-c+1)}),u.disabled.push({after:Ht(o,c-1)})),o&&i){var f=Ls(i,o)+1,m=c-f;u.disabled.push({before:fh(o,m)}),u.disabled.push({after:Ht(i,m)})}!o&&i&&(u.disabled.push({before:Ht(i,-c+1)}),u.disabled.push({after:Ht(i,c-1)}))}return n.jsx(ob.Provider,{value:{selected:s,onDayClick:d,modifiers:u},children:r})}function ib(){var e=h.useContext(ob);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function ph(e){return Array.isArray(e)?HR([],e):e!==void 0?[e]:[]}function eK(e){var t={};return Object.entries(e).forEach(function(r){var s=r[0],a=r[1];t[s]=ph(a)}),t}var ys;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ys||(ys={}));var tK=ys.Selected,Qs=ys.Disabled,rK=ys.Hidden,nK=ys.Today,bx=ys.RangeEnd,jx=ys.RangeMiddle,Nx=ys.RangeStart,sK=ys.Outside;function aK(e,t,r){var s,a=(s={},s[tK]=ph(e.selected),s[Qs]=ph(e.disabled),s[rK]=ph(e.hidden),s[nK]=[e.today],s[bx]=[],s[jx]=[],s[Nx]=[],s[sK]=[],s);return e.fromDate&&a[Qs].push({before:e.fromDate}),e.toDate&&a[Qs].push({after:e.toDate}),Wu(e)?a[Qs]=a[Qs].concat(t.modifiers[Qs]):Hu(e)&&(a[Qs]=a[Qs].concat(r.modifiers[Qs]),a[Nx]=r.modifiers[Nx],a[jx]=r.modifiers[jx],a[bx]=r.modifiers[bx]),a}var XR=h.createContext(void 0);function oK(e){var t=pt(),r=ab(),s=ib(),a=aK(t,r,s),o=eK(t.modifiers),i=Le(Le({},a),o);return n.jsx(XR.Provider,{value:i,children:e.children})}function JR(){var e=h.useContext(XR);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function iK(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function lK(e){return!!(e&&typeof e=="object"&&"from"in e)}function cK(e){return!!(e&&typeof e=="object"&&"after"in e)}function dK(e){return!!(e&&typeof e=="object"&&"before"in e)}function uK(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function fK(e,t){var r,s=t.from,a=t.to;if(s&&a){var o=Ls(a,s)<0;o&&(r=[a,s],s=r[0],a=r[1]);var i=Ls(e,s)>=0&&Ls(a,e)>=0;return i}return a?kr(a,e):s?kr(s,e):!1}function hK(e){return Bw(e)}function mK(e){return Array.isArray(e)&&e.every(Bw)}function pK(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(hK(r))return kr(e,r);if(mK(r))return r.includes(e);if(lK(r))return fK(e,r);if(uK(r))return r.dayOfWeek.includes(e.getDay());if(iK(r)){var s=Ls(r.before,e),a=Ls(r.after,e),o=s>0,i=a<0,l=vy(r.before,r.after);return l?i&&o:o||i}return cK(r)?Ls(e,r.after)>0:dK(r)?Ls(r.before,e)>0:typeof r=="function"?r(e):!1})}function lb(e,t,r){var s=Object.keys(t).reduce(function(o,i){var l=t[i];return pK(e,l)&&o.push(i),o},[]),a={};return s.forEach(function(o){return a[o]=!0}),r&&!Vw(e,r)&&(a.outside=!0),a}function gK(e,t){for(var r=zr(e[0]),s=Bu(e[e.length-1]),a,o,i=r;i<=s;){var l=lb(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Ht(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),a||(a=i),i=Ht(i,1)}return o||a}var xK=365;function QR(e,t){var r=t.moveBy,s=t.direction,a=t.context,o=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,f=a.locale,m={day:Ht,week:xy,month:Ur,year:xW,startOfWeek:function(x){return a.ISOWeek?Ei(x):Vr(x,{locale:f,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?wT(x):oc(x,{locale:f,weekStartsOn:c})}},p=m[r](e,s==="after"?1:-1);s==="before"&&d?p=vW([d,p]):s==="after"&&u&&(p=yW([u,p]));var w=!0;if(o){var v=lb(p,o);w=!v.disabled&&!v.hidden}return w?p:l.count>xK?l.lastFocused:QR(p,{moveBy:r,direction:s,context:a,modifiers:o,retry:Le(Le({},l),{count:l.count+1})})}var ZR=h.createContext(void 0);function vK(e){var t=qu(),r=JR(),s=h.useState(),a=s[0],o=s[1],i=h.useState(),l=i[0],c=i[1],d=gK(t.displayMonths,r),u=a??(l&&t.isDateDisplayed(l))?l:d,f=function(){c(a),o(void 0)},m=function(x){o(x)},p=pt(),w=function(x,g){if(a){var y=QR(a,{moveBy:x,direction:g,context:p,modifiers:r});kr(a,y)||(t.goToDate(y,a),m(y))}},v={focusedDay:a,focusTarget:u,blur:f,focus:m,focusDayAfter:function(){return w("day","after")},focusDayBefore:function(){return w("day","before")},focusWeekAfter:function(){return w("week","after")},focusWeekBefore:function(){return w("week","before")},focusMonthBefore:function(){return w("month","before")},focusMonthAfter:function(){return w("month","after")},focusYearBefore:function(){return w("year","before")},focusYearAfter:function(){return w("year","after")},focusStartOfWeek:function(){return w("startOfWeek","before")},focusEndOfWeek:function(){return w("endOfWeek","after")}};return n.jsx(ZR.Provider,{value:v,children:e.children})}function cb(){var e=h.useContext(ZR);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function yK(e,t){var r=JR(),s=lb(e,r,t);return s}var db=h.createContext(void 0);function wK(e){if(!Vp(e.initialProps)){var t={selected:void 0};return n.jsx(db.Provider,{value:t,children:e.children})}return n.jsx(bK,{initialProps:e.initialProps,children:e.children})}function bK(e){var t=e.initialProps,r=e.children,s=function(o,i,l){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,o,i,l),i.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,o,i,l);return}(u=t.onSelect)===null||u===void 0||u.call(t,o,o,i,l)},a={selected:t.selected,onDayClick:s};return n.jsx(db.Provider,{value:a,children:r})}function eA(){var e=h.useContext(db);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function jK(e,t){var r=pt(),s=eA(),a=ab(),o=ib(),i=cb(),l=i.focusDayAfter,c=i.focusDayBefore,d=i.focusWeekAfter,u=i.focusWeekBefore,f=i.blur,m=i.focus,p=i.focusMonthBefore,w=i.focusMonthAfter,v=i.focusYearBefore,x=i.focusYearAfter,g=i.focusStartOfWeek,y=i.focusEndOfWeek,b=function(B){var T,M,U,q;Vp(r)?(T=s.onDayClick)===null||T===void 0||T.call(s,e,t,B):Wu(r)?(M=a.onDayClick)===null||M===void 0||M.call(a,e,t,B):Hu(r)?(U=o.onDayClick)===null||U===void 0||U.call(o,e,t,B):(q=r.onDayClick)===null||q===void 0||q.call(r,e,t,B)},j=function(B){var T;m(e),(T=r.onDayFocus)===null||T===void 0||T.call(r,e,t,B)},S=function(B){var T;f(),(T=r.onDayBlur)===null||T===void 0||T.call(r,e,t,B)},N=function(B){var T;(T=r.onDayMouseEnter)===null||T===void 0||T.call(r,e,t,B)},_=function(B){var T;(T=r.onDayMouseLeave)===null||T===void 0||T.call(r,e,t,B)},E=function(B){var T;(T=r.onDayPointerEnter)===null||T===void 0||T.call(r,e,t,B)},D=function(B){var T;(T=r.onDayPointerLeave)===null||T===void 0||T.call(r,e,t,B)},C=function(B){var T;(T=r.onDayTouchCancel)===null||T===void 0||T.call(r,e,t,B)},k=function(B){var T;(T=r.onDayTouchEnd)===null||T===void 0||T.call(r,e,t,B)},P=function(B){var T;(T=r.onDayTouchMove)===null||T===void 0||T.call(r,e,t,B)},R=function(B){var T;(T=r.onDayTouchStart)===null||T===void 0||T.call(r,e,t,B)},A=function(B){var T;(T=r.onDayKeyUp)===null||T===void 0||T.call(r,e,t,B)},I=function(B){var T;switch(B.key){case"ArrowLeft":B.preventDefault(),B.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":B.preventDefault(),B.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":B.preventDefault(),B.stopPropagation(),d();break;case"ArrowUp":B.preventDefault(),B.stopPropagation(),u();break;case"PageUp":B.preventDefault(),B.stopPropagation(),B.shiftKey?v():p();break;case"PageDown":B.preventDefault(),B.stopPropagation(),B.shiftKey?x():w();break;case"Home":B.preventDefault(),B.stopPropagation(),g();break;case"End":B.preventDefault(),B.stopPropagation(),y();break}(T=r.onDayKeyDown)===null||T===void 0||T.call(r,e,t,B)},F={onClick:b,onFocus:j,onBlur:S,onKeyDown:I,onKeyUp:A,onMouseEnter:N,onMouseLeave:_,onPointerEnter:E,onPointerLeave:D,onTouchCancel:C,onTouchEnd:k,onTouchMove:P,onTouchStart:R};return F}function NK(){var e=pt(),t=eA(),r=ab(),s=ib(),a=Vp(e)?t.selected:Wu(e)?r.selected:Hu(e)?s.selected:void 0;return a}function SK(e){return Object.values(ys).includes(e)}function _K(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(s){var a=e.modifiersClassNames[s];if(a)r.push(a);else if(SK(s)){var o=e.classNames["day_".concat(s)];o&&r.push(o)}}),r}function CK(e,t){var r=Le({},e.styles.day);return Object.keys(t).forEach(function(s){var a;r=Le(Le({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[s])}),r}function EK(e,t,r){var s,a,o,i=pt(),l=cb(),c=yK(e,t),d=jK(e,c),u=NK(),f=!!(i.onDayClick||i.mode!=="default");h.useEffect(function(){var N;c.outside||l.focusedDay&&f&&kr(l.focusedDay,e)&&((N=r.current)===null||N===void 0||N.focus())},[l.focusedDay,e,r,f,c.outside]);var m=_K(i,c).join(" "),p=CK(i,c),w=!!(c.outside&&!i.showOutsideDays||c.hidden),v=(o=(a=i.components)===null||a===void 0?void 0:a.DayContent)!==null&&o!==void 0?o:KG,x=n.jsx(v,{date:e,displayMonth:t,activeModifiers:c}),g={style:p,className:m,children:x,role:"gridcell"},y=l.focusTarget&&kr(l.focusTarget,e)&&!c.outside,b=l.focusedDay&&kr(l.focusedDay,e),j=Le(Le(Le({},g),(s={disabled:c.disabled,role:"gridcell"},s["aria-selected"]=c.selected,s.tabIndex=b||y?0:-1,s)),d),S={isButton:f,isHidden:w,activeModifiers:c,selectedDays:u,buttonProps:j,divProps:g};return S}function kK(e){var t=h.useRef(null),r=EK(e.date,e.displayMonth,t);return r.isHidden?n.jsx("div",{role:"gridcell"}):r.isButton?n.jsx(fm,Le({name:"day",ref:t},r.buttonProps)):n.jsx("div",Le({},r.divProps))}function DK(e){var t=e.number,r=e.dates,s=pt(),a=s.onWeekNumberClick,o=s.styles,i=s.classNames,l=s.locale,c=s.labels.labelWeekNumber,d=s.formatters.formatWeekNumber,u=d(Number(t),{locale:l});if(!a)return n.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:u});var f=c(Number(t),{locale:l}),m=function(p){a(t,r,p)};return n.jsx(fm,{name:"week-number","aria-label":f,className:i.weeknumber,style:o.weeknumber,onClick:m,children:u})}function TK(e){var t,r,s=pt(),a=s.styles,o=s.classNames,i=s.showWeekNumber,l=s.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:kK,d=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:DK,u;return i&&(u=n.jsx("td",{className:o.cell,style:a.cell,children:n.jsx(d,{number:e.weekNumber,dates:e.dates})})),n.jsxs("tr",{className:o.row,style:a.row,children:[u,e.dates.map(function(f){return n.jsx("td",{className:o.cell,style:a.cell,role:"presentation",children:n.jsx(c,{displayMonth:e.displayMonth,date:f})},SH(f))})]})}function aS(e,t,r){for(var s=r!=null&&r.ISOWeek?wT(t):oc(t,r),a=r!=null&&r.ISOWeek?Ei(e):Vr(e,r),o=Ls(s,a),i=[],l=0;l<=o;l++)i.push(Ht(a,l));var c=i.reduce(function(d,u){var f=r!=null&&r.ISOWeek?jT(u):ST(u,r),m=d.find(function(p){return p.weekNumber===f});return m?(m.dates.push(u),d):(d.push({weekNumber:f,dates:[u]}),d)},[]);return c}function PK(e,t){var r=aS(zr(e),Bu(e),t);if(t!=null&&t.useFixedWeeks){var s=CH(e,t);if(s<6){var a=r[r.length-1],o=a.dates[a.dates.length-1],i=xy(o,6-s),l=aS(xy(o,1),i,t);r.push.apply(r,l)}}return r}function RK(e){var t,r,s,a=pt(),o=a.locale,i=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,f=a.weekStartsOn,m=a.firstWeekContainsDate,p=a.ISOWeek,w=PK(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:o,weekStartsOn:f,firstWeekContainsDate:m}),v=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:GG,x=(r=u==null?void 0:u.Row)!==null&&r!==void 0?r:TK,g=(s=u==null?void 0:u.Footer)!==null&&s!==void 0?s:WG;return n.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&n.jsx(v,{}),n.jsx("tbody",{className:i.tbody,style:l.tbody,children:w.map(function(y){return n.jsx(x,{displayMonth:e.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),n.jsx(g,{displayMonth:e.displayMonth})]})}function AK(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var MK=AK()?h.useLayoutEffect:h.useEffect,Sx=!1,IK=0;function oS(){return"react-day-picker-".concat(++IK)}function OK(e){var t,r=e??(Sx?oS():null),s=h.useState(r),a=s[0],o=s[1];return MK(function(){a===null&&o(oS())},[]),h.useEffect(function(){Sx===!1&&(Sx=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function LK(e){var t,r,s=pt(),a=s.dir,o=s.classNames,i=s.styles,l=s.components,c=qu().displayMonths,d=OK(s.id?"".concat(s.id,"-").concat(e.displayIndex):void 0),u=s.id?"".concat(s.id,"-grid-").concat(e.displayIndex):void 0,f=[o.month],m=i.month,p=e.displayIndex===0,w=e.displayIndex===c.length-1,v=!p&&!w;a==="rtl"&&(t=[p,w],w=t[0],p=t[1]),p&&(f.push(o.caption_start),m=Le(Le({},m),i.caption_start)),w&&(f.push(o.caption_end),m=Le(Le({},m),i.caption_end)),v&&(f.push(o.caption_between),m=Le(Le({},m),i.caption_between));var x=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:VG;return n.jsxs("div",{className:f.join(" "),style:m,children:[n.jsx(x,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(RK,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function $K(e){var t=pt(),r=t.classNames,s=t.styles;return n.jsx("div",{className:r.months,style:s.months,children:e.children})}function FK(e){var t,r,s=e.initialProps,a=pt(),o=cb(),i=qu(),l=h.useState(!1),c=l[0],d=l[1];h.useEffect(function(){a.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),d(!0)))},[a.initialFocus,c,o.focus,o.focusTarget,o]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var f=Le(Le({},a.styles.root),a.style),m=Object.keys(s).filter(function(w){return w.startsWith("data-")}).reduce(function(w,v){var x;return Le(Le({},w),(x={},x[v]=s[v],x))},{}),p=(r=(t=s.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:$K;return n.jsx("div",Le({className:u.join(" "),style:f,dir:a.dir,id:a.id,nonce:s.nonce,title:s.title,lang:s.lang},m,{children:n.jsx(p,{children:i.displayMonths.map(function(w,v){return n.jsx(LK,{displayIndex:v,displayMonth:w},v)})})}))}function zK(e){var t=e.children,r=dG(e,["children"]);return n.jsx(DG,{initialProps:r,children:n.jsx(FG,{children:n.jsx(wK,{initialProps:r,children:n.jsx(YG,{initialProps:r,children:n.jsx(QG,{initialProps:r,children:n.jsx(oK,{children:n.jsx(vK,{children:t})})})})})})})}function BK(e){return n.jsx(zK,Le({},e,{children:n.jsx(FK,{initialProps:e})}))}function xi({className:e,classNames:t,showOutsideDays:r=!0,...s}){return n.jsx(BK,{showOutsideDays:r,className:pe("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:pe(lu({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:pe(lu({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>n.jsx(ep,{className:"h-4 w-4"}),IconRight:({...a})=>n.jsx(ua,{className:"h-4 w-4"})},...s})}xi.displayName="Calendar";var Wp="Popover",[tA,xoe]=sr(Wp,[Ao]),Gu=Ao(),[UK,Uo]=tA(Wp),rA=e=>{const{__scopePopover:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:i=!1}=e,l=Gu(t),c=h.useRef(null),[d,u]=h.useState(!1),[f,m]=Br({prop:s,defaultProp:a??!1,onChange:o,caller:Wp});return n.jsx(ap,{...l,children:n.jsx(UK,{scope:t,contentId:zn(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>u(!0),[]),onCustomAnchorRemove:h.useCallback(()=>u(!1),[]),modal:i,children:r})})};rA.displayName=Wp;var nA="PopoverAnchor",VK=h.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Uo(nA,r),o=Gu(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(i(),()=>l()),[i,l]),n.jsx(Au,{...o,...s,ref:t})});VK.displayName=nA;var sA="PopoverTrigger",aA=h.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Uo(sA,r),o=Gu(r),i=Ae(t,a.triggerRef),l=n.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":dA(a.open),...s,ref:i,onClick:ue(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:n.jsx(Au,{asChild:!0,...o,children:l})});aA.displayName=sA;var ub="PopoverPortal",[WK,HK]=tA(ub,{forceMount:void 0}),oA=e=>{const{__scopePopover:t,forceMount:r,children:s,container:a}=e,o=Uo(ub,t);return n.jsx(WK,{scope:t,forceMount:r,children:n.jsx(mr,{present:r||o.open,children:n.jsx(gc,{asChild:!0,container:a,children:s})})})};oA.displayName=ub;var cc="PopoverContent",iA=h.forwardRef((e,t)=>{const r=HK(cc,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,o=Uo(cc,e.__scopePopover);return n.jsx(mr,{present:s||o.open,children:o.modal?n.jsx(GK,{...a,ref:t}):n.jsx(KK,{...a,ref:t})})});iA.displayName=cc;var qK=_o("PopoverContent.RemoveScroll"),GK=h.forwardRef((e,t)=>{const r=Uo(cc,e.__scopePopover),s=h.useRef(null),a=Ae(t,s),o=h.useRef(!1);return h.useEffect(()=>{const i=s.current;if(i)return bp(i)},[]),n.jsx(Fu,{as:qK,allowPinchZoom:!0,children:n.jsx(lA,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ue(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),KK=h.forwardRef((e,t)=>{const r=Uo(cc,e.__scopePopover),s=h.useRef(!1),a=h.useRef(!1);return n.jsx(lA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),lA=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...f}=e,m=Uo(cc,r),p=Gu(r);return yp(),n.jsx($u,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(Li,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:n.jsx(op,{"data-state":dA(m.open),role:"dialog",id:m.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),cA="PopoverClose",YK=h.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Uo(cA,r);return n.jsx(je.button,{type:"button",...s,ref:t,onClick:ue(e.onClick,()=>a.onOpenChange(!1))})});YK.displayName=cA;var XK="PopoverArrow",JK=h.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Gu(r);return n.jsx(ip,{...a,...s,ref:t})});JK.displayName=XK;function dA(e){return e?"open":"closed"}var QK=rA,ZK=aA,eY=oA,uA=iA;const yo=QK,wo=ZK,pa=h.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>n.jsx(eY,{children:n.jsx(uA,{ref:a,align:t,sideOffset:r,className:pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));pa.displayName=uA.displayName;const on=h.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));on.displayName="Textarea";const tY=({onCreateAction:e,selectedTaskId:t})=>{const[r,s]=h.useState(!1),[a,o]=h.useState(""),[i,l]=h.useState([20]),[c,d]=h.useState(),[u,f]=h.useState(""),m=()=>{a.trim()&&(e({title:a.trim(),weight_percentage:i[0],due_date:c==null?void 0:c.toISOString(),notes:u.trim()||void 0}),o(""),l([20]),d(void 0),f(""),s(!1))};return n.jsxs(yt,{open:r,onOpenChange:s,children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{size:"sm",disabled:!t,title:t?"Crer une action dtaille":"Slectionnez d'abord une tche",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Action Dtaille"]})}),n.jsxs(ft,{className:"sm:max-w-[500px]",children:[n.jsx(ht,{children:n.jsx(mt,{children:"Crer une Nouvelle Action"})}),n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(J,{htmlFor:"title",children:"Titre de l'action *"}),n.jsx(ye,{id:"title",value:a,onChange:p=>o(p.target.value),placeholder:"Ex: Rvision du code...",maxLength:40}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.length,"/40 caractres (max 2 lignes : 0-20, 21-40)"]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsxs(J,{children:["Poids de l'action: ",i[0],"%"]}),n.jsx(nb,{value:i,onValueChange:l,max:100,min:1,step:1,className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:"1%"}),n.jsx("span",{children:"50%"}),n.jsx("span",{children:"100%"})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(J,{children:"Date d'chance (optionnelle)"}),n.jsxs(yo,{children:[n.jsx(wo,{asChild:!0,children:n.jsxs(L,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[n.jsx(ze,{className:"mr-2 h-4 w-4"}),c?Ve(c,"PPP",{locale:ot}):"Slectionner une date"]})}),n.jsx(pa,{className:"w-auto p-0",children:n.jsx(xi,{mode:"single",selected:c,onSelect:d,initialFocus:!0})})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(J,{htmlFor:"notes",children:"Notes (optionnelles)"}),n.jsx(on,{id:"notes",value:u,onChange:p=>f(p.target.value),placeholder:"Dtails supplmentaires, instructions...",rows:3})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(L,{variant:"outline",onClick:()=>s(!1),children:"Annuler"}),n.jsx(L,{onClick:m,disabled:!a.trim(),children:"Crer l'Action"})]})]})]})},rY=({newActionTitle:e,setNewActionTitle:t,onAddActionColumn:r,onCreateDetailedAction:s,selectedTaskId:a,isActionButtonEnabled:o,onCreateTask:i})=>n.jsx(le,{children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5"}),"Tableau Dynamique d'Excution"]}),n.jsxs("div",{className:"flex gap-2",children:[i&&n.jsxs(L,{onClick:i,size:"sm",variant:"default",className:"bg-primary hover:bg-primary/90",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Nouvelle Tche"]}),a&&n.jsx("div",{className:"text-sm text-muted-foreground self-center",children:"Tche slectionne"}),n.jsx(ye,{placeholder:"Action rapide...",value:e,onChange:l=>t(l.target.value),onKeyPress:l=>l.key==="Enter"&&o&&r(),className:"w-40"}),n.jsx(L,{onClick:r,size:"sm",disabled:!o,title:a?e.trim()?"":"Entrez un nom pour l'action":"Slectionnez d'abord une tche",children:n.jsx(jt,{className:"h-4 w-4"})}),n.jsx(tY,{onCreateAction:s,selectedTaskId:a})]})]})}),Hp=h.forwardRef(({className:e,...t},r)=>n.jsx("table",{ref:r,className:pe("w-full caption-bottom text-sm",e),...t}));Hp.displayName="Table";const qp=h.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:pe("[&_tr]:border-b",e),...t}));qp.displayName="TableHeader";const Gp=h.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:pe("[&_tr:last-child]:border-0",e),...t}));Gp.displayName="TableBody";const nY=h.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:pe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));nY.displayName="TableFooter";const Ri=h.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:pe("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));Ri.displayName="TableRow";const Vt=h.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:pe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Vt.displayName="TableHead";const Wt=h.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:pe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Wt.displayName="TableCell";const sY=h.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:pe("mt-4 text-sm text-muted-foreground",e),...t}));sY.displayName="TableCaption";var Ty=["Enter"," "],aY=["ArrowDown","PageUp","Home"],fA=["ArrowUp","PageDown","End"],oY=[...aY,...fA],iY={ltr:[...Ty,"ArrowRight"],rtl:[...Ty,"ArrowLeft"]},lY={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ku="Menu",[fu,cY,dY]=Tu(Ku),[Vi,hA]=sr(Ku,[dY,Ao,Cc]),Kp=Ao(),mA=Cc(),[uY,Wi]=Vi(Ku),[fY,Yu]=Vi(Ku),pA=e=>{const{__scopeMenu:t,open:r=!1,children:s,dir:a,onOpenChange:o,modal:i=!0}=e,l=Kp(t),[c,d]=h.useState(null),u=h.useRef(!1),f=Rt(o),m=Bi(a);return h.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),n.jsx(ap,{...l,children:n.jsx(uY,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:d,children:n.jsx(fY,{scope:t,onClose:h.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:m,modal:i,children:s})})})};pA.displayName=Ku;var hY="MenuAnchor",fb=h.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Kp(r);return n.jsx(Au,{...a,...s,ref:t})});fb.displayName=hY;var hb="MenuPortal",[mY,gA]=Vi(hb,{forceMount:void 0}),xA=e=>{const{__scopeMenu:t,forceMount:r,children:s,container:a}=e,o=Wi(hb,t);return n.jsx(mY,{scope:t,forceMount:r,children:n.jsx(mr,{present:r||o.open,children:n.jsx(gc,{asChild:!0,container:a,children:s})})})};xA.displayName=hb;var Bn="MenuContent",[pY,mb]=Vi(Bn),vA=h.forwardRef((e,t)=>{const r=gA(Bn,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=Wi(Bn,e.__scopeMenu),i=Yu(Bn,e.__scopeMenu);return n.jsx(fu.Provider,{scope:e.__scopeMenu,children:n.jsx(mr,{present:s||o.open,children:n.jsx(fu.Slot,{scope:e.__scopeMenu,children:i.modal?n.jsx(gY,{...a,ref:t}):n.jsx(xY,{...a,ref:t})})})})}),gY=h.forwardRef((e,t)=>{const r=Wi(Bn,e.__scopeMenu),s=h.useRef(null),a=Ae(t,s);return h.useEffect(()=>{const o=s.current;if(o)return bp(o)},[]),n.jsx(pb,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ue(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),xY=h.forwardRef((e,t)=>{const r=Wi(Bn,e.__scopeMenu);return n.jsx(pb,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),vY=_o("MenuContent.ScrollLock"),pb=h.forwardRef((e,t)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:p,disableOutsideScroll:w,...v}=e,x=Wi(Bn,r),g=Yu(Bn,r),y=Kp(r),b=mA(r),j=cY(r),[S,N]=h.useState(null),_=h.useRef(null),E=Ae(t,_,x.onContentChange),D=h.useRef(0),C=h.useRef(""),k=h.useRef(0),P=h.useRef(null),R=h.useRef("right"),A=h.useRef(0),I=w?Fu:h.Fragment,F=w?{as:vY,allowPinchZoom:!0}:void 0,B=M=>{var H,te;const U=C.current+M,q=j().filter(se=>!se.disabled),Y=document.activeElement,G=(H=q.find(se=>se.ref.current===Y))==null?void 0:H.textValue,z=q.map(se=>se.textValue),Z=TY(z,U,G),Q=(te=q.find(se=>se.textValue===Z))==null?void 0:te.ref.current;(function se(ne){C.current=ne,window.clearTimeout(D.current),ne!==""&&(D.current=window.setTimeout(()=>se(""),1e3))})(U),Q&&setTimeout(()=>Q.focus())};h.useEffect(()=>()=>window.clearTimeout(D.current),[]),yp();const T=h.useCallback(M=>{var q,Y;return R.current===((q=P.current)==null?void 0:q.side)&&RY(M,(Y=P.current)==null?void 0:Y.area)},[]);return n.jsx(pY,{scope:r,searchRef:C,onItemEnter:h.useCallback(M=>{T(M)&&M.preventDefault()},[T]),onItemLeave:h.useCallback(M=>{var U;T(M)||((U=_.current)==null||U.focus(),N(null))},[T]),onTriggerLeave:h.useCallback(M=>{T(M)&&M.preventDefault()},[T]),pointerGraceTimerRef:k,onPointerGraceIntentChange:h.useCallback(M=>{P.current=M},[]),children:n.jsx(I,{...F,children:n.jsx($u,{asChild:!0,trapped:a,onMountAutoFocus:ue(o,M=>{var U;M.preventDefault(),(U=_.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:n.jsx(Li,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:p,children:n.jsx(Rw,{asChild:!0,...b,dir:g.dir,orientation:"vertical",loop:s,currentTabStopId:S,onCurrentTabStopIdChange:N,onEntryFocus:ue(c,M=>{g.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(op,{role:"menu","aria-orientation":"vertical","data-state":MA(x.open),"data-radix-menu-content":"",dir:g.dir,...y,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:ue(v.onKeyDown,M=>{const q=M.target.closest("[data-radix-menu-content]")===M.currentTarget,Y=M.ctrlKey||M.altKey||M.metaKey,G=M.key.length===1;q&&(M.key==="Tab"&&M.preventDefault(),!Y&&G&&B(M.key));const z=_.current;if(M.target!==z||!oY.includes(M.key))return;M.preventDefault();const Q=j().filter(H=>!H.disabled).map(H=>H.ref.current);fA.includes(M.key)&&Q.reverse(),kY(Q)}),onBlur:ue(e.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(D.current),C.current="")}),onPointerMove:ue(e.onPointerMove,hu(M=>{const U=M.target,q=A.current!==M.clientX;if(M.currentTarget.contains(U)&&q){const Y=M.clientX>A.current?"right":"left";R.current=Y,A.current=M.clientX}}))})})})})})})});vA.displayName=Bn;var yY="MenuGroup",gb=h.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(je.div,{role:"group",...s,ref:t})});gb.displayName=yY;var wY="MenuLabel",yA=h.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(je.div,{...s,ref:t})});yA.displayName=wY;var hm="MenuItem",iS="menu.itemSelect",Yp=h.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:s,...a}=e,o=h.useRef(null),i=Yu(hm,e.__scopeMenu),l=mb(hm,e.__scopeMenu),c=Ae(t,o),d=h.useRef(!1),u=()=>{const f=o.current;if(!r&&f){const m=new CustomEvent(iS,{bubbles:!0,cancelable:!0});f.addEventListener(iS,p=>s==null?void 0:s(p),{once:!0}),F0(f,m),m.defaultPrevented?d.current=!1:i.onClose()}};return n.jsx(wA,{...a,ref:c,disabled:r,onClick:ue(e.onClick,u),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),d.current=!0},onPointerUp:ue(e.onPointerUp,f=>{var m;d.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:ue(e.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||Ty.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Yp.displayName=hm;var wA=h.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...o}=e,i=mb(hm,r),l=mA(r),c=h.useRef(null),d=Ae(t,c),[u,f]=h.useState(!1),[m,p]=h.useState("");return h.useEffect(()=>{const w=c.current;w&&p((w.textContent??"").trim())},[o.children]),n.jsx(fu.ItemSlot,{scope:r,disabled:s,textValue:a??m,children:n.jsx(Aw,{asChild:!0,...l,focusable:!s,children:n.jsx(je.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:d,onPointerMove:ue(e.onPointerMove,hu(w=>{s?i.onItemLeave(w):(i.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ue(e.onPointerLeave,hu(w=>i.onItemLeave(w))),onFocus:ue(e.onFocus,()=>f(!0)),onBlur:ue(e.onBlur,()=>f(!1))})})})}),bY="MenuCheckboxItem",bA=h.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:s,...a}=e;return n.jsx(CA,{scope:e.__scopeMenu,checked:r,children:n.jsx(Yp,{role:"menuitemcheckbox","aria-checked":mm(r)?"mixed":r,...a,ref:t,"data-state":vb(r),onSelect:ue(a.onSelect,()=>s==null?void 0:s(mm(r)?!0:!r),{checkForDefaultPrevented:!1})})})});bA.displayName=bY;var jA="MenuRadioGroup",[jY,NY]=Vi(jA,{value:void 0,onValueChange:()=>{}}),NA=h.forwardRef((e,t)=>{const{value:r,onValueChange:s,...a}=e,o=Rt(s);return n.jsx(jY,{scope:e.__scopeMenu,value:r,onValueChange:o,children:n.jsx(gb,{...a,ref:t})})});NA.displayName=jA;var SA="MenuRadioItem",_A=h.forwardRef((e,t)=>{const{value:r,...s}=e,a=NY(SA,e.__scopeMenu),o=r===a.value;return n.jsx(CA,{scope:e.__scopeMenu,checked:o,children:n.jsx(Yp,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":vb(o),onSelect:ue(s.onSelect,()=>{var i;return(i=a.onValueChange)==null?void 0:i.call(a,r)},{checkForDefaultPrevented:!1})})})});_A.displayName=SA;var xb="MenuItemIndicator",[CA,SY]=Vi(xb,{checked:!1}),EA=h.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:s,...a}=e,o=SY(xb,r);return n.jsx(mr,{present:s||mm(o.checked)||o.checked===!0,children:n.jsx(je.span,{...a,ref:t,"data-state":vb(o.checked)})})});EA.displayName=xb;var _Y="MenuSeparator",kA=h.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});kA.displayName=_Y;var CY="MenuArrow",DA=h.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Kp(r);return n.jsx(ip,{...a,...s,ref:t})});DA.displayName=CY;var EY="MenuSub",[voe,TA]=Vi(EY),md="MenuSubTrigger",PA=h.forwardRef((e,t)=>{const r=Wi(md,e.__scopeMenu),s=Yu(md,e.__scopeMenu),a=TA(md,e.__scopeMenu),o=mb(md,e.__scopeMenu),i=h.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,d={__scopeMenu:e.__scopeMenu},u=h.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return h.useEffect(()=>u,[u]),h.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),n.jsx(fb,{asChild:!0,...d,children:n.jsx(wA,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":MA(r.open),...e,ref:Xm(t,a.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ue(e.onPointerMove,hu(f=>{o.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:ue(e.onPointerLeave,hu(f=>{var p,w;u();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const v=(w=r.content)==null?void 0:w.dataset.side,x=v==="right",g=x?-5:5,y=m[x?"left":"right"],b=m[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+g,y:f.clientY},{x:y,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:y,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ue(e.onKeyDown,f=>{var p;const m=o.searchRef.current!=="";e.disabled||m&&f.key===" "||iY[s.dir].includes(f.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),f.preventDefault())})})})});PA.displayName=md;var RA="MenuSubContent",AA=h.forwardRef((e,t)=>{const r=gA(Bn,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=Wi(Bn,e.__scopeMenu),i=Yu(Bn,e.__scopeMenu),l=TA(RA,e.__scopeMenu),c=h.useRef(null),d=Ae(t,c);return n.jsx(fu.Provider,{scope:e.__scopeMenu,children:n.jsx(mr,{present:s||o.open,children:n.jsx(fu.Slot,{scope:e.__scopeMenu,children:n.jsx(pb,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;i.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ue(e.onFocusOutside,u=>{u.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ue(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:ue(e.onKeyDown,u=>{var p;const f=u.currentTarget.contains(u.target),m=lY[i.dir].includes(u.key);f&&m&&(o.onOpenChange(!1),(p=l.trigger)==null||p.focus(),u.preventDefault())})})})})})});AA.displayName=RA;function MA(e){return e?"open":"closed"}function mm(e){return e==="indeterminate"}function vb(e){return mm(e)?"indeterminate":e?"checked":"unchecked"}function kY(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function DY(e,t){return e.map((r,s)=>e[(t+s)%e.length])}function TY(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=DY(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function PY(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,u=l.y,f=c.x,m=c.y;u>s!=m>s&&r<(f-d)*(s-u)/(m-u)+d&&(a=!a)}return a}function RY(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return PY(r,t)}function hu(e){return t=>t.pointerType==="mouse"?e(t):void 0}var AY=pA,MY=fb,IY=xA,OY=vA,LY=gb,$Y=yA,FY=Yp,zY=bA,BY=NA,UY=_A,VY=EA,WY=kA,HY=DA,qY=PA,GY=AA,Xp="DropdownMenu",[KY,yoe]=sr(Xp,[hA]),qr=hA(),[YY,IA]=KY(Xp),OA=e=>{const{__scopeDropdownMenu:t,children:r,dir:s,open:a,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=qr(t),d=h.useRef(null),[u,f]=Br({prop:a,defaultProp:o??!1,onChange:i,caller:Xp});return n.jsx(YY,{scope:t,triggerId:zn(),triggerRef:d,contentId:zn(),open:u,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(m=>!m),[f]),modal:l,children:n.jsx(AY,{...c,open:u,onOpenChange:f,dir:s,modal:l,children:r})})};OA.displayName=Xp;var LA="DropdownMenuTrigger",$A=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=e,o=IA(LA,r),i=qr(r);return n.jsx(MY,{asChild:!0,...i,children:n.jsx(je.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Xm(t,o.triggerRef),onPointerDown:ue(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:ue(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});$A.displayName=LA;var XY="DropdownMenuPortal",FA=e=>{const{__scopeDropdownMenu:t,...r}=e,s=qr(t);return n.jsx(IY,{...s,...r})};FA.displayName=XY;var zA="DropdownMenuContent",BA=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=IA(zA,r),o=qr(r),i=h.useRef(!1);return n.jsx(OY,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:t,onCloseAutoFocus:ue(e.onCloseAutoFocus,l=>{var c;i.current||(c=a.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:ue(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});BA.displayName=zA;var JY="DropdownMenuGroup",QY=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(LY,{...a,...s,ref:t})});QY.displayName=JY;var ZY="DropdownMenuLabel",UA=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx($Y,{...a,...s,ref:t})});UA.displayName=ZY;var eX="DropdownMenuItem",VA=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(FY,{...a,...s,ref:t})});VA.displayName=eX;var tX="DropdownMenuCheckboxItem",WA=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(zY,{...a,...s,ref:t})});WA.displayName=tX;var rX="DropdownMenuRadioGroup",nX=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(BY,{...a,...s,ref:t})});nX.displayName=rX;var sX="DropdownMenuRadioItem",HA=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(UY,{...a,...s,ref:t})});HA.displayName=sX;var aX="DropdownMenuItemIndicator",qA=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(VY,{...a,...s,ref:t})});qA.displayName=aX;var oX="DropdownMenuSeparator",GA=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(WY,{...a,...s,ref:t})});GA.displayName=oX;var iX="DropdownMenuArrow",lX=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(HY,{...a,...s,ref:t})});lX.displayName=iX;var cX="DropdownMenuSubTrigger",KA=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(qY,{...a,...s,ref:t})});KA.displayName=cX;var dX="DropdownMenuSubContent",YA=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=qr(r);return n.jsx(GY,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});YA.displayName=dX;var uX=OA,fX=$A,hX=FA,XA=BA,JA=UA,QA=VA,ZA=WA,eM=HA,tM=qA,rM=GA,nM=KA,sM=YA;const aM=uX,oM=fX,mX=h.forwardRef(({className:e,inset:t,children:r,...s},a)=>n.jsxs(nM,{ref:a,className:pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...s,children:[r,n.jsx(ua,{className:"ml-auto h-4 w-4"})]}));mX.displayName=nM.displayName;const pX=h.forwardRef(({className:e,...t},r)=>n.jsx(sM,{ref:r,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));pX.displayName=sM.displayName;const yb=h.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(hX,{children:n.jsx(XA,{ref:s,sideOffset:t,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));yb.displayName=XA.displayName;const la=h.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(QA,{ref:s,className:pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));la.displayName=QA.displayName;const gX=h.forwardRef(({className:e,children:t,checked:r,...s},a)=>n.jsxs(ZA,{ref:a,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(tM,{children:n.jsx(Ea,{className:"h-4 w-4"})})}),t]}));gX.displayName=ZA.displayName;const xX=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(eM,{ref:s,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(tM,{children:n.jsx(b5,{className:"h-2 w-2 fill-current"})})}),t]}));xX.displayName=eM.displayName;const vX=h.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(JA,{ref:s,className:pe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));vX.displayName=JA.displayName;const iM=h.forwardRef(({className:e,...t},r)=>n.jsx(rM,{ref:r,className:pe("-mx-1 my-1 h-px bg-muted",e),...t}));iM.displayName=rM.displayName;const yX=({taskId:e,onDuplicate:t,onDelete:r,onEdit:s})=>n.jsxs(aM,{children:[n.jsx(oM,{asChild:!0,children:n.jsx(L,{variant:"ghost",size:"sm",children:n.jsx(v2,{className:"h-4 w-4"})})}),n.jsxs(yb,{align:"end",children:[n.jsxs(la,{onClick:()=>s(e),children:[n.jsx($i,{className:"h-4 w-4 mr-2"}),"Modifier"]}),n.jsxs(la,{onClick:()=>t(e),children:[n.jsx(j5,{className:"h-4 w-4 mr-2"}),"Dupliquer"]}),n.jsxs(la,{onClick:()=>r(e),className:"text-destructive",children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]}),wX=()=>{const[e,t]=h.useState([]),[r,s]=h.useState(!0),[a,o]=h.useState(null);h.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const{data:l,error:c}=await O.from("profiles").select("id, full_name, avatar_url").order("full_name");if(c)throw c;t(l||[])}catch(l){console.error("Error fetching profiles:",l),o(l.message)}finally{s(!1)}};return{profiles:e,loading:r,error:a,refetch:i}},bX=({assignee:e,onChange:t,taskId:r})=>{const{profiles:s,loading:a}=wX(),[o,i]=h.useState(!1),[l,c]=h.useState(""),d=m=>{t(m),i(!1)},u=()=>{l.trim()&&(t(l.trim()),c(""),i(!1))},f=e?e.split(", ").filter(Boolean):[];return n.jsxs(yo,{open:o,onOpenChange:i,children:[n.jsx(wo,{asChild:!0,children:n.jsx(L,{variant:"ghost",className:"w-full justify-start text-left font-normal",children:e||"Non assign"})}),n.jsx(pa,{className:"w-80 p-0 bg-background border",align:"start",children:n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium",children:"Responsables disponibles"}),a?n.jsx("div",{className:"text-sm text-muted-foreground",children:"Chargement..."}):n.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:s.map(m=>n.jsxs("button",{onClick:()=>d(m.full_name),className:"w-full text-left px-2 py-1 hover:bg-accent rounded-sm text-sm flex items-center justify-between",children:[n.jsx("span",{children:m.full_name}),f.includes(m.full_name)&&n.jsx(Ea,{className:"h-4 w-4 text-success"})]},m.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium",children:"Ajouter nouveau responsable"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ye,{placeholder:"Nom du responsable...",value:l,onChange:m=>c(m.target.value),onKeyPress:m=>m.key==="Enter"&&u()}),n.jsx(L,{onClick:u,size:"sm",children:n.jsx(gs,{className:"h-4 w-4"})})]})]})]})})]})},lM={low:"bg-success/10 text-success border-success/20",medium:"bg-warning/10 text-warning border-warning/20",high:"bg-info/10 text-info border-info/20",urgent:"bg-danger/10 text-danger border-danger/20"},Py={todo:"bg-muted text-muted-foreground border-border",doing:"bg-tech-blue/10 text-tech-blue border-tech-blue/20",blocked:"bg-danger/10 text-danger border-danger/20",done:"bg-success/10 text-success border-success/20"},kd=e=>new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),jX=e=>{const t=new Set;return e.forEach(r=>{var s;(s=r.task_actions)==null||s.forEach(a=>{t.add(a.title)})}),Array.from(t)},NX=({task:e,isSubtask:t})=>{const[r,s]=h.useState([]),[a,o]=h.useState(!1),[i,l]=h.useState(!1),{toast:c}=rt(),{currentTenant:d}=Ui(),u=async()=>{try{const{data:p,error:w}=await O.from("task_documents").select("*").eq("task_id",e.id);if(w)throw w;s(p||[])}catch(p){console.error("Error loading documents:",p)}},f=async p=>{var v;const w=(v=p.target.files)==null?void 0:v[0];if(w){o(!0);try{const x=w.name.split(".").pop(),g=`${e.id}/${Date.now()}.${x}`;console.log("Uploading file:",g);const{error:y}=await O.storage.from("task-documents").upload(g,w);if(y)throw console.error("Storage upload error:",y),y;console.log("File uploaded successfully, inserting into database...");const{data:{user:b}}=await O.auth.getUser();if(!b)throw new Error("Utilisateur non authentifi");if(!(d!=null&&d.id))throw new Error("Aucun tenant actif");const{error:j}=await O.from("task_documents").insert({task_id:e.id,project_id:e.project_id,file_name:w.name,file_path:g,file_size:w.size,mime_type:w.type,tenant_id:d.id,uploader_id:b.id});if(j)throw j;c({title:"Succs",description:"Document upload"}),u()}catch(x){console.error("Error uploading file:",x),c({title:"Erreur",description:"chec de l'upload",variant:"destructive"})}finally{o(!1),p.target.value=""}}},m=async p=>{try{const{data:w,error:v}=await O.storage.from("task-documents").download(p.file_path);if(v)throw v;const x=URL.createObjectURL(w),g=document.createElement("a");g.href=x,g.download=p.file_name,g.click(),URL.revokeObjectURL(x)}catch(w){console.error("Error downloading file:",w),c({title:"Erreur",description:"chec du tlchargement",variant:"destructive"})}};return h.useEffect(()=>{u()},[e.id]),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("label",{className:"block",children:[n.jsx(ye,{type:"file",onChange:f,disabled:a,className:"hidden",id:`file-${e.id}`}),n.jsx(L,{variant:"ghost",size:"sm",disabled:a,className:`${t?"h-6 w-6 p-0":"h-8 w-8 p-0"}`,onClick:()=>{var p;return(p=document.getElementById(`file-${e.id}`))==null?void 0:p.click()},children:n.jsx(jt,{className:`${t?"h-3 w-3":"h-4 w-4"}`})})]}),r.length>0&&n.jsxs(yt,{open:i,onOpenChange:l,children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{variant:"ghost",size:"sm",className:`${t?"h-6 px-1 text-xs":"h-8 px-2 text-sm"}`,children:[n.jsx(fn,{className:`${t?"h-3 w-3 mr-1":"h-4 w-4 mr-1"}`}),r.length]})}),n.jsxs(ft,{className:"max-w-md",children:[n.jsx(ht,{children:n.jsxs(mt,{children:["Documents - ",e.title]})}),n.jsx("div",{className:"space-y-3",children:r.map(p=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:p.file_name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(p.created_at).toLocaleDateString()})]}),n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>m(p),className:"h-8 w-8 p-0",children:n.jsx(Cr,{className:"h-4 w-4"})})]},p.id))})]})]})]})},SX=({task:e,isSubtask:t})=>{const[r,s]=h.useState([]),[a,o]=h.useState(""),[i,l]=h.useState(!1),[c,d]=h.useState(!1),{toast:u}=rt(),f=async()=>{try{const{data:p,error:w}=await O.from("task_comments").select("*").eq("task_id",e.id).order("created_at",{ascending:!0});if(w)throw w;s(p||[])}catch(p){console.error("Error loading comments:",p)}},m=async()=>{if(a.trim()){l(!0);try{const{error:p}=await O.from("task_comments").insert({task_id:e.id,content:a.trim(),comment_type:"general",tenant_id:"00000000-0000-0000-0000-000000000001"});if(p)throw p;o(""),f(),u({title:"Succs",description:"Commentaire ajout"})}catch(p){console.error("Error adding comment:",p),u({title:"Erreur",description:"chec de l'ajout du commentaire",variant:"destructive"})}finally{l(!1)}}};return h.useEffect(()=>{f()},[e.id]),n.jsxs(yt,{open:c,onOpenChange:d,children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{variant:"ghost",size:"sm",className:`${t?"h-6 px-1 text-xs":"h-8 px-2 text-sm"}`,children:[n.jsx(Vv,{className:`${t?"h-3 w-3 mr-1":"h-4 w-4 mr-1"}`}),r.length]})}),n.jsxs(ft,{className:"max-w-lg",children:[n.jsx(ht,{children:n.jsxs(mt,{children:["Commentaires - ",e.title]})}),n.jsxs("div",{className:"flex flex-col h-96",children:[n.jsx($r,{className:"flex-1 mb-3",children:n.jsx("div",{className:"space-y-3 pr-2",children:r.length===0?n.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Aucun commentaire"}):r.map(p=>n.jsxs("div",{className:"bg-muted/30 p-2 rounded-md",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:Tp(new Date(p.created_at),{addSuffix:!0,locale:ot})}),n.jsx("div",{className:"text-sm",children:p.content})]},p.id))})}),n.jsxs("div",{className:"border-t pt-3",children:[n.jsx(on,{placeholder:"Ajouter un commentaire...",value:a,onChange:p=>o(p.target.value),className:"mb-2 min-h-[60px] resize-none",disabled:i}),n.jsxs(L,{onClick:m,disabled:!a.trim()||i,size:"sm",className:"w-full",children:[n.jsx(oo,{className:"h-3 w-3 mr-1"}),i?"Envoi...":"Envoyer"]})]})]})]})]})};var _X="Separator",lS="horizontal",CX=["horizontal","vertical"],cM=h.forwardRef((e,t)=>{const{decorative:r,orientation:s=lS,...a}=e,o=EX(s)?s:lS,l=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return n.jsx(je.div,{"data-orientation":o,...l,...a,ref:t})});cM.displayName=_X;function EX(e){return CX.includes(e)}var dM=cM;const Ai=h.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...s},a)=>n.jsx(dM,{ref:a,decorative:r,orientation:t,className:pe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));Ai.displayName=dM.displayName;const kX=({open:e,onOpenChange:t,parentTask:r,onCreateSubtask:s,onCreateSubtaskWithActions:a,linkedActionId:o})=>{const[i,l]=h.useState(`Sous-tche de ${r.title}`),[c,d]=h.useState(new Date(r.start_date)),[u,f]=h.useState(new Date(r.due_date)),[m,p]=h.useState(1),[w,v]=h.useState(r.assignee&&r.assignee!=="Non assign"?r.assignee:"Ahmed Waleh"),[x,g]=h.useState("none"),[y,b]=h.useState([]),[j,S]=h.useState(""),[N,_]=h.useState([25]),[E,D]=h.useState(),[C,k]=h.useState(""),P=["Ahmed Waleh","Sarah Martin","Jean Dupont","Marie Dubois","Pierre Moreau"],R=()=>{if(!j.trim())return;const T={id:`temp-${Date.now()}`,title:j.trim(),weight_percentage:N[0],due_date:E==null?void 0:E.toISOString(),notes:C.trim()||void 0},M=[...y,T],U=Math.floor(100/M.length),q=100-U*M.length,Y=M.map((G,z)=>({...G,weight_percentage:z===0?U+q:U}));b(Y),S(""),_([25]),D(void 0),k("")},A=T=>{const M=y.filter(U=>U.id!==T);if(M.length>0){const U=Math.floor(100/M.length),q=100-U*M.length,Y=M.map((G,z)=>({...G,weight_percentage:z===0?U+q:U}));b(Y)}else b([])},I=()=>{if(y.length===0)return;const T=Math.floor(100/y.length),M=100-T*y.length,U=y.map((q,Y)=>({...q,weight_percentage:Y===0?T+M:T}));b(U)},F=()=>{if(!i.trim())return;if(!w||w==="Non assign"){alert("Un responsable doit tre assign  la sous-tche");return}if(y.length>0){const M=y.reduce((U,q)=>U+q.weight_percentage,0);if(M!==100){alert(`La somme des pourcentages des actions doit tre gale  100% (actuellement: ${M}%)`);return}}const T={title:i.trim(),start_date:c.toISOString().split("T")[0],due_date:u.toISOString().split("T")[0],effort_estimate_h:m,assignee:w};if(y.length>0&&a)a(r.id,T,y);else{const M=x&&x!=="none"?x:void 0;s(r.id,M,T)}B()},B=()=>{l(`Sous-tche de ${r.title}`),d(new Date(r.start_date)),f(new Date(r.due_date)),p(1),v(r.assignee||""),g("none"),b([]),S(""),_([25]),D(void 0),k(""),t(!1)};return n.jsx(yt,{open:e,onOpenChange:t,children:n.jsxs(ft,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[n.jsx(ht,{children:n.jsxs(mt,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5"}),"Crer une Sous-tche",o&&n.jsx("span",{className:"text-sm text-muted-foreground block mt-1",children:"Lie  une action spcifique"})]})}),n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(J,{htmlFor:"title",children:"Titre de la sous-tche *"}),n.jsx(ye,{id:"title",value:i,onChange:T=>l(T.target.value),placeholder:"Nom de la sous-tche...",maxLength:100}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.length,"/100 caractres"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(J,{children:"Date de dbut"}),n.jsxs(yo,{children:[n.jsx(wo,{asChild:!0,children:n.jsxs(L,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[n.jsx(ze,{className:"mr-2 h-4 w-4"}),Ve(c,"PPP",{locale:ot})]})}),n.jsx(pa,{className:"w-auto p-0",children:n.jsx(xi,{mode:"single",selected:c,onSelect:T=>T&&d(T),initialFocus:!0})})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(J,{children:"Date d'chance"}),n.jsxs(yo,{children:[n.jsx(wo,{asChild:!0,children:n.jsxs(L,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[n.jsx(ze,{className:"mr-2 h-4 w-4"}),Ve(u,"PPP",{locale:ot})]})}),n.jsx(pa,{className:"w-auto p-0",children:n.jsx(xi,{mode:"single",selected:u,onSelect:T=>T&&f(T),initialFocus:!0})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(J,{htmlFor:"effort",children:"Charge estime (heures)"}),n.jsx(ye,{id:"effort",type:"number",min:"0.5",step:"0.5",value:m,onChange:T=>p(parseFloat(T.target.value)||1)})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsxs(J,{className:"flex items-center gap-2",children:[n.jsx(nr,{className:"h-4 w-4"}),"Responsable *"]}),n.jsxs(Ie,{value:w,onValueChange:v,children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Choisir un responsable"})}),n.jsx(Re,{children:P.map(T=>n.jsx(ae,{value:T,children:T},T))})]})]})]}),r.task_actions&&r.task_actions.length>0&&n.jsxs("div",{className:"grid gap-2",children:[n.jsxs(J,{className:"flex items-center gap-2",children:[n.jsx(b2,{className:"h-4 w-4"}),"Lier  une action de la tche parent (optionnel)"]}),n.jsxs(Ie,{value:x,onValueChange:g,children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Aucune liaison - sous-tche indpendante"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"none",children:"Aucune liaison"}),r.task_actions.map(T=>n.jsxs(ae,{value:T.id,children:[T.title," (",T.weight_percentage,"%)"]},T.id))]})]}),x&&x!=="none"&&n.jsx("p",{className:"text-xs text-muted-foreground",children:" Cette sous-tche contribuera  l'accomplissement de l'action slectionne"})]}),n.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Tche parent:"})," ",r.title]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Responsable hrit:"})," ",r.assignee]})]}),n.jsx(Ai,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(J,{className:"text-base font-semibold flex items-center gap-2",children:[n.jsx(hn,{className:"h-4 w-4"}),"Actions de la sous-tche (",y.length,")"]}),y.length>1&&n.jsx(L,{type:"button",variant:"outline",size:"sm",onClick:I,className:"text-xs",children:"Redistribuer quitablement"})]}),y.length>0&&n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:y.map(T=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-md",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-sm",children:T.title}),n.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:[T.weight_percentage,"%"]})]}),T.due_date&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["chance: ",Ve(new Date(T.due_date),"PPP",{locale:ot})]}),T.notes&&n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:T.notes})]}),n.jsx(L,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(T.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:n.jsx(Hs,{className:"h-3 w-3"})})]},T.id))}),n.jsxs("div",{className:"border rounded-md p-4 space-y-4 bg-muted/20",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(J,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(jt,{className:"h-4 w-4"}),"Ajouter une action  cette sous-tche"]}),n.jsxs(L,{type:"button",variant:"outline",size:"sm",onClick:R,disabled:!j.trim(),className:"text-xs",children:[n.jsx(jt,{className:"h-3 w-3 mr-1"}),"Ajouter"]})]}),n.jsxs("div",{className:"grid gap-3",children:[n.jsxs("div",{className:"grid gap-1",children:[n.jsx(J,{className:"text-xs",children:"Nom de l'action *"}),n.jsx(ye,{placeholder:"Titre de l'action",value:j,onChange:T=>S(T.target.value),onKeyPress:T=>T.key==="Enter"&&j.trim()&&R(),className:"text-sm",maxLength:40}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.length,"/40 caractres"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"grid gap-1",children:[n.jsxs(J,{className:"text-xs",children:["Poids: ",N[0],"%"]}),n.jsx(nb,{value:N,onValueChange:_,max:100,min:1,step:1,className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:"1%"}),n.jsx("span",{children:"50%"}),n.jsx("span",{children:"100%"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{className:"text-xs",children:"chance (optionnelle)"}),n.jsxs(yo,{children:[n.jsx(wo,{asChild:!0,children:n.jsxs(L,{variant:"outline",size:"sm",className:"w-full justify-start text-left font-normal text-xs",children:[n.jsx(ze,{className:"mr-2 h-3 w-3"}),E?Ve(E,"dd/MM",{locale:ot}):"Choisir"]})}),n.jsx(pa,{className:"w-auto p-0",children:n.jsx(xi,{mode:"single",selected:E,onSelect:D,initialFocus:!0})})]})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(J,{className:"text-xs",children:"Notes (optionnelles)"}),n.jsx(on,{placeholder:"Dtails, instructions spcifiques...",value:C,onChange:T=>k(T.target.value),rows:2,className:"text-sm"})]})]}),n.jsx("div",{className:"pt-2 border-t",children:n.jsxs(L,{type:"button",variant:"ghost",size:"sm",onClick:()=>{S(""),_([25]),D(void 0),k("")},className:"w-full text-xs text-muted-foreground hover:text-foreground",children:[n.jsx(jt,{className:"h-3 w-3 mr-2"}),"Ajouter une autre action"]})})]}),y.length>0&&(()=>{const T=y.reduce((U,q)=>U+q.weight_percentage,0),M=T===100;return n.jsxs("div",{className:`text-xs p-2 rounded ${M?"text-green-700 bg-green-50 border border-green-200":"text-red-700 bg-red-50 border border-red-200"}`,children:[M?"":""," ",n.jsxs("strong",{children:["Total des poids: ",T,"%"]}),M?" (Parfait ! Les actions totalisent 100%)":" (Doit tre gal  100% pour valider)"]})})()]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(L,{variant:"outline",onClick:B,children:"Annuler"}),n.jsx(L,{onClick:F,disabled:!i.trim()||!w||w==="Non assign"||y.length>0&&y.reduce((T,M)=>T+M.weight_percentage,0)!==100,children:"Crer la Sous-tche"})]})]})})},DX=({task:e,selectedTaskId:t,onSelectTask:r,onRowDoubleClick:s,onCreateSubtask:a,onCreateSubtaskWithActions:o,onDelete:i,onDuplicate:l,onEdit:c,onUpdateAssignee:d})=>{const u=(e.task_level||0)>0,[f,m]=h.useState(!1);return n.jsxs(n.Fragment,{children:[n.jsxs(Ri,{className:`border-b border-gantt-grid/30 cursor-pointer transition-colors ${t===e.id?"bg-primary/15 border-primary/40":"hover:bg-gantt-task-bg/50"}`,style:{height:u?"51px":"64px",minHeight:u?"51px":"64px",maxHeight:u?"51px":"64px"},onClick:p=>{p.stopPropagation(),r(e.id)},onDoubleClick:p=>{p.stopPropagation(),s(e)},children:[n.jsx(Wt,{className:`font-medium ${u?"py-0 text-sm":"py-0"}`,style:{height:u?"51px":"64px"},children:n.jsxs("div",{className:"flex items-center gap-1",style:{paddingLeft:`${(e.task_level||0)*20}px`},children:[n.jsx(L,{variant:"ghost",size:"sm",onClick:p=>{p.stopPropagation(),u?i(e.id):m(!0)},className:"h-6 w-6 p-0 opacity-70 hover:opacity-100",title:u?"Supprimer la sous-tche":"Crer une sous-tche",children:u?n.jsx(Hs,{className:"h-3 w-3 text-destructive"}):n.jsx(jt,{className:"h-3 w-3"})}),n.jsxs("span",{className:`${u?"text-foreground/70 italic text-xs":"text-foreground"}`,children:[n.jsx("span",{className:"text-foreground/60 mr-2 text-xs",children:e.display_order||"1"}),e.title]})]})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsx(bX,{assignee:e.assignee,taskId:e.id,onChange:p=>d(e.id,p)})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ze,{className:`${u?"h-3 w-3":"h-4 w-4"} text-foreground/60`}),n.jsx("span",{className:`${u?"text-xs":""} text-foreground`,children:kd(e.start_date)})]})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ze,{className:`${u?"h-3 w-3":"h-4 w-4"} text-foreground/60`}),n.jsx("span",{className:`${u?"text-xs":""} text-foreground`,children:kd(e.due_date)})]})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsx(re,{className:`${lM[e.priority]} ${u?"text-xs px-1 py-0":""}`,variant:"outline",children:e.priority})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsx(re,{className:`${Py[e.status]} ${u?"text-xs px-1 py-0":""}`,variant:"outline",children:e.status})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(lt,{className:`${u?"h-3 w-3":"h-4 w-4"} text-foreground/60`}),n.jsxs("span",{className:`${u?"text-xs":""} text-foreground`,children:[e.effort_estimate_h,"h"]})]})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{value:e.progress,className:u?"w-12 h-1":"w-16"}),n.jsxs("span",{className:`font-medium ${u?"text-xs":"text-sm"} text-foreground`,children:[e.progress,"%"]})]})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsx(NX,{task:e,isSubtask:u})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsx(SX,{task:e,isSubtask:u})}),n.jsx(Wt,{className:u?"py-0 text-xs":"py-0",style:{height:u?"51px":"64px"},children:n.jsx(yX,{taskId:e.id,onDuplicate:l,onDelete:i,onEdit:c})})]}),!u&&n.jsx(kX,{open:f,onOpenChange:m,parentTask:e,onCreateSubtask:a,onCreateSubtaskWithActions:o})]})},TX=({tasks:e,selectedTaskId:t,onSelectTask:r,onRowDoubleClick:s,onCreateSubtask:a,onCreateSubtaskWithActions:o,onDelete:i,onDuplicate:l,onEdit:c,onUpdateAssignee:d})=>{const u=[...e].sort((f,m)=>{var v,x;const p=((v=f.display_order)==null?void 0:v.split(".").map(g=>parseInt(g)))||[0],w=((x=m.display_order)==null?void 0:x.split(".").map(g=>parseInt(g)))||[0];for(let g=0;g<Math.max(p.length,w.length);g++){const y=p[g]||0,b=w[g]||0;if(y!==b)return y-b}return 0});return n.jsx(Gp,{children:u.map(f=>n.jsx(DX,{task:f,selectedTaskId:t,onSelectTask:r,onRowDoubleClick:s,onCreateSubtask:a,onCreateSubtaskWithActions:o,onDelete:i,onDuplicate:l,onEdit:c,onUpdateAssignee:d},f.id))})},PX=e=>{const[t,r]=h.useState([]),[s,a]=h.useState([]),[o,i]=h.useState(!1),[l,c]=h.useState(null),d=async v=>{if(v)try{i(!0),c(null);const{data:x,error:g}=await O.rpc("get_task_history",{p_task_id:v});if(g)throw g;r(x||[])}catch(x){console.error("Error fetching task history:",x),c(x.message)}finally{i(!1)}},u=async(v=50)=>{try{i(!0),c(null);const{data:x,error:g}=await O.rpc("get_recent_task_activities",{p_limit:v});if(g)throw g;a(x||[])}catch(x){console.error("Error fetching recent activities:",x),c(x.message)}finally{i(!1)}},f=async(v,x,g,y,b,j)=>{try{const{data:S,error:N}=await O.rpc("log_task_change",{p_task_id:v,p_action_type:x,p_field_name:g,p_old_value:y,p_new_value:b,p_metadata:j||{}});if(N)throw N;return v===v&&await d(v),S}catch(S){throw console.error("Error logging task change:",S),S}},m=v=>{const{action_type:x,field_name:g,old_value:y,new_value:b}=v;switch(x){case"created":return"Tche cre";case"deleted":return"Tche supprime";case"status_changed":return`Statut chang de "${y}"  "${b}"`;case"updated":switch(g){case"title":return`Titre modifi: "${y}"  "${b}"`;case"assigned_name":return`Responsable chang: "${y||"Non assign"}"  "${b||"Non assign"}"`;case"priority":return`Priorit change: "${y}"  "${b}"`;case"start_date":return`Date de dbut modifie: ${y}  ${b}`;case"due_date":return`Date d'chance modifie: ${y}  ${b}`;case"progress":return`Progression modifie: ${y}%  ${b}%`;case"effort_estimate_h":return`Charge estime modifie: ${y}h  ${b}h`;case"description":return"Description modifie";default:return`${g} modifi: "${y}"  "${b}"`}default:return`Action: ${x}`}},p=v=>{switch(v){case"created":return"";case"deleted":return"";case"status_changed":return"";case"updated":return"";default:return""}},w=v=>{switch(v){case"created":return"text-green-600";case"deleted":return"text-red-600";case"status_changed":return"text-blue-600";case"updated":return"text-orange-600";default:return"text-gray-600"}};return h.useEffect(()=>{e&&d(e)},[e]),h.useEffect(()=>{if(!e)return;const v=O.channel(`task_history_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"task_history",filter:`task_id=eq.${e}`},x=>{d(e)}).subscribe();return()=>{O.removeChannel(v)}},[e]),{history:t,recentActivities:s,loading:o,error:l,fetchTaskHistory:d,fetchRecentActivities:u,logTaskChange:f,formatHistoryMessage:m,getActionIcon:p,getActionColor:w}},RX=({taskId:e,className:t=""})=>{const{history:r,loading:s,error:a,formatHistoryMessage:o,getActionIcon:i,getActionColor:l}=PX(e);return s?n.jsxs(V,{className:t,children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Kc,{className:"h-5 w-5"}),"Historique des modifications"]})}),n.jsx(W,{children:n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):a?n.jsxs(V,{className:t,children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Kc,{className:"h-5 w-5"}),"Historique des modifications"]})}),n.jsx(W,{children:n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{children:"Erreur lors du chargement de l'historique"}),n.jsx("p",{className:"text-sm",children:a})]})})]}):!r||r.length===0?n.jsxs(V,{className:t,children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Kc,{className:"h-5 w-5"}),"Historique des modifications"]})}),n.jsx(W,{children:n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Kc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Aucune modification enregistre"}),n.jsx("p",{className:"text-sm",children:"L'historique apparatra ici lors des prochaines modifications"})]})})]}):n.jsxs(V,{className:t,children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Kc,{className:"h-5 w-5"}),"Historique des modifications",n.jsxs(re,{variant:"secondary",className:"ml-auto",children:[r.length," ",r.length===1?"modification":"modifications"]})]})}),n.jsx(W,{children:n.jsx($r,{className:"h-96",children:n.jsx("div",{className:"space-y-4",children:r.map((c,d)=>n.jsx(AX,{entry:c,formatMessage:o,getIcon:i,getColor:l,isLast:d===r.length-1},c.id))})})})]})},AX=({entry:e,formatMessage:t,getIcon:r,getColor:s,isLast:a})=>{const o=t(e),i=r(e.action_type),l=s(e.action_type),c=new Date(e.changed_at);return n.jsxs("div",{className:"relative",children:[!a&&n.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-border"}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full bg-muted flex items-center justify-center text-lg ${l}`,children:i}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:o}),n.jsx(re,{variant:"outline",className:`text-xs ${l} border-current`,children:e.action_type})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(nr,{className:"h-3 w-3"}),n.jsx("span",{children:e.user_email||"Systme"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(lt,{className:"h-3 w-3"}),n.jsx("span",{title:Ve(c,"PPpp",{locale:ot}),children:Tp(c,{addSuffix:!0,locale:ot})})]})]}),e.action_type==="updated"&&e.field_name&&n.jsxs("div",{className:"mt-2 p-2 bg-muted/50 rounded text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Champ:"}),n.jsx("span",{children:e.field_name})]}),e.old_value&&n.jsxs("div",{className:"flex justify-between mt-1",children:[n.jsx("span",{className:"font-medium",children:"Avant:"}),n.jsx("span",{className:"text-red-600 max-w-32 truncate",children:e.old_value})]}),e.new_value&&n.jsxs("div",{className:"flex justify-between mt-1",children:[n.jsx("span",{className:"font-medium",children:"Aprs:"}),n.jsx("span",{className:"text-green-600 max-w-32 truncate",children:e.new_value})]})]})]})]}),!a&&n.jsx(Ai,{className:"mt-4"})]})},MX=({open:e,onOpenChange:t,task:r})=>{var f;const o=[],i=[],l=[],c=[],u=[];return r?((r.task_level||0)>0,n.jsx(yt,{open:e,onOpenChange:t,children:n.jsxs(ft,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsx(ht,{children:n.jsxs(mt,{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-muted-foreground text-sm",children:["#",r.display_order]}),n.jsx("span",{children:r.title}),n.jsx(re,{className:lM[r.priority],variant:"outline",children:r.priority}),n.jsx(re,{className:Py[r.status],variant:"outline",children:r.status})]})}),n.jsx($r,{className:"max-h-[80vh] pr-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5"}),"Informations gnrales"]})}),n.jsxs(W,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(At,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Responsable:"}),n.jsx("span",{children:r.assignee})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ze,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Dbut:"}),n.jsx("span",{children:kd(r.start_date)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ze,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"chance:"}),n.jsx("span",{children:kd(r.due_date)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(lt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Effort estim:"}),n.jsxs("span",{children:[r.effort_estimate_h,"h"]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(xr,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"font-medium",children:["Progression: ",r.progress,"%"]})]}),n.jsx(Ot,{value:r.progress,className:"w-full"})]}),void 0]})]})]}),null,void 0,n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Si,{className:"h-5 w-5"}),"Actions et sous-tches"]})}),n.jsxs(W,{className:"space-y-4",children:[r.task_actions&&r.task_actions.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"font-medium mb-3",children:["Actions (",r.task_actions.length,")"]}),n.jsx("div",{className:"space-y-2",children:r.task_actions.map(m=>n.jsxs("div",{className:"flex items-center gap-3 p-2 bg-muted rounded-lg",children:[n.jsx("div",{className:`h-3 w-3 rounded-full ${m.is_done?"bg-green-500":"bg-gray-300"}`}),n.jsx("span",{className:m.is_done?"line-through text-muted-foreground":"",children:m.title}),n.jsxs(re,{variant:"outline",className:"ml-auto",children:[m.weight_percentage,"%"]})]},m.id))})]}),o&&o.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"font-medium mb-3",children:["Sous-tches (",o.length,")"]}),n.jsx("div",{className:"space-y-2",children:o.map(m=>n.jsxs("div",{className:"flex items-center gap-3 p-2 bg-muted rounded-lg",children:[n.jsx(re,{className:Py[m.status],variant:"outline",children:m.status}),n.jsx("span",{children:m.title}),n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm text-muted-foreground",children:[m.effort_estimate_h,"h"]}),n.jsx(Ot,{value:m.progress,className:"w-16"}),n.jsxs("span",{className:"text-sm",children:[m.progress,"%"]})]})]},m.id))})]})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(xr,{className:"h-5 w-5"}),"Statistiques"]})}),n.jsxs(W,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:[0,"h"]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Effort total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:(o==null?void 0:o.length)||0}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Sous-tches"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:(u==null?void 0:u.length)||1}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Participants"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:((f=r.task_actions)==null?void 0:f.length)||0}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Actions"})]})]})]}),u&&u.length>0&&n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(At,{className:"h-5 w-5"}),"quipe (",u.length,")"]})}),n.jsx(W,{children:n.jsx("div",{className:"flex flex-wrap gap-3",children:u.map((m,p)=>n.jsxs("div",{className:"flex items-center gap-2 bg-muted p-2 rounded-lg",children:[n.jsx(ka,{className:"h-8 w-8",children:n.jsx(Da,{children:m.charAt(0).toUpperCase()})}),n.jsx("span",{className:"text-sm",children:m})]},p))})})]}),c&&c.length>0&&n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(b2,{className:"h-5 w-5"}),"Dpendances (",c.length,")"]})}),n.jsx(W,{children:n.jsx("div",{className:"space-y-2",children:c.map(m=>n.jsxs("div",{className:"flex items-center gap-3 p-2 bg-muted rounded-lg",children:[n.jsx(re,{variant:"outline",children:m.dependency_type}),n.jsx("span",{children:m.depends_on_task_title})]},m.id))})})]}),l&&l.length>0&&n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(In,{className:"h-5 w-5"}),"Risques identifis (",l.length,")"]})}),n.jsx(W,{children:n.jsx("div",{className:"space-y-3",children:l.map(m=>n.jsxs("div",{className:"border rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(re,{variant:"destructive",children:m.impact}),n.jsx(re,{variant:"outline",children:m.probability}),n.jsx(re,{variant:"secondary",children:m.status})]}),n.jsx("p",{className:"text-sm mb-2",children:m.risk_description}),m.mitigation_plan&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Plan d'attnuation:"})," ",m.mitigation_plan]})]},m.id))})})]}),i&&i.length>0&&n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(D5,{className:"h-5 w-5"}),"Commentaires rcents (",i.length,")"]})}),n.jsx(W,{children:n.jsx("div",{className:"space-y-3",children:i.map(m=>n.jsxs("div",{className:"border-l-2 border-primary pl-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(re,{variant:"outline",children:m.comment_type}),n.jsx("span",{className:"text-sm text-muted-foreground",children:kd(m.created_at)})]}),n.jsx("p",{className:"text-sm",children:m.content})]},m.id))})})]}),n.jsx(RX,{taskId:r.id})]})})]})})):null},IX=({tasks:e,onCreateSubtask:t})=>{const[r,s]=h.useState(!1),[a,o]=h.useState(null),[i,l]=h.useState(!1),[c,d]=h.useState(),[u,f]=h.useState(!1),[m,p]=h.useState(null);return{handleCreateSubtask:x=>{const g=e.find(y=>y.id===x);g&&g.task_actions&&g.task_actions.length>0?(o(g),s(!0)):(o(g||null),d(void 0),l(!0))},handleRowDoubleClick:x=>{p(x),f(!0)},dialogs:n.jsx(n.Fragment,{children:n.jsx(MX,{open:u,onOpenChange:f,task:m})})}},OX=({tasks:e,onDuplicate:t,onDelete:r,onEdit:s,onCreateSubtask:a,onCreateSubtaskWithActions:o,onUpdateAssignee:i,selectedTaskId:l,onSelectTask:c,scrollRef:d,onScroll:u})=>{const f=IX({tasks:e,onCreateSubtask:a});return n.jsxs(n.Fragment,{children:[n.jsx("div",{ref:d,className:"h-[600px] overflow-auto",onScroll:u,children:n.jsxs(Hp,{children:[n.jsx(qp,{className:"sticky top-0 z-20 bg-gradient-to-r from-blue-500 to-blue-600 border-b-2 border-slate-300 shadow-md",children:n.jsxs(Ri,{className:"h-16 hover:bg-transparent border-0",children:[n.jsx(Vt,{className:"min-w-[200px] h-16 text-white font-bold",children:"Tche"}),n.jsx(Vt,{className:"min-w-[150px] h-16 text-white font-bold",children:"Responsable"}),n.jsx(Vt,{className:"min-w-[80px] h-16 text-white font-bold",children:"Dbut"}),n.jsx(Vt,{className:"min-w-[80px] h-16 text-white font-bold",children:"chance"}),n.jsx(Vt,{className:"min-w-[80px] h-16 text-white font-bold",children:"Priorit"}),n.jsx(Vt,{className:"min-w-[80px] h-16 text-white font-bold",children:"Statut"}),n.jsx(Vt,{className:"min-w-[80px] h-16 text-white font-bold",children:"Charge (h)"}),n.jsx(Vt,{className:"min-w-[100px] h-16 text-white font-bold",children:"Progression"}),n.jsx(Vt,{className:"min-w-[100px] h-16 text-white font-bold",children:"Documents"}),n.jsx(Vt,{className:"min-w-[100px] h-16 text-white font-bold",children:"Commentaires"}),n.jsx(Vt,{className:"w-[50px] h-16 text-white font-bold",children:"Actions"})]})}),n.jsx(TX,{tasks:e,selectedTaskId:l,onSelectTask:c,onRowDoubleClick:f.handleRowDoubleClick,onCreateSubtask:a,onCreateSubtaskWithActions:o,onDelete:r,onDuplicate:t,onEdit:s,onUpdateAssignee:i})]})}),f.dialogs]})},nl={image:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],pdf:["application/pdf"],doc:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.oasis.opendocument.text"]},LX=10*1024*1024,uM=({open:e,onOpenChange:t,actionTemplateId:r,actionTitle:s,taskId:a,onUploadSuccess:o})=>{const[i,l]=h.useState([]),[c,d]=h.useState(!1),u=h.useRef(null),{currentTenant:f}=Ui(),m=y=>nl.image.includes(y)?"image":nl.pdf.includes(y)?"pdf":nl.doc.includes(y)?"doc":"other",p=y=>{switch(y){case"image":return n.jsx(C5,{className:"h-8 w-8 text-blue-500"});case"pdf":return n.jsx(fn,{className:"h-8 w-8 text-red-500"});case"doc":return n.jsx(fn,{className:"h-8 w-8 text-blue-600"});default:return n.jsx(E5,{className:"h-8 w-8 text-gray-500"})}},w=y=>{const S=Array.from(y.target.files||[]).filter(N=>N.size>LX?(Pn.error(`Fichier trop volumineux: ${N.name}`,{description:"Taille maximale: 10MB"}),!1):[...nl.image,...nl.pdf,...nl.doc].includes(N.type)?!0:(Pn.error(`Type de fichier non support: ${N.name}`,{description:"Formats accepts: images, PDF, documents Word"}),!1)).map(N=>{const _={file:N,description:""};if(N.type.startsWith("image/")){const E=new FileReader;E.onload=D=>{l(C=>C.map(k=>{var P;return k.file===N?{...k,preview:(P=D.target)==null?void 0:P.result}:k}))},E.readAsDataURL(N)}return _});l(N=>[...N,...S]),u.current&&(u.current.value="")},v=y=>{l(b=>b.filter((j,S)=>S!==y))},x=(y,b)=>{l(j=>j.map((S,N)=>N===y?{...S,description:b}:S))},g=async()=>{if(i.length===0){Pn.error("Aucun fichier slectionn");return}if(!f){Pn.error("Session invalide",{description:"Veuillez vous reconnecter"});return}const{data:{user:y},error:b}=await O.auth.getUser();if(b||!y){Pn.error("Utilisateur non authentifi",{description:"Veuillez vous reconnecter"});return}d(!0);const j=[];try{for(const{file:S,description:N}of i){const _=S.name.split(".").pop(),E=`${r}_${Date.now()}_${Math.random().toString(36).substring(7)}.${_}`,D=`${f.id}/${E}`,{data:C,error:k}=await O.storage.from("action-attachments").upload(D,S,{cacheControl:"3600",upsert:!1});if(k)throw k;const{error:P}=await O.from("operational_action_attachments").insert({tenant_id:f.id,action_template_id:r,task_id:a||null,file_name:S.name,file_type:m(S.type),file_size:S.size,file_extension:`.${_}`,mime_type:S.type,storage_path:D,storage_bucket:"action-attachments",uploaded_by:y.id,description:N||null});if(P)throw P;j.push(S.name)}Pn.success("Fichiers uploads avec succs ! ",{description:`${j.length} fichier(s) ajout(s)`}),l([]),t(!1),o&&o()}catch(S){console.error("Erreur upload:",S),Pn.error("Erreur lors de l'upload",{description:S.message||"Une erreur inattendue s'est produite"})}finally{d(!1)}};return n.jsx(yt,{open:e,onOpenChange:t,children:n.jsxs(ft,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(ht,{children:[n.jsx(mt,{children:"Ajouter des preuves de ralisation"}),n.jsxs(Sp,{children:["Action : ",n.jsx("span",{className:"font-semibold",children:s}),n.jsx("br",{}),n.jsxs("span",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),"L'action ne peut tre valide sans au moins un fichier"]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 text-center hover:border-primary transition-colors",children:[n.jsx("input",{ref:u,type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.gif,.webp,.pdf,.doc,.docx,.odt",onChange:w,className:"hidden",disabled:c}),n.jsx(Wv,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-sm font-medium mb-1",children:"Cliquez pour slectionner ou glissez-dposez"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Images, PDF, Documents Word  Max 10MB par fichier"}),n.jsxs(L,{onClick:()=>{var y;return(y=u.current)==null?void 0:y.click()},variant:"outline",className:"mt-4",disabled:c,children:[n.jsx(Wv,{className:"h-4 w-4 mr-2"}),"Parcourir"]})]}),i.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(J,{children:["Fichiers slectionns (",i.length,")"]}),n.jsxs(re,{variant:"secondary",children:[i.length," fichier(s)"]})]}),i.map((y,b)=>n.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-muted/30",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex-shrink-0",children:y.preview?n.jsx("img",{src:y.preview,alt:y.file.name,className:"h-16 w-16 object-cover rounded"}):p(m(y.file.type))}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium truncate",children:y.file.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(y.file.size/1024).toFixed(1)," KB "," ",m(y.file.type).toUpperCase()]})]}),n.jsx(L,{onClick:()=>v(b),size:"sm",variant:"ghost",className:"h-8 w-8 p-0",disabled:c,children:n.jsx(Ro,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(J,{className:"text-xs",children:"Description (optionnelle)"}),n.jsx(on,{value:y.description,onChange:j=>x(b,j.target.value),placeholder:"Dcrivez ce fichier...",rows:2,disabled:c,className:"text-sm"})]})]},b))]})]}),n.jsxs(Np,{children:[n.jsx(L,{onClick:()=>t(!1),variant:"outline",disabled:c,children:"Annuler"}),n.jsx(L,{onClick:g,disabled:i.length===0||c,children:c?n.jsxs(n.Fragment,{children:[n.jsx(Vs,{className:"h-4 w-4 mr-2 animate-spin"}),"Upload en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Uploader ",i.length>0&&`(${i.length})`]})})]})]})})},$X=({tasks:e,onToggleAction:t,selectedTaskId:r,scrollRef:s,onScroll:a})=>{const o=jX(e),{currentTenant:i}=Ui(),[l,c]=h.useState(!1),[d,u]=h.useState(null),[f,m]=h.useState({});h.useEffect(()=>{(async()=>{if(!i||e.length===0)return;const j={};for(const S of e)if(S.task_actions)for(const N of S.task_actions)try{const{count:_}=await O.from("operational_action_attachments").select("*",{count:"exact",head:!0}).eq("tenant_id",i.id).eq("action_template_id",N.id).eq("task_id",S.id);_!==null&&(j[`${S.id}-${N.id}`]=_)}catch(_){console.error(`Erreur chargement compteur pour ${N.id}:`,_)}m(j)})()},[e,i]);const p=(b,j,S)=>{u({taskId:b,actionId:j,actionTitle:S}),c(!0)},w=()=>{if(d){const b=`${d.taskId}-${d.actionId}`,j=(f[b]||0)+1;m(S=>({...S,[b]:j}))}},v=(b,j)=>{const S=`${b}-${j}`;if((f[S]||0)===0){Pn.error("Document requis",{description:"Veuillez uploader au moins un document de preuve avant de valider cette action.",duration:4e3});return}t(b,j)},g=((b,j)=>{if(!j)return b;const S=e.find(E=>E.id===j);if(!S||!S.task_actions)return b;const N=S.task_actions.map(E=>E.title),_=b.filter(E=>!N.includes(E));return[...N,..._]})(o,r),y=[...e].sort((b,j)=>{var _,E;const S=((_=b.display_order)==null?void 0:_.split(".").map(D=>parseInt(D)))||[0],N=((E=j.display_order)==null?void 0:E.split(".").map(D=>parseInt(D)))||[0];for(let D=0;D<Math.max(S.length,N.length);D++){const C=S[D]||0,k=N[D]||0;if(C!==k)return C-k}return 0});return n.jsxs("div",{ref:s,className:"h-[600px] overflow-auto",onScroll:a,children:[n.jsxs(Hp,{children:[n.jsx(qp,{className:"sticky top-0 z-20 bg-gradient-to-r from-cyan-500 to-cyan-600 border-b-2 border-slate-300 shadow-md",children:n.jsx(Ri,{className:"h-16 hover:bg-transparent border-0",children:g.map(b=>{var E,D;const j=r&&((D=(E=e.find(C=>C.id===r))==null?void 0:E.task_actions)==null?void 0:D.some(C=>C.title===b)),S=b.slice(0,40),N=S.slice(0,20),_=S.slice(20,40);return n.jsx(Vt,{className:`min-w-[140px] max-w-[140px] text-center h-16 transition-colors text-white font-bold ${j?"ring-2 ring-yellow-400/50":""}`,title:b,children:n.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[n.jsxs("div",{className:"text-xs leading-tight",children:[n.jsx("div",{className:"font-bold",children:N}),_&&n.jsx("div",{className:"font-bold",children:_})]}),j&&n.jsx("div",{className:"w-6 h-0.5 bg-yellow-400 rounded-full animate-pulse"})]})},b)})})}),n.jsx(Gp,{children:y.map(b=>{const j=(b.task_level||0)>0,S=r===b.id;return n.jsx(Ri,{className:`border-b transition-colors ${S?"bg-primary/10 border-primary/30":""}`,style:{height:j?"51px":"64px",minHeight:j?"51px":"64px",maxHeight:j?"51px":"64px"},children:g.map(N=>{var D;const _=(D=b.task_actions)==null?void 0:D.find(C=>C.title===N),E=S&&_;return n.jsx(Wt,{className:`text-center transition-colors ${j?"py-0 text-xs":"py-0"} ${E?"bg-primary/5":""}`,style:{height:j?"51px":"64px"},children:_?n.jsxs("div",{className:`flex items-center justify-center gap-2 ${E?"transform scale-110":""} transition-transform`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-1",children:[n.jsx(ha,{checked:_.is_done,disabled:!_.is_done&&(f[`${b.id}-${_.id}`]||0)===0,onCheckedChange:()=>{console.log("Checkbox clicked - Task ID:",b.id,"Action ID:",_.id),v(b.id,_.id)},className:`${j?"scale-75":""} ${E?"border-primary data-[state=checked]:bg-primary":""} ${(f[`${b.id}-${_.id}`]||0)===0&&!_.is_done?"opacity-50 cursor-not-allowed":""}`}),n.jsxs("span",{className:`text-muted-foreground font-medium text-xs ${E?"text-primary font-bold":""}`,children:[_.weight_percentage,"%"]})]}),n.jsx(Xh,{children:n.jsxs(dk,{children:[n.jsx(uk,{asChild:!0,children:n.jsxs(L,{onClick:()=>p(b.id,_.id,_.title),size:"sm",variant:"ghost",className:"h-6 w-6 p-0 hover:bg-green-500/20",children:[n.jsx(jt,{className:"h-4 w-4 text-green-600"}),f[`${b.id}-${_.id}`]>0&&n.jsx(re,{variant:"secondary",className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center text-[9px] bg-green-600 text-white",children:f[`${b.id}-${_.id}`]})]})}),n.jsx(cw,{children:n.jsx("p",{className:"text-xs",children:f[`${b.id}-${_.id}`]>0?`${f[`${b.id}-${_.id}`]} fichier(s)  Cliquez pour ajouter`:"Ajouter un document de preuve (requis)"})})]})})]}):n.jsx("span",{className:"text-muted-foreground",children:"-"})},N)})},b.id)})})]}),d&&n.jsx(uM,{open:l,onOpenChange:c,actionTemplateId:d.actionId,actionTitle:d.actionTitle,taskId:d.taskId,onUploadSuccess:w})]})},FX=({open:e,onOpenChange:t,task:r,onSave:s})=>{const[a,o]=h.useState(""),[i,l]=h.useState(""),[c,d]=h.useState("medium"),[u,f]=h.useState("todo"),[m,p]=h.useState(!1),w=["Ahmed Waleh","Sarah Martin","Jean Dupont","Marie Dubois","Pierre Moreau"];h.useEffect(()=>{r&&e&&(o(r.title||""),l(r.assignee&&r.assignee!=="Non assign"?r.assignee:"Ahmed Waleh"),d(r.priority||"medium"),f(r.status||"todo"))},[r,e]);const v=async()=>{if(r){if(!i||i==="Non assign"){alert("Un responsable doit tre assign  la tche");return}p(!0);try{console.log("Mise  jour de la tche:",{title:a,assignee:i,priority:c,status:u}),s==null||s(),t(!1)}catch(x){console.error("Erreur:",x)}finally{p(!1)}}};return r?n.jsx(yt,{open:e,onOpenChange:t,children:n.jsxs(ft,{className:"max-w-2xl",children:[n.jsx(ht,{children:n.jsxs(mt,{className:"flex items-center gap-2",children:[n.jsx($i,{className:"h-5 w-5"}),"Modifier la tche"]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"title",children:"Titre *"}),n.jsx(ye,{id:"title",value:a,onChange:x=>o(x.target.value),placeholder:"Titre de la tche",maxLength:80}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.length,"/80 caractres (limite pour prserver la mise en page)"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Responsable *"}),n.jsxs(Ie,{value:i,onValueChange:l,children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsx(Re,{children:w.map(x=>n.jsx(ae,{value:x,children:x},x))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Priorit"}),n.jsxs(Ie,{value:c,onValueChange:x=>d(x),children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"low",children:"Faible"}),n.jsx(ae,{value:"medium",children:"Moyenne"}),n.jsx(ae,{value:"high",children:"leve"}),n.jsx(ae,{value:"urgent",children:"Urgente"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Statut"}),n.jsxs(Ie,{value:u,onValueChange:x=>f(x),children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"todo",children:" faire"}),n.jsx(ae,{value:"doing",children:"En cours"}),n.jsx(ae,{value:"blocked",children:"Bloqu"}),n.jsx(ae,{value:"done",children:"Termin"})]})]})]})]}),n.jsxs(Np,{children:[n.jsxs(L,{variant:"outline",onClick:()=>t(!1),children:[n.jsx(Ro,{className:"h-4 w-4 mr-2"}),"Annuler"]}),n.jsxs(L,{onClick:v,disabled:m||!a.trim()||!i||i==="Non assign",children:[n.jsx(G0,{className:"h-4 w-4 mr-2"}),m?"Sauvegarde...":"Sauvegarder"]})]})]})}):null},zX=({open:e,onOpenChange:t,onCreateTask:r})=>{const[s,a]=h.useState(""),[o,i]=h.useState("Ahmed Waleh"),[l,c]=h.useState("Dveloppement"),[d,u]=h.useState("Gantt Flow Next"),[f,m]=h.useState("medium"),[p,w]=h.useState("todo"),[v,x]=h.useState(8),[g,y]=h.useState(!1),b=["Ahmed Waleh","Sarah Martin","Jean Dupont","Marie Dubois","Pierre Moreau"],j=["Dveloppement","Marketing","Ventes","RH","Finance","Support"],S=["Gantt Flow Next","Site Web Corporate","App Mobile","Migration DB","Formation"],N=async()=>{if(!s.trim()){alert("Le titre est obligatoire");return}if(!o||!l||!d){alert("Tous les champs obligatoires doivent tre remplis");return}y(!0);try{await r({title:s.trim(),assignee:o,department:l,project:d,priority:f,status:p,effort_estimate_h:v}),a(""),i("Ahmed Waleh"),c("Dveloppement"),u("Gantt Flow Next"),m("medium"),w("todo"),x(8),t(!1)}catch(_){console.error("Erreur:",_),alert("Erreur lors de la cration de la tche")}finally{y(!1)}};return n.jsx(yt,{open:e,onOpenChange:t,children:n.jsxs(ft,{className:"max-w-2xl",children:[n.jsx(ht,{children:n.jsxs(mt,{className:"flex items-center gap-2",children:[n.jsx(jt,{className:"h-5 w-5"}),"Crer une Nouvelle Tche"]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"title",children:"Titre de la tche *"}),n.jsx(ye,{id:"title",value:s,onChange:_=>a(_.target.value),placeholder:"Nom de la tche...",maxLength:100}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.length,"/100 caractres"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Responsable *"}),n.jsxs(Ie,{value:o,onValueChange:i,children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsx(Re,{children:b.map(_=>n.jsx(ae,{value:_,children:_},_))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Dpartement *"}),n.jsxs(Ie,{value:l,onValueChange:c,children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsx(Re,{children:j.map(_=>n.jsx(ae,{value:_,children:_},_))})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Projet *"}),n.jsxs(Ie,{value:d,onValueChange:u,children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsx(Re,{children:S.map(_=>n.jsx(ae,{value:_,children:_},_))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Priorit"}),n.jsxs(Ie,{value:f,onValueChange:_=>m(_),children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"low",children:" Faible"}),n.jsx(ae,{value:"medium",children:" Moyenne"}),n.jsx(ae,{value:"high",children:" leve"}),n.jsx(ae,{value:"urgent",children:" Urgente"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Statut initial"}),n.jsxs(Ie,{value:p,onValueChange:_=>w(_),children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"todo",children:"  faire"}),n.jsx(ae,{value:"doing",children:" En cours"}),n.jsx(ae,{value:"blocked",children:" Bloqu"}),n.jsx(ae,{value:"done",children:" Termin"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Charge estime (heures)"}),n.jsx(ye,{type:"number",min:"0.5",step:"0.5",value:v,onChange:_=>x(parseFloat(_.target.value)||1)})]})]})]}),n.jsxs(Np,{children:[n.jsxs(L,{variant:"outline",onClick:()=>t(!1),children:[n.jsx(Ro,{className:"h-4 w-4 mr-2"}),"Annuler"]}),n.jsxs(L,{onClick:N,disabled:g||!s.trim()||!o||!l||!d,children:[n.jsx(G0,{className:"h-4 w-4 mr-2"}),g?"Cration...":"Crer la Tche"]})]})]})})},BX=({projects:e,tasks:t})=>{const[r,s]=h.useState(null),a=h.useRef(null),o=c=>t.filter(d=>d.project_id===c),i=c=>{s(c);const d=document.getElementById(`project-tasks-${c}`);if(d&&a.current){const u=a.current.offsetTop,f=d.offsetTop;a.current.scrollTo({top:f-u-20,behavior:"smooth"})}},l=c=>({planning:{label:"Planification",color:"bg-gray-500 text-white"},active:{label:"En cours",color:"bg-blue-500 text-white"},completed:{label:"Termin",color:"bg-green-500 text-white"},on_hold:{label:"En pause",color:"bg-yellow-500 text-white"}})[c]||{label:c,color:"bg-gray-500"};return n.jsxs(CR,{direction:"horizontal",className:"border rounded-lg border-border/50 overflow-hidden",children:[n.jsx(um,{defaultSize:40,minSize:30,children:n.jsxs("div",{className:"h-full bg-background border-r",children:[n.jsx("div",{className:"p-4 border-b bg-muted/50",children:n.jsx("h3",{className:"font-semibold text-lg",children:" Projets"})}),n.jsx("div",{className:"p-4 space-y-3 overflow-y-auto max-h-[600px]",children:e.map((c,d)=>{const u=l(c.status),f=o(c.id),m=r===c.id;return n.jsx(V,{className:`cursor-pointer transition-all ${m?"shadow-lg ring-2 ring-primary border-primary":"hover:shadow-md hover:border-primary/50"}`,onClick:()=>i(c.id),children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"bg-primary/20 text-primary px-2 py-1 rounded font-bold text-sm",children:["#",d+1]}),n.jsx("h4",{className:"font-bold text-lg text-primary",style:{fontSize:"1.1rem"},children:c.name})]}),n.jsx(re,{className:u.color,children:u.label})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Manager: ",c.manager]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{value:c.progress,className:"flex-1"}),n.jsxs("span",{className:"text-sm font-medium",children:[c.progress,"%"]})]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.skills.slice(0,3).map(p=>n.jsx(re,{variant:"outline",className:"text-xs",children:p},p)),c.skills.length>3&&n.jsxs(re,{variant:"outline",className:"text-xs",children:["+",c.skills.length-3]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.length," tche",f.length>1?"s":""]})]})]})})},c.id)})})]})}),n.jsx(ER,{withHandle:!0}),n.jsx(um,{defaultSize:60,minSize:40,children:n.jsxs("div",{className:"h-full bg-background",children:[n.jsxs("div",{className:"p-4 border-b bg-muted/50",children:[n.jsx("h3",{className:"font-semibold text-lg",children:" Tches Associes"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cliquez sur un projet  gauche pour voir ses tches"})]}),n.jsxs("div",{ref:a,className:"p-4 space-y-4 overflow-y-auto max-h-[600px]",children:[e.map((c,d)=>{const u=o(c.id),f=r===c.id;return u.length===0?null:n.jsxs("div",{id:`project-tasks-${c.id}`,className:`space-y-2 transition-all ${f?"ring-2 ring-primary/30 rounded-lg p-3 bg-primary/5":""}`,children:[n.jsxs("div",{className:`font-bold border-b pb-1 flex items-center gap-2 ${f?"text-primary border-primary":"text-primary border-border"}`,style:{fontSize:"1.1rem",fontFamily:"system-ui, -apple-system, sans-serif"},children:[n.jsxs("span",{className:"bg-primary/20 text-primary px-2 py-0.5 rounded font-bold text-sm",children:["#",d+1]})," ",c.name,f&&n.jsx("span",{className:"ml-2 text-xs font-normal text-primary/70",children:" Projet slectionn"})]}),n.jsx("div",{className:"pl-4 space-y-2",children:u.map(m=>n.jsx(V,{className:"border-l-4 border-l-primary/30",children:n.jsx(W,{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h5",{className:"font-medium",children:m.title}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Assign : ",m.assignee]})]}),n.jsxs("div",{className:"text-right space-y-1",children:[n.jsx(re,{variant:"outline",className:"text-xs",children:m.status}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{value:m.progress,className:"w-16"}),n.jsxs("span",{className:"text-xs font-medium",children:[m.progress,"%"]})]})]})]})})},m.id))})]},c.id)}),t.filter(c=>!c.project_id||!e.some(d=>d.id===c.project_id)).length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-bold text-muted-foreground border-b pb-1",children:" Tches sans projet"}),n.jsx("div",{className:"pl-4 space-y-2",children:t.filter(c=>!c.project_id||!e.some(d=>d.id===c.project_id)).map(c=>n.jsx(V,{className:"border-l-4 border-l-muted",children:n.jsx(W,{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h5",{className:"font-medium",children:c.title}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Assign : ",c.assignee]})]}),n.jsxs("div",{className:"text-right space-y-1",children:[n.jsx(re,{variant:"outline",className:"text-xs",children:c.status}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{value:c.progress,className:"w-16"}),n.jsxs("span",{className:"text-xs font-medium",children:[c.progress,"%"]})]})]})]})})},c.id))})]})]})]})})]})},UX=()=>{const{tasks:e,loading:t,error:r,duplicateTask:s,deleteTask:a,toggleAction:o,addActionColumn:i,addDetailedAction:l,createSubTask:c,createSubTaskWithActions:d,updateTaskAssignee:u,refetch:f,createTask:m,updateTask:p}=Ns(),w=Sn(),{projects:v,loading:x,error:g}=Vu(),y=async de=>{const Me=new Date,Be=new Date(Me.getTime()+7*24*60*60*1e3);return m({title:de.title,description:"",status:de.status,priority:de.priority,start_date:Me.toISOString().split("T")[0],due_date:Be.toISOString().split("T")[0]})},{defaultDisplayMode:b}=p7(),[j,S]=h.useState(""),[N,_]=h.useState(""),[E,D]=h.useState(!1),[C,k]=h.useState(null),[P,R]=h.useState(!1),[A,I]=h.useState(b),[F,B]=h.useState([]),T=h.useRef(null),M=h.useRef(null),U=h.useRef(!1);h.useEffect(()=>{B(e)},[e]);const q=h.useCallback(de=>{U.current||(U.current=!0,de==="fixed"&&T.current&&M.current?M.current.scrollTop=T.current.scrollTop:de==="action"&&M.current&&T.current&&(T.current.scrollTop=M.current.scrollTop),setTimeout(()=>{U.current=!1},0))},[]),Y=async()=>{if(j.trim()&&N)try{await i(j.trim(),N),S(""),_(void 0),await f()}catch(de){console.error("Error adding action column:",de)}},G=async de=>{if(N)try{await l(N,de),await f()}catch(Me){console.error("Error creating detailed action:",Me)}},z=async(de,Me)=>{try{console.log("handleToggleAction called:",{taskId:de,actionId:Me});const Be=F.map(Ke=>{if(Ke.id===de&&Ke.task_actions){const et=Ke.task_actions.map(ie=>ie.id===Me?{...ie,is_done:!ie.is_done}:ie),Xt=et.reduce((ie,ge)=>ie+ge.weight_percentage,0),$=et.filter(ie=>ie.is_done).reduce((ie,ge)=>ie+ge.weight_percentage,0),K=Xt===0?0:Math.round($);let ee=Ke.status;return K===100?ee="done":K>0?ee="doing":ee="todo",{...Ke,task_actions:et,progress:K,status:ee}}return Ke});B(Be),await o(de,Me)}catch(Be){console.error("Error in handleToggleAction:",Be),await f()}},Z=de=>{s(de)},Q=async de=>{await a(de),await f()},H=de=>{const Me=F.find(Be=>Be.id===de);Me&&(k(Me),D(!0))},te=async de=>{try{await y(de),await f()}catch(Me){throw console.error("Erreur lors de la cration:",Me),Me}},se=async(de,Me,Be)=>{try{console.log("Creating subtask with data:",{parentId:de,linkedActionId:Me,customData:Be});const Ke=await c(de,Me,Be);console.log("Subtask created successfully:",Ke),await f()}catch(Ke){console.error("Error creating subtask:",Ke)}},ne=async(de,Me,Be)=>{try{console.log("Creating subtask with actions:",{parentId:de,customData:Me,actions:Be});const Ke=await d(de,Me,Be);console.log("Subtask with actions created successfully:",Ke),await f()}catch(Ke){console.error("Error creating subtask with actions:",Ke)}},we=async(de,Me)=>{try{await u(de,Me),await f()}catch(Be){console.error("Error updating assignee:",Be)}},he=de=>{_(de===N?void 0:de)},be=!!(N&&j.trim());return t||A==="projects"&&x?n.jsx(kR,{}):r||A==="projects"&&g?n.jsx(DR,{error:r||g}):w?n.jsx(Hq,{tasks:F,loading:t,error:r,duplicateTask:s,deleteTask:Q,toggleAction:z,addActionColumn:i,createSubTask:se,updateTaskAssignee:we,refetch:f}):n.jsxs(V,{className:"w-full modern-card glow-accent transition-smooth",children:[n.jsx(rY,{newActionTitle:j,setNewActionTitle:S,onAddActionColumn:Y,onCreateDetailedAction:G,selectedTaskId:N,isActionButtonEnabled:be,onCreateTask:()=>R(!0)}),n.jsx("div",{className:"px-6 pb-4",children:n.jsxs(Lp,{type:"single",value:A,onValueChange:de=>de&&I(de),className:"justify-start",children:[n.jsx(Ti,{value:"tasks",className:"data-[state=on]:bg-primary data-[state=on]:text-primary-foreground",children:" Tches"}),n.jsx(Ti,{value:"projects",className:"data-[state=on]:bg-primary data-[state=on]:text-primary-foreground",children:" Projets"})]})}),n.jsx(W,{className:"bg-gantt-header/20 backdrop-blur-sm",children:A==="tasks"?n.jsxs(CR,{direction:"horizontal",className:"border rounded-lg border-border/50 overflow-hidden",children:[n.jsx(um,{defaultSize:70,minSize:50,maxSize:90,children:n.jsx(OX,{tasks:F,onDuplicate:Z,onDelete:Q,onEdit:H,onCreateSubtask:se,onCreateSubtaskWithActions:ne,onUpdateAssignee:we,selectedTaskId:N,onSelectTask:he,scrollRef:T,onScroll:()=>q("fixed")})}),n.jsx(ER,{withHandle:!0}),n.jsx(um,{defaultSize:30,minSize:10,maxSize:50,children:n.jsx($X,{tasks:F,onToggleAction:z,selectedTaskId:N,scrollRef:M,onScroll:()=>q("action")})})]}):n.jsx(BX,{projects:v.map(de=>({id:de.id,name:de.name,status:de.status,progress:de.progress||0,manager:de.manager_name||"Non assign",skills:[],start_date:de.start_date||"",end_date:de.end_date||""})),tasks:F.map(de=>({id:de.id,title:de.title,project_id:de.project_id,project_name:de.project_name||"",progress:de.progress,assignee:de.assignee,status:de.status}))})}),n.jsx(FX,{open:E,onOpenChange:D,task:C,onSave:()=>{f(),k(null)}}),n.jsx(zX,{open:P,onOpenChange:R,onCreateTask:te})]})};function VX(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return h.useMemo(()=>s=>{t.forEach(a=>a(s))},t)}const Jp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Tc(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function wb(e){return"nodeType"in e}function Gr(e){var t,r;return e?Tc(e)?e:wb(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function bb(e){const{Document:t}=Gr(e);return e instanceof t}function Xu(e){return Tc(e)?!1:e instanceof Gr(e).HTMLElement}function fM(e){return e instanceof Gr(e).SVGElement}function Pc(e){return e?Tc(e)?e.document:wb(e)?bb(e)?e:Xu(e)||fM(e)?e.ownerDocument:document:document:document}const ws=Jp?h.useLayoutEffect:h.useEffect;function Qp(e){const t=h.useRef(e);return ws(()=>{t.current=e}),h.useCallback(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function WX(){const e=h.useRef(null),t=h.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),r=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function mu(e,t){t===void 0&&(t=[e]);const r=h.useRef(e);return ws(()=>{r.current!==e&&(r.current=e)},t),r}function Ju(e,t){const r=h.useRef();return h.useMemo(()=>{const s=e(r.current);return r.current=s,s},[...t])}function pm(e){const t=Qp(e),r=h.useRef(null),s=h.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,s]}function gm(e){const t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}let _x={};function Qu(e,t){return h.useMemo(()=>{if(t)return t;const r=_x[e]==null?0:_x[e]+1;return _x[e]=r,e+"-"+r},[e,t])}function hM(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((o,i)=>{const l=Object.entries(i);for(const[c,d]of l){const u=o[c];u!=null&&(o[c]=u+e*d)}return o},{...t})}}const Il=hM(1),xm=hM(-1);function HX(e){return"clientX"in e&&"clientY"in e}function Zp(e){if(!e)return!1;const{KeyboardEvent:t}=Gr(e.target);return t&&e instanceof t}function qX(e){if(!e)return!1;const{TouchEvent:t}=Gr(e.target);return t&&e instanceof t}function vm(e){if(qX(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return HX(e)?{x:e.clientX,y:e.clientY}:null}const _a=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[_a.Translate.toString(e),_a.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:s}=e;return t+" "+r+"ms "+s}}}),cS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function GX(e){return e.matches(cS)?e:e.querySelector(cS)}const KX={display:"none"};function YX(e){let{id:t,value:r}=e;return X.createElement("div",{id:t,style:KX},r)}function XX(e){let{id:t,announcement:r,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return X.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},r)}function JX(){const[e,t]=h.useState("");return{announce:h.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const mM=h.createContext(null);function QX(e){const t=h.useContext(mM);h.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ZX(){const[e]=h.useState(()=>new Set),t=h.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[h.useCallback(s=>{let{type:a,event:o}=s;e.forEach(i=>{var l;return(l=i[a])==null?void 0:l.call(i,o)})},[e]),t]}const eJ={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},tJ={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function rJ(e){let{announcements:t=tJ,container:r,hiddenTextDescribedById:s,screenReaderInstructions:a=eJ}=e;const{announce:o,announcement:i}=JX(),l=Qu("DndLiveRegion"),[c,d]=h.useState(!1);if(h.useEffect(()=>{d(!0)},[]),QX(h.useMemo(()=>({onDragStart(f){let{active:m}=f;o(t.onDragStart({active:m}))},onDragMove(f){let{active:m,over:p}=f;t.onDragMove&&o(t.onDragMove({active:m,over:p}))},onDragOver(f){let{active:m,over:p}=f;o(t.onDragOver({active:m,over:p}))},onDragEnd(f){let{active:m,over:p}=f;o(t.onDragEnd({active:m,over:p}))},onDragCancel(f){let{active:m,over:p}=f;o(t.onDragCancel({active:m,over:p}))}}),[o,t])),!c)return null;const u=X.createElement(X.Fragment,null,X.createElement(YX,{id:s,value:a.draggable}),X.createElement(XX,{id:l,announcement:i}));return r?en.createPortal(u,r):u}var tr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(tr||(tr={}));function ym(){}function pM(e,t){return h.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function gM(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return h.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const bs=Object.freeze({x:0,y:0});function nJ(e,t){const r=vm(e);if(!r)return"0 0";const s={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function sJ(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return s-r}function aJ(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function oJ(e,t){const r=Math.max(t.top,e.top),s=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=a-s,l=o-r;if(s<a&&r<o){const c=t.width*t.height,d=e.width*e.height,u=i*l,f=u/(c+d-u);return Number(f.toFixed(4))}return 0}const iJ=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=[];for(const o of s){const{id:i}=o,l=r.get(i);if(l){const c=oJ(l,t);c>0&&a.push({id:i,data:{droppableContainer:o,value:c}})}}return a.sort(sJ)};function lJ(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function xM(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:bs}function cJ(e){return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...r})}}const dJ=cJ(1);function vM(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function uJ(e,t,r){const s=vM(t);if(!s)return e;const{scaleX:a,scaleY:o,x:i,y:l}=s,c=e.left-i-(1-a)*parseFloat(r),d=e.top-l-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),u=a?e.width/a:e.width,f=o?e.height/o:e.height;return{width:u,height:f,top:d,right:c+u,bottom:d+f,left:c}}const fJ={ignoreTransform:!1};function Rc(e,t){t===void 0&&(t=fJ);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=Gr(e).getComputedStyle(e);d&&(r=uJ(r,d,u))}const{top:s,left:a,width:o,height:i,bottom:l,right:c}=r;return{top:s,left:a,width:o,height:i,bottom:l,right:c}}function dS(e){return Rc(e,{ignoreTransform:!0})}function hJ(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function mJ(e,t){return t===void 0&&(t=Gr(e).getComputedStyle(e)),t.position==="fixed"}function pJ(e,t){t===void 0&&(t=Gr(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?r.test(o):!1})}function jb(e,t){const r=[];function s(a){if(t!=null&&r.length>=t||!a)return r;if(bb(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Xu(a)||fM(a)||r.includes(a))return r;const o=Gr(e).getComputedStyle(a);return a!==e&&pJ(a,o)&&r.push(a),mJ(a,o)?r:s(a.parentNode)}return e?s(e):r}function yM(e){const[t]=jb(e,1);return t??null}function Cx(e){return!Jp||!e?null:Tc(e)?e:wb(e)?bb(e)||e===Pc(e).scrollingElement?window:Xu(e)?e:null:null}function wM(e){return Tc(e)?e.scrollX:e.scrollLeft}function bM(e){return Tc(e)?e.scrollY:e.scrollTop}function Ry(e){return{x:wM(e),y:bM(e)}}var dr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(dr||(dr={}));function jM(e){return!Jp||!e?!1:e===document.scrollingElement}function NM(e){const t={x:0,y:0},r=jM(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,i=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:i,isRight:l,maxScroll:s,minScroll:t}}const gJ={x:.2,y:.2};function xJ(e,t,r,s,a){let{top:o,left:i,right:l,bottom:c}=r;s===void 0&&(s=10),a===void 0&&(a=gJ);const{isTop:d,isBottom:u,isLeft:f,isRight:m}=NM(e),p={x:0,y:0},w={x:0,y:0},v={height:t.height*a.y,width:t.width*a.x};return!d&&o<=t.top+v.height?(p.y=dr.Backward,w.y=s*Math.abs((t.top+v.height-o)/v.height)):!u&&c>=t.bottom-v.height&&(p.y=dr.Forward,w.y=s*Math.abs((t.bottom-v.height-c)/v.height)),!m&&l>=t.right-v.width?(p.x=dr.Forward,w.x=s*Math.abs((t.right-v.width-l)/v.width)):!f&&i<=t.left+v.width&&(p.x=dr.Backward,w.x=s*Math.abs((t.left+v.width-i)/v.width)),{direction:p,speed:w}}function vJ(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:t,left:r,right:s,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function SM(e){return e.reduce((t,r)=>Il(t,Ry(r)),bs)}function yJ(e){return e.reduce((t,r)=>t+wM(r),0)}function wJ(e){return e.reduce((t,r)=>t+bM(r),0)}function _M(e,t){if(t===void 0&&(t=Rc),!e)return;const{top:r,left:s,bottom:a,right:o}=t(e);yM(e)&&(a<=0||o<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const bJ=[["x",["left","right"],yJ],["y",["top","bottom"],wJ]];class Nb{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=jb(r),a=SM(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,l]of bJ)for(const c of i)Object.defineProperty(this,c,{get:()=>{const d=l(s),u=a[o]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Dd{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=t}add(t,r,s){var a;(a=this.target)==null||a.addEventListener(t,r,s),this.listeners.push([t,r,s])}}function jJ(e){const{EventTarget:t}=Gr(e);return e instanceof t?e:Pc(e)}function Ex(e,t){const r=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+s**2)>t:"x"in t&&"y"in t?r>t.x&&s>t.y:"x"in t?r>t.x:"y"in t?s>t.y:!1}var Rn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Rn||(Rn={}));function uS(e){e.preventDefault()}function NJ(e){e.stopPropagation()}var nt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(nt||(nt={}));const CM={start:[nt.Space,nt.Enter],cancel:[nt.Esc],end:[nt.Space,nt.Enter,nt.Tab]},SJ=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case nt.Right:return{...r,x:r.x+25};case nt.Left:return{...r,x:r.x-25};case nt.Down:return{...r,y:r.y+25};case nt.Up:return{...r,y:r.y-25}}};class EM{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Dd(Pc(r)),this.windowListeners=new Dd(Gr(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Rn.Resize,this.handleCancel),this.windowListeners.add(Rn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Rn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,s=t.node.current;s&&_M(s),r(bs)}handleKeyDown(t){if(Zp(t)){const{active:r,context:s,options:a}=this.props,{keyboardCodes:o=CM,coordinateGetter:i=SJ,scrollBehavior:l="smooth"}=a,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:bs;this.referenceCoordinates||(this.referenceCoordinates=u);const f=i(t,{active:r,context:s.current,currentCoordinates:u});if(f){const m=xm(f,u),p={x:0,y:0},{scrollableAncestors:w}=s.current;for(const v of w){const x=t.code,{isTop:g,isRight:y,isLeft:b,isBottom:j,maxScroll:S,minScroll:N}=NM(v),_=vJ(v),E={x:Math.min(x===nt.Right?_.right-_.width/2:_.right,Math.max(x===nt.Right?_.left:_.left+_.width/2,f.x)),y:Math.min(x===nt.Down?_.bottom-_.height/2:_.bottom,Math.max(x===nt.Down?_.top:_.top+_.height/2,f.y))},D=x===nt.Right&&!y||x===nt.Left&&!b,C=x===nt.Down&&!j||x===nt.Up&&!g;if(D&&E.x!==f.x){const k=v.scrollLeft+m.x,P=x===nt.Right&&k<=S.x||x===nt.Left&&k>=N.x;if(P&&!m.y){v.scrollTo({left:k,behavior:l});return}P?p.x=v.scrollLeft-k:p.x=x===nt.Right?v.scrollLeft-S.x:v.scrollLeft-N.x,p.x&&v.scrollBy({left:-p.x,behavior:l});break}else if(C&&E.y!==f.y){const k=v.scrollTop+m.y,P=x===nt.Down&&k<=S.y||x===nt.Up&&k>=N.y;if(P&&!m.x){v.scrollTo({top:k,behavior:l});return}P?p.y=v.scrollTop-k:p.y=x===nt.Down?v.scrollTop-S.y:v.scrollTop-N.y,p.y&&v.scrollBy({top:-p.y,behavior:l});break}}this.handleMove(t,Il(xm(f,this.referenceCoordinates),p))}}}handleMove(t,r){const{onMove:s}=this.props;t.preventDefault(),s(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}EM.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:s=CM,onActivation:a}=t,{active:o}=r;const{code:i}=e.nativeEvent;if(s.start.includes(i)){const l=o.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function fS(e){return!!(e&&"distance"in e)}function hS(e){return!!(e&&"delay"in e)}class Sb{constructor(t,r,s){var a;s===void 0&&(s=jJ(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:o}=t,{target:i}=o;this.props=t,this.events=r,this.document=Pc(i),this.documentListeners=new Dd(this.document),this.listeners=new Dd(s),this.windowListeners=new Dd(Gr(i)),this.initialCoordinates=(a=vm(o))!=null?a:bs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Rn.Resize,this.handleCancel),this.windowListeners.add(Rn.DragStart,uS),this.windowListeners.add(Rn.VisibilityChange,this.handleCancel),this.windowListeners.add(Rn.ContextMenu,uS),this.documentListeners.add(Rn.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hS(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(fS(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Rn.Click,NJ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Rn.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:i,options:{activationConstraint:l}}=o;if(!a)return;const c=(r=vm(t))!=null?r:bs,d=xm(a,c);if(!s&&l){if(fS(l)){if(l.tolerance!=null&&Ex(d,l.tolerance))return this.handleCancel();if(Ex(d,l.distance))return this.handleStart()}if(hS(l)&&Ex(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),i(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===nt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const _J={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eg extends Sb{constructor(t){const{event:r}=t,s=Pc(r.target);super(t,_J,s)}}eg.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return!r.isPrimary||r.button!==0?!1:(s==null||s({event:r}),!0)}}];const CJ={move:{name:"mousemove"},end:{name:"mouseup"}};var Ay;(function(e){e[e.RightClick=2]="RightClick"})(Ay||(Ay={}));class EJ extends Sb{constructor(t){super(t,CJ,Pc(t.event.target))}}EJ.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return r.button===Ay.RightClick?!1:(s==null||s({event:r}),!0)}}];const kx={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class kJ extends Sb{constructor(t){super(t,kx)}static setup(){return window.addEventListener(kx.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(kx.move.name,t)};function t(){}}}kJ.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;const{touches:a}=r;return a.length>1?!1:(s==null||s({event:r}),!0)}}];var Td;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Td||(Td={}));var wm;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(wm||(wm={}));function DJ(e){let{acceleration:t,activator:r=Td.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:i=5,order:l=wm.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:f,threshold:m}=e;const p=PJ({delta:f,disabled:!o}),[w,v]=WX(),x=h.useRef({x:0,y:0}),g=h.useRef({x:0,y:0}),y=h.useMemo(()=>{switch(r){case Td.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Td.DraggableRect:return a}},[r,a,c]),b=h.useRef(null),j=h.useCallback(()=>{const N=b.current;if(!N)return;const _=x.current.x*g.current.x,E=x.current.y*g.current.y;N.scrollBy(_,E)},[]),S=h.useMemo(()=>l===wm.TreeOrder?[...d].reverse():d,[l,d]);h.useEffect(()=>{if(!o||!d.length||!y){v();return}for(const N of S){if((s==null?void 0:s(N))===!1)continue;const _=d.indexOf(N),E=u[_];if(!E)continue;const{direction:D,speed:C}=xJ(N,E,y,t,m);for(const k of["x","y"])p[k][D[k]]||(C[k]=0,D[k]=0);if(C.x>0||C.y>0){v(),b.current=N,w(j,i),x.current=C,g.current=D;return}}x.current={x:0,y:0},g.current={x:0,y:0},v()},[t,j,s,v,o,i,JSON.stringify(y),JSON.stringify(p),w,d,S,u,JSON.stringify(m)])}const TJ={x:{[dr.Backward]:!1,[dr.Forward]:!1},y:{[dr.Backward]:!1,[dr.Forward]:!1}};function PJ(e){let{delta:t,disabled:r}=e;const s=gm(t);return Ju(a=>{if(r||!s||!a)return TJ;const o={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[dr.Backward]:a.x[dr.Backward]||o.x===-1,[dr.Forward]:a.x[dr.Forward]||o.x===1},y:{[dr.Backward]:a.y[dr.Backward]||o.y===-1,[dr.Forward]:a.y[dr.Forward]||o.y===1}}},[r,t,s])}function RJ(e,t){const r=t!=null?e.get(t):void 0,s=r?r.node.current:null;return Ju(a=>{var o;return t==null?null:(o=s??a)!=null?o:null},[s,t])}function AJ(e,t){return h.useMemo(()=>e.reduce((r,s)=>{const{sensor:a}=s,o=a.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,s)}));return[...r,...o]},[]),[e,t])}var pu;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(pu||(pu={}));var My;(function(e){e.Optimized="optimized"})(My||(My={}));const mS=new Map;function MJ(e,t){let{dragging:r,dependencies:s,config:a}=t;const[o,i]=h.useState(null),{frequency:l,measure:c,strategy:d}=a,u=h.useRef(e),f=x(),m=mu(f),p=h.useCallback(function(g){g===void 0&&(g=[]),!m.current&&i(y=>y===null?g:y.concat(g.filter(b=>!y.includes(b))))},[m]),w=h.useRef(null),v=Ju(g=>{if(f&&!r)return mS;if(!g||g===mS||u.current!==e||o!=null){const y=new Map;for(let b of e){if(!b)continue;if(o&&o.length>0&&!o.includes(b.id)&&b.rect.current){y.set(b.id,b.rect.current);continue}const j=b.node.current,S=j?new Nb(c(j),j):null;b.rect.current=S,S&&y.set(b.id,S)}return y}return g},[e,o,r,f,c]);return h.useEffect(()=>{u.current=e},[e]),h.useEffect(()=>{f||p()},[r,f]),h.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),h.useEffect(()=>{f||typeof l!="number"||w.current!==null||(w.current=setTimeout(()=>{p(),w.current=null},l))},[l,f,p,...s]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:o!=null};function x(){switch(d){case pu.Always:return!1;case pu.BeforeDragging:return r;default:return!r}}}function _b(e,t){return Ju(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function IJ(e,t){return _b(e,t)}function OJ(e){let{callback:t,disabled:r}=e;const s=Qp(t),a=h.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,r]);return h.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function tg(e){let{callback:t,disabled:r}=e;const s=Qp(t),a=h.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[r]);return h.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function LJ(e){return new Nb(Rc(e),e)}function pS(e,t,r){t===void 0&&(t=LJ);const[s,a]=h.useState(null);function o(){a(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??r)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const i=OJ({callback(c){if(e)for(const d of c){const{type:u,target:f}=d;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),l=tg({callback:o});return ws(()=>{o(),e?(l==null||l.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),i==null||i.disconnect())},[e]),s}function $J(e){const t=_b(e);return xM(e,t)}const gS=[];function FJ(e){const t=h.useRef(e),r=Ju(s=>e?s&&s!==gS&&e&&t.current&&e.parentNode===t.current.parentNode?s:jb(e):gS,[e]);return h.useEffect(()=>{t.current=e},[e]),r}function zJ(e){const[t,r]=h.useState(null),s=h.useRef(e),a=h.useCallback(o=>{const i=Cx(o.target);i&&r(l=>l?(l.set(i,Ry(i)),new Map(l)):null)},[]);return h.useEffect(()=>{const o=s.current;if(e!==o){i(o);const l=e.map(c=>{const d=Cx(c);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,Ry(d)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),s.current=e}return()=>{i(e),i(o)};function i(l){l.forEach(c=>{const d=Cx(c);d==null||d.removeEventListener("scroll",a)})}},[a,e]),h.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,i)=>Il(o,i),bs):SM(e):bs,[e,t])}function xS(e,t){t===void 0&&(t=[]);const r=h.useRef(null);return h.useEffect(()=>{r.current=null},t),h.useEffect(()=>{const s=e!==bs;s&&!r.current&&(r.current=e),!s&&r.current&&(r.current=null)},[e]),r.current?xm(e,r.current):bs}function BJ(e){h.useEffect(()=>{if(!Jp)return;const t=e.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function UJ(e,t){return h.useMemo(()=>e.reduce((r,s)=>{let{eventName:a,handler:o}=s;return r[a]=i=>{o(i,t)},r},{}),[e,t])}function kM(e){return h.useMemo(()=>e?hJ(e):null,[e])}const vS=[];function VJ(e,t){t===void 0&&(t=Rc);const[r]=e,s=kM(r?Gr(r):null),[a,o]=h.useState(vS);function i(){o(()=>e.length?e.map(c=>jM(c)?s:new Nb(t(c),c)):vS)}const l=tg({callback:i});return ws(()=>{l==null||l.disconnect(),i(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),a}function DM(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Xu(t)?t:e}function WJ(e){let{measure:t}=e;const[r,s]=h.useState(null),a=h.useCallback(d=>{for(const{target:u}of d)if(Xu(u)){s(f=>{const m=t(u);return f?{...f,width:m.width,height:m.height}:m});break}},[t]),o=tg({callback:a}),i=h.useCallback(d=>{const u=DM(d);o==null||o.disconnect(),u&&(o==null||o.observe(u)),s(u?t(u):null)},[t,o]),[l,c]=pm(i);return h.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const HJ=[{sensor:eg,options:{}},{sensor:EM,options:{}}],qJ={current:{}},gh={draggable:{measure:dS},droppable:{measure:dS,strategy:pu.WhileDragging,frequency:My.Optimized},dragOverlay:{measure:Rc}};class Pd extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,s;return(r=(s=this.get(t))==null?void 0:s.node.current)!=null?r:void 0}}const GJ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Pd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ym},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:gh,measureDroppableContainers:ym,windowRect:null,measuringScheduled:!1},TM={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ym,draggableNodes:new Map,over:null,measureDroppableContainers:ym},Zu=h.createContext(TM),PM=h.createContext(GJ);function KJ(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Pd}}}function YJ(e,t){switch(t.type){case tr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case tr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case tr.DragEnd:case tr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case tr.RegisterDroppable:{const{element:r}=t,{id:s}=r,a=new Pd(e.droppable.containers);return a.set(s,r),{...e,droppable:{...e.droppable,containers:a}}}case tr.SetDroppableDisabled:{const{id:r,key:s,disabled:a}=t,o=e.droppable.containers.get(r);if(!o||s!==o.key)return e;const i=new Pd(e.droppable.containers);return i.set(r,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case tr.UnregisterDroppable:{const{id:r,key:s}=t,a=e.droppable.containers.get(r);if(!a||s!==a.key)return e;const o=new Pd(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function XJ(e){let{disabled:t}=e;const{active:r,activatorEvent:s,draggableNodes:a}=h.useContext(Zu),o=gm(s),i=gm(r==null?void 0:r.id);return h.useEffect(()=>{if(!t&&!s&&o&&i!=null){if(!Zp(o)||document.activeElement===o.target)return;const l=a.get(i);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const f=GX(u);if(f){f.focus();break}}})}},[s,t,a,i,o]),null}function RM(e,t){let{transform:r,...s}=t;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...s}),r):r}function JJ(e){return h.useMemo(()=>({draggable:{...gh.draggable,...e==null?void 0:e.draggable},droppable:{...gh.droppable,...e==null?void 0:e.droppable},dragOverlay:{...gh.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function QJ(e){let{activeNode:t,measure:r,initialRect:s,config:a=!0}=e;const o=h.useRef(!1),{x:i,y:l}=typeof a=="boolean"?{x:a,y:a}:a;ws(()=>{if(!i&&!l||!t){o.current=!1;return}if(o.current||!s)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const u=r(d),f=xM(u,s);if(i||(f.x=0),l||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=yM(d);m&&m.scrollBy({top:f.y,left:f.x})}},[t,i,l,s,r])}const rg=h.createContext({...bs,scaleX:1,scaleY:1});var Ha;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ha||(Ha={}));const AM=h.memo(function(t){var r,s,a,o;let{id:i,accessibility:l,autoScroll:c=!0,children:d,sensors:u=HJ,collisionDetection:f=iJ,measuring:m,modifiers:p,...w}=t;const v=h.useReducer(YJ,void 0,KJ),[x,g]=v,[y,b]=ZX(),[j,S]=h.useState(Ha.Uninitialized),N=j===Ha.Initialized,{draggable:{active:_,nodes:E,translate:D},droppable:{containers:C}}=x,k=_!=null?E.get(_):null,P=h.useRef({initial:null,translated:null}),R=h.useMemo(()=>{var zt;return _!=null?{id:_,data:(zt=k==null?void 0:k.data)!=null?zt:qJ,rect:P}:null},[_,k]),A=h.useRef(null),[I,F]=h.useState(null),[B,T]=h.useState(null),M=mu(w,Object.values(w)),U=Qu("DndDescribedBy",i),q=h.useMemo(()=>C.getEnabled(),[C]),Y=JJ(m),{droppableRects:G,measureDroppableContainers:z,measuringScheduled:Z}=MJ(q,{dragging:N,dependencies:[D.x,D.y],config:Y.droppable}),Q=RJ(E,_),H=h.useMemo(()=>B?vm(B):null,[B]),te=ug(),se=IJ(Q,Y.draggable.measure);QJ({activeNode:_!=null?E.get(_):null,config:te.layoutShiftCompensation,initialRect:se,measure:Y.draggable.measure});const ne=pS(Q,Y.draggable.measure,se),we=pS(Q?Q.parentElement:null),he=h.useRef({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:C,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=C.getNodeFor((r=he.current.over)==null?void 0:r.id),de=WJ({measure:Y.dragOverlay.measure}),Me=(s=de.nodeRef.current)!=null?s:Q,Be=N?(a=de.rect)!=null?a:ne:null,Ke=!!(de.nodeRef.current&&de.rect),et=$J(Ke?null:ne),Xt=kM(Me?Gr(Me):null),$=FJ(N?be??Q:null),K=VJ($),ee=RM(p,{transform:{x:D.x-et.x,y:D.y-et.y,scaleX:1,scaleY:1},activatorEvent:B,active:R,activeNodeRect:ne,containerNodeRect:we,draggingNodeRect:Be,over:he.current.over,overlayNodeRect:de.rect,scrollableAncestors:$,scrollableAncestorRects:K,windowRect:Xt}),ie=H?Il(H,D):null,ge=zJ($),xe=xS(ge),Ne=xS(ge,[ne]),$e=Il(ee,xe),Je=Be?dJ(Be,ee):null,Ft=R&&Je?f({active:R,collisionRect:Je,droppableRects:G,droppableContainers:q,pointerCoordinates:ie}):null,_n=aJ(Ft,"id"),[Jt,Vo]=h.useState(null),Ys=Ke?ee:Il(ee,Ne),Cn=lJ(Ys,(o=Jt==null?void 0:Jt.rect)!=null?o:null,ne),Ra=h.useRef(null),En=h.useCallback((zt,Ct)=>{let{sensor:Tr,options:De}=Ct;if(A.current==null)return;const We=E.get(A.current);if(!We)return;const Ge=zt.nativeEvent,Et=new Tr({active:A.current,activeNode:We,event:Ge,options:De,context:he,onAbort(ct){if(!E.get(ct))return;const{onDragAbort:kt}=M.current,ir={id:ct};kt==null||kt(ir),y({type:"onDragAbort",event:ir})},onPending(ct,br,kt,ir){if(!E.get(ct))return;const{onDragPending:$c}=M.current,Aa={id:ct,constraint:br,initialCoordinates:kt,offset:ir};$c==null||$c(Aa),y({type:"onDragPending",event:Aa})},onStart(ct){const br=A.current;if(br==null)return;const kt=E.get(br);if(!kt)return;const{onDragStart:ir}=M.current,Lc={activatorEvent:Ge,active:{id:br,data:kt.data,rect:P}};en.unstable_batchedUpdates(()=>{ir==null||ir(Lc),S(Ha.Initializing),g({type:tr.DragStart,initialCoordinates:ct,active:br}),y({type:"onDragStart",event:Lc}),F(Ra.current),T(Ge)})},onMove(ct){g({type:tr.DragMove,coordinates:ct})},onEnd:or(tr.DragEnd),onCancel:or(tr.DragCancel)});Ra.current=Et;function or(ct){return async function(){const{active:kt,collisions:ir,over:Lc,scrollAdjustedTranslate:$c}=he.current;let Aa=null;if(kt&&$c){const{cancelDrop:Fc}=M.current;Aa={activatorEvent:Ge,active:kt,collisions:ir,delta:$c,over:Lc},ct===tr.DragEnd&&typeof Fc=="function"&&await Promise.resolve(Fc(Aa))&&(ct=tr.DragCancel)}A.current=null,en.unstable_batchedUpdates(()=>{g({type:ct}),S(Ha.Uninitialized),Vo(null),F(null),T(null),Ra.current=null;const Fc=ct===tr.DragEnd?"onDragEnd":"onDragCancel";if(Aa){const fg=M.current[Fc];fg==null||fg(Aa),y({type:Fc,event:Aa})}})}}},[E]),Oc=h.useCallback((zt,Ct)=>(Tr,De)=>{const We=Tr.nativeEvent,Ge=E.get(De);if(A.current!==null||!Ge||We.dndKit||We.defaultPrevented)return;const Et={active:Ge};zt(Tr,Ct.options,Et)===!0&&(We.dndKit={capturedBy:Ct.sensor},A.current=De,En(Tr,Ct))},[E,En]),Wo=AJ(u,Oc);BJ(u),ws(()=>{ne&&j===Ha.Initializing&&S(Ha.Initialized)},[ne,j]),h.useEffect(()=>{const{onDragMove:zt}=M.current,{active:Ct,activatorEvent:Tr,collisions:De,over:We}=he.current;if(!Ct||!Tr)return;const Ge={active:Ct,activatorEvent:Tr,collisions:De,delta:{x:$e.x,y:$e.y},over:We};en.unstable_batchedUpdates(()=>{zt==null||zt(Ge),y({type:"onDragMove",event:Ge})})},[$e.x,$e.y]),h.useEffect(()=>{const{active:zt,activatorEvent:Ct,collisions:Tr,droppableContainers:De,scrollAdjustedTranslate:We}=he.current;if(!zt||A.current==null||!Ct||!We)return;const{onDragOver:Ge}=M.current,Et=De.get(_n),or=Et&&Et.rect.current?{id:Et.id,rect:Et.rect.current,data:Et.data,disabled:Et.disabled}:null,ct={active:zt,activatorEvent:Ct,collisions:Tr,delta:{x:We.x,y:We.y},over:or};en.unstable_batchedUpdates(()=>{Vo(or),Ge==null||Ge(ct),y({type:"onDragOver",event:ct})})},[_n]),ws(()=>{he.current={activatorEvent:B,active:R,activeNode:Q,collisionRect:Je,collisions:Ft,droppableRects:G,draggableNodes:E,draggingNode:Me,draggingNodeRect:Be,droppableContainers:C,over:Jt,scrollableAncestors:$,scrollAdjustedTranslate:$e},P.current={initial:Be,translated:Je}},[R,Q,Ft,Je,E,Me,Be,G,C,Jt,$,$e]),DJ({...te,delta:D,draggingRect:Je,pointerCoordinates:ie,scrollableAncestors:$,scrollableAncestorRects:K});const sf=h.useMemo(()=>({active:R,activeNode:Q,activeNodeRect:ne,activatorEvent:B,collisions:Ft,containerNodeRect:we,dragOverlay:de,draggableNodes:E,droppableContainers:C,droppableRects:G,over:Jt,measureDroppableContainers:z,scrollableAncestors:$,scrollableAncestorRects:K,measuringConfiguration:Y,measuringScheduled:Z,windowRect:Xt}),[R,Q,ne,B,Ft,we,de,E,C,G,Jt,z,$,K,Y,Z,Xt]),af=h.useMemo(()=>({activatorEvent:B,activators:Wo,active:R,activeNodeRect:ne,ariaDescribedById:{draggable:U},dispatch:g,draggableNodes:E,over:Jt,measureDroppableContainers:z}),[B,Wo,R,ne,g,U,E,Jt,z]);return X.createElement(mM.Provider,{value:b},X.createElement(Zu.Provider,{value:af},X.createElement(PM.Provider,{value:sf},X.createElement(rg.Provider,{value:Cn},d)),X.createElement(XJ,{disabled:(l==null?void 0:l.restoreFocus)===!1})),X.createElement(rJ,{...l,hiddenTextDescribedById:U}));function ug(){const zt=(I==null?void 0:I.autoScrollEnabled)===!1,Ct=typeof c=="object"?c.enabled===!1:c===!1,Tr=N&&!zt&&!Ct;return typeof c=="object"?{...c,enabled:Tr}:{enabled:Tr}}}),ZJ=h.createContext(null),yS="button",eQ="Draggable";function tQ(e){let{id:t,data:r,disabled:s=!1,attributes:a}=e;const o=Qu(eQ),{activators:i,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:f,over:m}=h.useContext(Zu),{role:p=yS,roleDescription:w="draggable",tabIndex:v=0}=a??{},x=(c==null?void 0:c.id)===t,g=h.useContext(x?rg:ZJ),[y,b]=pm(),[j,S]=pm(),N=UJ(i,t),_=mu(r);ws(()=>(f.set(t,{id:t,key:o,node:y,activatorNode:j,data:_}),()=>{const D=f.get(t);D&&D.key===o&&f.delete(t)}),[f,t]);const E=h.useMemo(()=>({role:p,tabIndex:v,"aria-disabled":s,"aria-pressed":x&&p===yS?!0:void 0,"aria-roledescription":w,"aria-describedby":u.draggable}),[s,p,v,x,w,u.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:E,isDragging:x,listeners:s?void 0:N,node:y,over:m,setNodeRef:b,setActivatorNodeRef:S,transform:g}}function MM(){return h.useContext(PM)}const rQ="Droppable",nQ={timeout:25};function sQ(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:a}=e;const o=Qu(rQ),{active:i,dispatch:l,over:c,measureDroppableContainers:d}=h.useContext(Zu),u=h.useRef({disabled:r}),f=h.useRef(!1),m=h.useRef(null),p=h.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:x}={...nQ,...a},g=mu(v??s),y=h.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),p.current=null},x)},[x]),b=tg({callback:y,disabled:w||!i}),j=h.useCallback((E,D)=>{b&&(D&&(b.unobserve(D),f.current=!1),E&&b.observe(E))},[b]),[S,N]=pm(j),_=mu(t);return h.useEffect(()=>{!b||!S.current||(b.disconnect(),f.current=!1,b.observe(S.current))},[S,b]),h.useEffect(()=>(l({type:tr.RegisterDroppable,element:{id:s,key:o,disabled:r,node:S,rect:m,data:_}}),()=>l({type:tr.UnregisterDroppable,key:o,id:s})),[s]),h.useEffect(()=>{r!==u.current.disabled&&(l({type:tr.SetDroppableDisabled,id:s,key:o,disabled:r}),u.current.disabled=r)},[s,o,r,l]),{active:i,rect:m,isOver:(c==null?void 0:c.id)===s,node:S,over:c,setNodeRef:N}}function aQ(e){let{animation:t,children:r}=e;const[s,a]=h.useState(null),[o,i]=h.useState(null),l=gm(r);return!r&&!s&&l&&a(l),ws(()=>{if(!o)return;const c=s==null?void 0:s.key,d=s==null?void 0:s.props.id;if(c==null||d==null){a(null);return}Promise.resolve(t(d,o)).then(()=>{a(null)})},[t,s,o]),X.createElement(X.Fragment,null,r,s?h.cloneElement(s,{ref:i}):null)}const oQ={x:0,y:0,scaleX:1,scaleY:1};function iQ(e){let{children:t}=e;return X.createElement(Zu.Provider,{value:TM},X.createElement(rg.Provider,{value:oQ},t))}const lQ={position:"fixed",touchAction:"none"},cQ=e=>Zp(e)?"transform 250ms ease":void 0,dQ=h.forwardRef((e,t)=>{let{as:r,activatorEvent:s,adjustScale:a,children:o,className:i,rect:l,style:c,transform:d,transition:u=cQ}=e;if(!l)return null;const f=a?d:{...d,scaleX:1,scaleY:1},m={...lQ,width:l.width,height:l.height,top:l.top,left:l.left,transform:_a.Transform.toString(f),transformOrigin:a&&s?nJ(s,l):void 0,transition:typeof u=="function"?u(s):u,...c};return X.createElement(r,{className:i,style:m,ref:t},o)}),uQ=e=>t=>{let{active:r,dragOverlay:s}=t;const a={},{styles:o,className:i}=e;if(o!=null&&o.active)for(const[l,c]of Object.entries(o.active))c!==void 0&&(a[l]=r.node.style.getPropertyValue(l),r.node.style.setProperty(l,c));if(o!=null&&o.dragOverlay)for(const[l,c]of Object.entries(o.dragOverlay))c!==void 0&&s.node.style.setProperty(l,c);return i!=null&&i.active&&r.node.classList.add(i.active),i!=null&&i.dragOverlay&&s.node.classList.add(i.dragOverlay),function(){for(const[c,d]of Object.entries(a))r.node.style.setProperty(c,d);i!=null&&i.active&&r.node.classList.remove(i.active)}},fQ=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:_a.Transform.toString(t)},{transform:_a.Transform.toString(r)}]},hQ={duration:250,easing:"ease",keyframes:fQ,sideEffects:uQ({styles:{active:{opacity:"0"}}})};function mQ(e){let{config:t,draggableNodes:r,droppableContainers:s,measuringConfiguration:a}=e;return Qp((o,i)=>{if(t===null)return;const l=r.get(o);if(!l)return;const c=l.node.current;if(!c)return;const d=DM(i);if(!d)return;const{transform:u}=Gr(i).getComputedStyle(i),f=vM(u);if(!f)return;const m=typeof t=="function"?t:pQ(t);return _M(c,a.draggable.measure),m({active:{id:o,data:l.data,node:c,rect:a.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:i,rect:a.dragOverlay.measure(d)},droppableContainers:s,measuringConfiguration:a,transform:f})})}function pQ(e){const{duration:t,easing:r,sideEffects:s,keyframes:a}={...hQ,...e};return o=>{let{active:i,dragOverlay:l,transform:c,...d}=o;if(!t)return;const u={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},f={scaleX:c.scaleX!==1?i.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?i.rect.height*c.scaleY/l.rect.height:1},m={x:c.x-u.x,y:c.y-u.y,...f},p=a({...d,active:i,dragOverlay:l,transform:{initial:c,final:m}}),[w]=p,v=p[p.length-1];if(JSON.stringify(w)===JSON.stringify(v))return;const x=s==null?void 0:s({active:i,dragOverlay:l,...d}),g=l.node.animate(p,{duration:t,easing:r,fill:"forwards"});return new Promise(y=>{g.onfinish=()=>{x==null||x(),y()}})}}let wS=0;function gQ(e){return h.useMemo(()=>{if(e!=null)return wS++,wS},[e])}const IM=X.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:s,style:a,transition:o,modifiers:i,wrapperElement:l="div",className:c,zIndex:d=999}=e;const{activatorEvent:u,active:f,activeNodeRect:m,containerNodeRect:p,draggableNodes:w,droppableContainers:v,dragOverlay:x,over:g,measuringConfiguration:y,scrollableAncestors:b,scrollableAncestorRects:j,windowRect:S}=MM(),N=h.useContext(rg),_=gQ(f==null?void 0:f.id),E=RM(i,{activatorEvent:u,active:f,activeNodeRect:m,containerNodeRect:p,draggingNodeRect:x.rect,over:g,overlayNodeRect:x.rect,scrollableAncestors:b,scrollableAncestorRects:j,transform:N,windowRect:S}),D=_b(m),C=mQ({config:s,draggableNodes:w,droppableContainers:v,measuringConfiguration:y}),k=D?x.setRef:void 0;return X.createElement(iQ,null,X.createElement(aQ,{animation:C},f&&_?X.createElement(dQ,{key:_,id:f.id,ref:k,as:l,activatorEvent:u,adjustScale:t,className:c,transition:o,rect:D,style:{zIndex:d,...a},transform:E},r):null))});function OM(e,t,r){const s=e.slice();return s.splice(r<0?s.length+r:r,0,s.splice(t,1)[0]),s}function xQ(e,t){return e.reduce((r,s,a)=>{const o=t.get(s);return o&&(r[a]=o),r},Array(e.length))}function Bf(e){return e!==null&&e>=0}function vQ(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function yQ(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const LM=e=>{let{rects:t,activeIndex:r,overIndex:s,index:a}=e;const o=OM(t,s,r),i=t[a],l=o[a];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},Uf={scaleX:1,scaleY:1},$M=e=>{var t;let{activeIndex:r,activeNodeRect:s,index:a,rects:o,overIndex:i}=e;const l=(t=o[r])!=null?t:s;if(!l)return null;if(a===r){const d=o[i];return d?{x:0,y:r<i?d.top+d.height-(l.top+l.height):d.top-l.top,...Uf}:null}const c=wQ(o,a,r);return a>r&&a<=i?{x:0,y:-l.height-c,...Uf}:a<r&&a>=i?{x:0,y:l.height+c,...Uf}:{x:0,y:0,...Uf}};function wQ(e,t,r){const s=e[t],a=e[t-1],o=e[t+1];return s?r<t?a?s.top-(a.top+a.height):o?o.top-(s.top+s.height):0:o?o.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const FM="Sortable",zM=X.createContext({activeIndex:-1,containerId:FM,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:LM,disabled:{draggable:!1,droppable:!1}});function BM(e){let{children:t,id:r,items:s,strategy:a=LM,disabled:o=!1}=e;const{active:i,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=MM(),f=Qu(FM,r),m=l.rect!==null,p=h.useMemo(()=>s.map(N=>typeof N=="object"&&"id"in N?N.id:N),[s]),w=i!=null,v=i?p.indexOf(i.id):-1,x=d?p.indexOf(d.id):-1,g=h.useRef(p),y=!vQ(p,g.current),b=x!==-1&&v===-1||y,j=yQ(o);ws(()=>{y&&w&&u(p)},[y,p,w,u]),h.useEffect(()=>{g.current=p},[p]);const S=h.useMemo(()=>({activeIndex:v,containerId:f,disabled:j,disableTransforms:b,items:p,overIndex:x,useDragOverlay:m,sortedRects:xQ(p,c),strategy:a}),[v,f,j.draggable,j.droppable,b,p,x,c,m,a]);return X.createElement(zM.Provider,{value:S},t)}const bQ=e=>{let{id:t,items:r,activeIndex:s,overIndex:a}=e;return OM(r,s,a).indexOf(t)},jQ=e=>{let{containerId:t,isSorting:r,wasDragging:s,index:a,items:o,newIndex:i,previousItems:l,previousContainerId:c,transition:d}=e;return!d||!s||l!==o&&a===i?!1:r?!0:i!==a&&t===c},NQ={duration:200,easing:"ease"},UM="transform",SQ=_a.Transition.toString({property:UM,duration:0,easing:"linear"}),_Q={roleDescription:"sortable"};function CQ(e){let{disabled:t,index:r,node:s,rect:a}=e;const[o,i]=h.useState(null),l=h.useRef(r);return ws(()=>{if(!t&&r!==l.current&&s.current){const c=a.current;if(c){const d=Rc(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&i(u)}}r!==l.current&&(l.current=r)},[t,r,s,a]),h.useEffect(()=>{o&&i(null)},[o]),o}function VM(e){let{animateLayoutChanges:t=jQ,attributes:r,disabled:s,data:a,getNewIndex:o=bQ,id:i,strategy:l,resizeObserverConfig:c,transition:d=NQ}=e;const{items:u,containerId:f,activeIndex:m,disabled:p,disableTransforms:w,sortedRects:v,overIndex:x,useDragOverlay:g,strategy:y}=h.useContext(zM),b=EQ(s,p),j=u.indexOf(i),S=h.useMemo(()=>({sortable:{containerId:f,index:j,items:u},...a}),[f,a,j,u]),N=h.useMemo(()=>u.slice(u.indexOf(i)),[u,i]),{rect:_,node:E,isOver:D,setNodeRef:C}=sQ({id:i,data:S,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:k,activatorEvent:P,activeNodeRect:R,attributes:A,setNodeRef:I,listeners:F,isDragging:B,over:T,setActivatorNodeRef:M,transform:U}=tQ({id:i,data:S,attributes:{..._Q,...r},disabled:b.draggable}),q=VX(C,I),Y=!!k,G=Y&&!w&&Bf(m)&&Bf(x),z=!g&&B,Z=z&&G?U:null,H=G?Z??(l??y)({rects:v,activeNodeRect:R,activeIndex:m,overIndex:x,index:j}):null,te=Bf(m)&&Bf(x)?o({id:i,items:u,activeIndex:m,overIndex:x}):j,se=k==null?void 0:k.id,ne=h.useRef({activeId:se,items:u,newIndex:te,containerId:f}),we=u!==ne.current.items,he=t({active:k,containerId:f,isDragging:B,isSorting:Y,id:i,index:j,items:u,newIndex:ne.current.newIndex,previousItems:ne.current.items,previousContainerId:ne.current.containerId,transition:d,wasDragging:ne.current.activeId!=null}),be=CQ({disabled:!he,index:j,node:E,rect:_});return h.useEffect(()=>{Y&&ne.current.newIndex!==te&&(ne.current.newIndex=te),f!==ne.current.containerId&&(ne.current.containerId=f),u!==ne.current.items&&(ne.current.items=u)},[Y,te,f,u]),h.useEffect(()=>{if(se===ne.current.activeId)return;if(se!=null&&ne.current.activeId==null){ne.current.activeId=se;return}const Me=setTimeout(()=>{ne.current.activeId=se},50);return()=>clearTimeout(Me)},[se]),{active:k,activeIndex:m,attributes:A,data:S,rect:_,index:j,newIndex:te,items:u,isOver:D,isSorting:Y,isDragging:B,listeners:F,node:E,overIndex:x,over:T,setNodeRef:q,setActivatorNodeRef:M,setDroppableNodeRef:C,setDraggableNodeRef:I,transform:be??H,transition:de()};function de(){if(be||we&&ne.current.newIndex===j)return SQ;if(!(z&&!Zp(P)||!d)&&(Y||he))return _a.Transition.toString({...d,property:UM})}}function EQ(e,t){var r,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}nt.Down,nt.Right,nt.Up,nt.Left;const Dx=[{id:"todo",title:" faire",status:"todo"},{id:"doing",title:"En cours",status:"doing"},{id:"blocked",title:"Bloqu",status:"blocked"},{id:"done",title:"Termin",status:"done"}],kQ={low:"bg-muted text-muted-foreground",medium:"bg-warning/20 text-warning border-warning/30",high:"bg-tech-orange/20 text-tech-orange border-tech-orange/30",urgent:"bg-destructive/20 text-destructive border-destructive/30"};function WM({task:e}){const{attributes:t,listeners:r,setNodeRef:s,transform:a,transition:o,isDragging:i}=VM({id:e.id}),l={transform:_a.Transform.toString(a),transition:o};return n.jsx("div",{ref:s,style:l,...t,...r,className:`cursor-grab active:cursor-grabbing ${i?"opacity-50":""}`,children:n.jsxs(V,{className:"mb-3 hover:shadow-md transition-smooth glass hover-glow cursor-grab active:cursor-grabbing border-primary/30 bg-card/40 backdrop-blur-sm",children:[n.jsxs(le,{className:"pb-2",children:[n.jsx(ce,{className:"text-sm font-medium text-foreground leading-tight",children:e.title}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(re,{className:`text-xs border font-medium ${kQ[e.priority]}`,children:e.priority}),n.jsxs(ka,{className:"h-6 w-6 ring-2 ring-primary/40",children:[n.jsx(zo,{src:"",alt:e.assignee||e.assigned_name||"NA"}),n.jsx(Da,{className:"text-xs bg-primary/40 text-primary-foreground font-semibold",children:(e.assignee||e.assigned_name||"NA").slice(0,2).toUpperCase()})]})]})]}),n.jsx(W,{className:"pt-0",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs text-foreground/70",children:[n.jsxs("span",{children:["Dbut: ",new Date(e.start_date).toLocaleDateString("fr-FR")]}),n.jsxs("span",{children:["Fin: ",new Date(e.due_date).toLocaleDateString("fr-FR")]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-foreground/80",children:"Progrs"}),n.jsxs("span",{className:"text-primary font-medium",children:[e.progress,"%"]})]}),n.jsx(Ot,{value:e.progress,className:"h-2"})]}),e.effort_estimate_h>0&&n.jsxs("div",{className:"text-xs text-foreground/70 flex items-center gap-1",children:[n.jsx("span",{className:"w-1 h-1 bg-accent rounded-full"}),"Estim: ",e.effort_estimate_h,"h"]})]})})]})})}function DQ({column:e,tasks:t}){return n.jsxs("div",{className:"h-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 sticky top-0 bg-background/80 backdrop-blur-sm z-10 py-2",children:[n.jsx("h2",{className:"text-lg font-semibold bg-gradient-to-r from-tech-purple to-tech-cyan bg-clip-text text-transparent",children:e.title}),n.jsx(re,{variant:"secondary",className:"bg-primary/40 text-primary-foreground border-primary/50 font-semibold",children:t.length})]}),n.jsx($r,{className:"h-[calc(100vh-200px)]",children:n.jsx("div",{className:"pb-4",children:n.jsx(BM,{items:t.map(r=>r.id),strategy:$M,children:t.map(r=>n.jsx(WM,{task:r},r.id))})})})]})}function TQ(){const{tasks:e,updateTaskStatus:t,loading:r}=Ns(),[s,a]=h.useState(null),o=gM(pM(eg,{activationConstraint:{distance:8}})),i=d=>{const u=e.find(f=>f.id===d.active.id);a(u||null)},l=d=>{var v;const{active:u,over:f}=d;if(!f||!u){a(null);return}const m=u.id,p=f.id,w=Dx.find(x=>x.id===p);if(w)t(m,w.status);else{const x=e.find(g=>g.id===p);x&&x.status!==((v=e.find(g=>g.id===m))==null?void 0:v.status)&&t(m,x.status)}a(null)};if(r)return n.jsxs("div",{className:"flex items-center justify-center h-64 glass modern-card",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary glow-primary"}),n.jsx("span",{className:"ml-3 text-foreground font-medium",children:"Chargement..."})]});const c=Dx.map(d=>({...d,tasks:e.filter(u=>u.status===d.status)}));return n.jsxs(AM,{sensors:o,onDragStart:i,onDragEnd:l,children:[n.jsx(V,{className:"w-full modern-card glow-accent transition-smooth",children:n.jsx(W,{className:"p-0",children:n.jsxs(pr,{defaultValue:"todo",className:"w-full",children:[n.jsx(ar,{className:"grid w-full grid-cols-4 rounded-t-xl bg-gradient-to-r from-primary/10 via-accent/10 to-tech-purple/10 border-b",children:Dx.map(d=>{var u;return n.jsxs(Ce,{value:d.id,className:"text-xs transition-smooth data-[state=active]:bg-primary/20 data-[state=active]:text-primary font-semibold",children:[d.title,n.jsx(re,{variant:"secondary",className:"ml-1 text-xs bg-primary/30 text-primary-foreground",children:((u=c.find(f=>f.id===d.id))==null?void 0:u.tasks.length)||0})]},d.id)})}),c.map(d=>n.jsx(Ee,{value:d.id,className:"p-4 bg-card/30 backdrop-blur-sm",children:n.jsx(DQ,{column:d,tasks:d.tasks})},d.id))]})})}),n.jsx(IM,{children:s?n.jsx(WM,{task:s}):null})]})}const bS=[{id:"todo",title:" faire",status:"todo"},{id:"doing",title:"En cours",status:"doing"},{id:"blocked",title:"Bloqu",status:"blocked"},{id:"done",title:"Termin",status:"done"}],PQ=[{id:"planning",title:"Planification",status:"planning"},{id:"active",title:"En cours",status:"active"},{id:"on_hold",title:"En pause",status:"on_hold"},{id:"completed",title:"Termin",status:"completed"}],jS={low:"bg-muted text-muted-foreground",medium:"bg-warning/20 text-warning border-warning/30",high:"bg-tech-orange/20 text-tech-orange border-tech-orange/30",urgent:"bg-destructive/20 text-destructive border-destructive/30"};function HM({task:e}){const{attributes:t,listeners:r,setNodeRef:s,transform:a,transition:o,isDragging:i}=VM({id:e.id}),l={transform:_a.Transform.toString(a),transition:o};return n.jsx("div",{ref:s,style:l,...t,...r,className:`cursor-grab active:cursor-grabbing ${i?"opacity-50":""}`,children:n.jsxs(V,{className:"mb-3 hover:shadow-md transition-smooth glass hover-glow cursor-grab active:cursor-grabbing border-primary/30 bg-card/40 backdrop-blur-sm",children:[n.jsxs(le,{className:"pb-2",children:[n.jsx(ce,{className:"text-sm font-medium text-foreground",children:e.title||e.name}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(re,{className:`text-xs border font-medium ${jS[e.priority]||jS.medium}`,children:e.priority}),n.jsxs(ka,{className:"h-6 w-6 ring-2 ring-primary/40",children:[n.jsx(zo,{src:"",alt:e.assignee||e.manager_name}),n.jsx(Da,{className:"text-xs bg-primary/40 text-primary-foreground font-semibold",children:(e.assignee||e.manager_name||"NA").slice(0,2).toUpperCase()})]})]})]}),n.jsx(W,{className:"pt-0",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ot,{value:e.progress||0,className:"h-2 bg-muted/50"}),n.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:[n.jsxs("span",{children:[e.progress||0,"% termin"]}),n.jsx("span",{className:"bg-accent/30 px-2 py-1 rounded text-accent-foreground font-medium",children:e.status})]}),e.task_count!==void 0&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",e.task_count," tche",e.task_count>1?"s":""]})]})})]})})}function RQ({column:e,tasks:t}){return n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs(V,{className:"h-full glass glow-accent transition-smooth border-primary/30",children:[n.jsx(le,{className:"pb-3 bg-gradient-to-r from-primary/15 to-accent/15 backdrop-blur-sm border-b border-primary/30",children:n.jsxs(ce,{className:"text-lg flex items-center justify-between text-foreground",children:[n.jsx("span",{className:"bg-gradient-to-r from-tech-purple to-tech-cyan bg-clip-text text-transparent font-bold",children:e.title}),n.jsx(re,{variant:"secondary",className:"ml-2 bg-primary/40 text-primary-foreground border-primary/50 font-semibold shadow-lg",children:t.length})]})}),n.jsx(W,{className:"max-h-[calc(100vh-300px)] overflow-y-auto bg-card/30 backdrop-blur-sm",children:n.jsx(BM,{items:t.map(r=>r.id),strategy:$M,children:t.map(r=>n.jsx(HM,{task:r},r.id))})})]})})}function AQ(){const{tasks:e,updateTaskStatus:t,loading:r}=Ns(),{projects:s,loading:a}=Vu(),[o,i]=h.useState(null),[l,c]=h.useState("tasks"),d=Sn(),u=gM(pM(eg,{activationConstraint:{distance:8}})),f=x=>{const g=e.find(y=>y.id===x.active.id);i(g||null)},m=x=>{var N;const{active:g,over:y}=x;if(!y||!g){i(null);return}if(l==="projects"){i(null);return}const b=g.id,j=y.id,S=bS.find(_=>_.id===j);if(S)t(b,S.status);else{const _=e.find(E=>E.id===j);_&&_.status!==((N=e.find(E=>E.id===b))==null?void 0:N.status)&&t(b,_.status)}i(null)};if(r||l==="projects"&&a)return n.jsxs("div",{className:"flex items-center justify-center h-64 glass modern-card",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary glow-primary"}),n.jsx("span",{className:"ml-3 text-foreground font-medium",children:"Chargement..."})]});if(d)return n.jsx(TQ,{});const p=l==="tasks"?bS:PQ,w=l==="tasks"?e:s,v=p.map(x=>({...x,tasks:w.filter(g=>g.status===x.status)}));return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(Lp,{type:"single",value:l,onValueChange:x=>x&&c(x),className:"justify-start",children:[n.jsx(Ti,{value:"tasks",className:"data-[state=on]:bg-primary data-[state=on]:text-primary-foreground",children:" Tches"}),n.jsx(Ti,{value:"projects",className:"data-[state=on]:bg-primary data-[state=on]:text-primary-foreground",children:" Projets"})]}),l==="projects"&&n.jsx("p",{className:"text-sm text-muted-foreground",children:"Vue Kanban des projets par statut"})]}),n.jsxs(AM,{sensors:u,onDragStart:f,onDragEnd:m,children:[n.jsx("div",{className:"h-full",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 h-full",children:v.map(x=>n.jsx("div",{children:n.jsx(RQ,{column:x,tasks:x.tasks})},x.id))})}),n.jsx(IM,{children:o?n.jsx(HM,{task:o}):null})]})]})}const MQ=()=>{const[e,t]=h.useState("table"),r=Sn(),s=Kn();return n.jsxs(bP,{children:[n.jsxs("div",{className:`flex justify-between items-start mb-6 ${r?"mb-4":"mb-8"}`,children:[n.jsxs("div",{className:"flex-1 text-center",children:[n.jsx("h1",{className:`font-bold bg-gradient-to-r from-primary via-accent to-tech-purple bg-clip-text text-transparent mb-4 drop-shadow-sm ${r?"text-2xl":"text-4xl"}`,children:"Gestion de Projets SaaS"}),n.jsx("p",{className:`text-muted-foreground font-medium ${r?"text-sm":"text-lg"}`,children:"Diagramme de Gantt et tableau dynamique d'excution des tches"}),n.jsx("div",{className:`bg-gradient-to-r from-primary via-accent to-tech-purple mx-auto mt-4 rounded-full shadow-lg ${r?"w-16 h-1":"w-24 h-2"}`}),n.jsx("div",{className:"mt-6",children:n.jsxs(L,{onClick:()=>s("/hr"),className:"hover-glow bg-gradient-to-r from-primary to-accent",size:r?"sm":"default",children:[n.jsx(At,{className:`${r?"h-3 w-3":"h-4 w-4"} mr-2`}),r?"RH":"Module RH"]})})]}),n.jsx("div",{className:r?"ml-2":"ml-4",children:n.jsx(Nw,{})})]}),n.jsxs(pr,{value:e,onValueChange:t,className:"w-full",children:[n.jsxs(ar,{className:`grid w-full modern-card glow-primary bg-gradient-to-r from-primary/10 via-accent/10 to-tech-purple/10 border-2 ${r?"grid-cols-1 gap-1 p-1 mb-4":"grid-cols-3 p-2 mb-8"}`,children:[n.jsx(Ce,{value:"gantt",className:`transition-smooth hover-glow data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-accent data-[state=active]:text-white font-semibold ${r?"text-sm py-2":""}`,children:r?"Gantt":"Diagramme de Gantt"}),n.jsx(Ce,{value:"kanban",className:`transition-smooth hover-glow data-[state=active]:bg-gradient-to-r data-[state=active]:from-accent data-[state=active]:to-tech-purple data-[state=active]:text-white font-semibold ${r?"text-sm py-2":""}`,children:"Kanban"}),n.jsx(Ce,{value:"table",className:`transition-smooth hover-glow data-[state=active]:bg-gradient-to-r data-[state=active]:from-tech-purple data-[state=active]:to-primary data-[state=active]:text-white font-semibold ${r?"text-sm py-2":""}`,children:r?"Tableau":"Tableau Dynamique"})]}),n.jsx(Ee,{value:"table",className:r?"mt-2":"mt-6",children:n.jsx(UX,{})}),n.jsx(Ee,{value:"kanban",className:r?"mt-2":"mt-6",children:n.jsx("div",{className:"modern-card rounded-xl transition-smooth hover-glow",children:n.jsx(AQ,{})})}),n.jsx(Ee,{value:"gantt",className:r?"mt-2":"mt-6",children:n.jsx("div",{className:"modern-card rounded-xl transition-smooth hover-glow",children:n.jsx(mq,{})})})]})]})},IQ=(e={})=>{const{totalTimeoutMinutes:t=15,warningMinutes:r=5,enabled:s=!0}=e,[a,o]=h.useState(t*60),[i,l]=h.useState(!1),[c,d]=h.useState(!1),u=h.useRef(null),f=h.useRef(Date.now()),{toast:m}=rt(),p=a<=r*60&&a>0,w=h.useCallback(j=>{const S=Math.floor(j/60),N=j%60;return`${S}:${N.toString().padStart(2,"0")}`},[]),v=h.useCallback(()=>{f.current=Date.now(),o(t*60),l(!1),u.current&&clearInterval(u.current),s&&(u.current=setInterval(()=>{const j=Date.now(),S=Math.floor((j-f.current)/1e3),N=t*60-S;N<=0?x():(o(N),l(N<=r*60))},1e3))},[s,t,r]),x=h.useCallback(async()=>{u.current&&clearInterval(u.current),d(!1),l(!1),m({title:" Session expire",description:"Vous avez t dconnect pour inactivit",variant:"destructive",duration:5e3});try{await O.auth.signOut()}catch(j){console.error("Erreur lors de la dconnexion:",j)}},[m]),g=h.useCallback(()=>{s&&(d(!0),v())},[s,v,t]),y=h.useCallback(()=>{d(!1),l(!1),u.current&&(clearInterval(u.current),u.current=null)},[]),b=h.useCallback(()=>{!s||!c||(f.current=Date.now(),o(t*60),l(!1))},[s,c,t]);return h.useEffect(()=>{if(!s||!c)return;const j=["mousedown","mousemove","keypress","scroll","touchstart","click"];return j.forEach(S=>{document.addEventListener(S,b,{passive:!0})}),()=>{j.forEach(S=>{document.removeEventListener(S,b)})}},[s,c,b]),h.useEffect(()=>()=>{u.current&&clearInterval(u.current)},[]),h.useEffect(()=>{s?g():y()},[s,g,y]),{timeLeft:a,timeLeftFormatted:w(a),showWarning:p,isActive:c,startTimer:g,stopTimer:y,resetTimer:v,handleUserActivity:b}},OQ=15*60*1e3,Vf="lastActivity",sl="manualLogout",LQ=()=>{const[e,t]=h.useState(null),[r,s]=h.useState(null),[a,o]=h.useState(!0),i=h.useCallback(()=>{localStorage.setItem(Vf,Date.now().toString())},[]),l=h.useCallback(()=>{const f=localStorage.getItem(Vf);return localStorage.getItem(sl)==="true"||!f?!0:Date.now()-parseInt(f)>OQ},[]),c=h.useCallback(async()=>{try{localStorage.setItem(sl,"true"),localStorage.removeItem(Vf),await O.auth.signOut(),t(null),s(null)}catch(f){console.error("Erreur lors de la dconnexion:",f)}},[]),d=h.useCallback(async()=>{try{const{data:{session:f},error:m}=await O.auth.getSession();if(m&&(console.error(" Erreur lors de la rcupration de la session:",m.message),m.message.includes("refresh")||m.message.includes("Invalid"))){console.log(" Nettoyage du localStorage suite  un refresh token invalide"),await O.auth.signOut(),localStorage.clear(),t(null),s(null),o(!1);return}f&&!l()?(t(f.user),s(f),i(),localStorage.removeItem(sl)):f&&l()?(console.log(" Session expire - Dconnexion automatique"),await O.auth.signOut(),localStorage.removeItem(Vf),localStorage.removeItem(sl)):f||(t(null),s(null))}catch(f){console.error("Erreur lors de l'initialisation de la session:",f),await O.auth.signOut(),localStorage.clear(),t(null),s(null)}finally{o(!1)}},[l,i]),u=h.useCallback((f,m)=>{f&&m?(t(f),s(m),i(),localStorage.removeItem(sl)):(t(null),s(null)),o(!1)},[i]);return h.useEffect(()=>{const f=["mousedown","mousemove","keypress","scroll","touchstart","click"],m=()=>{e&&i()};return f.forEach(p=>{document.addEventListener(p,m,!0)}),()=>{f.forEach(p=>{document.removeEventListener(p,m,!0)})}},[e,i]),h.useEffect(()=>{if(!e)return;const f=setInterval(()=>{l()&&c()},6e4);return()=>clearInterval(f)},[e,l,c]),h.useEffect(()=>{const{data:{subscription:f}}=O.auth.onAuthStateChange(async(m,p)=>{if(console.log(" Session Manager - Auth state changed:",m),m==="TOKEN_REFRESHED"&&!p){console.error(" chec du rafrachissement du token"),await O.auth.signOut(),localStorage.clear(),t(null),s(null),o(!1);return}if(m==="SIGNED_OUT"){console.log(" Dconnexion dtecte"),t(null),s(null),o(!1);return}p!=null&&p.user?(t(p.user),s(p),i(),localStorage.removeItem(sl)):(t(null),s(null)),o(!1)});return d(),()=>f.unsubscribe()},[d,i]),{user:e,session:r,loading:a,signOut:c,handleAuthStateChange:u,updateActivity:i}},Cb=()=>{const e=h.useRef(!1),t=h.useRef([]),r=h.useRef(null);h.useRef(null);const{userRoles:s,userPermissions:a,isLoading:o,hasRole:i,hasPermission:l,isSuperAdmin:c,isTenantAdmin:d,isHRManager:u,isProjectManager:f}=Fo(),m=h.useMemo(()=>({canAccessDashboard:!1,canAccessHR:!1,canAccessProjects:!1,canAccessTasks:!1,canAccessSuperAdmin:!1,canManageEmployees:!1,canViewReports:!1,canManageAbsences:!1,canViewPayroll:!1,canCreateProjects:!1,canManageProjects:!1,canViewProjectReports:!1,canManageProjectBudgets:!1,canCreateTasks:!1,canAssignTasks:!1,canManageAllTasks:!1,canViewTaskReports:!1,canManageUsers:!1,canManageRoles:!1,canManageTenants:!1,canViewSystemLogs:!1,canReceiveAlerts:!1,canManageAlerts:!1,accessLevel:"none"}),[]),[p,w]=h.useState(m);h.useEffect(()=>{var D;if(o)return;const N=s.map(C=>`${C.roles.name}-${C.tenant_id}`).sort().join("|"),_=((D=t.current)==null?void 0:D.map(C=>`${C.roles.name}-${C.tenant_id}`).sort().join("|"))||"";if(e.current&&N===_&&r.current||N===_&&e.current)return;e.current=!0,t.current=[...s];const E={canAccessDashboard:s.length>0,canAccessHR:u()||d()||c(),canAccessProjects:f()||d()||c(),canAccessTasks:s.length>0,canAccessSuperAdmin:c(),canManageEmployees:l(Dn.MANAGE_USERS)||u()||d()||c(),canViewReports:l(Dn.VIEW_REPORTS)||u()||d()||c(),canManageAbsences:u()||d()||c(),canViewPayroll:u()||d()||c(),canCreateProjects:l(Dn.MANAGE_PROJECTS)||f()||d()||c(),canManageProjects:l(Dn.MANAGE_PROJECTS)||f()||d()||c(),canViewProjectReports:l(Dn.VIEW_REPORTS)||f()||d()||c(),canManageProjectBudgets:d()||c(),canCreateTasks:l(Dn.MANAGE_TASKS)||s.length>0,canAssignTasks:l(Dn.MANAGE_TASKS)||f()||d()||c(),canManageAllTasks:l(Dn.MANAGE_TASKS)||f()||d()||c(),canViewTaskReports:l(Dn.VIEW_REPORTS)||f()||d()||c(),canManageUsers:l(Dn.MANAGE_USERS)||d()||c(),canManageRoles:c(),canManageTenants:l(Dn.CREATE_TENANT)||c(),canViewSystemLogs:c(),canReceiveAlerts:s.length>0,canManageAlerts:f()||d()||c(),accessLevel:c()?"super_admin":d()?"admin":u()||f()?"advanced":s.length>0?"basic":"none"};r.current=E,w(E)},[s,a,o,i,l,c,d,u,f]);const v=N=>p[N],x=()=>p.accessLevel,g=()=>s.map(N=>N.roles.name),y=()=>a.map(N=>N.permission_name),b=()=>{const N=[];return p.canAccessHR||N.push("Accs RH restreint"),p.canManageUsers||N.push("Gestion des utilisateurs non autorise"),p.canManageProjects||N.push("Gestion des projets limite"),p.canManageAllTasks||N.push("Gestion des tches limite"),N},j=()=>{const N=[];return p.canAccessDashboard&&N.push("Tableau de bord"),p.canAccessHR&&N.push("Ressources Humaines"),p.canAccessProjects&&N.push("Gestion de Projets"),p.canAccessTasks&&N.push("Gestion des Tches"),p.canAccessSuperAdmin&&N.push("Administration Systme"),N},S=h.useMemo(()=>({isSuperAdmin:c(),isTenantAdmin:d(),isHRManager:u(),isProjectManager:f()}),[c,d,u,f]);return{accessRights:p,isLoading:o,userRoles:s,userPermissions:a,canAccess:v,hasRole:i,hasPermission:l,...S,getAccessLevel:x,getUserRoleNames:g,getUserPermissionNames:y,getAccessRestrictions:b,getAvailableFeatures:j}};class $Q{constructor(){Xs(this,"cache",new Map);Xs(this,"metrics",{hits:0,misses:0,size:0,totalEntries:0,hitRate:0,averageAccessTime:0});Xs(this,"TTL_CONFIG",{user_roles:5*60*1e3,tenant_data:10*60*1e3,hr_data:3*60*1e3,projects:5*60*1e3,tasks:2*60*1e3,permissions:15*60*1e3,default:5*60*1e3});Xs(this,"MAX_CACHE_SIZE",100*1024*1024);Xs(this,"MAX_ENTRIES",1e3)}get(t){const r=performance.now(),s=this.cache.get(t);return s?Date.now()-s.timestamp>s.ttl?(this.cache.delete(t),this.metrics.misses++,this.updateMetrics(performance.now()-r),null):(s.accessCount++,s.lastAccess=Date.now(),this.metrics.hits++,this.updateMetrics(performance.now()-r),s.data):(this.metrics.misses++,this.updateMetrics(performance.now()-r),null)}set(t,r,s="default"){this.enforceMemoryLimits();const a=this.TTL_CONFIG[s]||this.TTL_CONFIG.default,o={data:r,timestamp:Date.now(),ttl:a,accessCount:0,lastAccess:Date.now(),compressed:this.shouldCompress(r)};this.cache.set(t,o),this.updateCacheSize()}invalidate(t){const r=this.cache.delete(t);return r&&this.updateCacheSize(),r}invalidatePattern(t){let r=0;const s=new RegExp(t.replace("*",".*"));for(const a of this.cache.keys())s.test(a)&&(this.cache.delete(a),r++);return r>0&&this.updateCacheSize(),r}clear(){this.cache.clear(),this.metrics={hits:0,misses:0,size:0,totalEntries:0,hitRate:0,averageAccessTime:0}}getMetrics(){return{...this.metrics}}cleanup(){let t=0;const r=Date.now();for(const[s,a]of this.cache.entries())r-a.timestamp>a.ttl&&(this.cache.delete(s),t++);return t>0&&(this.updateCacheSize(),console.log(` Cache cleanup: ${t} expired entries removed`)),t}getStats(){const t=Array.from(this.cache.entries()),r=Date.now();return{metrics:this.getMetrics(),entries:t.length,expired:t.filter(([s,a])=>r-a.timestamp>a.ttl).length,mostAccessed:t.sort((s,a)=>a[1].accessCount-s[1].accessCount).slice(0,5).map(([s,a])=>({key:s,accessCount:a.accessCount})),oldestEntry:t.reduce((s,[a,o])=>!s||o.timestamp<s.timestamp?{key:a,timestamp:o.timestamp}:s,null),memoryUsage:this.estimateMemoryUsage()}}preload(t){console.log(` Preloading ${t.length} cache entries`),t.forEach(({key:r,data:s,type:a})=>{this.set(r,s,a)})}shouldCompress(t){return JSON.stringify(t).length>10*1024}enforceMemoryLimits(){if(this.cleanup(),this.cache.size>=this.MAX_ENTRIES){const t=Array.from(this.cache.entries());t.sort((s,a)=>s[1].accessCount-a[1].accessCount);const r=t.slice(0,Math.floor(this.MAX_ENTRIES*.1));r.forEach(([s])=>this.cache.delete(s)),console.log(` Cache eviction: ${r.length} least used entries removed`)}}updateCacheSize(){this.metrics.totalEntries=this.cache.size,this.metrics.size=this.estimateMemoryUsage()}estimateMemoryUsage(){let t=0;for(const r of this.cache.values())t+=JSON.stringify(r.data).length;return t}updateMetrics(t){const r=this.metrics.hits+this.metrics.misses;this.metrics.hitRate=r>0?this.metrics.hits/r*100:0,this.metrics.averageAccessTime=(this.metrics.averageAccessTime+t)/2}}const Is=new $Q;setInterval(()=>{Is.cleanup()},5*60*1e3);const FQ=(...e)=>e.filter(Boolean).join(":"),al=({children:e,requiredAccess:t,requiredRole:r,requiredPermission:s,fallbackPath:a="/",showAccessDenied:o=!0})=>{const{accessRights:i,isLoading:l,hasRole:c,hasPermission:d,canAccess:u,getUserRoleNames:f,getAccessLevel:m,getAccessRestrictions:p}=Cb();if(l)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Vrification des permissions..."})]})});let w=!0,v="";return t&&!u(t)&&(w=!1,v=`Accs requis : ${t}`),r&&!c(r)&&(w=!1,v=`Rle requis : ${r}`),s&&!d(s)&&(w=!1,v=`Permission requise : ${s}`),w?n.jsx(n.Fragment,{children:e}):o?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:n.jsxs(V,{className:"w-full max-w-md",children:[n.jsxs(le,{className:"text-center",children:[n.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:n.jsx(hs,{className:"h-6 w-6 text-red-600"})}),n.jsx(ce,{className:"text-xl font-semibold text-red-600",children:"Accs Refus"}),n.jsx(sn,{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."})]}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(In,{className:"h-4 w-4 text-red-500"}),n.jsx("span",{className:"text-sm font-medium text-red-700",children:"Raison :"})]}),n.jsx("p",{className:"text-sm text-red-600 mt-1",children:v})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Vos rles actuels :"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:f().length>0?f().map(x=>n.jsx(re,{variant:"secondary",children:x},x)):n.jsx(re,{variant:"outline",children:"Aucun rle assign"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Niveau d'accs :"}),n.jsx(re,{variant:m()==="super_admin"?"default":m()==="admin"?"secondary":m()==="advanced"?"outline":"destructive",children:m()})]}),p().length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Restrictions actuelles :"}),n.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:p().map((x,g)=>n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-1 h-1 bg-muted-foreground rounded-full"}),x]},g))})]}),n.jsxs("div",{className:"pt-4 space-y-2",children:[n.jsxs(L,{onClick:()=>window.history.back(),variant:"outline",className:"w-full",children:[n.jsx(Zm,{className:"h-4 w-4 mr-2"}),"Retour"]}),n.jsx(L,{onClick:()=>window.location.href=a,className:"w-full",children:"Aller au tableau de bord"})]}),n.jsx("div",{className:"text-center pt-4 border-t",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:"Si vous pensez que c'est une erreur, contactez votre administrateur."})})]})]})}):n.jsx(kk,{to:a,replace:!0})},zQ=()=>{const{isLoading:e,isSuperAdmin:t,isTenantAdmin:r,isHRManager:s,isProjectManager:a,getUserRoleNames:o,getAccessLevel:i,getAvailableFeatures:l,getAccessRestrictions:c,accessRights:d}=Cb(),[u,f]=h.useState(!1);if(e)return n.jsx("div",{className:"animate-pulse",children:n.jsx("div",{className:"h-6 w-20 bg-muted rounded"})});const p=t?{icon:H0,label:"Super Admin",variant:"default",color:"text-yellow-600"}:r?{icon:hs,label:"Admin",variant:"secondary",color:"text-blue-600"}:s?{icon:At,label:"RH Manager",variant:"outline",color:"text-green-600"}:a?{icon:V0,label:"Chef de Projet",variant:"outline",color:"text-purple-600"}:{icon:nr,label:"Employ",variant:"outline",color:"text-gray-600"},w=p.icon;return n.jsxs(yo,{open:u,onOpenChange:f,children:[n.jsx(wo,{asChild:!0,children:n.jsxs(L,{variant:"ghost",size:"sm",className:"h-8 px-2",children:[n.jsx(w,{className:`h-4 w-4 mr-1 ${p.color}`}),n.jsx("span",{className:"text-sm font-medium",children:p.label}),n.jsx(W0,{className:"h-3 w-3 ml-1 opacity-50"})]})}),n.jsx(pa,{className:"w-80 p-0",align:"end",children:n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b",children:[n.jsx("div",{className:`p-2 rounded-full bg-muted ${p.color}`,children:n.jsx(w,{className:"h-4 w-4"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:p.label}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Niveau : ",i()]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Rles assigns :"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:o().map(v=>n.jsx(re,{variant:"secondary",className:"text-xs",children:v},v))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Accs autoris :"}),n.jsx("div",{className:"space-y-1",children:l().map(v=>n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(Yt,{className:"h-3 w-3 text-green-500"}),n.jsx("span",{children:v})]},v))})]}),c().length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Restrictions :"}),n.jsx("div",{className:"space-y-1",children:c().map((v,x)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(Qr,{className:"h-3 w-3 text-red-500"}),n.jsx("span",{children:v})]},x))})]}),n.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Permissions dtailles :"}),n.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[d.canManageUsers?n.jsx(Yt,{className:"h-3 w-3 text-green-500"}):n.jsx(Qr,{className:"h-3 w-3 text-red-500"}),n.jsx("span",{children:"Gestion utilisateurs"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[d.canManageProjects?n.jsx(Yt,{className:"h-3 w-3 text-green-500"}):n.jsx(Qr,{className:"h-3 w-3 text-red-500"}),n.jsx("span",{children:"Gestion projets"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[d.canViewReports?n.jsx(Yt,{className:"h-3 w-3 text-green-500"}):n.jsx(Qr,{className:"h-3 w-3 text-red-500"}),n.jsx("span",{children:"Rapports"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[d.canManageRoles?n.jsx(Yt,{className:"h-3 w-3 text-green-500"}):n.jsx(Qr,{className:"h-3 w-3 text-red-500"}),n.jsx("span",{children:"Gestion rles"})]})]})]})]})})]})},Zs={SLOW_RENDER_MS:16,MAX_RENDERS:10,STABILITY_THRESHOLD:5,CRITICAL_RENDERS:50,MEMORY_WARNING_MB:50},BQ=(e,t)=>{const{enableProfiling:r=!1,trackProps:s=!1,trackState:a=!1,alertThreshold:o=Zs.MAX_RENDERS}=t||{},i=h.useRef(0),l=h.useRef([]),c=h.useRef([]),d=h.useRef(0);h.useRef(null),h.useRef(null);const u=h.useRef(!1),f=h.useRef({renderCount:0,averageRenderTime:0,lastRenderTime:0,totalRenderTime:0,slowRenders:0,componentName:e,isStable:!1,warningLevel:"none"}),m=h.useCallback(()=>{r&&(d.current=performance.now())},[r]),p=h.useCallback((N,_)=>{if(!r||d.current===0)return;const E=performance.now(),D=E-d.current;i.current++,l.current.push(D),l.current.length>100&&l.current.shift();const C={timestamp:E,duration:D,...s&&{props:N},...a&&{state:_}};c.current.push(C),c.current.length>50&&c.current.shift(),w(D),v(),d.current=0},[r,s,a]),w=h.useCallback(N=>{const _=l.current,E=i.current,D=_.reduce((F,B)=>F+B,0),C=D/_.length,k=_.filter(F=>F>Zs.SLOW_RENDER_MS).length;let P="none";E>Zs.CRITICAL_RENDERS?P="critical":E>o?P="high":k>_.length*.3?P="medium":k>0&&(P="low");const R=Date.now(),I=c.current.filter(F=>R-F.timestamp<2e3).length<=Zs.STABILITY_THRESHOLD;f.current={renderCount:E,averageRenderTime:C,lastRenderTime:N,totalRenderTime:D,slowRenders:k,componentName:e,isStable:I,warningLevel:P,memoryUsage:x()}},[o]),v=h.useCallback(()=>{const N=f.current;N.renderCount>o&&!u.current&&(console.warn(` Performance Warning: ${e} has rendered ${N.renderCount} times. Average render time: ${N.averageRenderTime.toFixed(2)}ms`),u.current=!0),N.renderCount>Zs.CRITICAL_RENDERS&&console.error(` Critical Performance Issue: ${e} has rendered ${N.renderCount} times! This indicates a render loop or inefficient re-rendering.`),N.lastRenderTime>Zs.SLOW_RENDER_MS*2&&console.warn(` Slow Render: ${e} took ${N.lastRenderTime.toFixed(2)}ms to render (threshold: ${Zs.SLOW_RENDER_MS}ms)`)},[e,o]),x=h.useCallback(()=>{if("memory"in performance)return performance.memory.usedJSHeapSize/(1024*1024)},[]),g=h.useCallback(()=>({...f.current}),[]),y=h.useCallback(()=>[...c.current],[]),b=h.useCallback(()=>{i.current=0,l.current=[],c.current=[],u.current=!1,f.current={renderCount:0,averageRenderTime:0,lastRenderTime:0,totalRenderTime:0,slowRenders:0,componentName:e,isStable:!0,warningLevel:"none"}},[e]),j=h.useCallback(()=>{const N=g(),_=y();return{summary:{component:e,totalRenders:N.renderCount,averageRenderTime:`${N.averageRenderTime.toFixed(2)}ms`,slowRenders:N.slowRenders,warningLevel:N.warningLevel,isStable:N.isStable,memoryUsage:N.memoryUsage?`${N.memoryUsage.toFixed(2)}MB`:"N/A"},recommendations:S(N),recentActivity:_.slice(-10).map(E=>({timestamp:new Date(E.timestamp).toISOString(),duration:`${E.duration.toFixed(2)}ms`,performance:E.duration>Zs.SLOW_RENDER_MS?"slow":"good"}))}},[e,g,y]),S=N=>{const _=[];return N.renderCount>Zs.MAX_RENDERS&&(_.push("Consider using React.memo() to prevent unnecessary re-renders"),_.push("Check if props or state are changing unnecessarily"),_.push("Use useMemo() and useCallback() for expensive computations")),N.slowRenders>N.renderCount*.2&&(_.push("Optimize render performance - consider code splitting"),_.push("Check for expensive operations in render method"),_.push("Use React DevTools Profiler to identify bottlenecks")),N.isStable||(_.push("Component is not stable - check for infinite render loops"),_.push("Verify useEffect dependencies are correct")),_};return h.useEffect(()=>{if(r)return m(),()=>{p()}}),{startRender:m,endRender:p,getMetrics:g,getRenderHistory:y,resetMetrics:b,getPerformanceReport:j,isStable:f.current.isStable,warningLevel:f.current.warningLevel,renderCount:i.current}},UQ=e=>{const t=BQ(e,{enableProfiling:!0,alertThreshold:15});return h.useEffect(()=>{t.isStable&&t.renderCount>5&&t.getPerformanceReport().recommendations.length>0},[t.isStable,t.renderCount,e,t]),t},Ks=()=>{var I,F,B;UQ("useHRMinimal");const[e,t]=h.useState({leaveRequests:[],absenceTypes:[],attendances:[],employees:[],leaveBalances:[]}),[r,s]=h.useState(!0),[a,o]=h.useState(null),[i,l]=h.useState({fetchTime:0,cacheHit:!1,dataSize:0,lastUpdate:new Date}),[c,d]=h.useState({page:1,limit:50,total:0,hasMore:!1}),{toast:u}=rt(),{tenantId:f}=Uu(),{isSuperAdmin:m,isLoading:p,userRoles:w}=Fo(),v=h.useRef(!1),x=h.useRef(null);h.useRef(new Map);const g=h.useRef(null),y=5*60*1e3,b=h.useCallback((T,M)=>FQ("hr",M?"super_admin":T||"no_tenant"),[]),j=h.useCallback(T=>Is.get(T),[]),S=h.useCallback((T,M)=>{Is.set(T,M,"hr_data")},[]);h.useEffect(()=>{if(p)return;if(!f&&!m()){s(!1);return}const T=`${f||"null"}-${m()}`,M=x.current||"";if(v.current&&T===M)return;const U=b(f,m());if(j(U)&&T===M)return;v.current=!0,x.current=T,(async()=>{g.current&&g.current.abort();const G=new AbortController;g.current=G;try{const z=performance.now();s(!0),o(null);const Z=m(),Q=b(f,Z),H=j(Q);if(H){t(H),l(Ke=>({...Ke,cacheHit:!0,fetchTime:performance.now()-z,lastUpdate:new Date})),s(!1);return}const[te,se,ne,we,he]=await Promise.all([Z?O.from("leave_requests").select("*, profiles:employee_id(full_name, tenant_id)").order("created_at",{ascending:!1}).limit(100):f?O.from("leave_requests").select("*").eq("tenant_id",f).order("created_at",{ascending:!1}).limit(50):O.from("leave_requests").select("*").limit(0),O.from("absence_types").select("*").order("name"),Z?O.from("attendances").select("*, profiles:employee_id(full_name, tenant_id)").order("date",{ascending:!1}).limit(100):f?O.from("attendances").select("*").eq("tenant_id",f).order("date",{ascending:!1}).limit(30):O.from("attendances").select("*").limit(0),Z?O.from("profiles").select("id, user_id, full_name, avatar_url, job_title, employee_id, tenant_id, tenants:tenant_id(name)").order("full_name"):f?O.from("profiles").select("id, user_id, full_name, avatar_url, job_title, employee_id").eq("tenant_id",f):O.from("profiles").select("*").limit(0),Z?O.from("leave_balances").select("*, profiles:employee_id(full_name), absence_types:absence_type_id(name)").order("year",{ascending:!1}):f?O.from("leave_balances").select("*, profiles:employee_id(full_name), absence_types:absence_type_id(name)").eq("tenant_id",f).order("year",{ascending:!1}):O.from("leave_balances").select("*").limit(0)]);te.error&&console.error("Leave requests error:",te.error),se.error&&console.error("Absence types error:",se.error),ne.error&&console.error("Attendances error:",ne.error),we.error&&console.error("Employees error:",we.error),he.error&&console.error("Leave balances error:",he.error);const be={leaveRequests:te.data||[],absenceTypes:se.data||[],attendances:ne.data||[],employees:we.data||[],leaveBalances:he.data||[]},Me=performance.now()-z,Be=JSON.stringify(be).length;S(Q,be),t(be),l({fetchTime:Me,cacheHit:!1,dataSize:Be,lastUpdate:new Date}),d(Ke=>({...Ke,total:be.employees.length+be.leaveRequests.length+be.attendances.length,hasMore:!1}))}catch(z){console.error(" Error fetching HR data:",z),o(z.message||"Erreur de chargement"),u({title:"Erreur",description:"Impossible de charger les donnes RH",variant:"destructive"})}finally{s(!1)}})()},[f,p,m,u]);const N=h.useCallback(()=>{const T=b(f,m());Is.invalidate(T),v.current=!1,x.current=null,s(!0)},[f,m,b]),_=h.useCallback(()=>{Is.invalidatePattern("hr:*")},[]),E=h.useCallback(()=>Is.getStats(),[]);h.useEffect(()=>()=>{g.current&&g.current.abort()},[]);const D=((F=(I=w[0])==null?void 0:I.roles)==null?void 0:F.name)||"Aucun rle",C="manager_hr ou tenant_admin",k=(B=w[0])==null?void 0:B.tenant_id,P=f||k,A=(m()||D==="manager_hr"||D==="tenant_admin")&&!!P;return{...e,loading:r,error:a,metrics:i,pagination:c,canAccess:A,isSuperAdmin:m(),accessInfo:{hasAccess:A,currentRole:D,requiredRole:C,reason:A?null:D==="Aucun rle"?"no_role":"insufficient_permissions"},refresh:N,clearCache:_,getCacheStats:E,isDataStale:i.lastUpdate&&Date.now()-i.lastUpdate.getTime()>y,cacheKey:b(f,m())}},Ln=({label:e,value:t,subtitle:r,icon:s,color:a="blue",trend:o,className:i})=>{const l={blue:"bg-badge-blue/10 text-badge-blue",purple:"bg-badge-purple/10 text-badge-purple",pink:"bg-badge-pink/10 text-badge-pink",green:"bg-badge-green/10 text-badge-green",yellow:"bg-badge-yellow/10 text-badge-yellow",orange:"bg-badge-orange/10 text-badge-orange",red:"bg-badge-red/10 text-badge-red",gray:"bg-badge-gray/10 text-badge-gray"},c={up:"",down:"",neutral:""};return n.jsx("div",{className:pe("modern-card p-4 rounded-lg",i),children:n.jsxs("div",{className:"flex items-center gap-3",children:[s&&n.jsx("div",{className:pe("p-3 rounded-lg",l[a]),children:s}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e}),n.jsx("p",{className:"text-2xl font-bold",children:t}),r&&n.jsxs("p",{className:pe("text-xs",a==="green"&&"text-badge-green",a==="red"&&"text-badge-red",a==="orange"&&"text-badge-orange",a==="blue"&&"text-badge-blue"),children:[o&&c[o]," ",r]})]})]})})},Tx=({value:e,max:t=100,color:r="blue",showLabel:s=!0,size:a="md",className:o})=>{const i=Math.min(e/t*100,100),l={blue:"bg-status-doing",purple:"bg-badge-purple",pink:"bg-badge-pink",green:"bg-status-done",yellow:"bg-status-review",orange:"bg-badge-orange",red:"bg-status-blocked",gray:"bg-badge-gray"},c={sm:"h-1",md:"h-1.5",lg:"h-2"};return n.jsxs("div",{className:pe("w-full",o),children:[s&&n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[n.jsx("span",{children:"Progression"}),n.jsxs("span",{className:"font-medium",children:[Math.round(i),"%"]})]}),n.jsx("div",{className:pe("bg-muted rounded-full overflow-hidden",c[a]),children:n.jsx("div",{className:pe("h-full rounded-full transition-all duration-300",l[r]),style:{width:`${i}%`}})})]})},VQ={no_role:{icon:n.jsx(F5,{className:"h-8 w-8"}),title:"Aucun rle assign",description:()=>"Vous n'avez pas encore de rle assign dans cette organisation.",suggestion:"Contactez votre administrateur pour qu'il vous assigne un rle appropri.",color:"text-orange-500"},insufficient_permissions:{icon:n.jsx(hs,{className:"h-8 w-8"}),title:"Permissions insuffisantes",description:e=>e.currentRole&&e.requiredRole&&e.module?`Vous tes "${e.currentRole}" alors qu'il faut tre "${e.requiredRole}" pour accder au module "${e.module}".`:e.module&&e.requiredRole?`L'accs au module "${e.module}" ncessite le rle "${e.requiredRole}".`:e.requiredPermission?`Cette action ncessite la permission "${e.requiredPermission}".`:"Vous n'avez pas les permissions ncessaires pour accder  cette ressource.",suggestion:"Demandez  votre administrateur d'ajuster vos permissions.",color:"text-red-500"},wrong_tenant:{icon:n.jsx(pi,{className:"h-8 w-8"}),title:"Organisation incorrecte",description:()=>"Ces donnes appartiennent  une autre organisation.",suggestion:"Vrifiez que vous tes connect  la bonne organisation.",color:"text-yellow-500"},module_restricted:{icon:n.jsx(Kt,{className:"h-8 w-8"}),title:"Module restreint",description:e=>`Le module "${e.module||"ce module"}" est rserv aux utilisateurs autoriss.`,suggestion:"Contactez votre administrateur pour obtenir l'accs.",color:"text-blue-500"},feature_restricted:{icon:n.jsx(pi,{className:"h-8 w-8"}),title:"Fonctionnalit restreinte",description:()=>"Cette fonctionnalit n'est pas disponible avec votre rle actuel.",suggestion:"Mettez  niveau votre rle pour accder  cette fonctionnalit.",color:"text-purple-500"},no_data:{icon:n.jsx(q0,{className:"h-8 w-8"}),title:"Aucune donne disponible",description:e=>`Aucune donne n'est disponible dans le module "${e.module||"ce module"}".`,suggestion:"Les donnes seront visibles une fois qu'elles auront t cres.",color:"text-gray-500"}},qM=({reason:e,module:t,requiredRole:r,requiredPermission:s,currentRole:a,contactEmail:o="admin@wadashaqeen.com",onGoBack:i,showContactButton:l=!0})=>{const c=Kn(),d=VQ[e],u=()=>{i?i():c(-1)},f=()=>{window.location.href=`mailto:${o}?subject=Demande d'accs - ${t||"Module"}&body=Bonjour,%0D%0A%0D%0AJe souhaiterais obtenir l'accs au module "${t||"ce module"}".%0D%0A%0D%0ARle actuel: ${a||"Non assign"}%0D%0ARle requis: ${r||"Non spcifi"}%0D%0A%0D%0AMerci.`};return n.jsx("div",{className:"flex items-center justify-center min-h-[400px] p-6",children:n.jsxs(V,{className:"max-w-2xl w-full",children:[n.jsxs(le,{className:"text-center",children:[n.jsx("div",{className:`mx-auto mb-4 ${d.color}`,children:d.icon}),n.jsx(ce,{className:"text-2xl",children:d.title}),n.jsx(sn,{className:"text-base mt-2",children:d.description({reason:e,module:t,requiredRole:r,requiredPermission:s,currentRole:a})})]}),n.jsxs(W,{className:"space-y-6",children:[n.jsxs(qn,{children:[n.jsx(q0,{className:"h-4 w-4"}),n.jsx(Op,{children:"Suggestion"}),n.jsx(Gn,{children:d.suggestion})]}),a&&n.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Informations sur votre compte :"}),n.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Rle actuel :"})," ",a]}),r&&n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Rle requis :"})," ",r]}),s&&n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Permission requise :"})," ",s]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n.jsxs(L,{variant:"outline",onClick:u,className:"flex items-center gap-2",children:[n.jsx(Zm,{className:"h-4 w-4"}),"Retour"]}),l&&n.jsxs(L,{onClick:f,className:"flex items-center gap-2",children:[n.jsx(Ql,{className:"h-4 w-4"}),"Contacter l'administrateur"]})]}),n.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Ces restrictions sont en place pour protger les donnes sensibles de votre organisation."})]})]})})},WQ=()=>{var m,p,w;const{leaveRequests:e,attendances:t,employees:r,absenceTypes:s,loading:a,error:o,canAccess:i,isSuperAdmin:l,accessInfo:c,refresh:d}=Ks();if(a)return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Bs,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),n.jsx("p",{className:"text-muted-foreground",children:"Chargement des donnes RH..."})]})});if(o)return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(Qr,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Erreur de chargement"}),n.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:o}),n.jsxs(L,{onClick:d,variant:"outline",size:"sm",children:[n.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Ressayer"]})]})});if(!i&&(c!=null&&c.reason))return n.jsx(qM,{reason:c.reason,module:"Ressources Humaines",currentRole:c.currentRole,requiredRole:c.requiredRole});const u={totalEmployees:(r==null?void 0:r.length)||0,pendingRequests:((m=e==null?void 0:e.filter(v=>v.status==="pending"))==null?void 0:m.length)||0,approvedRequests:((p=e==null?void 0:e.filter(v=>v.status==="approved"))==null?void 0:p.length)||0,todayAttendances:((w=t==null?void 0:t.filter(v=>v.date===new Date().toISOString().split("T")[0]))==null?void 0:w.length)||0},f=(e==null?void 0:e.slice(0,5))||[];return n.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Tableau de bord RH"}),n.jsxs("div",{className:"text-muted-foreground mt-1 flex items-center gap-2",children:[n.jsx("span",{children:"Vue d'ensemble des ressources humaines"}),l&&n.jsxs(re,{variant:"secondary",children:[n.jsx(hs,{className:"h-3 w-3 mr-1"}),"Super Admin"]})]})]}),n.jsxs(L,{onClick:d,variant:"outline",size:"sm",children:[n.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Actualiser"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(Ln,{label:"Total Employs",value:u.totalEmployees,subtitle:"Effectif actuel",icon:n.jsx(At,{className:"w-6 h-6"}),color:"blue"}),n.jsx(Ln,{label:"En attente",value:u.pendingRequests,subtitle:"Demandes  traiter",icon:n.jsx(Kt,{className:"w-6 h-6"}),color:"orange"}),n.jsx(Ln,{label:"Approuves",value:u.approvedRequests,subtitle:"Demandes valides",icon:n.jsx(Yt,{className:"w-6 h-6"}),color:"green"}),n.jsx(Ln,{label:"Prsences",value:u.todayAttendances,subtitle:"Aujourd'hui",icon:n.jsx(lt,{className:"w-6 h-6"}),color:"blue"})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(ze,{className:"h-5 w-5"}),"Demandes de congs rcentes",n.jsx(re,{variant:"secondary",className:"ml-auto",children:f.length})]})}),n.jsx(W,{children:f.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(ze,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Aucune demande de cong rcente"})]}):n.jsx("div",{className:"space-y-3",children:f.map(v=>{var g,y;const x=r==null?void 0:r.find(b=>b.user_id===v.employee_id);return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"font-medium truncate",children:[(x==null?void 0:x.full_name)||((g=v.profiles)==null?void 0:g.full_name)||"Employ inconnu",l&&((y=v.profiles)==null?void 0:y.tenant_id)&&n.jsxs("span",{className:"ml-2 text-xs text-blue-600 font-normal",children:["(",v.profiles.tenant_id,")"]})]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(v.start_date).toLocaleDateString()," - "," ",new Date(v.end_date).toLocaleDateString()]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[v.total_days," jour(s)",v.reason&&`  ${v.reason}`]})]}),n.jsx(re,{variant:v.status==="approved"?"default":v.status==="rejected"?"destructive":"secondary",className:"ml-3 flex-shrink-0",children:v.status==="approved"?"Approuve":v.status==="rejected"?"Rejete":"En attente"})]},v.id)})})})]}),l&&r.length>0&&n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(At,{className:"h-5 w-5"}),"Tous les employs du systme",n.jsx(re,{variant:"outline",className:"ml-auto",children:r.length})]})}),n.jsxs(W,{children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.slice(0,12).map(v=>{var x;return n.jsx("div",{className:"p-3 rounded-lg border bg-card hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(At,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium truncate",children:v.full_name}),n.jsx("div",{className:"text-sm text-muted-foreground",children:v.job_title||"Poste non dfini"}),n.jsxs("div",{className:"text-xs text-blue-600",children:["ID: ",v.employee_id]}),((x=v.tenants)==null?void 0:x.name)&&n.jsx("div",{className:"text-xs text-orange-600 font-medium",children:v.tenants.name})]})]})},v.id)})}),r.length>12&&n.jsxs("div",{className:"text-center mt-4 text-sm text-muted-foreground",children:["... et ",r.length-12," autres employs"]})]})]}),l&&n.jsxs(V,{className:"border-dashed",children:[n.jsx(le,{children:n.jsx(ce,{className:"text-sm text-muted-foreground",children:" Informations de dbogage (Super Admin)"})}),n.jsxs(W,{className:"text-xs text-muted-foreground space-y-1",children:[n.jsxs("div",{children:["Super Admin: ",l?"":""]}),n.jsxs("div",{children:["Can Access: ",i?"":""]}),n.jsxs("div",{children:["Data Loaded: ",new Date().toLocaleTimeString()]}),n.jsxs("div",{children:["Total Items: ",u.totalEmployees+f.length+u.todayAttendances]})]})]})]})},HQ=()=>n.jsx(WQ,{});var ef=e=>e.type==="checkbox",oi=e=>e instanceof Date,Or=e=>e==null;const GM=e=>typeof e=="object";var Lt=e=>!Or(e)&&!Array.isArray(e)&&GM(e)&&!oi(e),qQ=e=>Lt(e)&&e.target?ef(e.target)?e.target.checked:e.target.value:e,GQ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,KQ=(e,t)=>e.has(GQ(t)),YQ=e=>{const t=e.constructor&&e.constructor.prototype;return Lt(t)&&t.hasOwnProperty("isPrototypeOf")},Eb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function lr(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Eb&&(e instanceof Blob||s))&&(r||Lt(e)))if(t=r?[]:{},!r&&!YQ(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=lr(e[a]));else return e;return t}var ng=e=>/^\w*$/.test(e),qt=e=>e===void 0,kb=e=>Array.isArray(e)?e.filter(Boolean):[],Db=e=>kb(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_e=(e,t,r)=>{if(!t||!Lt(e))return r;const s=(ng(t)?[t]:Db(t)).reduce((a,o)=>Or(a)?a:a[o],e);return qt(s)||s===e?qt(e[t])?r:e[t]:s},Es=e=>typeof e=="boolean",wt=(e,t,r)=>{let s=-1;const a=ng(t)?[t]:Db(t),o=a.length,i=o-1;for(;++s<o;){const l=a[s];let c=r;if(s!==i){const d=e[l];c=Lt(d)||Array.isArray(d)?d:isNaN(+a[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const NS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},is={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ea={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},XQ=X.createContext(null);XQ.displayName="HookFormContext";var JQ=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(a,o,{get:()=>{const i=o;return t._proxyFormState[i]!==is.all&&(t._proxyFormState[i]=!s||is.all),e[i]}});return a};const QQ=typeof window<"u"?X.useLayoutEffect:X.useEffect;var $s=e=>typeof e=="string",ZQ=(e,t,r,s,a)=>$s(e)?(s&&t.watch.add(e),_e(r,e,a)):Array.isArray(e)?e.map(o=>(s&&t.watch.add(o),_e(r,o))):(s&&(t.watchAll=!0),r),Iy=e=>Or(e)||!GM(e);function Xa(e,t,r=new WeakSet){if(Iy(e)||Iy(t))return e===t;if(oi(e)&&oi(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const o of s){const i=e[o];if(!a.includes(o))return!1;if(o!=="ref"){const l=t[o];if(oi(i)&&oi(l)||Lt(i)&&Lt(l)||Array.isArray(i)&&Array.isArray(l)?!Xa(i,l,r):i!==l)return!1}}return!0}var eZ=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},Rd=e=>Array.isArray(e)?e:[e],SS=()=>{let e=[];return{get observers(){return e},next:a=>{for(const o of e)o.next&&o.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(o=>o!==a)}}),unsubscribe:()=>{e=[]}}},Kr=e=>Lt(e)&&!Object.keys(e).length,Tb=e=>e.type==="file",ls=e=>typeof e=="function",bm=e=>{if(!Eb)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},KM=e=>e.type==="select-multiple",Pb=e=>e.type==="radio",tZ=e=>Pb(e)||ef(e),Px=e=>bm(e)&&e.isConnected;function rZ(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=qt(e)?s++:e[t[s++]];return e}function nZ(e){for(const t in e)if(e.hasOwnProperty(t)&&!qt(e[t]))return!1;return!0}function Bt(e,t){const r=Array.isArray(t)?t:ng(t)?[t]:Db(t),s=r.length===1?e:rZ(e,r),a=r.length-1,o=r[a];return s&&delete s[o],a!==0&&(Lt(s)&&Kr(s)||Array.isArray(s)&&nZ(s))&&Bt(e,r.slice(0,-1)),e}var YM=e=>{for(const t in e)if(ls(e[t]))return!0;return!1};function jm(e,t={}){const r=Array.isArray(e);if(Lt(e)||r)for(const s in e)Array.isArray(e[s])||Lt(e[s])&&!YM(e[s])?(t[s]=Array.isArray(e[s])?[]:{},jm(e[s],t[s])):Or(e[s])||(t[s]=!0);return t}function XM(e,t,r){const s=Array.isArray(e);if(Lt(e)||s)for(const a in e)Array.isArray(e[a])||Lt(e[a])&&!YM(e[a])?qt(t)||Iy(r[a])?r[a]=Array.isArray(e[a])?jm(e[a],[]):{...jm(e[a])}:XM(e[a],Or(t)?{}:t[a],r[a]):r[a]=!Xa(e[a],t[a]);return r}var td=(e,t)=>XM(e,t,jm(t));const _S={value:!1,isValid:!1},CS={value:!0,isValid:!0};var JM=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!qt(e[0].attributes.value)?qt(e[0].value)||e[0].value===""?CS:{value:e[0].value,isValid:!0}:CS:_S}return _S},QM=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>qt(e)?e:t?e===""?NaN:e&&+e:r&&$s(e)?new Date(e):s?s(e):e;const ES={isValid:!1,value:null};var ZM=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,ES):ES;function kS(e){const t=e.ref;return Tb(t)?t.files:Pb(t)?ZM(e.refs).value:KM(t)?[...t.selectedOptions].map(({value:r})=>r):ef(t)?JM(e.refs).value:QM(qt(t.value)?e.ref.value:t.value,e)}var sZ=(e,t,r,s)=>{const a={};for(const o of e){const i=_e(t,o);i&&wt(a,o,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},Nm=e=>e instanceof RegExp,rd=e=>qt(e)?e:Nm(e)?e.source:Lt(e)?Nm(e.value)?e.value.source:e.value:e,DS=e=>({isOnSubmit:!e||e===is.onSubmit,isOnBlur:e===is.onBlur,isOnChange:e===is.onChange,isOnAll:e===is.all,isOnTouch:e===is.onTouched});const TS="AsyncFunction";var aZ=e=>!!e&&!!e.validate&&!!(ls(e.validate)&&e.validate.constructor.name===TS||Lt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===TS)),oZ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),PS=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Ad=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const o=_e(e,a);if(o){const{_f:i,...l}=o;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!s)return!0;if(i.ref&&t(i.ref,i.name)&&!s)return!0;if(Ad(l,t))break}else if(Lt(l)&&Ad(l,t))break}}};function RS(e,t,r){const s=_e(e,r);if(s||ng(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const o=a.join("."),i=_e(t,o),l=_e(e,o);if(i&&!Array.isArray(i)&&r!==o)return{name:r};if(l&&l.type)return{name:o,error:l};if(l&&l.root&&l.root.type)return{name:`${o}.root`,error:l.root};a.pop()}return{name:r}}var iZ=(e,t,r,s)=>{r(e);const{name:a,...o}=e;return Kr(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(i=>t[i]===(!s||is.all))},lZ=(e,t,r)=>!e||!t||e===t||Rd(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),cZ=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,dZ=(e,t)=>!kb(_e(e,t)).length&&Bt(e,t),uZ=(e,t,r)=>{const s=Rd(_e(e,r));return wt(s,"root",t[r]),wt(e,r,s),e},xh=e=>$s(e);function AS(e,t,r="validate"){if(xh(e)||Array.isArray(e)&&e.every(xh)||Es(e)&&!e)return{type:r,message:xh(e)?e:"",ref:t}}var ol=e=>Lt(e)&&!Nm(e)?e:{value:e,message:""},MS=async(e,t,r,s,a,o)=>{const{ref:i,refs:l,required:c,maxLength:d,minLength:u,min:f,max:m,pattern:p,validate:w,name:v,valueAsNumber:x,mount:g}=e._f,y=_e(r,v);if(!g||t.has(v))return{};const b=l?l[0]:i,j=P=>{a&&b.reportValidity&&(b.setCustomValidity(Es(P)?"":P||""),b.reportValidity())},S={},N=Pb(i),_=ef(i),E=N||_,D=(x||Tb(i))&&qt(i.value)&&qt(y)||bm(i)&&i.value===""||y===""||Array.isArray(y)&&!y.length,C=eZ.bind(null,v,s,S),k=(P,R,A,I=ea.maxLength,F=ea.minLength)=>{const B=P?R:A;S[v]={type:P?I:F,message:B,ref:i,...C(P?I:F,B)}};if(o?!Array.isArray(y)||!y.length:c&&(!E&&(D||Or(y))||Es(y)&&!y||_&&!JM(l).isValid||N&&!ZM(l).isValid)){const{value:P,message:R}=xh(c)?{value:!!c,message:c}:ol(c);if(P&&(S[v]={type:ea.required,message:R,ref:b,...C(ea.required,R)},!s))return j(R),S}if(!D&&(!Or(f)||!Or(m))){let P,R;const A=ol(m),I=ol(f);if(!Or(y)&&!isNaN(y)){const F=i.valueAsNumber||y&&+y;Or(A.value)||(P=F>A.value),Or(I.value)||(R=F<I.value)}else{const F=i.valueAsDate||new Date(y),B=U=>new Date(new Date().toDateString()+" "+U),T=i.type=="time",M=i.type=="week";$s(A.value)&&y&&(P=T?B(y)>B(A.value):M?y>A.value:F>new Date(A.value)),$s(I.value)&&y&&(R=T?B(y)<B(I.value):M?y<I.value:F<new Date(I.value))}if((P||R)&&(k(!!P,A.message,I.message,ea.max,ea.min),!s))return j(S[v].message),S}if((d||u)&&!D&&($s(y)||o&&Array.isArray(y))){const P=ol(d),R=ol(u),A=!Or(P.value)&&y.length>+P.value,I=!Or(R.value)&&y.length<+R.value;if((A||I)&&(k(A,P.message,R.message),!s))return j(S[v].message),S}if(p&&!D&&$s(y)){const{value:P,message:R}=ol(p);if(Nm(P)&&!y.match(P)&&(S[v]={type:ea.pattern,message:R,ref:i,...C(ea.pattern,R)},!s))return j(R),S}if(w){if(ls(w)){const P=await w(y,r),R=AS(P,b);if(R&&(S[v]={...R,...C(ea.validate,R.message)},!s))return j(R.message),S}else if(Lt(w)){let P={};for(const R in w){if(!Kr(P)&&!s)break;const A=AS(await w[R](y,r),b,R);A&&(P={...A,...C(R,A.message)},j(A.message),s&&(S[v]=P))}if(!Kr(P)&&(S[v]={ref:b,...P},!s))return S}}return j(!0),S};const fZ={mode:is.onSubmit,reValidateMode:is.onChange,shouldFocusError:!0};function hZ(e={}){let t={...fZ,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ls(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},a=Lt(t.defaultValues)||Lt(t.values)?lr(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:lr(a),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const m={array:SS(),state:SS()},p=t.criteriaMode===is.all,w=$=>K=>{clearTimeout(d),d=setTimeout($,K)},v=async $=>{if(!t.disabled&&(u.isValid||f.isValid||$)){const K=t.resolver?Kr((await _()).errors):await D(s,!0);K!==r.isValid&&m.state.next({isValid:K})}},x=($,K)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&(($||Array.from(l.mount)).forEach(ee=>{ee&&(K?wt(r.validatingFields,ee,K):Bt(r.validatingFields,ee))}),m.state.next({validatingFields:r.validatingFields,isValidating:!Kr(r.validatingFields)}))},g=($,K=[],ee,ie,ge=!0,xe=!0)=>{if(ie&&ee&&!t.disabled){if(i.action=!0,xe&&Array.isArray(_e(s,$))){const Ne=ee(_e(s,$),ie.argA,ie.argB);ge&&wt(s,$,Ne)}if(xe&&Array.isArray(_e(r.errors,$))){const Ne=ee(_e(r.errors,$),ie.argA,ie.argB);ge&&wt(r.errors,$,Ne),dZ(r.errors,$)}if((u.touchedFields||f.touchedFields)&&xe&&Array.isArray(_e(r.touchedFields,$))){const Ne=ee(_e(r.touchedFields,$),ie.argA,ie.argB);ge&&wt(r.touchedFields,$,Ne)}(u.dirtyFields||f.dirtyFields)&&(r.dirtyFields=td(a,o)),m.state.next({name:$,isDirty:k($,K),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else wt(o,$,K)},y=($,K)=>{wt(r.errors,$,K),m.state.next({errors:r.errors})},b=$=>{r.errors=$,m.state.next({errors:r.errors,isValid:!1})},j=($,K,ee,ie)=>{const ge=_e(s,$);if(ge){const xe=_e(o,$,qt(ee)?_e(a,$):ee);qt(xe)||ie&&ie.defaultChecked||K?wt(o,$,K?xe:kS(ge._f)):A($,xe),i.mount&&v()}},S=($,K,ee,ie,ge)=>{let xe=!1,Ne=!1;const $e={name:$};if(!t.disabled){if(!ee||ie){(u.isDirty||f.isDirty)&&(Ne=r.isDirty,r.isDirty=$e.isDirty=k(),xe=Ne!==$e.isDirty);const Je=Xa(_e(a,$),K);Ne=!!_e(r.dirtyFields,$),Je?Bt(r.dirtyFields,$):wt(r.dirtyFields,$,!0),$e.dirtyFields=r.dirtyFields,xe=xe||(u.dirtyFields||f.dirtyFields)&&Ne!==!Je}if(ee){const Je=_e(r.touchedFields,$);Je||(wt(r.touchedFields,$,ee),$e.touchedFields=r.touchedFields,xe=xe||(u.touchedFields||f.touchedFields)&&Je!==ee)}xe&&ge&&m.state.next($e)}return xe?$e:{}},N=($,K,ee,ie)=>{const ge=_e(r.errors,$),xe=(u.isValid||f.isValid)&&Es(K)&&r.isValid!==K;if(t.delayError&&ee?(c=w(()=>y($,ee)),c(t.delayError)):(clearTimeout(d),c=null,ee?wt(r.errors,$,ee):Bt(r.errors,$)),(ee?!Xa(ge,ee):ge)||!Kr(ie)||xe){const Ne={...ie,...xe&&Es(K)?{isValid:K}:{},errors:r.errors,name:$};r={...r,...Ne},m.state.next(Ne)}},_=async $=>{x($,!0);const K=await t.resolver(o,t.context,sZ($||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return x($),K},E=async $=>{const{errors:K}=await _($);if($)for(const ee of $){const ie=_e(K,ee);ie?wt(r.errors,ee,ie):Bt(r.errors,ee)}else r.errors=K;return K},D=async($,K,ee={valid:!0})=>{for(const ie in $){const ge=$[ie];if(ge){const{_f:xe,...Ne}=ge;if(xe){const $e=l.array.has(xe.name),Je=ge._f&&aZ(ge._f);Je&&u.validatingFields&&x([ie],!0);const Ft=await MS(ge,l.disabled,o,p,t.shouldUseNativeValidation&&!K,$e);if(Je&&u.validatingFields&&x([ie]),Ft[xe.name]&&(ee.valid=!1,K))break;!K&&(_e(Ft,xe.name)?$e?uZ(r.errors,Ft,xe.name):wt(r.errors,xe.name,Ft[xe.name]):Bt(r.errors,xe.name))}!Kr(Ne)&&await D(Ne,K,ee)}}return ee.valid},C=()=>{for(const $ of l.unMount){const K=_e(s,$);K&&(K._f.refs?K._f.refs.every(ee=>!Px(ee)):!Px(K._f.ref))&&H($)}l.unMount=new Set},k=($,K)=>!t.disabled&&($&&K&&wt(o,$,K),!Xa(U(),a)),P=($,K,ee)=>ZQ($,l,{...i.mount?o:qt(K)?a:$s($)?{[$]:K}:K},ee,K),R=$=>kb(_e(i.mount?o:a,$,t.shouldUnregister?_e(a,$,[]):[])),A=($,K,ee={})=>{const ie=_e(s,$);let ge=K;if(ie){const xe=ie._f;xe&&(!xe.disabled&&wt(o,$,QM(K,xe)),ge=bm(xe.ref)&&Or(K)?"":K,KM(xe.ref)?[...xe.ref.options].forEach(Ne=>Ne.selected=ge.includes(Ne.value)):xe.refs?ef(xe.ref)?xe.refs.forEach(Ne=>{(!Ne.defaultChecked||!Ne.disabled)&&(Array.isArray(ge)?Ne.checked=!!ge.find($e=>$e===Ne.value):Ne.checked=ge===Ne.value||!!ge)}):xe.refs.forEach(Ne=>Ne.checked=Ne.value===ge):Tb(xe.ref)?xe.ref.value="":(xe.ref.value=ge,xe.ref.type||m.state.next({name:$,values:lr(o)})))}(ee.shouldDirty||ee.shouldTouch)&&S($,ge,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&M($)},I=($,K,ee)=>{for(const ie in K){if(!K.hasOwnProperty(ie))return;const ge=K[ie],xe=$+"."+ie,Ne=_e(s,xe);(l.array.has($)||Lt(ge)||Ne&&!Ne._f)&&!oi(ge)?I(xe,ge,ee):A(xe,ge,ee)}},F=($,K,ee={})=>{const ie=_e(s,$),ge=l.array.has($),xe=lr(K);wt(o,$,xe),ge?(m.array.next({name:$,values:lr(o)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&ee.shouldDirty&&m.state.next({name:$,dirtyFields:td(a,o),isDirty:k($,xe)})):ie&&!ie._f&&!Or(xe)?I($,xe,ee):A($,xe,ee),PS($,l)&&m.state.next({...r,name:$}),m.state.next({name:i.mount?$:void 0,values:lr(o)})},B=async $=>{i.mount=!0;const K=$.target;let ee=K.name,ie=!0;const ge=_e(s,ee),xe=Je=>{ie=Number.isNaN(Je)||oi(Je)&&isNaN(Je.getTime())||Xa(Je,_e(o,ee,Je))},Ne=DS(t.mode),$e=DS(t.reValidateMode);if(ge){let Je,Ft;const _n=K.type?kS(ge._f):qQ($),Jt=$.type===NS.BLUR||$.type===NS.FOCUS_OUT,Vo=!oZ(ge._f)&&!t.resolver&&!_e(r.errors,ee)&&!ge._f.deps||cZ(Jt,_e(r.touchedFields,ee),r.isSubmitted,$e,Ne),Ys=PS(ee,l,Jt);wt(o,ee,_n),Jt?(ge._f.onBlur&&ge._f.onBlur($),c&&c(0)):ge._f.onChange&&ge._f.onChange($);const Cn=S(ee,_n,Jt),Ra=!Kr(Cn)||Ys;if(!Jt&&m.state.next({name:ee,type:$.type,values:lr(o)}),Vo)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?Jt&&v():Jt||v()),Ra&&m.state.next({name:ee,...Ys?{}:Cn});if(!Jt&&Ys&&m.state.next({...r}),t.resolver){const{errors:En}=await _([ee]);if(xe(_n),ie){const Oc=RS(r.errors,s,ee),Wo=RS(En,s,Oc.name||ee);Je=Wo.error,ee=Wo.name,Ft=Kr(En)}}else x([ee],!0),Je=(await MS(ge,l.disabled,o,p,t.shouldUseNativeValidation))[ee],x([ee]),xe(_n),ie&&(Je?Ft=!1:(u.isValid||f.isValid)&&(Ft=await D(s,!0)));ie&&(ge._f.deps&&M(ge._f.deps),N(ee,Ft,Je,Cn))}},T=($,K)=>{if(_e(r.errors,K)&&$.focus)return $.focus(),1},M=async($,K={})=>{let ee,ie;const ge=Rd($);if(t.resolver){const xe=await E(qt($)?$:ge);ee=Kr(xe),ie=$?!ge.some(Ne=>_e(xe,Ne)):ee}else $?(ie=(await Promise.all(ge.map(async xe=>{const Ne=_e(s,xe);return await D(Ne&&Ne._f?{[xe]:Ne}:Ne)}))).every(Boolean),!(!ie&&!r.isValid)&&v()):ie=ee=await D(s);return m.state.next({...!$s($)||(u.isValid||f.isValid)&&ee!==r.isValid?{}:{name:$},...t.resolver||!$?{isValid:ee}:{},errors:r.errors}),K.shouldFocus&&!ie&&Ad(s,T,$?ge:l.mount),ie},U=$=>{const K={...i.mount?o:a};return qt($)?K:$s($)?_e(K,$):$.map(ee=>_e(K,ee))},q=($,K)=>({invalid:!!_e((K||r).errors,$),isDirty:!!_e((K||r).dirtyFields,$),error:_e((K||r).errors,$),isValidating:!!_e(r.validatingFields,$),isTouched:!!_e((K||r).touchedFields,$)}),Y=$=>{$&&Rd($).forEach(K=>Bt(r.errors,K)),m.state.next({errors:$?r.errors:{}})},G=($,K,ee)=>{const ie=(_e(s,$,{_f:{}})._f||{}).ref,ge=_e(r.errors,$)||{},{ref:xe,message:Ne,type:$e,...Je}=ge;wt(r.errors,$,{...Je,...K,ref:ie}),m.state.next({name:$,errors:r.errors,isValid:!1}),ee&&ee.shouldFocus&&ie&&ie.focus&&ie.focus()},z=($,K)=>ls($)?m.state.subscribe({next:ee=>"values"in ee&&$(P(void 0,K),ee)}):P($,K,!0),Z=$=>m.state.subscribe({next:K=>{lZ($.name,K.name,$.exact)&&iZ(K,$.formState||u,Ke,$.reRenderRoot)&&$.callback({values:{...o},...r,...K,defaultValues:a})}}).unsubscribe,Q=$=>(i.mount=!0,f={...f,...$.formState},Z({...$,formState:f})),H=($,K={})=>{for(const ee of $?Rd($):l.mount)l.mount.delete(ee),l.array.delete(ee),K.keepValue||(Bt(s,ee),Bt(o,ee)),!K.keepError&&Bt(r.errors,ee),!K.keepDirty&&Bt(r.dirtyFields,ee),!K.keepTouched&&Bt(r.touchedFields,ee),!K.keepIsValidating&&Bt(r.validatingFields,ee),!t.shouldUnregister&&!K.keepDefaultValue&&Bt(a,ee);m.state.next({values:lr(o)}),m.state.next({...r,...K.keepDirty?{isDirty:k()}:{}}),!K.keepIsValid&&v()},te=({disabled:$,name:K})=>{(Es($)&&i.mount||$||l.disabled.has(K))&&($?l.disabled.add(K):l.disabled.delete(K))},se=($,K={})=>{let ee=_e(s,$);const ie=Es(K.disabled)||Es(t.disabled);return wt(s,$,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:$}},name:$,mount:!0,...K}}),l.mount.add($),ee?te({disabled:Es(K.disabled)?K.disabled:t.disabled,name:$}):j($,!0,K.value),{...ie?{disabled:K.disabled||t.disabled}:{},...t.progressive?{required:!!K.required,min:rd(K.min),max:rd(K.max),minLength:rd(K.minLength),maxLength:rd(K.maxLength),pattern:rd(K.pattern)}:{},name:$,onChange:B,onBlur:B,ref:ge=>{if(ge){se($,K),ee=_e(s,$);const xe=qt(ge.value)&&ge.querySelectorAll&&ge.querySelectorAll("input,select,textarea")[0]||ge,Ne=tZ(xe),$e=ee._f.refs||[];if(Ne?$e.find(Je=>Je===xe):xe===ee._f.ref)return;wt(s,$,{_f:{...ee._f,...Ne?{refs:[...$e.filter(Px),xe,...Array.isArray(_e(a,$))?[{}]:[]],ref:{type:xe.type,name:$}}:{ref:xe}}}),j($,!1,void 0,xe)}else ee=_e(s,$,{}),ee._f&&(ee._f.mount=!1),(t.shouldUnregister||K.shouldUnregister)&&!(KQ(l.array,$)&&i.action)&&l.unMount.add($)}}},ne=()=>t.shouldFocusError&&Ad(s,T,l.mount),we=$=>{Es($)&&(m.state.next({disabled:$}),Ad(s,(K,ee)=>{const ie=_e(s,ee);ie&&(K.disabled=ie._f.disabled||$,Array.isArray(ie._f.refs)&&ie._f.refs.forEach(ge=>{ge.disabled=ie._f.disabled||$}))},0,!1))},he=($,K)=>async ee=>{let ie;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let ge=lr(o);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:xe,values:Ne}=await _();r.errors=xe,ge=lr(Ne)}else await D(s);if(l.disabled.size)for(const xe of l.disabled)Bt(ge,xe);if(Bt(r.errors,"root"),Kr(r.errors)){m.state.next({errors:{}});try{await $(ge,ee)}catch(xe){ie=xe}}else K&&await K({...r.errors},ee),ne(),setTimeout(ne);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Kr(r.errors)&&!ie,submitCount:r.submitCount+1,errors:r.errors}),ie)throw ie},be=($,K={})=>{_e(s,$)&&(qt(K.defaultValue)?F($,lr(_e(a,$))):(F($,K.defaultValue),wt(a,$,lr(K.defaultValue))),K.keepTouched||Bt(r.touchedFields,$),K.keepDirty||(Bt(r.dirtyFields,$),r.isDirty=K.defaultValue?k($,lr(_e(a,$))):k()),K.keepError||(Bt(r.errors,$),u.isValid&&v()),m.state.next({...r}))},de=($,K={})=>{const ee=$?lr($):a,ie=lr(ee),ge=Kr($),xe=ge?a:ie;if(K.keepDefaultValues||(a=ee),!K.keepValues){if(K.keepDirtyValues){const Ne=new Set([...l.mount,...Object.keys(td(a,o))]);for(const $e of Array.from(Ne))_e(r.dirtyFields,$e)?wt(xe,$e,_e(o,$e)):F($e,_e(xe,$e))}else{if(Eb&&qt($))for(const Ne of l.mount){const $e=_e(s,Ne);if($e&&$e._f){const Je=Array.isArray($e._f.refs)?$e._f.refs[0]:$e._f.ref;if(bm(Je)){const Ft=Je.closest("form");if(Ft){Ft.reset();break}}}}if(K.keepFieldsRef)for(const Ne of l.mount)F(Ne,_e(xe,Ne));else s={}}o=t.shouldUnregister?K.keepDefaultValues?lr(a):{}:lr(xe),m.array.next({values:{...xe}}),m.state.next({values:{...xe}})}l={mount:K.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!K.keepIsValid||!!K.keepDirtyValues,i.watch=!!t.shouldUnregister,m.state.next({submitCount:K.keepSubmitCount?r.submitCount:0,isDirty:ge?!1:K.keepDirty?r.isDirty:!!(K.keepDefaultValues&&!Xa($,a)),isSubmitted:K.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ge?{}:K.keepDirtyValues?K.keepDefaultValues&&o?td(a,o):r.dirtyFields:K.keepDefaultValues&&$?td(a,$):K.keepDirty?r.dirtyFields:{},touchedFields:K.keepTouched?r.touchedFields:{},errors:K.keepErrors?r.errors:{},isSubmitSuccessful:K.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Me=($,K)=>de(ls($)?$(o):$,K),Be=($,K={})=>{const ee=_e(s,$),ie=ee&&ee._f;if(ie){const ge=ie.refs?ie.refs[0]:ie.ref;ge.focus&&(ge.focus(),K.shouldSelect&&ls(ge.select)&&ge.select())}},Ke=$=>{r={...r,...$}},Xt={control:{register:se,unregister:H,getFieldState:q,handleSubmit:he,setError:G,_subscribe:Z,_runSchema:_,_focusError:ne,_getWatch:P,_getDirty:k,_setValid:v,_setFieldArray:g,_setDisabledField:te,_setErrors:b,_getFieldArray:R,_reset:de,_resetDefaultValues:()=>ls(t.defaultValues)&&t.defaultValues().then($=>{Me($,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:C,_disableForm:we,_subjects:m,_proxyFormState:u,get _fields(){return s},get _formValues(){return o},get _state(){return i},set _state($){i=$},get _defaultValues(){return a},get _names(){return l},set _names($){l=$},get _formState(){return r},get _options(){return t},set _options($){t={...t,...$}}},subscribe:Q,trigger:M,register:se,handleSubmit:he,watch:z,setValue:F,getValues:U,reset:Me,resetField:be,clearErrors:Y,unregister:H,setError:G,setFocus:Be,getFieldState:q};return{...Xt,formControl:Xt}}function Ta(e={}){const t=X.useRef(void 0),r=X.useRef(void 0),[s,a]=X.useState({isDirty:!1,isValidating:!1,isLoading:ls(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ls(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!ls(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...l}=hZ(e);t.current={...l,formState:s}}const o=t.current.control;return o._options=e,QQ(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),o._formState.isReady=!0,i},[o]),X.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),X.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),X.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),X.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),X.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==s.isDirty&&o._subjects.state.next({isDirty:i})}},[o,s.isDirty]),X.useEffect(()=>{e.values&&!Xa(e.values,r.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),r.current=e.values,a(i=>({...i}))):o._resetDefaultValues()},[o,e.values]),X.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=JQ(s,o),t.current}const mZ=()=>{const{leaveRequests:e,absenceTypes:t,employees:r,loading:s,refresh:a}=Ks(),{toast:o}=rt(),[i,l]=h.useState("all"),[c,d]=h.useState(!1),[u,f]=h.useState(""),[m,p]=h.useState(null),w=Sn(),{register:v,handleSubmit:x,reset:g,setValue:y,watch:b}=Ta(),j=async C=>{const{error:k}=await O.from("leave_requests").insert([C]);if(k)throw k;o({title:"Succs",description:"Demande de cong cre avec succs"}),a()},S=async(C,k,P)=>{const{error:R}=await O.from("leave_requests").update({status:k,rejection_reason:P}).eq("id",C);if(R)throw R;o({title:"Succs",description:`Demande ${k==="approved"?"approuve":"rejete"} avec succs`}),a()},N=e.filter(C=>i==="all"||C.status===i),_=async C=>{try{const k=new Date(C.start_date),P=new Date(C.end_date),R=Math.ceil((P.getTime()-k.getTime())/(1e3*60*60*24))+1;await j({employee_id:C.employee_id,absence_type_id:C.absence_type_id,start_date:C.start_date,end_date:C.end_date,total_days:R,status:"pending",reason:C.reason}),g(),d(!1)}catch(k){console.error("Error creating leave request:",k),o({title:"Erreur",description:"Impossible de crer la demande",variant:"destructive"})}},E=async C=>{try{await S(C,"approved")}catch(k){console.error("Error approving request:",k)}},D=async C=>{if(u.trim())try{await S(C,"rejected",u),f(""),p(null)}catch(k){console.error("Error rejecting request:",k)}};return s?n.jsx("div",{className:"p-6 text-center",children:"Chargement des demandes de congs..."}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Gestion des Congs"}),n.jsxs(yt,{open:c,onOpenChange:d,children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{className:"hover-glow",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Nouvelle demande"]})}),n.jsxs(ft,{className:"max-w-md",children:[n.jsx(ht,{children:n.jsx(mt,{children:"Crer une demande de cong"})}),n.jsxs("form",{onSubmit:x(_),className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"employee_id",children:"Employ"}),n.jsxs(Ie,{onValueChange:C=>y("employee_id",C),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un employ"})}),n.jsx(Re,{children:r.map(C=>n.jsx(ae,{value:C.id,children:C.full_name},C.id))})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"absence_type_id",children:"Type d'absence"}),n.jsxs(Ie,{onValueChange:C=>y("absence_type_id",C),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un type"})}),n.jsx(Re,{children:t.map(C=>n.jsx(ae,{value:C.id,children:C.name},C.id))})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"start_date",children:"Date de dbut"}),n.jsx(ye,{id:"start_date",type:"date",...v("start_date",{required:!0})})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"end_date",children:"Date de fin"}),n.jsx(ye,{id:"end_date",type:"date",...v("end_date",{required:!0})})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"reason",children:"Motif (optionnel)"}),n.jsx(on,{id:"reason",placeholder:"Motif de la demande...",...v("reason")})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{type:"submit",className:"flex-1",children:"Crer"}),n.jsx(L,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Annuler"})]})]})]})]})]}),n.jsx("div",{className:"flex gap-4 items-center",children:n.jsxs(Ie,{value:i,onValueChange:l,children:[n.jsx(Pe,{className:"w-48",children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"all",children:"Tous les statuts"}),n.jsx(ae,{value:"pending",children:"En attente"}),n.jsx(ae,{value:"approved",children:"Approuves"}),n.jsx(ae,{value:"rejected",children:"Rejetes"})]})]})}),n.jsx("div",{className:"space-y-4",children:N.length===0?n.jsx(V,{className:"modern-card",children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucune demande de cong trouve"})]})}):N.map(C=>{const k=r.find(R=>R.user_id===C.employee_id),P=t.find(R=>R.id===C.absence_type_id);return n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:`${w?"space-y-4":"flex items-center justify-between"}`,children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:(k==null?void 0:k.full_name)||"Employ inconnu"}),n.jsx(re,{variant:C.status==="approved"?"default":C.status==="rejected"?"destructive":"secondary",children:C.status==="approved"?"Approuve":C.status==="rejected"?"Rejete":"En attente"})]}),n.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Type:"})," ",(P==null?void 0:P.name)||"Type inconnu"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Priode:"})," ",new Date(C.start_date).toLocaleDateString()," - ",new Date(C.end_date).toLocaleDateString()]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Dure:"})," ",C.total_days," jour(s)"]}),C.reason&&n.jsxs("p",{children:[n.jsx("strong",{children:"Motif:"})," ",C.reason]}),C.rejection_reason&&n.jsxs("p",{className:"text-destructive",children:[n.jsx("strong",{children:"Motif de rejet:"})," ",C.rejection_reason]})]})]}),C.status==="pending"&&n.jsxs("div",{className:`flex gap-2 ${w?"w-full":""}`,children:[n.jsxs(L,{size:"sm",onClick:()=>E(C.id),className:"hover-glow",children:[n.jsx(Ea,{className:"h-4 w-4 mr-1"}),"Approuver"]}),n.jsxs(yt,{children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{size:"sm",variant:"outline",onClick:()=>p(C.id),children:[n.jsx(Ro,{className:"h-4 w-4 mr-1"}),"Rejeter"]})}),n.jsxs(ft,{children:[n.jsx(ht,{children:n.jsx(mt,{children:"Rejeter la demande"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(on,{placeholder:"Motif de rejet...",value:u,onChange:R=>f(R.target.value)}),n.jsx("div",{className:"flex gap-2",children:n.jsx(L,{onClick:()=>D(C.id),disabled:!u.trim(),variant:"destructive",children:"Confirmer le rejet"})})]})]})]})]})]})})},C.id)})})]})},pZ=()=>{const{attendances:e,employees:t,createAttendance:r,loading:s}=Ks(),[a,o]=h.useState(new Date().toISOString().split("T")[0]),[i,l]=h.useState(!1),c=Sn(),{register:d,handleSubmit:u,reset:f,setValue:m}=Ta(),p=e.filter(g=>g.date===a),w=async g=>{try{let y=0;if(g.check_in&&g.check_out){const b=new Date(`1970-01-01T${g.check_in}`),j=new Date(`1970-01-01T${g.check_out}`),S=parseInt(g.break_duration)||0,N=(j.getTime()-b.getTime())/(1e3*60)-S;y=Math.max(0,N/60)}await r({employee_id:g.employee_id,date:g.date,check_in:g.check_in||null,check_out:g.check_out||null,break_duration:parseInt(g.break_duration)||0,total_hours:y,status:g.status,notes:g.notes||null}),f(),l(!1)}catch(y){console.error("Error creating attendance:",y)}},v=g=>{switch(g){case"present":return"default";case"absent":return"destructive";case"late":return"secondary";case"partial":return"outline";default:return"secondary"}},x=g=>{switch(g){case"present":return"Prsent";case"absent":return"Absent";case"late":return"En retard";case"partial":return"Partiel";default:return g}};return s?n.jsx("div",{className:"p-6 text-center",children:"Chargement des prsences..."}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Gestion des Prsences"}),n.jsxs(yt,{open:i,onOpenChange:l,children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{className:"hover-glow",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Nouvelle prsence"]})}),n.jsxs(ft,{className:"max-w-md",children:[n.jsx(ht,{children:n.jsx(mt,{children:"Enregistrer une prsence"})}),n.jsxs("form",{onSubmit:u(w),className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"employee_id",children:"Employ"}),n.jsxs(Ie,{onValueChange:g=>m("employee_id",g),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un employ"})}),n.jsx(Re,{children:t.map(g=>n.jsx(ae,{value:g.id,children:g.full_name},g.id))})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"date",children:"Date"}),n.jsx(ye,{id:"date",type:"date",defaultValue:new Date().toISOString().split("T")[0],...d("date",{required:!0})})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"status",children:"Statut"}),n.jsxs(Ie,{onValueChange:g=>m("status",g),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un statut"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"present",children:"Prsent"}),n.jsx(ae,{value:"absent",children:"Absent"}),n.jsx(ae,{value:"late",children:"En retard"}),n.jsx(ae,{value:"partial",children:"Partiel"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"check_in",children:"Arrive"}),n.jsx(ye,{id:"check_in",type:"time",...d("check_in")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"check_out",children:"Dpart"}),n.jsx(ye,{id:"check_out",type:"time",...d("check_out")})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"break_duration",children:"Pause (minutes)"}),n.jsx(ye,{id:"break_duration",type:"number",placeholder:"0",...d("break_duration")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"notes",children:"Notes (optionnel)"}),n.jsx(ye,{id:"notes",placeholder:"Notes...",...d("notes")})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{type:"submit",className:"flex-1",children:"Enregistrer"}),n.jsx(L,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Annuler"})]})]})]})]})]}),n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsx(J,{htmlFor:"date-filter",children:"Date :"}),n.jsx(ye,{id:"date-filter",type:"date",value:a,onChange:g=>o(g.target.value),className:"w-48"})]}),n.jsx("div",{className:"space-y-4",children:p.length===0?n.jsx(V,{className:"modern-card",children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(lt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsxs("p",{className:"text-muted-foreground",children:["Aucune prsence enregistre pour le ",new Date(a).toLocaleDateString()]})]})}):p.map(g=>{const y=t.find(b=>b.user_id===g.employee_id);return n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-6",children:n.jsx("div",{className:`${c?"space-y-4":"flex items-center justify-between"}`,children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:(y==null?void 0:y.full_name)||"Employ inconnu"}),n.jsx(re,{variant:v(g.status),children:x(g.status)})]}),n.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Date:"})," ",new Date(g.date).toLocaleDateString()]}),g.check_in&&n.jsxs("p",{children:[n.jsx("strong",{children:"Arrive:"})," ",g.check_in]}),g.check_out&&n.jsxs("p",{children:[n.jsx("strong",{children:"Dpart:"})," ",g.check_out]}),g.total_hours&&n.jsxs("p",{children:[n.jsx("strong",{children:"Heures travailles:"})," ",g.total_hours.toFixed(2),"h"]}),g.break_duration&&g.break_duration>0&&n.jsxs("p",{children:[n.jsx("strong",{children:"Pause:"})," ",g.break_duration," min"]}),g.notes&&n.jsxs("p",{children:[n.jsx("strong",{children:"Notes:"})," ",g.notes]})]})]})})})},g.id)})})]})},gZ=({employee:e,isOpen:t,onOpenChange:r})=>{var b,j,S;const[s,a]=h.useState([]),[o,i]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState([]),[f,m]=h.useState({}),[p,w]=h.useState(!1);h.useEffect(()=>{e&&t&&v()},[e,t]);const v=async()=>{if(e){w(!0);try{const{data:N}=await O.from("skill_assessments").select(`
          id,
          current_level,
          target_level,
          last_assessed,
          assessor,
          skill_id
        `).eq("employee_id",e.id).order("last_assessed",{ascending:!1});let _={};if(N&&N.length>0){const R=[...new Set(N.map(I=>I.skill_id))],{data:A}=await O.from("skills").select("id, name").in("id",R);A&&(_=A.reduce((I,F)=>(I[F.id]=F.name,I),{}))}N&&a(N.map(R=>({...R,skill_name:_[R.skill_id]||"Comptence inconnue"})));const{data:E}=await O.from("evaluations").select("*").eq("employee_id",e.id).order("created_at",{ascending:!1}).limit(5);E&&i(E);const{data:D}=await O.from("tasks").select("*").eq("assigned_name",e.full_name).in("status",["todo","doing"]).order("created_at",{ascending:!1}).limit(10);D&&c(D.map(R=>({id:R.id,title:R.title,status:R.status,priority:R.priority,progress:R.progress||0,due_date:R.due_date,assignee:R.assigned_name})));const{data:C}=await O.from("absences").select(`
          id,
          start_date,
          end_date,
          total_days,
          status,
          reason,
          absence_type_id
        `).eq("employee_id",e.id).gte("start_date",new Date(Date.now()-6*30*24*60*60*1e3).toISOString().split("T")[0]).order("start_date",{ascending:!1}).limit(10);let k={};if(C&&C.length>0){const R=[...new Set(C.map(I=>I.absence_type_id))],{data:A}=await O.from("absence_types").select("id, name").in("id",R);A&&(k=A.reduce((I,F)=>(I[F.id]=F.name,I),{}))}C&&u(C.map(R=>({...R,absence_type_name:k[R.absence_type_id]||"Type inconnu"})));const{data:P}=await O.from("attendances").select("date, total_hours, status").eq("employee_id",e.id).gte("date",new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0]);if(P){const R=P.length,A=P.filter(B=>B.status==="present").length,I=P.reduce((B,T)=>B+(T.total_hours||0),0),F=R>0?I/R:0;m({totalDays:R,presentDays:A,presentRate:R>0?A/R*100:0,avgHoursPerDay:F,totalHours:I})}}catch(N){console.error("Error fetching employee details:",N)}finally{w(!1)}}},x=N=>{switch(N.toLowerCase()){case"approved":case"completed":case"done":return"default";case"pending":case"doing":case"in_progress":return"secondary";case"rejected":case"cancelled":return"destructive";case"todo":return"outline";default:return"secondary"}},g=N=>{switch(N==null?void 0:N.toLowerCase()){case"high":case"urgent":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"secondary"}},y=N=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(N);return e?n.jsx(yt,{open:t,onOpenChange:r,children:n.jsxs(ft,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(ht,{children:n.jsxs(mt,{className:"flex items-center gap-3",children:[n.jsxs(ka,{className:"h-12 w-12",children:[n.jsx(zo,{src:e.avatar_url||void 0}),n.jsx(Da,{className:"text-lg",children:e.full_name.split(" ").map(N=>N[0]).join("").toUpperCase()})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:e.full_name}),n.jsx("p",{className:"text-lg text-muted-foreground",children:e.job_title||"Poste non dfini"})]})]})}),n.jsxs(pr,{defaultValue:"personal",className:"w-full",children:[n.jsxs(ar,{className:"grid w-full grid-cols-6",children:[n.jsx(Ce,{value:"personal",children:"Profil"}),n.jsx(Ce,{value:"work",children:"Travail"}),n.jsx(Ce,{value:"skills",children:"Comptences"}),n.jsx(Ce,{value:"evaluations",children:"valuations"}),n.jsx(Ce,{value:"tasks",children:"Projets"}),n.jsx(Ce,{value:"attendance",children:"Prsences"})]}),n.jsx(Ee,{value:"personal",className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(nr,{className:"h-5 w-5"}),"Informations personnelles"]})}),n.jsxs(W,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ql,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:"Email:"}),n.jsx("span",{className:"font-medium",children:e.email||"Non renseign"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(M5,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:"Tlphone:"}),n.jsx("span",{className:"font-medium",children:e.phone||"Non renseign"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ze,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:"ID Employ:"}),n.jsx("span",{className:"font-medium",children:e.employee_id||"Non assign"})]})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"h-5 w-5"}),"Contact d'urgence"]})}),n.jsx(W,{children:e.emergency_contact?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Nom:"})," ",e.emergency_contact.name]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Tlphone:"})," ",e.emergency_contact.phone]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Relation:"})," ",e.emergency_contact.relation]})]}):n.jsx("p",{className:"text-muted-foreground",children:"Aucun contact d'urgence renseign"})})]})]})}),n.jsx(Ee,{value:"work",className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(V0,{className:"h-5 w-5"}),"Dtails du poste"]})}),n.jsxs(W,{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(J,{children:"Date d'embauche"}),n.jsx("p",{className:"font-medium",children:e.hire_date?Ve(new Date(e.hire_date),"dd MMMM yyyy",{locale:ot}):"Non renseigne"})]}),n.jsxs("div",{children:[n.jsx(J,{children:"Type de contrat"}),n.jsx("div",{className:"mt-1",children:n.jsx(re,{variant:e.contract_type==="CDI"?"default":"secondary",children:e.contract_type||"Non dfini"})})]}),n.jsxs("div",{children:[n.jsx(J,{children:"Heures par semaine"}),n.jsxs("p",{className:"font-medium",children:[e.weekly_hours||35,"h"]})]})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Wh,{className:"h-5 w-5"}),"Rmunration"]})}),n.jsxs(W,{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(J,{children:"Salaire annuel"}),n.jsx("p",{className:"text-2xl font-bold text-primary",children:e.salary?y(e.salary):"Confidentiel"})]}),n.jsxs("div",{children:[n.jsx(J,{children:"Salaire mensuel (estimation)"}),n.jsx("p",{className:"font-medium text-muted-foreground",children:e.salary?y(e.salary/12):"Confidentiel"})]})]})]})]})}),n.jsx(Ee,{value:"skills",className:"space-y-4",children:n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Vh,{className:"h-5 w-5"}),"valuations des comptences"]})}),n.jsx(W,{children:s.length>0?n.jsx("div",{className:"space-y-4",children:s.map(N=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h4",{className:"font-medium",children:N.skill_name}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[N.current_level,"/",N.target_level," - valu par ",N.assessor]})]}),n.jsx(Ot,{value:N.current_level/N.target_level*100,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dernire valuation: ",Ve(new Date(N.last_assessed),"dd/MM/yyyy",{locale:ot})]})]},N.id))}):n.jsx("p",{className:"text-muted-foreground",children:"Aucune valuation de comptences disponible"})})]})}),n.jsx(Ee,{value:"evaluations",className:"space-y-4",children:n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(fa,{className:"h-5 w-5"}),"valuations de performance"]})}),n.jsx(W,{children:o.length>0?n.jsx("div",{className:"space-y-4",children:o.map(N=>n.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-medium",children:[N.type," - ",N.period]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["valuateur: ",N.evaluator_name]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:[N.overall_score,"/100"]}),n.jsx(re,{variant:x(N.status),children:N.status})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:Ve(new Date(N.created_at),"dd MMMM yyyy",{locale:ot})})]},N.id))}):n.jsx("p",{className:"text-muted-foreground",children:"Aucune valuation de performance disponible"})})]})}),n.jsx(Ee,{value:"tasks",className:"space-y-4",children:n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5"}),"Projets et tches en cours"]})}),n.jsx(W,{children:l.length>0?n.jsx("div",{className:"space-y-3",children:l.map(N=>n.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("h4",{className:"font-medium",children:N.title}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(re,{variant:x(N.status),children:N.status}),n.jsx(re,{variant:g(N.priority),children:N.priority})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Progression"}),n.jsxs("span",{children:[N.progress,"%"]})]}),n.jsx(Ot,{value:N.progress,className:"h-2"})]}),N.due_date&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["chance: ",Ve(new Date(N.due_date),"dd/MM/yyyy",{locale:ot})]})]},N.id))}):n.jsx("p",{className:"text-muted-foreground",children:"Aucun projet ou tche en cours"})})]})}),n.jsx(Ee,{value:"attendance",className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(xr,{className:"h-5 w-5"}),"Statistiques (30 derniers jours)"]})}),n.jsxs(W,{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Taux de prsence"}),n.jsxs("span",{className:"font-bold text-primary",children:[((b=f.presentRate)==null?void 0:b.toFixed(1))||0,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Jours travaills"}),n.jsxs("span",{className:"font-medium",children:[f.presentDays||0,"/",f.totalDays||0]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Heures moyennes/jour"}),n.jsxs("span",{className:"font-medium",children:[((j=f.avgHoursPerDay)==null?void 0:j.toFixed(1))||0,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Total heures"}),n.jsxs("span",{className:"font-medium",children:[((S=f.totalHours)==null?void 0:S.toFixed(1))||0,"h"]})]})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(lt,{className:"h-5 w-5"}),"Absences rcentes"]})}),n.jsx(W,{children:d.length>0?n.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:d.map(N=>n.jsxs("div",{className:"border rounded p-2 space-y-1",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:N.absence_type_name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ve(new Date(N.start_date),"dd/MM",{locale:ot})," -",Ve(new Date(N.end_date),"dd/MM/yyyy",{locale:ot})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx(re,{variant:x(N.status),className:"text-xs",children:N.status}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.total_days," jour(s)"]})]})]}),N.reason&&n.jsx("p",{className:"text-xs text-muted-foreground italic",children:N.reason})]},N.id))}):n.jsx("p",{className:"text-muted-foreground text-sm",children:"Aucune absence rcente"})})]})]})})]})]})}):null},xZ=()=>{const{employees:e,departments:t,loading:r,createEmployee:s,updateEmployee:a,deleteEmployee:o}=Ip(),[i,l]=h.useState(!1),[c,d]=h.useState(null),[u,f]=h.useState(null),[m,p]=h.useState("");h.useState("all");const w=Sn(),{toast:v}=rt(),{register:x,handleSubmit:g,reset:y,setValue:b,watch:j}=Ta(),S=async C=>{try{const k={full_name:C.full_name,email:C.email||`${C.full_name.toLowerCase().replace(/\s+/g,".")}@company.com`,job_title:C.job_title||null,employee_id:C.employee_id||`EMP${Date.now().toString().slice(-6)}`,hire_date:C.hire_date||null,contract_type:C.contract_type||"CDI",phone:C.phone||null,salary:C.salary?parseFloat(C.salary):null,weekly_hours:C.weekly_hours?parseFloat(C.weekly_hours):35,manager_id:C.manager_id||null,department_id:C.department_id||null,emergency_contact:C.emergency_name?{name:C.emergency_name,phone:C.emergency_phone,relation:C.emergency_relation}:null};c?await a(c.id,k):await s(k),v({title:"Succs",description:`Employ ${c?"modifi":"cr"} avec succs`}),y(),l(!1),d(null)}catch(k){console.error("Error managing employee:",k),v({title:"Erreur",description:`Impossible de ${c?"modifier":"crer"} l'employ`,variant:"destructive"})}},N=C=>{d(C),b("full_name",C.full_name),b("email",C.email),b("job_title",C.job_title),b("employee_id",C.employee_id),b("hire_date",C.hire_date),b("contract_type",C.contract_type),b("phone",C.phone),b("salary",C.salary),b("weekly_hours",C.weekly_hours),b("manager_id",C.manager_id),b("department_id",C.department_id),C.emergency_contact&&(b("emergency_name",C.emergency_contact.name),b("emergency_phone",C.emergency_contact.phone),b("emergency_relation",C.emergency_contact.relation)),l(!0)},_=async C=>{try{await o(C),v({title:"Succs",description:"Employ supprim avec succs"})}catch(k){console.error("Error deleting employee:",k),v({title:"Erreur",description:"Impossible de supprimer l'employ",variant:"destructive"})}},E=e.filter(C=>{var P,R;return C.full_name.toLowerCase().includes(m.toLowerCase())||((P=C.job_title)==null?void 0:P.toLowerCase().includes(m.toLowerCase()))||((R=C.employee_id)==null?void 0:R.toLowerCase().includes(m.toLowerCase()))}),D=C=>{switch(C){case"CDI":return"default";case"CDD":return"secondary";case"Stage":return"outline";case"Freelance":return"destructive";default:return"secondary"}};return r?n.jsx("div",{className:"p-6 text-center",children:"Chargement des employs..."}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Gestion Avance des Employs"}),n.jsxs(yt,{open:i,onOpenChange:C=>{l(C),C||(d(null),y())},children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{className:"hover-glow",children:[n.jsx(gs,{className:"h-4 w-4 mr-2"}),c?"Modifier":"Nouvel employ"]})}),n.jsxs(ft,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsx(ht,{children:n.jsx(mt,{children:c?"Modifier l'employ":"Crer un employ"})}),n.jsxs(pr,{defaultValue:"basic",className:"w-full",children:[n.jsxs(ar,{className:"grid w-full grid-cols-3",children:[n.jsx(Ce,{value:"basic",children:"Informations de base"}),n.jsx(Ce,{value:"work",children:"Travail"}),n.jsx(Ce,{value:"emergency",children:"Urgence"})]}),n.jsxs("form",{onSubmit:g(S),className:"space-y-4",children:[n.jsx(Ee,{value:"basic",className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx(J,{htmlFor:"full_name",children:"Nom complet *"}),n.jsx(ye,{id:"full_name",placeholder:"Jean Dupont",...x("full_name",{required:!0})})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"employee_id",children:"ID Employ"}),n.jsx(ye,{id:"employee_id",placeholder:"EMP001",...x("employee_id")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"phone",children:"Tlphone"}),n.jsx(ye,{id:"phone",placeholder:"+33 1 23 45 67 89",...x("phone")})]})]})}),n.jsx(Ee,{value:"work",className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"job_title",children:"Poste"}),n.jsx(ye,{id:"job_title",placeholder:"Dveloppeur",...x("job_title")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"contract_type",children:"Type de contrat"}),n.jsxs(Ie,{onValueChange:C=>b("contract_type",C),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"CDI"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"CDI",children:"CDI"}),n.jsx(ae,{value:"CDD",children:"CDD"}),n.jsx(ae,{value:"Stage",children:"Stage"}),n.jsx(ae,{value:"Freelance",children:"Freelance"})]})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"hire_date",children:"Date d'embauche"}),n.jsx(ye,{id:"hire_date",type:"date",...x("hire_date")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"weekly_hours",children:"Heures/semaine"}),n.jsx(ye,{id:"weekly_hours",type:"number",placeholder:"35",...x("weekly_hours")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"salary",children:"Salaire (/an)"}),n.jsx(ye,{id:"salary",type:"number",placeholder:"45000",...x("salary")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"manager_id",children:"Manager"}),n.jsxs(Ie,{onValueChange:C=>b("manager_id",C),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un manager"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"",children:"Aucun manager"}),e.map(C=>n.jsx(ae,{value:C.id,children:C.full_name},C.id))]})]})]})]})}),n.jsxs(Ee,{value:"emergency",className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold",children:"Contact d'urgence"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"emergency_name",children:"Nom"}),n.jsx(ye,{id:"emergency_name",placeholder:"Marie Dupont",...x("emergency_name")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"emergency_phone",children:"Tlphone"}),n.jsx(ye,{id:"emergency_phone",placeholder:"+33 1 23 45 67 89",...x("emergency_phone")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"emergency_relation",children:"Relation"}),n.jsxs(Ie,{onValueChange:C=>b("emergency_relation",C),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"conjoint",children:"Conjoint(e)"}),n.jsx(ae,{value:"parent",children:"Parent"}),n.jsx(ae,{value:"enfant",children:"Enfant"}),n.jsx(ae,{value:"frere_soeur",children:"Frre/Sur"}),n.jsx(ae,{value:"ami",children:"Ami(e)"}),n.jsx(ae,{value:"autre",children:"Autre"})]})]})]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-6",children:[n.jsx(L,{type:"submit",className:"flex-1",children:c?"Modifier":"Crer"}),n.jsx(L,{type:"button",variant:"outline",onClick:()=>{l(!1),d(null),y()},children:"Annuler"})]})]})]})]})]})]}),n.jsxs("div",{className:`grid gap-4 ${w?"grid-cols-2":"grid-cols-4"}`,children:[n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Employs"})]})})}),n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-success",children:e.filter(C=>C.contract_type==="CDI").length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"CDI"})]})})}),n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-warning",children:e.filter(C=>C.contract_type&&C.contract_type!=="CDI").length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Temporaires"})]})})}),n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-accent",children:e.filter(C=>{const k=C.hire_date?new Date(C.hire_date):null,P=new Date;return P.setMonth(P.getMonth()-3),k&&k>P}).length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Nouveaux (3m)"})]})})})]}),n.jsx("div",{className:"flex gap-4 items-center",children:n.jsx(ye,{placeholder:"Rechercher un employ...",value:m,onChange:C=>p(C.target.value),className:"max-w-md"})}),n.jsx("div",{className:"space-y-4",children:E.length===0?n.jsx(V,{className:"modern-card",children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(At,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucun employ trouv"})]})}):n.jsx("div",{className:`grid gap-4 ${w?"grid-cols-1":"grid-cols-2 lg:grid-cols-3"}`,children:E.map(C=>n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(ka,{className:"h-12 w-12",children:[n.jsx(zo,{src:C.avatar_url||void 0}),n.jsx(Da,{children:C.full_name.split(" ").map(k=>k[0]).join("").toUpperCase()})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg",children:C.full_name}),C.job_title&&n.jsx("p",{className:"text-sm text-muted-foreground",children:C.job_title}),C.contract_type&&n.jsx(re,{variant:D(C.contract_type),className:"text-xs mt-1",children:C.contract_type})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(L,{size:"sm",variant:"outline",onClick:()=>f(C),children:n.jsx(Ni,{className:"h-3 w-3"})}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>N(C),children:n.jsx($i,{className:"h-3 w-3"})}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>_(C.id),children:n.jsx(Hs,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[C.employee_id&&n.jsxs("p",{children:[n.jsx("strong",{children:"ID:"})," ",C.employee_id]}),C.hire_date&&n.jsxs("p",{children:[n.jsx("strong",{children:"Embauch:"})," ",new Date(C.hire_date).toLocaleDateString()]}),C.phone&&n.jsxs("p",{children:[n.jsx("strong",{children:"Tl:"})," ",C.phone]}),C.weekly_hours&&n.jsxs("p",{children:[n.jsx("strong",{children:"Temps:"})," ",C.weekly_hours,"h/sem"]})]})]})})},C.id))})}),n.jsx(gZ,{employee:u,isOpen:!!u,onOpenChange:C=>!C&&f(null)})]})},vZ=()=>{const{absenceTypes:e,loading:t,refetch:r}=Ks(),[s,a]=h.useState(!1),[o,i]=h.useState(null),l=Sn(),{toast:c}=rt(),{register:d,handleSubmit:u,reset:f,setValue:m,watch:p}=Ta(),w=async g=>{try{const y={name:g.name,code:g.code,color:g.color,requires_approval:g.requires_approval,deducts_from_balance:g.deducts_from_balance,max_days_per_year:g.max_days_per_year?parseInt(g.max_days_per_year):null};let b;if(o?{error:b}=await O.from("absence_types").update(y).eq("id",o.id):{error:b}=await O.from("absence_types").insert(y),b)throw b;c({title:"Succs",description:`Type d'absence ${o?"modifi":"cr"} avec succs`}),f(),a(!1),i(null),r()}catch(y){console.error("Error managing absence type:",y),c({title:"Erreur",description:`Impossible de ${o?"modifier":"crer"} le type d'absence`,variant:"destructive"})}},v=g=>{i(g),m("name",g.name),m("code",g.code),m("color",g.color),m("requires_approval",g.requires_approval),m("deducts_from_balance",g.deducts_from_balance),m("max_days_per_year",g.max_days_per_year),a(!0)},x=async g=>{try{const{error:y}=await O.from("absence_types").delete().eq("id",g);if(y)throw y;c({title:"Succs",description:"Type d'absence supprim avec succs"}),r()}catch(y){console.error("Error deleting absence type:",y),c({title:"Erreur",description:"Impossible de supprimer le type d'absence",variant:"destructive"})}};return t?n.jsx("div",{className:"p-6 text-center",children:"Chargement des types d'absence..."}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Types d'Absence"}),n.jsxs(yt,{open:s,onOpenChange:g=>{a(g),g||(i(null),f())},children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{className:"hover-glow",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Nouveau type"]})}),n.jsxs(ft,{className:"max-w-md",children:[n.jsx(ht,{children:n.jsx(mt,{children:o?"Modifier le type":"Crer un type d'absence"})}),n.jsxs("form",{onSubmit:u(w),className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"name",children:"Nom"}),n.jsx(ye,{id:"name",placeholder:"Congs pays",...d("name",{required:!0})})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"code",children:"Code"}),n.jsx(ye,{id:"code",placeholder:"CP",...d("code",{required:!0})})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"color",children:"Couleur"}),n.jsx(ye,{id:"color",type:"color",defaultValue:"#3B82F6",...d("color")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"max_days_per_year",children:"Jours maximum par an"}),n.jsx(ye,{id:"max_days_per_year",type:"number",placeholder:"25",...d("max_days_per_year")})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(J,{htmlFor:"requires_approval",children:"Ncessite une approbation"}),n.jsx(rc,{id:"requires_approval",defaultChecked:!0,onCheckedChange:g=>m("requires_approval",g)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(J,{htmlFor:"deducts_from_balance",children:"Dduit du solde"}),n.jsx(rc,{id:"deducts_from_balance",defaultChecked:!0,onCheckedChange:g=>m("deducts_from_balance",g)})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{type:"submit",className:"flex-1",children:o?"Modifier":"Crer"}),n.jsx(L,{type:"button",variant:"outline",onClick:()=>{a(!1),i(null),f()},children:"Annuler"})]})]})]})]})]}),n.jsx("div",{className:"space-y-4",children:e.length===0?n.jsx(V,{className:"modern-card",children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucun type d'absence configur"})]})}):n.jsx("div",{className:`grid gap-4 ${l?"grid-cols-1":"grid-cols-2 lg:grid-cols-3"}`,children:e.map(g=>n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-background",style:{backgroundColor:g.color}}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:g.name}),n.jsx(re,{variant:"outline",className:"text-xs",children:g.code})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(L,{size:"sm",variant:"outline",onClick:()=>v(g),children:n.jsx($i,{className:"h-3 w-3"})}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>x(g.id),children:n.jsx(Hs,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[g.max_days_per_year&&n.jsxs("p",{children:[n.jsx("strong",{children:"Max/an:"})," ",g.max_days_per_year," jours"]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.requires_approval&&n.jsx(re,{variant:"secondary",className:"text-xs",children:"Approbation requise"}),g.deducts_from_balance&&n.jsx(re,{variant:"secondary",className:"text-xs",children:"Dduit du solde"})]})]})]})})},g.id))})})]})},yZ=()=>{const{absenceTypes:e,employees:t,leaveBalances:r,loading:s,refresh:a}=Ks(),[o,i]=h.useState(!1),[l,c]=h.useState(new Date().getFullYear()),d=Sn(),{toast:u}=rt(),{register:f,handleSubmit:m,reset:p,setValue:w}=Ta(),v=new Date().getFullYear(),x=[v-1,v,v+1],g=r.filter(j=>j.year===l),y=async j=>{try{const S={employee_id:j.employee_id,absence_type_id:j.absence_type_id,year:parseInt(j.year),total_days:parseFloat(j.total_days),used_days:0,remaining_days:parseFloat(j.total_days)},{error:N}=await O.from("leave_balances").insert(S);if(N)throw N;u({title:"Succs",description:"Solde de congs cr avec succs"}),p(),i(!1),a()}catch(S){console.error("Error creating leave balance:",S),u({title:"Erreur",description:"Impossible de crer le solde de congs",variant:"destructive"})}},b=async(j,S)=>{try{const N=r.find(D=>D.id===j);if(!N)return;const _=Math.max(0,S-N.used_days),{error:E}=await O.from("leave_balances").update({total_days:S,remaining_days:_}).eq("id",j);if(E)throw E;u({title:"Succs",description:"Solde mis  jour avec succs"}),a()}catch(N){console.error("Error updating balance:",N),u({title:"Erreur",description:"Impossible de mettre  jour le solde",variant:"destructive"})}};return s?n.jsx("div",{className:"p-6 text-center",children:"Chargement des soldes de congs..."}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Soldes de Congs"}),n.jsxs(yt,{open:o,onOpenChange:i,children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{className:"hover-glow",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Nouveau solde"]})}),n.jsxs(ft,{className:"max-w-md",children:[n.jsx(ht,{children:n.jsx(mt,{children:"Crer un solde de congs"})}),n.jsxs("form",{onSubmit:m(y),className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"employee_id",children:"Employ"}),n.jsxs(Ie,{onValueChange:j=>w("employee_id",j),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un employ"})}),n.jsx(Re,{children:t.map(j=>n.jsx(ae,{value:j.id,children:j.full_name},j.id))})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"absence_type_id",children:"Type d'absence"}),n.jsxs(Ie,{onValueChange:j=>w("absence_type_id",j),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un type"})}),n.jsx(Re,{children:e.map(j=>n.jsx(ae,{value:j.id,children:j.name},j.id))})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"year",children:"Anne"}),n.jsxs(Ie,{onValueChange:j=>w("year",j),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner une anne"})}),n.jsx(Re,{children:x.map(j=>n.jsx(ae,{value:j.toString(),children:j},j))})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"total_days",children:"Nombre de jours total"}),n.jsx(ye,{id:"total_days",type:"number",step:"0.5",placeholder:"25",...f("total_days",{required:!0})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{type:"submit",className:"flex-1",children:"Crer"}),n.jsx(L,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Annuler"})]})]})]})]})]}),n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsx(J,{children:"Anne :"}),n.jsxs(Ie,{value:l.toString(),onValueChange:j=>c(parseInt(j)),children:[n.jsx(Pe,{className:"w-32",children:n.jsx(Oe,{})}),n.jsx(Re,{children:x.map(j=>n.jsx(ae,{value:j.toString(),children:j},j))})]})]}),n.jsx("div",{className:"space-y-4",children:g.length===0?n.jsx(V,{className:"modern-card",children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(z5,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsxs("p",{className:"text-muted-foreground",children:["Aucun solde de congs configur pour ",l]})]})}):n.jsx("div",{className:`grid gap-4 ${d?"grid-cols-1":"grid-cols-2 lg:grid-cols-3"}`,children:g.map(j=>{const S=t.find(E=>E.user_id===j.employee_id),N=e.find(E=>E.id===j.absence_type_id),_=j.total_days>0?j.used_days/j.total_days*100:0;return n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:(S==null?void 0:S.full_name)||"Employ inconnu"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[(N==null?void 0:N.name)||"Type inconnu"," - ",j.year]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Utilis"}),n.jsxs("span",{children:[j.used_days," / ",j.total_days," jours"]})]}),n.jsx(Ot,{value:_,className:"h-2"}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Restant: ",j.remaining_days," jour(s)"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(J,{htmlFor:`total-${j.id}`,className:"text-xs",children:"Total:"}),n.jsx(ye,{id:`total-${j.id}`,type:"number",step:"0.5",defaultValue:j.total_days,className:"h-8 text-sm",onBlur:E=>{const D=parseFloat(E.target.value);D!==j.total_days&&D>0&&b(j.id,D)}})]})]})})},j.id)})})})]})},wZ=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState(!0),[i,l]=h.useState(!1),[c,d]=h.useState(x(new Date)),u=Sn(),{toast:f}=rt(),{register:m,handleSubmit:p,reset:w,setValue:v}=Ta();function x(N){const _=new Date(N);return _.setDate(N.getDate()-N.getDay()+1),_.toISOString().split("T")[0]}const g=async()=>{try{o(!0);const[N,_]=await Promise.all([O.from("timesheets").select("*").order("date",{ascending:!1}),O.from("profiles").select("id, full_name")]);if(N.error)throw N.error;if(_.error)throw _.error;t(N.data||[]),s(_.data||[])}catch(N){console.error("Error fetching data:",N),f({title:"Erreur",description:"Impossible de charger les donnes",variant:"destructive"})}finally{o(!1)}};h.useEffect(()=>{g()},[]);const y=async N=>{try{const _={employee_id:N.employee_id,date:N.date,hours:parseFloat(N.hours),description:N.description||null,billable:N.billable||!1,approved:!1},{error:E}=await O.from("timesheets").insert(_);if(E)throw E;f({title:"Succs",description:"Feuille de temps cre avec succs"}),w(),l(!1),g()}catch(_){console.error("Error creating timesheet:",_),f({title:"Erreur",description:"Impossible de crer la feuille de temps",variant:"destructive"})}},b=async N=>{try{const{error:_}=await O.from("timesheets").update({approved:!0}).eq("id",N);if(_)throw _;f({title:"Succs",description:"Feuille de temps approuve"}),g()}catch(_){console.error("Error approving timesheet:",_),f({title:"Erreur",description:"Impossible d'approuver la feuille de temps",variant:"destructive"})}},j=async N=>{try{const{error:_}=await O.from("timesheets").update({approved:!1}).eq("id",N);if(_)throw _;f({title:"Succs",description:"Feuille de temps rejete"}),g()}catch(_){console.error("Error rejecting timesheet:",_),f({title:"Erreur",description:"Impossible de rejeter la feuille de temps",variant:"destructive"})}},S=e.filter(N=>{const _=new Date(N.date),E=new Date(c),D=new Date(E);return D.setDate(E.getDate()+6),_>=E&&_<=D});return a?n.jsx("div",{className:"p-6 text-center",children:"Chargement des feuilles de temps..."}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Feuilles de Temps"}),n.jsxs(yt,{open:i,onOpenChange:l,children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{className:"hover-glow",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Nouvelle feuille"]})}),n.jsxs(ft,{className:"max-w-md",children:[n.jsx(ht,{children:n.jsx(mt,{children:"Crer une feuille de temps"})}),n.jsxs("form",{onSubmit:p(y),className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"employee_id",children:"Employ"}),n.jsxs(Ie,{onValueChange:N=>v("employee_id",N),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un employ"})}),n.jsx(Re,{children:r.map(N=>n.jsx(ae,{value:N.id,children:N.full_name},N.id))})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"date",children:"Date"}),n.jsx(ye,{id:"date",type:"date",defaultValue:new Date().toISOString().split("T")[0],...m("date",{required:!0})})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"hours",children:"Heures travailles"}),n.jsx(ye,{id:"hours",type:"number",step:"0.25",placeholder:"8",...m("hours",{required:!0,min:0})})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"description",children:"Description (optionnel)"}),n.jsx(on,{id:"description",placeholder:"Description du travail effectu...",...m("description")})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(J,{htmlFor:"billable",children:"Facturable"}),n.jsx(rc,{id:"billable",onCheckedChange:N=>v("billable",N)})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{type:"submit",className:"flex-1",children:"Crer"}),n.jsx(L,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Annuler"})]})]})]})]})]}),n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsx(J,{children:"Semaine du :"}),n.jsx(ye,{type:"date",value:c,onChange:N=>d(N.target.value),className:"w-48"})]}),n.jsxs("div",{className:`grid gap-4 ${u?"grid-cols-2":"grid-cols-4"}`,children:[n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:[S.reduce((N,_)=>N+_.hours,0).toFixed(1),"h"]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Heures totales"})]})})}),n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-success",children:[S.filter(N=>N.billable).reduce((N,_)=>N+_.hours,0).toFixed(1),"h"]}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Facturables"})]})})}),n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-warning",children:S.filter(N=>!N.approved).length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"En attente"})]})})}),n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-accent",children:S.filter(N=>N.approved).length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Approuves"})]})})})]}),n.jsx("div",{className:"space-y-4",children:S.length===0?n.jsx(V,{className:"modern-card",children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(lt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucune feuille de temps pour cette semaine"})]})}):S.map(N=>{const _=r.find(E=>E.user_id===N.employee_id);return n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:`${u?"space-y-4":"flex items-center justify-between"}`,children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:(_==null?void 0:_.full_name)||"Employ inconnu"}),n.jsx(re,{variant:N.approved?"default":"secondary",children:N.approved?"Approuve":"En attente"}),N.billable&&n.jsx(re,{variant:"outline",children:"Facturable"})]}),n.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Date:"})," ",new Date(N.date).toLocaleDateString()]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Heures:"})," ",N.hours,"h"]}),N.description&&n.jsxs("p",{children:[n.jsx("strong",{children:"Description:"})," ",N.description]})]})]}),!N.approved&&n.jsxs("div",{className:`flex gap-2 ${u?"w-full":""}`,children:[n.jsxs(L,{size:"sm",onClick:()=>b(N.id),className:"hover-glow",children:[n.jsx(Ea,{className:"h-4 w-4 mr-1"}),"Approuver"]}),n.jsxs(L,{size:"sm",variant:"outline",onClick:()=>j(N.id),children:[n.jsx(Ro,{className:"h-4 w-4 mr-1"}),"Rejeter"]})]})]})})},N.id)})})]})},bZ=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState(!0),[i,l]=h.useState(!1),[c,d]=h.useState(null),u=Sn(),{toast:f}=rt(),{register:m,handleSubmit:p,reset:w,setValue:v}=Ta(),x=async()=>{try{o(!0);const[j,S]=await Promise.all([O.from("departments").select("*").order("name"),O.from("profiles").select("id, full_name")]);if(j.error)throw j.error;if(S.error)throw S.error;t(j.data||[]),s(S.data||[])}catch(j){console.error("Error fetching data:",j),f({title:"Erreur",description:"Impossible de charger les donnes",variant:"destructive"})}finally{o(!1)}};h.useEffect(()=>{x()},[]);const g=async j=>{try{const S={name:j.name,description:j.description||null,manager_id:j.manager_id||null,budget:j.budget?parseFloat(j.budget):null};let N;if(c?{error:N}=await O.from("departments").update(S).eq("id",c.id):{error:N}=await O.from("departments").insert(S),N)throw N;f({title:"Succs",description:`Dpartement ${c?"modifi":"cr"} avec succs`}),w(),l(!1),d(null),x()}catch(S){console.error("Error managing department:",S),f({title:"Erreur",description:`Impossible de ${c?"modifier":"crer"} le dpartement`,variant:"destructive"})}},y=j=>{d(j),v("name",j.name),v("description",j.description),v("manager_id",j.manager_id),v("budget",j.budget),l(!0)},b=async j=>{try{const{error:S}=await O.from("departments").delete().eq("id",j);if(S)throw S;f({title:"Succs",description:"Dpartement supprim avec succs"}),x()}catch(S){console.error("Error deleting department:",S),f({title:"Erreur",description:"Impossible de supprimer le dpartement",variant:"destructive"})}};return a?n.jsx("div",{className:"p-6 text-center",children:"Chargement des dpartements..."}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Dpartements"}),n.jsxs(yt,{open:i,onOpenChange:j=>{l(j),j||(d(null),w())},children:[n.jsx(bn,{asChild:!0,children:n.jsxs(L,{className:"hover-glow",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Nouveau dpartement"]})}),n.jsxs(ft,{className:"max-w-md",children:[n.jsx(ht,{children:n.jsx(mt,{children:c?"Modifier le dpartement":"Crer un dpartement"})}),n.jsxs("form",{onSubmit:p(g),className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"name",children:"Nom"}),n.jsx(ye,{id:"name",placeholder:"Ressources Humaines",...m("name",{required:!0})})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"description",children:"Description"}),n.jsx(on,{id:"description",placeholder:"Description du dpartement...",...m("description")})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"manager_id",children:"Manager"}),n.jsxs(Ie,{onValueChange:j=>v("manager_id",j),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un manager"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"",children:"Aucun manager"}),r.map(j=>n.jsx(ae,{value:j.id,children:j.full_name},j.id))]})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"budget",children:"Budget annuel ()"}),n.jsx(ye,{id:"budget",type:"number",placeholder:"100000",...m("budget")})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{type:"submit",className:"flex-1",children:c?"Modifier":"Crer"}),n.jsx(L,{type:"button",variant:"outline",onClick:()=>{l(!1),d(null),w()},children:"Annuler"})]})]})]})]})]}),n.jsx("div",{className:"space-y-4",children:e.length===0?n.jsx(V,{className:"modern-card",children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(ao,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucun dpartement configur"})]})}):n.jsx("div",{className:`grid gap-4 ${u?"grid-cols-1":"grid-cols-2 lg:grid-cols-3"}`,children:e.map(j=>{const S=r.find(N=>N.id===j.manager_id);return n.jsx(V,{className:"modern-card hover-glow",children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ao,{className:"h-6 w-6 text-primary"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:j.name}),j.description&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:j.description})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(L,{size:"sm",variant:"outline",onClick:()=>y(j),children:n.jsx($i,{className:"h-3 w-3"})}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>b(j.id),children:n.jsx(Hs,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[S&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs(re,{variant:"outline",className:"text-xs",children:["Manager: ",S.full_name]})}),j.budget&&n.jsxs("p",{className:"text-muted-foreground",children:[n.jsx("strong",{children:"Budget:"})," ",j.budget.toLocaleString()," "]}),n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(At,{className:"h-4 w-4"}),n.jsx("span",{children:"Employs du dpartement"})]})]})]})})},j.id)})})})]})},jZ=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState([]),[i,l]=h.useState([]),[c,d]=h.useState(!0),[u,f]=h.useState(null),{toast:m}=rt(),p=async()=>{try{d(!0),f(null);const[g,y,b,j]=await Promise.all([O.from("onboarding_processes").select("*").order("created_at",{ascending:!1}),O.from("offboarding_processes").select("*").order("created_at",{ascending:!1}),O.from("onboarding_tasks").select("*").order("due_date"),O.from("offboarding_tasks").select("*").order("due_date")]);if(g.error)throw g.error;if(y.error)throw y.error;if(b.error)throw b.error;if(j.error)throw j.error;t(g.data||[]),s(y.data||[]),o(b.data||[]),l(j.data||[])}catch(g){console.error("Error fetching onboarding/offboarding data:",g),f(g.message)}finally{d(!1)}},w=async g=>{try{const{error:y}=await O.from("onboarding_processes").insert(g);if(y)throw y;m({title:"Succs",description:"Processus d'onboarding cr avec succs"}),p()}catch(y){console.error("Error creating onboarding process:",y),m({title:"Erreur",description:"Impossible de crer le processus d'onboarding",variant:"destructive"})}},v=async g=>{try{const{error:y}=await O.from("offboarding_processes").insert(g);if(y)throw y;m({title:"Succs",description:"Processus d'offboarding cr avec succs"}),p()}catch(y){console.error("Error creating offboarding process:",y),m({title:"Erreur",description:"Impossible de crer le processus d'offboarding",variant:"destructive"})}},x=async(g,y,b)=>{try{const j=b?"onboarding_tasks":"offboarding_tasks",{error:S}=await O.from(j).update({status:y}).eq("id",g);if(S)throw S;m({title:"Succs",description:"Statut de la tche mis  jour"}),p()}catch(j){console.error("Error updating task status:",j),m({title:"Erreur",description:"Impossible de mettre  jour le statut de la tche",variant:"destructive"})}};return h.useEffect(()=>{p()},[]),{onboardingProcesses:e,offboardingProcesses:r,onboardingTasks:a,offboardingTasks:i,loading:c,error:u,refetch:p,createOnboardingProcess:w,createOffboardingProcess:v,updateTaskStatus:x}},NZ=()=>{const[e,t]=h.useState("onboarding"),{onboardingProcesses:r,offboardingProcesses:s,onboardingTasks:a,offboardingTasks:o,loading:i,error:l,updateTaskStatus:c}=jZ();if(i)return n.jsx("div",{className:"p-6 text-center",children:"Chargement..."});if(l)return n.jsxs("div",{className:"p-6 text-center text-destructive",children:["Erreur: ",l]});const d=(p,w)=>(w?a:o).filter(x=>x.process_id===p),u=(p,w)=>{const v=d(p,w);if(v.length===0)return 0;const x=v.filter(g=>g.status==="completed").length;return Math.round(x/v.length*100)},f=p=>{switch(p){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"scheduled":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=p=>{switch(p){case"rh":return n.jsx(nr,{className:"h-4 w-4"});case"it":return n.jsx(x2,{className:"h-4 w-4"});case"manager":return n.jsx(nr,{className:"h-4 w-4"});case"employee":return n.jsx(nr,{className:"h-4 w-4"});default:return n.jsx(nr,{className:"h-4 w-4"})}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Onboarding & Offboarding"}),n.jsx("p",{className:"text-muted-foreground",children:"Processus d'intgration et de dpart des employs"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(L,{children:[n.jsx(gs,{className:"h-4 w-4 mr-2"}),"Nouveau processus"]})})]}),n.jsxs(pr,{value:e,onValueChange:t,children:[n.jsxs(ar,{className:"grid w-full grid-cols-2",children:[n.jsxs(Ce,{value:"onboarding",className:"flex items-center gap-2",children:[n.jsx(gs,{className:"h-4 w-4"}),"Onboarding"]}),n.jsxs(Ce,{value:"offboarding",className:"flex items-center gap-2",children:[n.jsx($5,{className:"h-4 w-4"}),"Offboarding"]})]}),n.jsx(Ee,{value:"onboarding",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:r.map(p=>{const w=d(p.id,!0),v=u(p.id,!0);return n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ce,{className:"text-lg",children:p.employee_name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.position,"  ",p.department]})]}),n.jsxs(re,{className:f(p.status),children:[p.status==="in_progress"&&n.jsx(lt,{className:"h-3 w-3 mr-1"}),p.status==="completed"&&n.jsx(Yt,{className:"h-3 w-3 mr-1"}),p.status==="pending"&&n.jsx(Kt,{className:"h-3 w-3 mr-1"}),p.status]})]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(ze,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:["Dbut: ",new Date(p.start_date).toLocaleDateString()]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Progression"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[v,"%"]})]}),n.jsx(Ot,{value:v,className:"h-2"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium",children:"Tches en cours"}),w.map(x=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[m(x.category),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:x.title}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Responsable: ",x.responsible,"  chance: ",new Date(x.due_date).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(re,{variant:"outline",className:f(x.status),children:x.status}),x.status==="pending"&&n.jsx(L,{size:"sm",onClick:()=>c(x.id,"completed",!0),children:n.jsx(Yt,{className:"h-3 w-3"})})]})]},x.id))]})]})]},p.id)})})}),n.jsx(Ee,{value:"offboarding",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:s.map(p=>{const w=d(p.id,!1),v=u(p.id,!1);return n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ce,{className:"text-lg",children:p.employee_name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.position,"  ",p.department]})]}),n.jsxs(re,{className:f(p.status),children:[p.status==="in_progress"&&n.jsx(lt,{className:"h-3 w-3 mr-1"}),p.status==="completed"&&n.jsx(Yt,{className:"h-3 w-3 mr-1"}),p.status==="scheduled"&&n.jsx(Kt,{className:"h-3 w-3 mr-1"}),p.status]})]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(ze,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:["Dernier jour: ",new Date(p.last_work_day).toLocaleDateString()]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Progression"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[v,"%"]})]}),n.jsx(Ot,{value:v,className:"h-2"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium",children:"Tches  complter"}),w.map(x=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[m(x.category),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:x.title}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Responsable: ",x.responsible,"  chance: ",new Date(x.due_date).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(re,{variant:"outline",className:f(x.status),children:x.status}),x.status==="pending"&&n.jsx(L,{size:"sm",onClick:()=>c(x.id,"completed",!1),children:n.jsx(Yt,{className:"h-3 w-3"})})]})]},x.id))]})]})]},p.id)})})})]})]})},SZ=()=>{var S;const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState(!0),[i,l]=h.useState(null),{toast:c}=rt(),{tenantId:d}=Uu(),{userRoles:u}=Fo(),f=(S=u[0])==null?void 0:S.tenant_id,m=d||f,p=async()=>{try{o(!0),l(null);const{data:N,error:_}=await O.from("objectives").select("*").order("created_at",{ascending:!1});if(_)throw _;const{data:E,error:D}=await O.from("evaluations").select("*").order("created_at",{ascending:!1});if(D)throw D;t(N||[]),s(E||[])}catch(N){console.error("Error fetching performance data:",N),l(N.message),c({title:"Erreur",description:"Impossible de charger les donnes de performance",variant:"destructive"})}finally{o(!1)}};return h.useEffect(()=>{m&&p()},[m]),{objectives:e,evaluations:r,keyResults:[],evaluationCategories:[],loading:a,error:i,refresh:p,createObjective:async N=>{try{const{error:_}=await O.from("objectives").insert([N]);if(_)throw _;c({title:"Objectif cr",description:"L'objectif a t cr avec succs"}),await p()}catch(_){throw console.error("Error creating objective:",_),c({title:"Erreur",description:"Impossible de crer l'objectif",variant:"destructive"}),_}},createEvaluation:async N=>{try{const{error:_}=await O.from("evaluations").insert([N]);if(_)throw _;c({title:"valuation cre",description:"L'valuation a t cre avec succs"}),await p()}catch(_){throw console.error("Error creating evaluation:",_),c({title:"Erreur",description:"Impossible de crer l'valuation",variant:"destructive"}),_}},updateObjective:async(N,_)=>{try{const{error:E}=await O.from("objectives").update(_).eq("id",N);if(E)throw E;c({title:"Objectif mis  jour",description:"L'objectif a t mis  jour avec succs"}),await p()}catch(E){throw console.error("Error updating objective:",E),c({title:"Erreur",description:"Impossible de mettre  jour l'objectif",variant:"destructive"}),E}},deleteObjective:async N=>{try{const{error:_}=await O.from("objectives").delete().eq("id",N);if(_)throw _;c({title:"Objectif supprim",description:"L'objectif a t supprim avec succs"}),await p()}catch(_){throw console.error("Error deleting objective:",_),c({title:"Erreur",description:"Impossible de supprimer l'objectif",variant:"destructive"}),_}},getKeyResultsByObjective:N=>[],getCategoriesByEvaluation:N=>[],getPerformanceStats:()=>({totalObjectives:e.length,completedObjectives:e.filter(N=>N.status==="completed").length,totalEvaluations:r.length,averageScore:0})}},IS=({onCreateObjective:e,trigger:t})=>{const[r,s]=h.useState(!1),{employees:a,departments:o}=Ip(),{register:i,handleSubmit:l,setValue:c,watch:d,reset:u,formState:{errors:f}}=Ta({defaultValues:{progress:0,status:"draft",type:"individual"}}),m=d("employee_name"),p=a.find(x=>x.full_name===m),w=x=>{const g=a.find(y=>y.full_name===x.employee_name);e({...x,employee_id:(g==null?void 0:g.user_id)||void 0,department:(g==null?void 0:g.job_title)||x.department||"Non spcifi"}),s(!1),u()},v=x=>{c("employee_name",x);const g=a.find(y=>y.full_name===x);g!=null&&g.job_title&&c("department",g.job_title)};return n.jsxs(yt,{open:r,onOpenChange:s,children:[n.jsx(bn,{asChild:!0,children:t||n.jsxs(L,{variant:"outline",children:[n.jsx(hn,{className:"h-4 w-4 mr-2"}),"Nouvel objectif"]})}),n.jsxs(ft,{className:"sm:max-w-[600px]",children:[n.jsx(ht,{children:n.jsx(mt,{children:"Crer un nouvel objectif"})}),n.jsxs("form",{onSubmit:l(w),className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"title",children:"Titre de l'objectif *"}),n.jsx(ye,{id:"title",...i("title",{required:"Le titre est obligatoire"}),placeholder:"Ex: Amliorer la satisfaction client"}),f.title&&n.jsx("p",{className:"text-sm text-red-500",children:f.title.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"type",children:"Type d'objectif"}),n.jsxs(Ie,{onValueChange:x=>c("type",x),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner le type"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"individual",children:"Individuel"}),n.jsx(ae,{value:"team",children:"quipe"}),n.jsx(ae,{value:"okr",children:"OKR"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"description",children:"Description"}),n.jsx(on,{id:"description",...i("description"),placeholder:"Dcrivez l'objectif en dtail...",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"employee_name",children:"Employ *"}),n.jsxs(Ie,{onValueChange:v,children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un employ"})}),n.jsx(Re,{children:a.map(x=>n.jsxs(ae,{value:x.full_name,children:[x.full_name," ",x.job_title&&`(${x.job_title})`]},x.id))})]}),f.employee_name&&n.jsx("p",{className:"text-sm text-red-500",children:f.employee_name.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"department",children:"Dpartement"}),n.jsx(ye,{id:"department",...i("department"),value:(p==null?void 0:p.job_title)||d("department")||"",placeholder:"Dpartement",readOnly:!!(p!=null&&p.job_title)})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"due_date",children:"Date d'chance *"}),n.jsx(ye,{id:"due_date",type:"date",...i("due_date",{required:"La date d'chance est obligatoire"})}),f.due_date&&n.jsx("p",{className:"text-sm text-red-500",children:f.due_date.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"status",children:"Statut initial"}),n.jsxs(Ie,{onValueChange:x=>c("status",x),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Statut"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"draft",children:"Brouillon"}),n.jsx(ae,{value:"active",children:"Actif"})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx(L,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Annuler"}),n.jsx(L,{type:"submit",children:"Crer l'objectif"})]})]})]})]})},OS=({onCreateEvaluation:e,trigger:t})=>{const[r,s]=h.useState(!1),{employees:a}=Ip(),{register:o,handleSubmit:i,setValue:l,watch:c,reset:d,formState:{errors:u}}=Ta({defaultValues:{status:"scheduled",type:"quarterly",overall_score:0}}),f=c("type"),m=v=>{const x=a.find(y=>y.full_name===v.employee_name),g=a.find(y=>y.full_name===v.evaluator_name);e({...v,employee_id:(x==null?void 0:x.user_id)||void 0,evaluator_id:(g==null?void 0:g.user_id)||void 0}),s(!1),d()},p=v=>{const x=new Date,g=x.getFullYear(),y=Math.ceil((x.getMonth()+1)/3);switch(v){case"annual":return g.toString();case"quarterly":return`Q${y} ${g}`;case"360":return`360 ${g}`;default:return""}},w=v=>{l("type",v);const x=p(v);l("period",x)};return n.jsxs(yt,{open:r,onOpenChange:s,children:[n.jsx(bn,{asChild:!0,children:t||n.jsxs(L,{children:[n.jsx(fa,{className:"h-4 w-4 mr-2"}),"Nouvelle valuation"]})}),n.jsxs(ft,{className:"sm:max-w-[600px]",children:[n.jsx(ht,{children:n.jsx(mt,{children:"Crer une nouvelle valuation"})}),n.jsxs("form",{onSubmit:i(m),className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"employee_name",children:"Employ valu *"}),n.jsxs(Ie,{onValueChange:v=>l("employee_name",v),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un employ"})}),n.jsx(Re,{children:a.map(v=>n.jsxs(ae,{value:v.full_name,children:[v.full_name," ",v.job_title&&`(${v.job_title})`]},v.id))})]}),u.employee_name&&n.jsx("p",{className:"text-sm text-red-500",children:u.employee_name.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"evaluator_name",children:"valuateur *"}),n.jsxs(Ie,{onValueChange:v=>l("evaluator_name",v),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un valuateur"})}),n.jsxs(Re,{children:[a.map(v=>n.jsxs(ae,{value:v.full_name,children:[v.full_name," ",v.job_title&&`(${v.job_title})`]},v.id)),n.jsx(ae,{value:"Direction RH",children:"Direction RH"}),n.jsx(ae,{value:"Direction Gnrale",children:"Direction Gnrale"})]})]}),u.evaluator_name&&n.jsx("p",{className:"text-sm text-red-500",children:u.evaluator_name.message})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"type",children:"Type d'valuation *"}),n.jsxs(Ie,{onValueChange:w,children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Type d'valuation"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"quarterly",children:"Trimestrielle"}),n.jsx(ae,{value:"annual",children:"Annuelle"}),n.jsx(ae,{value:"360",children:"valuation 360"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"period",children:"Priode *"}),n.jsx(ye,{id:"period",...o("period",{required:"La priode est obligatoire"}),placeholder:"Ex: Q1 2024",value:c("period")}),u.period&&n.jsx("p",{className:"text-sm text-red-500",children:u.period.message})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"status",children:"Statut initial"}),n.jsxs(Ie,{onValueChange:v=>l("status",v),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Statut"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"scheduled",children:"Planifie"}),n.jsx(ae,{value:"in_progress",children:"En cours"})]})]})]}),f==="360"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"overall_score",children:"Score initial (optionnel)"}),n.jsx(ye,{id:"overall_score",type:"number",step:"0.1",min:"0",max:"5",...o("overall_score",{min:0,max:5}),placeholder:"0.0"})]})]}),n.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Information"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[f==="annual"&&"L'valuation annuelle permet un bilan complet des performances sur l'anne.",f==="quarterly"&&"L'valuation trimestrielle offre un suivi rgulier des objectifs.",f==="360"&&"L'valuation 360 implique plusieurs valuateurs pour une vision complte."]})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx(L,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Annuler"}),n.jsx(L,{type:"submit",children:"Crer l'valuation"})]})]})]})]})},_Z=()=>{const[e,t]=h.useState("objectives"),{objectives:r,evaluations:s,keyResults:a,evaluationCategories:o,loading:i,error:l,createObjective:c,createEvaluation:d,getKeyResultsByObjective:u,getCategoriesByEvaluation:f,getPerformanceStats:m}=SZ();if(i)return n.jsxs("div",{className:"flex items-center justify-center p-8",children:[n.jsx(Vs,{className:"h-8 w-8 animate-spin"}),n.jsx("span",{className:"ml-2",children:"Chargement des donnes de performance..."})]});if(l)return n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-500 mb-2",children:"Erreur lors du chargement des donnes"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:l})]})});const p=m(),w=g=>{switch(g){case"completed":return"bg-green-100 text-green-800 border-green-200";case"active":return"bg-blue-100 text-blue-800 border-blue-200";case"draft":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=g=>{switch(g){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in-progress":return"bg-blue-100 text-blue-800 border-blue-200";case"scheduled":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=g=>g>=4.5?"text-green-600":g>=3.5?"text-blue-600":g>=2.5?"text-yellow-600":"text-red-600";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"valuations & Objectifs"}),n.jsx("p",{className:"text-muted-foreground",children:"Gestion de la performance et des objectifs"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(IS,{onCreateObjective:c}),n.jsx(OS,{onCreateEvaluation:d})]})]}),n.jsxs(pr,{value:e,onValueChange:t,children:[n.jsxs(ar,{className:"grid w-full grid-cols-3",children:[n.jsxs(Ce,{value:"objectives",className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-4 w-4"}),"Objectifs & OKR"]}),n.jsxs(Ce,{value:"evaluations",className:"flex items-center gap-2",children:[n.jsx(fa,{className:"h-4 w-4"}),"valuations"]}),n.jsxs(Ce,{value:"analytics",className:"flex items-center gap-2",children:[n.jsx(xr,{className:"h-4 w-4"}),"Analytics"]})]}),n.jsx(Ee,{value:"objectives",className:"space-y-4",children:r.length===0?n.jsx(V,{children:n.jsx(W,{className:"flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx(hn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun objectif trouv"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Commencez par crer votre premier objectif"}),n.jsx(IS,{onCreateObjective:c})]})})}):n.jsx("div",{className:"grid gap-4",children:r.map(g=>{const y=u(g.id);return n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(ce,{className:"text-lg flex items-center gap-2",children:[g.type==="individual"&&n.jsx(hn,{className:"h-5 w-5"}),g.type==="team"&&n.jsx(At,{className:"h-5 w-5"}),g.type==="okr"&&n.jsx(Vh,{className:"h-5 w-5"}),g.title]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.employee_name,"  ",g.department]})]}),n.jsx(re,{className:w(g.status),children:g.status==="active"?"Actif":g.status==="completed"?"Termin":g.status==="draft"?"Brouillon":"Annul"})]})}),n.jsxs(W,{className:"space-y-4",children:[g.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:g.description}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(ze,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:["chance: ",Ve(new Date(g.due_date),"dd MMMM yyyy",{locale:ot})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Progression gnrale"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[g.progress,"%"]})]}),n.jsx(Ot,{value:g.progress,className:"h-2"})]}),y.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium",children:"Rsultats cls"}),y.map(b=>n.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-medium text-sm",children:b.title}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[b.current_value||"0"," / ",b.target]})]}),n.jsx(Ot,{value:b.progress,className:"h-1"})]},b.id))]})]})]},g.id)})})}),n.jsx(Ee,{value:"evaluations",className:"space-y-4",children:s.length===0?n.jsx(V,{children:n.jsx(W,{className:"flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx(fa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune valuation trouve"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Commencez par crer votre premire valuation"}),n.jsx(OS,{onCreateEvaluation:d})]})})}):n.jsx("div",{className:"grid gap-4",children:s.map(g=>{const y=f(g.id);return n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ce,{className:"text-lg",children:g.employee_name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["valuateur: ",g.evaluator_name,"  Priode: ",g.period]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(re,{variant:"outline",className:"uppercase",children:g.type==="annual"?"Annuelle":g.type==="quarterly"?"Trimestrielle":"360"}),n.jsx(re,{className:v(g.status),children:g.status==="completed"?"Termine":g.status==="in_progress"?"En cours":"Planifie"})]})]})}),n.jsxs(W,{className:"space-y-4",children:[g.status==="completed"&&g.overall_score>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fa,{className:"h-5 w-5 text-yellow-500"}),n.jsx("span",{className:`text-2xl font-bold ${x(g.overall_score)}`,children:g.overall_score.toFixed(1)}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"/ 5.0"})]})}),y.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium",children:"Dtail par catgorie"}),y.map(b=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:b.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Poids: ",b.weight,"%"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`font-bold ${x(b.score)}`,children:b.score.toFixed(1)}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"/ 5.0"})]})]},b.id))]})]}),g.status==="scheduled"&&n.jsx("div",{className:"flex items-center justify-center p-8 text-muted-foreground",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ze,{className:"h-8 w-8 mx-auto mb-2"}),n.jsx("p",{children:"valuation planifie"})]})}),g.status==="in_progress"&&n.jsx("div",{className:"flex items-center justify-center p-8 text-muted-foreground",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Vs,{className:"h-8 w-8 mx-auto mb-2 animate-spin"}),n.jsx("p",{children:"valuation en cours..."})]})})]})]},g.id)})})}),n.jsxs(Ee,{value:"analytics",className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Objectifs Actifs"}),n.jsx("p",{className:"text-2xl font-bold",children:p.activeObjectives})]}),n.jsx(hn,{className:"h-8 w-8 text-blue-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Taux de Ralisation"}),n.jsxs("p",{className:"text-2xl font-bold",children:[p.completionRate,"%"]})]}),n.jsx(fs,{className:"h-8 w-8 text-green-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Score Moyen"}),n.jsx("p",{className:"text-2xl font-bold",children:p.averageScore>0?p.averageScore:"--"})]}),n.jsx(fa,{className:"h-8 w-8 text-yellow-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"valuations Planifies"}),n.jsx("p",{className:"text-2xl font-bold",children:p.scheduledEvaluations})]}),n.jsx(ze,{className:"h-8 w-8 text-purple-600"})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(V,{children:[n.jsx(le,{children:n.jsx(ce,{children:"Rpartition des objectifs"})}),n.jsx(W,{children:n.jsx("div",{className:"space-y-4",children:["draft","active","completed","cancelled"].map(g=>{const y=r.filter(S=>S.status===g).length,b=r.length>0?Math.round(y/r.length*100):0,j=g==="completed"?"text-green-600":g==="active"?"text-blue-600":g==="cancelled"?"text-red-600":"text-yellow-600";return n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"capitalize",children:g==="draft"?"Brouillon":g==="active"?"Actif":g==="completed"?"Termin":"Annul"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`font-bold ${j}`,children:y}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",b,"%)"]})]})]},g)})})})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsx(ce,{children:"valuations par type"})}),n.jsx(W,{children:n.jsx("div",{className:"space-y-4",children:["annual","quarterly","360"].map(g=>{const y=s.filter(j=>j.type===g).length,b=s.length>0?Math.round(y/s.length*100):0;return n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:g==="annual"?"Annuelle":g==="quarterly"?"Trimestrielle":"360"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-bold",children:y}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",b,"%)"]})]})]},g)})})})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsx(ce,{children:"Distribution des scores d'valuation"})}),n.jsx(W,{children:n.jsx("div",{className:"space-y-4",children:s.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Score moyen"}),n.jsxs("span",{className:"font-bold text-2xl",children:[m().averageScore,"/5"]})]}),n.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(g=>{const y=s.filter(j=>Math.round(j.overall_score)===g).length,b=s.length>0?Math.round(y/s.length*100):0;return n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"w-12",children:[g," "]}),n.jsx("div",{className:"flex-1 bg-muted rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})}),n.jsx("span",{className:"text-sm font-medium w-12",children:y})]},g)})})]}):n.jsxs("div",{className:"text-center text-muted-foreground",children:[n.jsx(xr,{className:"h-12 w-12 mx-auto mb-4"}),n.jsx("p",{children:"Aucune valuation disponible"})]})})})]})]})]})]})},CZ=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState(!0),[i,l]=h.useState(null),{toast:c}=rt(),d=async()=>{try{o(!0),l(null);const[v,x]=await Promise.all([O.from("skills").select("*").order("created_at",{ascending:!1}),O.from("skill_assessments").select("*").order("last_assessed",{ascending:!1})]);if(v.error)throw v.error;if(x.error)throw x.error;t(v.data||[]),s(x.data||[])}catch(v){console.error("Error fetching skills data:",v),l(v.message),c({title:"Erreur",description:"Impossible de charger les donnes de comptences",variant:"destructive"})}finally{o(!1)}},u=async v=>{try{const{error:x}=await O.from("skills").insert(v);if(x)throw x;c({title:"Succs",description:"Comptence cre avec succs"}),d()}catch(x){console.error("Error creating skill:",x),c({title:"Erreur",description:"Impossible de crer la comptence",variant:"destructive"})}},f=async v=>{try{const{error:x}=await O.from("skill_assessments").insert(v);if(x)throw x;c({title:"Succs",description:"valuation de comptence cre avec succs"}),d()}catch(x){console.error("Error creating skill assessment:",x),c({title:"Erreur",description:"Impossible de crer l'valuation",variant:"destructive"})}},m=v=>r.filter(x=>x.employee_name===v),p=()=>{const v=r.reduce((x,g)=>{x[g.employee_name]||(x[g.employee_name]={employeeName:g.employee_name,position:g.position,department:g.department,skills:[],overallScore:0});const y=e.find(b=>b.id===g.skill_id);return x[g.employee_name].skills.push({id:g.skill_id,name:(y==null?void 0:y.name)||"Comptence inconnue",category:(y==null?void 0:y.category)||"Non dfinie",currentLevel:g.current_level,targetLevel:g.target_level,lastAssessed:g.last_assessed,assessor:g.assessor}),x},{});return Object.values(v).forEach(x=>{x.skills.length>0&&(x.overallScore=x.skills.reduce((g,y)=>g+y.currentLevel,0)/x.skills.length)}),Object.values(v)},w=()=>{const v=e.length,x=r.length,g=r.length>0?r.reduce((y,b)=>y+b.current_level,0)/r.length:0;return{totalSkills:v,totalAssessments:x,averageLevel:Math.round(g*10)/10}};return h.useEffect(()=>{d()},[]),{skills:e,skillAssessments:r,loading:a,error:i,refetch:d,createSkill:u,createSkillAssessment:f,getSkillAssessmentsByEmployee:m,getSkillsMatrix:p,getSkillsStats:w}},EZ=()=>{const[e,t]=h.useState("skills"),{skills:r,skillAssessments:s,loading:a,error:o,createSkill:i,createSkillAssessment:l,getSkillsMatrix:c,getSkillsStats:d}=CZ();if(a)return n.jsx("div",{className:"p-6 text-center",children:"Chargement des donnes de formation..."});if(o)return n.jsxs("div",{className:"p-6 text-center text-destructive",children:["Erreur: ",o]});const u=c(),f=d(),m=p=>p>=4?"bg-green-100 text-green-800":p>=3?"bg-blue-100 text-blue-800":p>=2?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Comptences & Formations"}),n.jsx("p",{className:"text-muted-foreground",children:"Dveloppement des comptences et gestion de la formation"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{variant:"outline",children:[n.jsx(Dl,{className:"h-4 w-4 mr-2"}),"Nouvelle comptence"]}),n.jsxs(L,{children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"valuer comptences"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Comptences"}),n.jsx("p",{className:"text-2xl font-bold",children:f.totalSkills})]}),n.jsx(hn,{className:"h-8 w-8 text-blue-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"valuations"}),n.jsx("p",{className:"text-2xl font-bold",children:f.totalAssessments})]}),n.jsx(Yt,{className:"h-8 w-8 text-green-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Niveau moyen"}),n.jsxs("p",{className:"text-2xl font-bold",children:[f.averageLevel.toFixed(1),"/5"]})]}),n.jsx(fa,{className:"h-8 w-8 text-yellow-600"})]})})})]}),n.jsxs(pr,{value:e,onValueChange:t,children:[n.jsxs(ar,{className:"grid w-full grid-cols-2",children:[n.jsxs(Ce,{value:"skills",className:"flex items-center gap-2",children:[n.jsx(xr,{className:"h-4 w-4"}),"Matrice Comptences"]}),n.jsxs(Ce,{value:"catalog",className:"flex items-center gap-2",children:[n.jsx(Dl,{className:"h-4 w-4"}),"Catalogue Comptences"]})]}),n.jsx(Ee,{value:"skills",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:u.length===0?n.jsx(V,{children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(xr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucune valuation de comptence disponible"}),n.jsxs(L,{className:"mt-4",onClick:()=>{},children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Crer une valuation"]})]})}):u.map(p=>n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ce,{className:"text-lg",children:p.employeeName}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.position,"  ",p.department]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fa,{className:"h-5 w-5 text-yellow-500"}),n.jsx("span",{className:"text-xl font-bold text-primary",children:p.overallScore.toFixed(1)}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"/ 5.0"})]})]})}),n.jsx(W,{className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:p.skills.map(w=>n.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:w.name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:w.category})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(re,{className:m(w.currentLevel),children:[w.currentLevel,"/5"]}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[" Cible: ",w.targetLevel,"/5"]})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ot,{value:w.currentLevel/5*100,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["valu le ",w.lastAssessed," par ",w.assessor]})]})]})},w.id))})})]},p.employeeName))})}),n.jsx(Ee,{value:"catalog",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.length===0?n.jsx(V,{className:"md:col-span-2 lg:col-span-3",children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(hn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucune comptence dfinie"}),n.jsxs(L,{className:"mt-4",onClick:()=>{},children:[n.jsx(hn,{className:"h-4 w-4 mr-2"}),"Ajouter une comptence"]})]})}):r.map(p=>n.jsx(V,{className:"hover:shadow-lg transition-shadow",children:n.jsxs(W,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"text-2xl",children:""}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:p.name}),n.jsx(re,{variant:"outline",children:p.category})]})]}),p.description&&n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:p.description}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"text-muted-foreground",children:"valuations:"}),n.jsx("p",{className:"font-bold text-lg",children:s.filter(w=>w.skill_id===p.id).length})]})]})},p.id))})})]})]})},kZ=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState([]),[i,l]=h.useState(!0),[c,d]=h.useState(null),{toast:u}=rt(),f=async()=>{try{l(!0),d(null);const[g,y,b]=await Promise.all([O.from("expense_reports").select("*").order("created_at",{ascending:!1}),O.from("expense_items").select("*").order("expense_date",{ascending:!1}),O.from("expense_categories").select("*").order("name")]);if(g.error)throw g.error;if(y.error)throw y.error;if(b.error)throw b.error;t(g.data||[]),s(y.data||[]),o(b.data||[])}catch(g){console.error("Error fetching expense data:",g),d(g.message)}finally{l(!1)}},m=async g=>{try{const{error:y}=await O.from("expense_reports").insert(g);if(y)throw y;u({title:"Succs",description:"Note de frais cre avec succs"}),f()}catch(y){console.error("Error creating expense report:",y),u({title:"Erreur",description:"Impossible de crer la note de frais",variant:"destructive"})}},p=async(g,y,b)=>{try{const j={status:y,updated_at:new Date().toISOString()};y==="approved"&&(j.approval_date=new Date().toISOString().split("T")[0]),y==="rejected"&&b&&(j.rejection_reason=b);const{error:S}=await O.from("expense_reports").update(j).eq("id",g);if(S)throw S;u({title:"Succs",description:"Statut de la note de frais mis  jour"}),f()}catch(j){console.error("Error updating expense report status:",j),u({title:"Erreur",description:"Impossible de mettre  jour le statut",variant:"destructive"})}},w=async g=>{try{const{error:y}=await O.from("expense_categories").insert(g);if(y)throw y;u({title:"Succs",description:"Catgorie cre avec succs"}),f()}catch(y){console.error("Error creating expense category:",y),u({title:"Erreur",description:"Impossible de crer la catgorie",variant:"destructive"})}},v=g=>e.filter(y=>y.status===g).reduce((y,b)=>y+b.total_amount,0),x=g=>r.filter(y=>y.report_id===g);return h.useEffect(()=>{f()},[]),{expenseReports:e,expenseItems:r,expenseCategories:a,loading:i,error:c,refetch:f,createExpenseReport:m,updateExpenseReportStatus:p,createExpenseCategory:w,getTotalByStatus:v,getReportItems:x}},DZ=()=>{const[e,t]=h.useState("reports"),{expenseReports:r,expenseItems:s,expenseCategories:a,loading:o,error:i,updateExpenseReportStatus:l,getTotalByStatus:c,getReportItems:d}=kZ();if(o)return n.jsx("div",{className:"p-6 text-center",children:"Chargement..."});if(i)return n.jsxs("div",{className:"p-6 text-center text-destructive",children:["Erreur: ",i]});const u=a,f=r,m=w=>{switch(w){case"approved":return"bg-green-100 text-green-800 border-green-200";case"paid":return"bg-blue-100 text-blue-800 border-blue-200";case"submitted":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";case"draft":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},p=w=>{switch(w){case"approved":return n.jsx(Yt,{className:"h-4 w-4"});case"paid":return n.jsx(Yt,{className:"h-4 w-4"});case"rejected":return n.jsx(Qr,{className:"h-4 w-4"});case"submitted":return n.jsx(lt,{className:"h-4 w-4"});default:return n.jsx(fn,{className:"h-4 w-4"})}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Notes de frais"}),n.jsx("p",{className:"text-muted-foreground",children:"Gestion des frais et remboursements"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{variant:"outline",children:[n.jsx(x5,{className:"h-4 w-4 mr-2"}),"Scanner reu"]}),n.jsxs(L,{children:[n.jsx(Yc,{className:"h-4 w-4 mr-2"}),"Nouvelle note"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"En attente"}),n.jsxs("p",{className:"text-2xl font-bold",children:[c("submitted").toFixed(2)," "]})]}),n.jsx(lt,{className:"h-8 w-8 text-yellow-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Approuv"}),n.jsxs("p",{className:"text-2xl font-bold",children:[c("approved").toFixed(2)," "]})]}),n.jsx(Yt,{className:"h-8 w-8 text-green-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Rejet"}),n.jsxs("p",{className:"text-2xl font-bold",children:[c("rejected").toFixed(2)," "]})]}),n.jsx(Qr,{className:"h-8 w-8 text-red-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total ce mois"}),n.jsxs("p",{className:"text-2xl font-bold",children:[f.reduce((w,v)=>w+v.total_amount,0).toFixed(2)," "]})]}),n.jsx(Wg,{className:"h-8 w-8 text-blue-600"})]})})})]}),n.jsxs(pr,{value:e,onValueChange:t,children:[n.jsxs(ar,{className:"grid w-full grid-cols-3",children:[n.jsxs(Ce,{value:"reports",className:"flex items-center gap-2",children:[n.jsx(Yc,{className:"h-4 w-4"}),"Notes de frais"]}),n.jsxs(Ce,{value:"categories",className:"flex items-center gap-2",children:[n.jsx(fn,{className:"h-4 w-4"}),"Catgories"]}),n.jsxs(Ce,{value:"analytics",className:"flex items-center gap-2",children:[n.jsx(Wg,{className:"h-4 w-4"}),"Analyses"]})]}),n.jsx(Ee,{value:"reports",className:"space-y-4",children:f.length===0?n.jsx(V,{children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(Yc,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune note de frais"}),n.jsx("p",{className:"text-muted-foreground",children:"Commencez par crer votre premire note de frais."})]})}):n.jsx("div",{className:"grid gap-4",children:f.map(w=>{const v=d(w.id);return n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ce,{className:"text-lg",children:w.title}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[w.employee_name,"  Soumis le ",w.submission_date&&new Date(w.submission_date).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(re,{className:m(w.status),children:[p(w.status),w.status]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-xl font-bold",children:[w.total_amount.toFixed(2)," ",w.currency]})})]})]})}),n.jsxs(W,{className:"space-y-4",children:[w.approval_date&&w.approved_by&&n.jsx("div",{className:"p-3 rounded-lg bg-green-50 border border-green-200",children:n.jsxs("p",{className:"text-sm text-green-800",children:[" Approuv le ",new Date(w.approval_date).toLocaleDateString()," par ",w.approved_by]})}),w.rejection_reason&&n.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200",children:n.jsxs("p",{className:"text-sm text-red-800",children:[" Rejet: ",w.rejection_reason]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium",children:"Dtail des frais"}),v.map(x=>{var g;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(re,{className:((g=u.find(y=>y.name===x.category_name))==null?void 0:g.color)||"bg-gray-100 text-gray-800",children:x.category_name}),n.jsx("span",{className:"text-sm font-medium",children:x.description})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsx("span",{children:new Date(x.expense_date).toLocaleDateString()}),x.location&&n.jsxs("span",{children:[" ",x.location]}),x.mileage&&n.jsxs("span",{children:[" ",x.mileage," km"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-bold",children:[x.amount.toFixed(2)," ",x.currency]}),x.receipt_url&&n.jsx(L,{variant:"ghost",size:"sm",children:n.jsx(Yc,{className:"h-4 w-4"})})]})]},x.id)})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[n.jsxs("div",{className:"flex gap-2",children:[w.status==="submitted"&&n.jsxs(n.Fragment,{children:[n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>l(w.id,"rejected","Rejet par le manager"),children:[n.jsx(Qr,{className:"h-4 w-4 mr-2"}),"Rejeter"]}),n.jsxs(L,{size:"sm",onClick:()=>l(w.id,"approved"),children:[n.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Approuver"]})]}),w.status==="approved"&&n.jsxs(L,{size:"sm",onClick:()=>l(w.id,"paid"),children:[n.jsx(N5,{className:"h-4 w-4 mr-2"}),"Marquer comme pay"]})]}),n.jsxs(L,{variant:"ghost",size:"sm",children:[n.jsx(Wv,{className:"h-4 w-4 mr-2"}),"Exporter"]})]})]})]},w.id)})})}),n.jsx(Ee,{value:"categories",className:"space-y-4",children:u.length===0?n.jsx(V,{children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(fn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune catgorie"}),n.jsx("p",{className:"text-muted-foreground",children:"Ajoutez des catgories pour organiser vos frais."})]})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(w=>n.jsx(V,{className:"hover:shadow-lg transition-shadow",children:n.jsxs(W,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"text-2xl",children:w.icon}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:w.name}),n.jsx(re,{className:w.color,children:w.requires_receipt?"Justificatif requis":"Pas de justificatif"})]})]}),w.max_amount&&n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"text-muted-foreground",children:"Montant maximum"}),n.jsxs("p",{className:"font-bold text-lg",children:[w.max_amount," "]})]})]})},w.id))})}),n.jsxs(Ee,{value:"analytics",className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(V,{children:[n.jsx(le,{children:n.jsx(ce,{children:"Rpartition par statut"})}),n.jsx(W,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),"En attente"]}),n.jsxs("span",{className:"font-bold",children:[c("submitted").toFixed(2),""]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),"Approuv"]}),n.jsxs("span",{className:"font-bold",children:[c("approved").toFixed(2),""]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),"Rejet"]}),n.jsxs("span",{className:"font-bold",children:[c("rejected").toFixed(2),""]})]})]})})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsx(ce,{children:"Rpartition par catgorie"})}),n.jsx(W,{children:n.jsx("div",{className:"space-y-4",children:u.map(w=>{const v=s.filter(x=>x.category_name===w.name).reduce((x,g)=>x+g.amount,0);return n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:w.name}),n.jsxs("span",{className:"font-bold",children:[v.toFixed(2),""]})]},w.id)})})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Total des frais"}),n.jsxs("p",{className:"text-2xl font-bold",children:[r.reduce((w,v)=>w+v.total_amount,0).toFixed(2),""]})]}),n.jsx(Wg,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Frais moyens"}),n.jsxs("p",{className:"text-2xl font-bold",children:[r.length>0?(r.reduce((w,v)=>w+v.total_amount,0)/r.length).toFixed(2):"0.00",""]})]}),n.jsx(Yc,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Nombre de notes"}),n.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),n.jsx(fn,{className:"h-8 w-8 text-muted-foreground"})]})})})]})]})]})]})},TZ=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState([]),[i,l]=h.useState(!0),[c,d]=h.useState(null),u=async()=>{try{l(!0);const{data:w,error:v}=await O.from("payroll_periods").select("*").order("year",{ascending:!1}).order("month",{ascending:!1});if(v)throw v;const{data:x,error:g}=await O.from("employee_payrolls").select("*").order("employee_name");if(g)throw g;const{data:y,error:b}=await O.from("leave_requests").select("id, employee_id, start_date, end_date, status").eq("status","pending");if(b)throw b;const{data:j,error:S}=await O.from("expense_reports").select("id, employee_name, status, total_amount").in("status",["draft","submitted"]);if(S)throw S;const{data:N,error:_}=await O.from("employees").select("id, full_name, job_title, salary").eq("status","active");if(_)throw _;const E=(w||[]).map(k=>({id:k.id,year:k.year,month:k.month,status:k.status,lockDate:k.lock_date||void 0,processedDate:k.processed_date||void 0,totalGross:k.total_gross||0,totalNet:k.total_net||0,totalEmployees:k.total_employees||0,totalCharges:k.total_charges||0}));let D=[];x&&x.length>0?D=x.map(k=>({id:k.id,employeeId:k.employee_id,employeeName:k.employee_name,position:k.position||"",baseSalary:k.base_salary||0,grossTotal:k.gross_total||0,netTotal:k.net_total||0,socialCharges:k.social_charges||0,hoursWorked:k.hours_worked||0,standardHours:k.standard_hours||0,overtimeHours:k.overtime_hours||0,bonuses:[],deductions:[]})):N&&N.length>0&&(D=N.map(k=>{const P=k.salary||3500,R=P+Math.random()*500,A=R*.42,I=R-A;return{id:`payroll-${k.id}`,employeeId:k.id,employeeName:k.full_name,position:k.job_title||"Non spcifi",baseSalary:P,grossTotal:Math.round(R),netTotal:Math.round(I),socialCharges:Math.round(A),hoursWorked:151+Math.floor(Math.random()*20),standardHours:151,overtimeHours:Math.random()>.7?Math.floor(Math.random()*10):0,bonuses:[],deductions:[]}}));const C=[{id:"attendance_check",type:"attendance",description:"Vrification des prsences",status:"ok",details:`${D.length} employs avec prsences valides`},{id:"hours_check",type:"hours",description:"Contrle des heures travailles",status:D.some(k=>k.overtimeHours>0)?"warning":"ok",details:D.some(k=>k.overtimeHours>0)?`${D.filter(k=>k.overtimeHours>0).length} employs avec heures supplmentaires`:"Toutes les heures sont conformes",affectedEmployees:D.filter(k=>k.overtimeHours>0).map(k=>k.employeeName)},{id:"leaves_check",type:"leaves",description:"Validation des congs",status:y&&y.length>0?"error":"ok",details:y&&y.length>0?`${y.length} demandes de congs en attente de validation`:"Tous les congs du mois sont valids"},{id:"expenses_check",type:"expenses",description:"Intgration notes de frais",status:j&&j.length>0?"warning":"ok",details:j&&j.length>0?`${j.length} notes de frais non traites (${j.reduce((k,P)=>k+(P.total_amount||0),0).toLocaleString()})`:"Toutes les notes approuves sont intgres"}];t(E),s(D),o(C)}catch(w){d(w instanceof Error?w.message:"Une erreur est survenue"),console.error("Error fetching payroll data:",w)}finally{l(!1)}},f=async w=>{try{const v={year:w.year,month:w.month,status:w.status,lock_date:w.lockDate,processed_date:w.processedDate,total_gross:w.totalGross,total_net:w.totalNet,total_employees:w.totalEmployees,total_charges:w.totalCharges},{data:x,error:g}=await O.from("payroll_periods").insert([v]).select().single();if(g)throw g;const y={id:x.id,year:x.year,month:x.month,status:x.status,lockDate:x.lock_date||void 0,processedDate:x.processed_date||void 0,totalGross:x.total_gross||0,totalNet:x.total_net||0,totalEmployees:x.total_employees||0,totalCharges:x.total_charges||0};return t(b=>[y,...b]),y}catch(v){throw console.error("Error creating payroll period:",v),v}},m=async(w,v)=>{try{const x={};v.status&&(x.status=v.status),v.lockDate&&(x.lock_date=v.lockDate),v.processedDate&&(x.processed_date=v.processedDate),v.totalGross!==void 0&&(x.total_gross=v.totalGross),v.totalNet!==void 0&&(x.total_net=v.totalNet),v.totalEmployees!==void 0&&(x.total_employees=v.totalEmployees),v.totalCharges!==void 0&&(x.total_charges=v.totalCharges);const{data:g,error:y}=await O.from("payroll_periods").update(x).eq("id",w).select().single();if(y)throw y;const b={id:g.id,year:g.year,month:g.month,status:g.status,lockDate:g.lock_date||void 0,processedDate:g.processed_date||void 0,totalGross:g.total_gross||0,totalNet:g.total_net||0,totalEmployees:g.total_employees||0,totalCharges:g.total_charges||0};return t(j=>j.map(S=>S.id===w?{...S,...b}:S)),b}catch(x){throw console.error("Error updating payroll period:",x),x}},p=async w=>{try{await m(w,{status:"processed",processedDate:new Date().toISOString().split("T")[0]})}catch(v){throw console.error("Error processing payroll:",v),v}};return h.useEffect(()=>{u()},[]),{payrollPeriods:e,employeePayrolls:r,payrollChecks:a,loading:i,error:c,createPayrollPeriod:f,updatePayrollPeriod:m,processPayroll:p,refetch:u}},PZ=()=>{const[e,t]=h.useState("periods");h.useState("2024-01");const{payrollPeriods:r,employeePayrolls:s,payrollChecks:a,loading:o,error:i,createPayrollPeriod:l,updatePayrollPeriod:c,processPayroll:d}=TZ();if(o)return n.jsx("div",{children:"Chargement..."});if(i)return n.jsxs("div",{children:["Erreur: ",i]});const u=r,f=s,m=a,p=g=>{switch(g){case"processed":case"exported":return"bg-green-100 text-green-800 border-green-200";case"locked":return"bg-blue-100 text-blue-800 border-blue-200";case"draft":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},w=g=>{switch(g){case"ok":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=g=>{switch(g){case"processed":case"exported":case"ok":return n.jsx(Yt,{className:"h-4 w-4"});case"locked":return n.jsx(pi,{className:"h-4 w-4"});case"warning":case"error":return n.jsx(Kt,{className:"h-4 w-4"});default:return n.jsx(ze,{className:"h-4 w-4"})}},x=(g,y)=>new Date(g,y-1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Gestion de la Paie"}),n.jsx("p",{className:"text-muted-foreground",children:"Prparation et contrles de paie"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{variant:"outline",children:[n.jsx(CN,{className:"h-4 w-4 mr-2"}),"Importer donnes"]}),n.jsxs(L,{children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),"Verrouiller priode"]})]})]}),n.jsxs(pr,{value:e,onValueChange:t,children:[n.jsxs(ar,{className:"grid w-full grid-cols-4",children:[n.jsxs(Ce,{value:"periods",className:"flex items-center gap-2",children:[n.jsx(ze,{className:"h-4 w-4"}),"Priodes"]}),n.jsxs(Ce,{value:"employees",className:"flex items-center gap-2",children:[n.jsx(Wh,{className:"h-4 w-4"}),"Bulletins"]}),n.jsxs(Ce,{value:"checks",className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"h-4 w-4"}),"Contrles"]}),n.jsxs(Ce,{value:"exports",className:"flex items-center gap-2",children:[n.jsx(Cr,{className:"h-4 w-4"}),"Exports"]})]}),n.jsx(Ee,{value:"periods",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:u.map(g=>n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ce,{className:"text-lg",children:x(g.year,g.month)}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.totalEmployees," employs"]})]}),n.jsxs(re,{className:p(g.status),children:[v(g.status),g.status]})]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Salaire brut"}),n.jsxs("p",{className:"text-xl font-bold",children:[g.totalGross.toLocaleString()," "]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Salaire net"}),n.jsxs("p",{className:"text-xl font-bold",children:[g.totalNet.toLocaleString()," "]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Charges sociales"}),n.jsxs("p",{className:"text-xl font-bold",children:[g.totalCharges.toLocaleString()," "]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cot total"}),n.jsxs("p",{className:"text-xl font-bold",children:[(g.totalGross+g.totalCharges).toLocaleString()," "]})]})]}),g.lockDate&&n.jsxs("div",{className:"text-sm text-muted-foreground",children:[" Verrouill le ",g.lockDate,g.processedDate&&`  Trait le ${g.processedDate}`]}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[n.jsxs("div",{className:"flex gap-2",children:[g.status==="draft"&&n.jsxs(n.Fragment,{children:[n.jsxs(L,{variant:"outline",size:"sm",children:[n.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Contrler"]}),n.jsxs(L,{size:"sm",children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),"Verrouiller"]})]}),g.status==="processed"&&n.jsxs(L,{size:"sm",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Exporter"]})]}),n.jsx(L,{variant:"ghost",size:"sm",children:"Voir dtails"})]})]})]},g.id))})}),n.jsxs(Ee,{value:"employees",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Bulletins de paie"}),n.jsxs(Ie,{defaultValue:"2024-01",children:[n.jsx(Pe,{className:"w-48",children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"2024-02",children:"Fvrier 2024"}),n.jsx(ae,{value:"2024-01",children:"Janvier 2024"}),n.jsx(ae,{value:"2023-12",children:"Dcembre 2023"})]})]})]}),n.jsx("div",{className:"grid gap-4",children:f.map(g=>n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ce,{className:"text-lg",children:g.employeeName}),n.jsx("p",{className:"text-sm text-muted-foreground",children:g.position})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-xl font-bold",children:[g.netTotal.toLocaleString()," "]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Net  payer"})]})]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Salaire de base"}),n.jsxs("p",{className:"font-bold",children:[g.baseSalary.toLocaleString()," "]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total brut"}),n.jsxs("p",{className:"font-bold",children:[g.grossTotal.toLocaleString()," "]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Charges sociales"}),n.jsxs("p",{className:"font-bold",children:[g.socialCharges.toLocaleString()," "]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Heures travailles"}),n.jsxs("p",{className:"font-bold",children:[g.hoursWorked,"h",g.overtimeHours>0&&n.jsxs("span",{className:"text-orange-600",children:[" (+",g.overtimeHours,"h sup)"]})]})]})]}),(g.bonuses.length>0||g.deductions.length>0)&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium",children:"lments variables"}),g.bonuses.map(y=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-green-50",children:[n.jsxs("span",{className:"text-sm text-green-800",children:["+ ",y.name]}),n.jsxs("span",{className:"font-medium text-green-800",children:[y.amount.toLocaleString()," "]})]},y.id)),g.deductions.map(y=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-red-50",children:[n.jsxs("span",{className:"text-sm text-red-800",children:["- ",y.name]}),n.jsxs("span",{className:"font-medium text-red-800",children:[y.amount.toLocaleString()," "]})]},y.id))]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(L,{variant:"outline",size:"sm",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Tlcharger bulletin"]})})]})]},g.id))})]}),n.jsx(Ee,{value:"checks",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:m.map(g=>n.jsx(V,{className:"hover:shadow-lg transition-shadow",children:n.jsxs(W,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[v(g.status),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:g.description}),n.jsx("p",{className:"text-sm text-muted-foreground",children:g.details})]})]}),n.jsx(re,{className:w(g.status),children:g.status})]}),g.affectedEmployees&&g.affectedEmployees.length>0&&n.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-muted/50",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Employs concerns:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:g.affectedEmployees.map((y,b)=>n.jsx(re,{variant:"outline",children:y},b))})]})]})},g.id))})}),n.jsx(Ee,{value:"exports",className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(CN,{className:"h-5 w-5"}),"Export Comptabilit"]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Gnrer les critures comptables pour intgration dans votre logiciel de comptabilit"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{className:"flex-1",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Export Excel"]}),n.jsxs(L,{variant:"outline",className:"flex-1",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Wh,{className:"h-5 w-5"}),"Dclarations Sociales"]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Prparer les fichiers pour les dclarations URSSAF et autres organismes sociaux"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{className:"flex-1",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"DSN"]}),n.jsxs(L,{variant:"outline",className:"flex-1",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"DADS-U"]})]})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(xr,{className:"h-5 w-5"}),"Rapports Analytiques"]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyses des cots salariaux par dpartement, volution des charges"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{className:"flex-1",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Rapport mensuel"]}),n.jsxs(L,{variant:"outline",className:"flex-1",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Analyse annuelle"]})]})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"h-5 w-5"}),"Bulletins de Paie"]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Gnration automatique et envoi des bulletins de paie par email"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{className:"flex-1",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Gnrer tous"]}),n.jsxs(L,{variant:"outline",className:"flex-1",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Envoi group"]})]})]})]})]})})]})]})},RZ=()=>{const[e,t]=h.useState([]),[r,s]=h.useState([]),[a,o]=h.useState([]),[i,l]=h.useState(!0),[c,d]=h.useState(null),u=async()=>{try{l(!0);const{data:w,error:v}=await O.from("safety_incidents").select("*").order("reported_date",{ascending:!1});if(v)throw v;const{data:x,error:g}=await O.from("safety_documents").select("*").order("published_date",{ascending:!1});if(g)throw g;const y=(w||[]).map(j=>({id:j.id,type:j.type,severity:j.severity,title:j.title,description:j.description,reportedBy:j.reported_by,reportedDate:j.reported_date,location:j.location,affectedEmployee:j.affected_employee||void 0,status:j.status,actions:[]})),b=(x||[]).map(j=>({id:j.id,title:j.title,type:j.type,category:j.category,version:j.version,publishedDate:j.published_date,expiryDate:j.expiry_date||void 0,status:j.status,downloadUrl:j.download_url}));t(y),s(b),o([])}catch(w){d(w instanceof Error?w.message:"Une erreur est survenue"),console.error("Error fetching health safety data:",w)}finally{l(!1)}},f=async w=>{try{const v={type:w.type,severity:w.severity,title:w.title,description:w.description,reported_by:w.reportedBy,reported_date:w.reportedDate,location:w.location,affected_employee:w.affectedEmployee,status:w.status},{data:x,error:g}=await O.from("safety_incidents").insert([v]).select().single();if(g)throw g;const y={id:x.id,type:x.type,severity:x.severity,title:x.title,description:x.description,reportedBy:x.reported_by,reportedDate:x.reported_date,location:x.location,affectedEmployee:x.affected_employee||void 0,status:x.status,actions:[]};return t(b=>[y,...b]),y}catch(v){throw console.error("Error creating incident:",v),v}},m=async(w,v)=>{try{const x={};v.reportedBy&&(x.reported_by=v.reportedBy),v.reportedDate&&(x.reported_date=v.reportedDate),v.affectedEmployee&&(x.affected_employee=v.affectedEmployee),v.type&&(x.type=v.type),v.severity&&(x.severity=v.severity),v.status&&(x.status=v.status),v.title&&(x.title=v.title),v.description&&(x.description=v.description),v.location&&(x.location=v.location);const{data:g,error:y}=await O.from("safety_incidents").update(x).eq("id",w).select().single();if(y)throw y;const b={id:g.id,type:g.type,severity:g.severity,title:g.title,description:g.description,reportedBy:g.reported_by,reportedDate:g.reported_date,location:g.location,affectedEmployee:g.affected_employee||void 0,status:g.status,actions:[]};return t(j=>j.map(S=>S.id===w?{...S,...b}:S)),b}catch(x){throw console.error("Error updating incident:",x),x}},p=async w=>{try{const v={title:w.title,type:w.type,category:w.category,version:w.version,published_date:w.publishedDate,expiry_date:w.expiryDate,status:w.status,download_url:w.downloadUrl},{data:x,error:g}=await O.from("safety_documents").insert([v]).select().single();if(g)throw g;const y={id:x.id,title:x.title,type:x.type,category:x.category,version:x.version,publishedDate:x.published_date,expiryDate:x.expiry_date||void 0,status:x.status,downloadUrl:x.download_url};return s(b=>[y,...b]),y}catch(v){throw console.error("Error uploading document:",v),v}};return h.useEffect(()=>{u()},[]),{incidents:e,safetyDocuments:r,trainingRecords:a,loading:i,error:c,createIncident:f,updateIncident:m,uploadDocument:p,refetch:u}},AZ=()=>{const{incidents:e,safetyDocuments:t,trainingRecords:r,loading:s,error:a,createIncident:o,updateIncident:i,uploadDocument:l}=RZ();if(s)return n.jsx("div",{children:"Chargement..."});if(a)return n.jsxs("div",{children:["Erreur: ",a]});const c=e,d=t,u=r,f=v=>{switch(v){case"critical":return"bg-red-500 text-white";case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=v=>{switch(v){case"completed":case"resolved":case"active":return"bg-green-100 text-green-800";case"in-progress":case"investigating":return"bg-blue-100 text-blue-800";case"pending":case"reported":case"scheduled":return"bg-yellow-100 text-yellow-800";case"overdue":case"expired":return"bg-red-100 text-red-800";case"action-required":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},p=v=>{switch(v){case"accident":return n.jsx(In,{className:"h-4 w-4"});case"near-miss":return n.jsx(Ni,{className:"h-4 w-4"});case"property-damage":return n.jsx(hs,{className:"h-4 w-4"});case"environmental":return n.jsx(hs,{className:"h-4 w-4"});default:return n.jsx(In,{className:"h-4 w-4"})}},w={totalIncidents:c.length,openIncidents:c.filter(v=>v.status!=="resolved").length,criticalIncidents:c.filter(v=>v.severity==="critical"||v.severity==="high").length,pendingActions:c.reduce((v,x)=>{var g;return v+(((g=x.actions)==null?void 0:g.length)||0)},0),overdueTraining:u.filter(v=>v.status==="expired").length,activeDocuments:d.filter(v=>v.status==="active").length};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Sant & Scurit"}),n.jsx("p",{className:"text-muted-foreground",children:"Gestion des incidents, formation et conformit"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{variant:"outline",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Nouveau document"]}),n.jsxs(L,{children:[n.jsx(In,{className:"h-4 w-4 mr-2"}),"Dclarer incident"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[n.jsx(V,{children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Incidents totaux"}),n.jsx("p",{className:"text-2xl font-bold",children:w.totalIncidents})]}),n.jsx(In,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Incidents ouverts"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:w.openIncidents})]}),n.jsx(lt,{className:"h-8 w-8 text-orange-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Incidents critiques"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:w.criticalIncidents})]}),n.jsx(Qr,{className:"h-8 w-8 text-red-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Actions en cours"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.pendingActions})]}),n.jsx(Yt,{className:"h-8 w-8 text-blue-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Formation en retard"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:w.overdueTraining})]}),n.jsx(Dl,{className:"h-8 w-8 text-red-600"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Documents actifs"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.activeDocuments})]}),n.jsx(fn,{className:"h-8 w-8 text-green-600"})]})})})]}),n.jsxs(pr,{defaultValue:"incidents",className:"space-y-4",children:[n.jsxs(ar,{className:"grid w-full grid-cols-3",children:[n.jsxs(Ce,{value:"incidents",className:"flex items-center gap-2",children:[n.jsx(In,{className:"h-4 w-4"}),"Incidents"]}),n.jsxs(Ce,{value:"documents",className:"flex items-center gap-2",children:[n.jsx(fn,{className:"h-4 w-4"}),"Documents"]}),n.jsxs(Ce,{value:"training",className:"flex items-center gap-2",children:[n.jsx(Dl,{className:"h-4 w-4"}),"Formations"]})]}),n.jsx(Ee,{value:"incidents",className:"space-y-4",children:c.length===0?n.jsx(V,{children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(hs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun incident dclar"}),n.jsx("p",{className:"text-muted-foreground",children:"Commencez par dclarer votre premier incident."})]})}):n.jsx("div",{className:"grid gap-4",children:c.map(v=>n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(ce,{className:"text-lg flex items-center gap-2",children:[p(v.type),v.title]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.location,"  Dclar par ",v.reportedBy," le ",new Date(v.reportedDate).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(re,{className:f(v.severity),children:v.severity}),n.jsx(re,{className:m(v.status),children:v.status})]})]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm",children:v.description}),v.affectedEmployee&&n.jsx("div",{className:"p-3 rounded-lg bg-muted/50",children:n.jsxs("p",{className:"text-sm font-medium",children:["Employ concern: ",v.affectedEmployee]})}),v.actions&&v.actions.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Actions correctives"}),v.actions.map(x=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-muted/30",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm",children:x.description}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Responsable: ",x.responsiblePerson,"  chance: ",new Date(x.dueDate).toLocaleDateString()]})]}),n.jsx(re,{className:m(x.status),children:x.status})]},x.id))]}),v.status!=="resolved"&&n.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[n.jsx(L,{size:"sm",variant:"outline",onClick:()=>i(v.id,{status:"resolved"}),children:"Marquer rsolu"}),n.jsx(L,{size:"sm",variant:"outline",children:"Ajouter action"})]})]})]},v.id))})}),n.jsx(Ee,{value:"documents",className:"space-y-4",children:d.length===0?n.jsx(V,{children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(fn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun document"}),n.jsx("p",{className:"text-muted-foreground",children:"Ajoutez des documents de scurit et conformit."})]})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:d.map(v=>n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(ce,{className:"text-lg flex items-center gap-2",children:[n.jsx(fn,{className:"h-5 w-5"}),v.title]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.category,"  Version ",v.version]})]}),n.jsx(re,{className:m(v.status),children:v.status})]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Publi le:"}),n.jsx("span",{children:new Date(v.publishedDate).toLocaleDateString()})]}),v.expiryDate&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Expire le:"}),n.jsx("span",{className:new Date(v.expiryDate)<new Date?"text-red-600 font-medium":"",children:new Date(v.expiryDate).toLocaleDateString()})]}),n.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[n.jsxs(L,{size:"sm",className:"flex-1",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Tlcharger"]}),n.jsxs(L,{size:"sm",variant:"outline",children:[n.jsx(Ni,{className:"h-4 w-4 mr-2"}),"Voir"]})]})]})]},v.id))})}),n.jsx(Ee,{value:"training",className:"space-y-4",children:u.length===0?n.jsx(V,{children:n.jsxs(W,{className:"p-8 text-center",children:[n.jsx(Dl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune formation"}),n.jsx("p",{className:"text-muted-foreground",children:"Planifiez des formations de scurit pour vos employs."})]})}):n.jsx("div",{className:"grid gap-4",children:u.map(v=>n.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ce,{className:"text-lg",children:v.employeeName}),n.jsx("p",{className:"text-sm text-muted-foreground",children:v.trainingTitle})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(re,{className:m(v.status),children:v.status})})]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Date formation:"}),n.jsx("p",{className:"font-medium",children:new Date(v.trainingDate).toLocaleDateString()})]}),v.expiryDate&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Expire le:"}),n.jsx("p",{className:`font-medium ${new Date(v.expiryDate)<new Date?"text-red-600":""}`,children:new Date(v.expiryDate).toLocaleDateString()})]}),v.score&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Score:"}),n.jsxs("p",{className:"font-medium",children:[v.score,"/100"]})]})]}),v.status==="completed"&&v.certificateUrl&&n.jsx("div",{className:"flex gap-2 pt-4 border-t",children:n.jsxs(L,{size:"sm",variant:"outline",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Certificat"]})})]})]},v.id))})})]})]})},e4=()=>{const[e,t]=h.useState("dashboard"),[r,s]=h.useState({employees:"management",operations:"onboarding",development:"skills",leaves:"requests",time:"attendance"}),a=Sn(),o=Kn();return n.jsxs(bP,{children:[n.jsxs("div",{className:`flex justify-between items-start mb-6 ${a?"mb-4":"mb-8"}`,children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(L,{variant:"outline",size:a?"sm":"default",onClick:()=>o("/"),className:"hover-glow",children:[n.jsx(Zm,{className:a?"h-3 w-3":"h-4 w-4"}),!a&&"Retour"]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:`font-bold bg-gradient-to-r from-primary via-accent to-tech-purple bg-clip-text text-transparent drop-shadow-sm ${a?"text-2xl":"text-4xl"}`,children:"Gestion des Ressources Humaines"}),n.jsx("p",{className:`text-muted-foreground font-medium ${a?"text-sm":"text-lg"}`,children:"Module complet de gestion RH"})]})]}),n.jsx("div",{className:a?"ml-2":"ml-4",children:n.jsx(Nw,{})})]}),n.jsxs(pr,{value:e,onValueChange:t,className:"w-full",children:[n.jsxs(ar,{className:`grid w-full modern-card glow-primary bg-gradient-to-r from-primary/10 via-accent/10 to-tech-purple/10 border-2 ${a?"grid-cols-3 gap-2 p-2 mb-4":"grid-cols-6 gap-2 p-3 mb-8"}`,children:[n.jsxs(Ce,{value:"dashboard",className:"flex items-center gap-2",children:[n.jsx(ao,{className:"h-4 w-4"}),!a&&"Dashboard"]}),n.jsxs(Ce,{value:"personnel",className:"flex items-center gap-2",children:[n.jsx(At,{className:"h-4 w-4"}),!a&&"Personnel"]}),n.jsxs(Ce,{value:"performance",className:"flex items-center gap-2",children:[n.jsx(xr,{className:"h-4 w-4"}),!a&&"Performance"]}),n.jsxs(Ce,{value:"operations",className:"flex items-center gap-2",children:[n.jsx(lt,{className:"h-4 w-4"}),!a&&"Oprations"]}),n.jsxs(Ce,{value:"development",className:"flex items-center gap-2",children:[n.jsx(Dl,{className:"h-4 w-4"}),!a&&"Dveloppement"]}),n.jsxs(Ce,{value:"safety",className:"flex items-center gap-2",children:[n.jsx(hs,{className:"h-4 w-4"}),!a&&"Scurit"]})]}),n.jsx(Ee,{value:"dashboard",className:a?"mt-2":"mt-6",children:n.jsx("div",{className:"modern-card rounded-xl transition-smooth hover-glow",children:n.jsx(HQ,{})})}),n.jsx(Ee,{value:"personnel",className:a?"mt-2":"mt-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsxs(L,{variant:r.employees==="management"?"default":"outline",onClick:()=>s(i=>({...i,employees:"management"})),className:"flex-1",children:[n.jsx(At,{className:"h-4 w-4 mr-2"}),"Gestion Employs"]}),n.jsxs(L,{variant:r.employees==="departments"?"default":"outline",onClick:()=>s(i=>({...i,employees:"departments"})),className:"flex-1",children:[n.jsx(ao,{className:"h-4 w-4 mr-2"}),"Dpartements"]})]}),n.jsxs("div",{className:"modern-card rounded-xl transition-smooth hover-glow",children:[r.employees==="management"&&n.jsx(xZ,{}),r.employees==="departments"&&n.jsx(bZ,{})]})]})}),n.jsx(Ee,{value:"performance",className:a?"mt-2":"mt-6",children:n.jsx("div",{className:"modern-card rounded-xl transition-smooth hover-glow",children:n.jsx(_Z,{})})}),n.jsx(Ee,{value:"operations",className:a?"mt-2":"mt-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[n.jsxs(L,{variant:r.operations==="onboarding"?"default":"outline",onClick:()=>s(i=>({...i,operations:"onboarding"})),className:"flex-1 min-w-32",children:[n.jsx(At,{className:"h-4 w-4 mr-2"}),"Onboarding"]}),n.jsxs(L,{variant:r.operations==="leaves"?"default":"outline",onClick:()=>s(i=>({...i,operations:"leaves"})),className:"flex-1 min-w-32",children:[n.jsx(ze,{className:"h-4 w-4 mr-2"}),"Congs"]}),n.jsxs(L,{variant:r.operations==="time"?"default":"outline",onClick:()=>s(i=>({...i,operations:"time"})),className:"flex-1 min-w-32",children:[n.jsx(lt,{className:"h-4 w-4 mr-2"}),"Temps"]}),n.jsxs(L,{variant:r.operations==="expenses"?"default":"outline",onClick:()=>s(i=>({...i,operations:"expenses"})),className:"flex-1 min-w-32",children:[n.jsx(ao,{className:"h-4 w-4 mr-2"}),"Frais"]}),n.jsxs(L,{variant:r.operations==="payroll"?"default":"outline",onClick:()=>s(i=>({...i,operations:"payroll"})),className:"flex-1 min-w-32",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Paie"]})]}),n.jsxs("div",{className:"modern-card rounded-xl transition-smooth hover-glow",children:[r.operations==="onboarding"&&n.jsx(NZ,{}),r.operations==="leaves"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[n.jsxs(L,{variant:r.leaves==="requests"?"default":"outline",onClick:()=>s(i=>({...i,leaves:"requests"})),className:"flex-1 min-w-32",children:[n.jsx(ze,{className:"h-4 w-4 mr-2"}),"Demandes"]}),n.jsxs(L,{variant:r.leaves==="balances"?"default":"outline",onClick:()=>s(i=>({...i,leaves:"balances"})),className:"flex-1 min-w-32",children:[n.jsx(lt,{className:"h-4 w-4 mr-2"}),"Soldes"]}),n.jsxs(L,{variant:r.leaves==="types"?"default":"outline",onClick:()=>s(i=>({...i,leaves:"types"})),className:"flex-1 min-w-32",children:[n.jsx(ao,{className:"h-4 w-4 mr-2"}),"Types"]})]}),n.jsxs("div",{children:[r.leaves==="requests"&&n.jsx(mZ,{}),r.leaves==="balances"&&n.jsx(yZ,{}),r.leaves==="types"&&n.jsx(vZ,{})]})]}),r.operations==="time"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsxs(L,{variant:r.time==="attendance"?"default":"outline",onClick:()=>s(i=>({...i,time:"attendance"})),className:"flex-1",children:[n.jsx(lt,{className:"h-4 w-4 mr-2"}),"Prsences"]}),n.jsxs(L,{variant:r.time==="timesheets"?"default":"outline",onClick:()=>s(i=>({...i,time:"timesheets"})),className:"flex-1",children:[n.jsx(ze,{className:"h-4 w-4 mr-2"}),"Feuilles de temps"]})]}),n.jsxs("div",{children:[r.time==="attendance"&&n.jsx(pZ,{}),r.time==="timesheets"&&n.jsx(wZ,{})]})]}),r.operations==="expenses"&&n.jsx(DZ,{}),r.operations==="payroll"&&n.jsx(PZ,{})]})]})}),n.jsx(Ee,{value:"development",className:a?"mt-2":"mt-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex gap-2 mb-4",children:n.jsxs(L,{variant:r.development==="skills"?"default":"outline",onClick:()=>s(i=>({...i,development:"skills"})),className:"flex-1",children:[n.jsx(xr,{className:"h-4 w-4 mr-2"}),"Comptences & Formation"]})}),n.jsx("div",{className:"modern-card rounded-xl transition-smooth hover-glow",children:r.development==="skills"&&n.jsx(EZ,{})})]})}),n.jsx(Ee,{value:"safety",className:a?"mt-2":"mt-6",children:n.jsx("div",{className:"modern-card rounded-xl transition-smooth hover-glow",children:n.jsx(AZ,{})})})]})]})},MZ=()=>{const{toast:e}=rt(),[t,r]=h.useState([]),[s,a]=h.useState(null),[o,i]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(null),[f,m]=h.useState(!1),[p,w]=h.useState(null),v=h.useCallback(async()=>{var S;try{const{data:{user:N}}=await O.auth.getUser();if(!N){m(!1);return}const{data:_,error:E}=await O.from("user_roles").select("roles!inner(name)").eq("user_id",N.id).eq("is_active",!0).single();if(E){console.error("Erreur vrification permissions:",E),m(!1);return}const D=["tenant_admin","manager","hr_manager","super_admin"],C=((S=_==null?void 0:_.roles)==null?void 0:S.name)&&D.includes(_.roles.name);m(C||!1)}catch(N){console.error("Exception vrification permissions:",N),m(!1)}},[]),x=h.useCallback(async()=>{try{const{data:{user:S}}=await O.auth.getUser();if(!S)return;const{data:N}=await O.from("user_roles").select("tenant_id").eq("user_id",S.id).eq("is_active",!0).not("tenant_id","is",null).single(),_=N==null?void 0:N.tenant_id;if(!_)return;const{data:E,error:D}=await O.from("invitations").select("*").eq("tenant_id",_).eq("invitation_type","collaborator").eq("status","pending").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(D){console.error("Erreur chargement invitations:",D),u(D.message);return}const C=(E||[]).map(k=>({id:k.id,email:k.email,full_name:k.full_name,role_to_assign:k.role_to_assign||"employee",department:k.department,job_position:k.job_position,created_at:k.created_at,expires_at:k.expires_at,status:k.status}));r(C)}catch(S){console.error("Exception chargement invitations:",S),u(S.message)}},[]),g=h.useCallback(async()=>{try{const{data:{user:S}}=await O.auth.getUser();if(!S)return;const{data:N}=await O.from("user_roles").select("tenant_id").eq("user_id",S.id).eq("is_active",!0).not("tenant_id","is",null).single(),_=N==null?void 0:N.tenant_id;if(!_)return;const{data:E,error:D}=await O.from("invitations").select("status").eq("tenant_id",_).eq("invitation_type","collaborator");if(D){console.error("Erreur chargement stats:",D);return}const C={total:E.length,pending:E.filter(k=>k.status==="pending").length,accepted:E.filter(k=>k.status==="accepted").length,expired:E.filter(k=>k.status==="expired").length,cancelled:E.filter(k=>k.status==="cancelled").length};a(C)}catch(S){console.error("Exception chargement stats:",S)}},[]),y=h.useCallback(async()=>{i(!0),u(null);try{await Promise.all([v(),x(),g()])}finally{i(!1)}},[v,x,g]),b=h.useCallback(async S=>{var _,E;if(!f)return e({title:" Permissions insuffisantes",description:"Vous n'avez pas les permissions pour inviter des collaborateurs",variant:"destructive"}),!1;if(!S.email||!S.fullName||!S.roleToAssign)return e({title:" Donnes incompltes",description:"Email, nom complet et rle sont requis",variant:"destructive"}),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S.email))return e({title:" Email invalide",description:"Veuillez saisir une adresse email valide",variant:"destructive"}),!1;c(!0),u(null);try{const{data:{session:D}}=await O.auth.getSession();if(!(D!=null&&D.access_token))throw new Error("Session non trouve");const k=await fetch("https://qliinxtanjdnwxlvnxji.supabase.co/functions/v1/send-collaborator-invitation",{method:"POST",headers:{Authorization:`Bearer ${D.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({email:S.email.toLowerCase().trim(),fullName:S.fullName.trim(),roleToAssign:S.roleToAssign,department:((_=S.department)==null?void 0:_.trim())||null,jobPosition:((E=S.jobPosition)==null?void 0:E.trim())||null,siteUrl:window.location.origin})}),P=await k.json();if(!k.ok){const R=new Error(P.error||"Erreur lors de l'envoi de l'invitation");throw R.errorCode=P.errorCode,R.suggestion=P.suggestion,R.technicalDetails=P.technicalDetails,R}return e({title:" Invitation envoye !",description:`${S.fullName} recevra un email  ${S.email}`,variant:"default"}),await y(),!0}catch(D){console.error("Erreur envoi invitation:",D);let C=" Erreur d'invitation",k=D.message||"Une erreur est survenue",P=D.suggestion||"";if(D.errorCode)switch(D.errorCode){case"EMAIL_ALREADY_EXISTS":case"EMAIL_ALREADY_IN_TENANT":C=" Email dj utilis";break;case"INSUFFICIENT_PERMISSIONS":C=" Permissions insuffisantes";break;case"UNAUTHORIZED":case"SESSION_EXPIRED":C=" Session expire";break;case"NO_TENANT_FOUND":C=" Compte incomplet";break;case"MISSING_REQUIRED_FIELDS":C=" Informations manquantes";break;case"RATE_LIMIT_EXCEEDED":C=" Limite atteinte";break;default:C=" Erreur"}const R=P?`${k}

 ${P}`:k;return e({title:C,description:R,variant:"destructive",duration:7e3}),u(k),!1}finally{c(!1)}},[f,e,y]),j=h.useCallback(async S=>{try{const N=[...t];r(E=>E.filter(D=>D.id!==S));const{error:_}=await O.from("invitations").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",S);if(_)throw r(N),_;return e({title:" Invitation rvoque",description:"L'invitation a t annule avec succs",variant:"default"}),await g(),!0}catch(N){return console.error("Erreur rvocation invitation:",N),e({title:" Erreur",description:"Impossible d'annuler l'invitation",variant:"destructive"}),!1}},[t,e,g]);return h.useEffect(()=>{y()},[y]),h.useEffect(()=>{const N=setInterval(()=>{r(_=>_.filter(E=>new Date(E.expires_at)>new Date))},6e4);return()=>clearInterval(N)},[]),{sendInvitation:b,revokeInvitation:j,refreshInvitations:y,pendingInvitations:t,stats:s,isLoading:o,isSending:l,error:d,canInvite:f,remainingSlots:p}},IZ=()=>{const[e,t]=h.useState([]),[r,s]=h.useState(!0),{toast:a}=rt(),{sendInvitation:o,revokeInvitation:i,refreshInvitations:l,pendingInvitations:c,stats:d,isLoading:u,isSending:f,error:m,canInvite:p}=MZ(),[w,v]=h.useState({email:"",fullName:"",roleToAssign:"",department:"",jobPosition:""}),[x,g]=h.useState(!1),[y,b]=h.useState(""),{handleFocus:j,getPlaceholder:S}=Lu({email:"collaborateur@exemple.com",fullName:"Marie Dupont",department:"Dveloppement",jobPosition:"Dveloppeur Frontend"});h.useEffect(()=>{(async()=>{try{s(!0);const{data:P,error:R}=await O.from("roles").select("name, display_name, description").order("hierarchy_level",{ascending:!0});if(R){console.error("Erreur chargement rles:",R);return}const A=(P||[]).filter(I=>I.name!=="super_admin"&&I.name!=="tenant_admin").map(I=>({value:I.name,label:I.display_name||I.name,description:I.description||`Rle ${I.display_name||I.name}`}));t(A),console.log(" Rles chargs:",A.length,"rles disponibles")}catch(P){console.error("Exception chargement rles:",P)}finally{s(!1)}})()},[]),h.useEffect(()=>{e.length>0&&!w.roleToAssign&&v(k=>({...k,roleToAssign:e[0].value}))},[e]);const N=(k,P)=>{v(R=>({...R,[k]:P}))},_=k=>{k==="autre"?(g(!0),v(P=>({...P,roleToAssign:""}))):(g(!1),b(""),v(P=>({...P,roleToAssign:k})))},E=async k=>{if(k.preventDefault(),x&&!y.trim()){a({title:" Rle manquant",description:"Veuillez spcifier le rle personnalis ou slectionner un rle dans la liste",variant:"destructive"});return}const P={...w,roleToAssign:x?y.trim():w.roleToAssign};await o(P)&&(v({email:"",fullName:"",roleToAssign:e.length>0?e[0].value:"",department:"",jobPosition:""}),g(!1),b(""))},D=async k=>{confirm("tes-vous sr de vouloir annuler cette invitation ?")&&await i(k)},C=k=>{const P=new Date(k),R=new Date,A=P.getTime()-R.getTime(),I=Math.ceil(A/(1e3*60*60*24));return I<0?"Expire":I===0?"Expire aujourd'hui":I===1?"Expire demain":`Expire dans ${I} jours`};return p?n.jsxs("div",{className:"space-y-6",children:[d&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"En attente"}),n.jsx("p",{className:"text-2xl font-bold",children:d.pending})]}),n.jsx(lt,{className:"h-8 w-8 text-orange-500 opacity-75"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Acceptes"}),n.jsx("p",{className:"text-2xl font-bold",children:d.accepted})]}),n.jsx(fs,{className:"h-8 w-8 text-green-500 opacity-75"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expires"}),n.jsx("p",{className:"text-2xl font-bold",children:d.expired})]}),n.jsx(Qr,{className:"h-8 w-8 text-gray-400 opacity-75"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total"}),n.jsx("p",{className:"text-2xl font-bold",children:d.total})]}),n.jsx(At,{className:"h-8 w-8 text-blue-500 opacity-75"})]})})})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(gs,{className:"h-5 w-5"}),"Inviter un collaborateur"]}),n.jsx(sn,{children:"Ajoutez un nouveau membre  votre quipe"})]}),n.jsx(L,{variant:"outline",size:"sm",onClick:l,disabled:u,children:n.jsx(Bs,{className:`h-4 w-4 ${u?"animate-spin":""}`})})]})}),n.jsx(W,{children:n.jsxs("form",{onSubmit:E,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(J,{htmlFor:"email",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ql,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{id:"email",type:"email",placeholder:S("email",w.email),value:w.email,onChange:k=>N("email",k.target.value),onFocus:()=>j("email"),disabled:f,className:"pl-10",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(J,{htmlFor:"fullName",children:["Nom complet ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ye,{id:"fullName",type:"text",placeholder:S("fullName",w.fullName),value:w.fullName,onChange:k=>N("fullName",k.target.value),onFocus:()=>j("fullName"),disabled:f,required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(J,{htmlFor:"role",children:["Rle ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs(Ie,{value:x?"autre":w.roleToAssign,onValueChange:_,disabled:f||r,children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:r?"Chargement des rles...":"Slectionner un rle"})}),n.jsx(Re,{children:r?n.jsx(ae,{value:"loading",disabled:!0,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vs,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Chargement..."})]})}):e.length===0?n.jsx(ae,{value:"empty",disabled:!0,children:n.jsx("span",{className:"text-muted-foreground",children:"Aucun rle disponible"})}):n.jsxs(n.Fragment,{children:[e.map(k=>n.jsx(ae,{value:k.value,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:k.label}),n.jsx("span",{className:"text-xs text-muted-foreground",children:k.description})]})},k.value)),n.jsx(ae,{value:"autre",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:" Autre"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Spcifier un rle personnalis"})]})})]})})]})]}),x&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs(J,{htmlFor:"customRole",children:["Rle personnalis ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ye,{id:"customRole",type:"text",placeholder:"Ex: Consultant, Stagiaire, Freelance...",value:y,onChange:k=>b(k.target.value),disabled:f,required:!0,className:"border-primary"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:" Ce rle personnalis sera cr pour ce collaborateur"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"department",children:"Dpartement (optionnel)"}),n.jsx(ye,{id:"department",type:"text",placeholder:S("department",w.department||""),value:w.department,onChange:k=>N("department",k.target.value),onFocus:()=>j("department"),disabled:f})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"jobPosition",children:"Poste (optionnel)"}),n.jsx(ye,{id:"jobPosition",type:"text",placeholder:S("jobPosition",w.jobPosition||""),value:w.jobPosition,onChange:k=>N("jobPosition",k.target.value),onFocus:()=>j("jobPosition"),disabled:f})]})]}),m&&n.jsxs(qn,{variant:"destructive",children:[n.jsx(Qr,{className:"h-4 w-4"}),n.jsx(Gn,{children:m})]}),n.jsx(L,{type:"submit",disabled:f||!w.email.trim()||!w.fullName.trim(),className:"w-full md:w-auto",children:f?n.jsxs(n.Fragment,{children:[n.jsx(Vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oo,{className:"mr-2 h-4 w-4"}),"Envoyer l'invitation"]})})]})})]}),c.length>0&&n.jsxs(V,{children:[n.jsxs(le,{children:[n.jsxs(ce,{children:["Invitations en attente (",c.length,")"]}),n.jsx(sn,{children:"Les invitations expirent automatiquement aprs 7 jours"})]}),n.jsx(W,{children:n.jsx("div",{className:"space-y-3",children:c.map(k=>{var P;return n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"font-medium",children:k.full_name}),n.jsx(re,{variant:"outline",className:"text-xs",children:((P=e.find(R=>R.value===k.role_to_assign))==null?void 0:P.label)||k.role_to_assign})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:k.email}),(k.department||k.job_position)&&n.jsx("p",{className:"text-xs text-muted-foreground",children:[k.department,k.job_position].filter(Boolean).join("  ")}),n.jsx("p",{className:"text-xs text-orange-600 font-medium",children:C(k.expires_at)})]}),n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>D(k.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(Hs,{className:"h-4 w-4"})})]},k.id)})})})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsx(ce,{className:"text-base",children:" Comment a marche ?"})}),n.jsxs(W,{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsx("p",{children:" Le collaborateur reoit un email avec un lien d'invitation"}),n.jsx("p",{children:" Il cre son compte en utilisant le mot de passe temporaire fourni"}),n.jsx("p",{children:" Il est automatiquement ajout  votre entreprise avec le rle spcifi"}),n.jsx("p",{children:" Les invitations expirent aprs 7 jours pour des raisons de scurit"}),n.jsx("p",{children:" Vous pouvez annuler une invitation en attente  tout moment"})]})]})]}):n.jsxs(qn,{className:"border-orange-200 bg-orange-50",children:[n.jsx(Qr,{className:"h-4 w-4 text-orange-600"}),n.jsxs(Gn,{className:"text-orange-800",children:[n.jsx("strong",{children:"Permissions insuffisantes"}),n.jsx("br",{}),"Seuls les administrateurs, managers et responsables RH peuvent inviter des collaborateurs."]})]})},OZ=()=>{const[e,t]=h.useState("invitations");return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Ressources Humaines"}),n.jsx("p",{className:"text-muted-foreground",children:"Gestion des employs, congs, prsences et invitations"})]})}),n.jsxs(pr,{value:e,onValueChange:t,className:"space-y-4",children:[n.jsxs(ar,{className:"grid w-full grid-cols-2 lg:grid-cols-5",children:[n.jsxs(Ce,{value:"overview",className:"flex items-center gap-2",children:[n.jsx(xr,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Vue d'ensemble"}),n.jsx("span",{className:"sm:hidden",children:"Vue"})]}),n.jsxs(Ce,{value:"employees",className:"flex items-center gap-2",children:[n.jsx(At,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Employs"}),n.jsx("span",{className:"sm:hidden",children:"Staff"})]}),n.jsxs(Ce,{value:"invitations",className:"flex items-center gap-2",children:[n.jsx(gs,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Invitations"}),n.jsx("span",{className:"sm:hidden",children:"Inviter"})]}),n.jsxs(Ce,{value:"leaves",className:"flex items-center gap-2",children:[n.jsx(ze,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Congs"}),n.jsx("span",{className:"sm:hidden",children:"Congs"})]}),n.jsxs(Ce,{value:"attendance",className:"flex items-center gap-2",children:[n.jsx(lt,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Prsences"}),n.jsx("span",{className:"sm:hidden",children:"Prsence"})]})]}),n.jsx(Ee,{value:"overview",className:"space-y-4",children:n.jsxs(V,{children:[n.jsxs(le,{children:[n.jsx(ce,{children:"Tableau de bord RH"}),n.jsx(sn,{children:"Vue d'ensemble des statistiques et indicateurs cls"})]}),n.jsx(W,{children:n.jsx("p",{className:"text-muted-foreground",children:"Intgrez ici vos KPIs, graphiques et widgets de tableau de bord"})})]})}),n.jsx(Ee,{value:"employees",className:"space-y-4",children:n.jsx(e4,{})}),n.jsx(Ee,{value:"invitations",className:"space-y-4",children:n.jsx(IZ,{})}),n.jsx(Ee,{value:"leaves",className:"space-y-4",children:n.jsxs(V,{children:[n.jsxs(le,{children:[n.jsx(ce,{children:"Gestion des congs"}),n.jsx(sn,{children:"Demandes de congs et validation"})]}),n.jsx(W,{children:n.jsx("p",{className:"text-muted-foreground",children:"Intgrez ici votre systme de gestion des congs"})})]})}),n.jsx(Ee,{value:"attendance",className:"space-y-4",children:n.jsxs(V,{children:[n.jsxs(le,{children:[n.jsx(ce,{children:"Suivi des prsences"}),n.jsx(sn,{children:"Pointage et suivi du temps de travail"})]}),n.jsx(W,{children:n.jsx("p",{className:"text-muted-foreground",children:"Intgrez ici votre systme de suivi des prsences"})})]})})]})]})},LZ=e=>{var q,Y,G;const[t,r]=h.useState({projects:[],totalCount:0,activeProjects:0,completedProjects:0,overdueProjects:0}),[s,a]=h.useState(!0),[o,i]=h.useState(null),[l,c]=h.useState({fetchTime:0,cacheHit:!1,dataSize:0,lastUpdate:new Date,queryComplexity:"simple"}),[d,u]=h.useState({page:1,limit:50,total:0,hasMore:!1,totalPages:0}),{toast:f}=rt(),{tenantId:m}=Uu(),{isSuperAdmin:p,isLoading:w,userRoles:v}=Fo(),x=h.useRef(!1),g=h.useRef(null),y=h.useRef(void 0),b=h.useRef(new Map),j=h.useRef(null),S=5*60*1e3,N=h.useCallback((z,Z,Q,H=1)=>{const te=`projects_${Z?"super_admin":z||"no_tenant"}`,se=Q?`_${JSON.stringify(Q)}`:"",ne=`_page_${H}`;return`${te}${se}${ne}`},[]),_=h.useCallback(z=>{const Z=b.current.get(z);return Z&&Date.now()-Z.timestamp<S?Z.data:null},[]),E=h.useCallback((z,Z)=>{b.current.set(z,{data:Z,timestamp:Date.now()})},[]),D=h.useCallback((z,Z,Q,H=1,te=50)=>{var he,be;let se=z?O.from("projects").select("*, tenants:tenant_id(name)",{count:"exact"}):O.from("projects").select("*",{count:"exact"});!z&&Z&&(se=se.eq("tenant_id",Z)),Q&&((he=Q.status)!=null&&he.length&&(se=se.in("status",Q.status)),(be=Q.priority)!=null&&be.length&&(se=se.in("priority",Q.priority)),Q.search&&(se=se.or(`name.ilike.%${Q.search}%,description.ilike.%${Q.search}%`)),Q.createdBy&&(se=se.eq("created_by",Q.createdBy)),Q.dateRange&&(se=se.gte("start_date",Q.dateRange.start).lte("end_date",Q.dateRange.end)));const ne=(H-1)*te,we=ne+te-1;return se.order("created_at",{ascending:!1}).range(ne,we)},[]),C=h.useCallback(async(z=1,Z=!1)=>{j.current&&j.current.abort();const Q=new AbortController;j.current=Q;try{const H=performance.now();a(!0),i(null);const te=p(),se=N(m,te,e,z);if(!Z){const ie=_(se);if(ie){r(ie),c(ge=>({...ge,cacheHit:!0,fetchTime:performance.now()-H,lastUpdate:new Date})),a(!1);return}}const ne=D(te,m,e,z,d.limit),{data:we,error:he,count:be}=await ne;if(he)throw new Error(he.message);const de=we||[],Me=de.filter(ie=>ie.status==="active").length,Be=de.filter(ie=>ie.status==="completed").length,Ke=de.filter(ie=>ie.end_date?new Date(ie.end_date)<new Date&&ie.status!=="completed":!1).length,et={projects:de,totalCount:be||0,activeProjects:Me,completedProjects:Be,overdueProjects:Ke},$=performance.now()-H,K=JSON.stringify(et).length,ee=e?"complex":te?"medium":"simple";E(se,et),r(et),c({fetchTime:$,cacheHit:!1,dataSize:K,lastUpdate:new Date,queryComplexity:ee}),u(ie=>({...ie,page:z,total:be||0,hasMore:(be||0)>z*d.limit,totalPages:Math.ceil((be||0)/d.limit)}))}catch(H){if(H.name==="AbortError")return;console.error(" Error fetching projects data:",H),i(H.message||"Erreur de chargement des projets"),f({title:"Erreur",description:"Impossible de charger les projets",variant:"destructive"})}finally{a(!1),j.current=null}},[m,p,e,d.limit,N,_,E,D,f]);h.useEffect(()=>{if(w)return;if(!m&&!p()){a(!1);return}const z=JSON.stringify(e)!==JSON.stringify(y.current),Z=g.current!==m;x.current&&!z&&!Z||(x.current=!0,g.current=m,y.current=e,C(1))},[m,w,e,C,p]);const k=h.useCallback(()=>{const z=N(m,p(),e,d.page);b.current.delete(z),x.current=!1,g.current=null,y.current=void 0,C(d.page,!0)},[m,p,e,d.page,N,C]),P=h.useCallback(()=>{d.hasMore&&!s&&C(d.page+1)},[d.hasMore,d.page,s,C]),R=h.useCallback(()=>{b.current.clear()},[]),A=h.useCallback(()=>({size:b.current.size,keys:Array.from(b.current.keys()),totalSize:Array.from(b.current.values()).reduce((z,{data:Z})=>z+JSON.stringify(Z).length,0)}),[]);h.useEffect(()=>()=>{j.current&&j.current.abort()},[]);const I=((Y=(q=v[0])==null?void 0:q.roles)==null?void 0:Y.name)||"Aucun rle",F="project_manager, tenant_admin ou super_admin",B=(G=v[0])==null?void 0:G.tenant_id,T=m||B,U=(p()||I==="project_manager"||I==="tenant_admin")&&!!T;return{...t,loading:s,error:o,metrics:l,pagination:d,canAccess:U,isSuperAdmin:p(),accessInfo:{hasAccess:U,currentRole:I,requiredRole:F,reason:U?null:v.length?"insufficient_permissions":"no_role"},refresh:k,loadMore:P,clearCache:R,getCacheStats:A,isDataStale:l.lastUpdate&&Date.now()-l.lastUpdate.getTime()>S,cacheKey:N(m,p(),e,d.page),goToPage:z=>C(z),setFilters:z=>{y.current=z,x.current=!1,C(1)}}},$Z=({showMetrics:e=!0,compactMode:t=!1})=>{const[r,s]=h.useState({}),[a,o]=h.useState(""),[i,l]=h.useState([]),[c,d]=h.useState([]),{projects:u,totalCount:f,activeProjects:m,completedProjects:p,overdueProjects:w,loading:v,error:x,metrics:g,pagination:y,canAccess:b,isSuperAdmin:j,accessInfo:S,refresh:N,loadMore:_,goToPage:E,setFilters:D,isDataStale:C,cacheKey:k}=LZ(r);rt();const P=h.useMemo(()=>({...r,search:a||void 0,status:i.length>0?i:void 0,priority:c.length>0?c:void 0}),[r,a,i,c]),R=h.useCallback(()=>{D(P)},[P,D]),A=h.useCallback(q=>{o(q);const Y=setTimeout(()=>{R()},300);return()=>clearTimeout(Y)},[R]),I=h.useCallback(q=>{l(Y=>Y.includes(q)?Y.filter(G=>G!==q):[...Y,q]),R()},[R]),F=h.useCallback(q=>{d(Y=>Y.includes(q)?Y.filter(G=>G!==q):[...Y,q]),R()},[R]),B=q=>{switch(q){case"active":return"default";case"completed":return"secondary";case"on_hold":return"outline";case"cancelled":return"destructive";default:return"outline"}},T=q=>{switch(q){case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}},M=q=>q?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(q):"-",U=q=>q?new Date(q).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";return!b&&(S!=null&&S.reason)?n.jsx(qM,{reason:S.reason,module:"Gestion de Projets",currentRole:S.currentRole,requiredRole:S.requiredRole}):n.jsxs("div",{className:"space-y-6",children:[e&&!t&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(Ln,{label:"Total Projets",value:f,subtitle:"Tous les projets",icon:n.jsx(ba,{className:"w-6 h-6"}),color:"blue"}),n.jsx(Ln,{label:"Actifs",value:m,subtitle:"En cours",icon:n.jsx(xr,{className:"w-6 h-6"}),color:"green",trend:"up"}),n.jsx(Ln,{label:"Termins",value:p,subtitle:"Complts",icon:n.jsx(fs,{className:"w-6 h-6"}),color:"green"}),n.jsx(Ln,{label:"En retard",value:w,subtitle:"Ncessitent attention",icon:n.jsx(In,{className:"w-6 h-6"}),color:"red",trend:"down"})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs(ce,{className:"flex items-center gap-2",children:["Gestion des Projets",j&&n.jsx(re,{variant:"secondary",children:"Super Admin"})]}),!t&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[f," projets  Cache: ",g.cacheHit?"":"","  Donnes: ",(g.dataSize/1024).toFixed(1),"KB  Fetch: ",g.fetchTime.toFixed(0),"ms",C&&n.jsx("span",{className:"text-orange-600",children:"  Donnes obsoltes"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(L,{variant:"outline",size:"sm",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Exporter"]}),n.jsxs(L,{variant:"outline",size:"sm",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Nouveau Projet"]}),n.jsxs(L,{variant:"outline",size:"sm",onClick:N,disabled:v,children:[n.jsx(Bs,{className:`h-4 w-4 mr-2 ${v?"animate-spin":""}`}),"Actualiser"]})]})]})}),n.jsxs(W,{children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{placeholder:"Rechercher des projets...",value:a,onChange:q=>A(q.target.value),className:"pl-10"})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Ie,{onValueChange:I,children:[n.jsx(Pe,{className:"w-40",children:n.jsx(Oe,{placeholder:"Statut"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"active",children:"Actif"}),n.jsx(ae,{value:"completed",children:"Termin"}),n.jsx(ae,{value:"on_hold",children:"En pause"}),n.jsx(ae,{value:"cancelled",children:"Annul"})]})]}),n.jsxs(Ie,{onValueChange:F,children:[n.jsx(Pe,{className:"w-40",children:n.jsx(Oe,{placeholder:"Priorit"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"high",children:"Haute"}),n.jsx(ae,{value:"medium",children:"Moyenne"}),n.jsx(ae,{value:"low",children:"Basse"})]})]})]})]}),v&&u.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Bs,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Chargement des projets..."})]}):x?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(In,{className:"h-8 w-8 mx-auto mb-4 text-red-500"}),n.jsx("p",{className:"text-red-600 mb-4",children:x}),n.jsx(L,{onClick:N,variant:"outline",children:"Ressayer"})]}):u.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ba,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucun projet trouv"}),n.jsxs(L,{className:"mt-4",variant:"outline",children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Crer votre premier projet"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(q=>{var G;const Y=q.end_date&&new Date(q.end_date)<new Date&&q.status!=="completed";return n.jsxs(V,{className:`hover:shadow-md transition-shadow cursor-pointer ${Y?"border-red-300 bg-red-50/30":""}`,children:[n.jsx(le,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg leading-tight mb-2",children:q.name}),q.description&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:q.description})]}),n.jsx(L,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:n.jsx(v2,{className:"h-4 w-4"})})]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(re,{variant:B(q.status),children:q.status}),n.jsx(re,{variant:T(q.priority),children:q.priority})]}),q.progress!==void 0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Progression"}),n.jsxs("span",{className:"font-medium",children:[q.progress,"%"]})]}),n.jsx(Ot,{value:q.progress,className:"h-2"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[n.jsx(ze,{className:"h-3 w-3"}),n.jsx("span",{children:"Dbut"})]}),n.jsx("div",{className:"font-medium",children:U(q.start_date)})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[n.jsx(ze,{className:"h-3 w-3"}),n.jsx("span",{children:"Fin"})]}),n.jsx("div",{className:`font-medium ${Y?"text-red-600":""}`,children:U(q.end_date)})]}),q.budget&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[n.jsx(Wh,{className:"h-3 w-3"}),n.jsx("span",{children:"Budget"})]}),n.jsx("div",{className:"font-medium",children:M(q.budget)})]}),q.team_size&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[n.jsx(At,{className:"h-3 w-3"}),n.jsx("span",{children:"quipe"})]}),n.jsxs("div",{className:"font-medium",children:[q.team_size," membres"]})]})]}),q.profiles&&n.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[n.jsxs(ka,{className:"h-6 w-6",children:[n.jsx(zo,{src:q.profiles.avatar_url}),n.jsx(Da,{className:"text-xs",children:(G=q.profiles.full_name)==null?void 0:G.charAt(0)})]}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Cr par ",q.profiles.full_name]})]}),j&&q.tenants&&n.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-2 rounded",children:[" ",q.tenants.name]})]})]},q.id)})}),y.totalPages>1&&n.jsxs("div",{className:"flex items-center justify-between mt-8",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",y.page," sur ",y.totalPages," ",f," projets au total"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(L,{variant:"outline",size:"sm",onClick:()=>E(y.page-1),disabled:y.page===1||v,children:n.jsx(ep,{className:"h-4 w-4"})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,y.totalPages)},(q,Y)=>{const G=Math.max(1,y.page-2)+Y;return G>y.totalPages?null:n.jsx(L,{variant:G===y.page?"default":"outline",size:"sm",onClick:()=>E(G),disabled:v,children:G},G)})}),n.jsx(L,{variant:"outline",size:"sm",onClick:()=>E(y.page+1),disabled:y.page===y.totalPages||v,children:n.jsx(ua,{className:"h-4 w-4"})})]})]}),y.hasMore&&n.jsx("div",{className:"text-center mt-6",children:n.jsxs(L,{variant:"outline",onClick:_,disabled:v,children:[v?n.jsx(Bs,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Charger plus de projets"]})})]})]})]})]})};function FZ(){const e=Kn();return n.jsx("div",{className:"min-h-screen bg-background",children:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Gestion de Projet"}),n.jsx("p",{className:"text-muted-foreground",children:"Dashboard et outils de gestion de projet"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{onClick:()=>e("/tasks"),children:[n.jsx(Si,{className:"h-4 w-4 mr-2"}),"Gestion des Tches"]}),n.jsxs(L,{variant:"outline",onClick:()=>e("/hr"),children:[n.jsx(At,{className:"h-4 w-4 mr-2"}),"Ressources Humaines"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs(V,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("/tasks"),children:[n.jsxs(le,{className:"pb-3",children:[n.jsxs(ce,{className:"flex items-center gap-2 text-lg",children:[n.jsx(Si,{className:"h-5 w-5 text-primary"}),"Gestion des Tches"]}),n.jsx(sn,{children:"Crer, modifier et assigner des tches"})]}),n.jsx(W,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Accs complet aux tches"}),n.jsx(Vg,{className:"h-4 w-4"})]})})]}),n.jsxs(V,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[n.jsxs(le,{className:"pb-3",children:[n.jsxs(ce,{className:"flex items-center gap-2 text-lg",children:[n.jsx(ze,{className:"h-5 w-5 text-blue-500"}),"Planning Projet"]}),n.jsx(sn,{children:"Vue Gantt et planification"})]}),n.jsx(W,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Calendrier et chances"}),n.jsx(Vg,{className:"h-4 w-4"})]})})]}),n.jsxs(V,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[n.jsxs(le,{className:"pb-3",children:[n.jsxs(ce,{className:"flex items-center gap-2 text-lg",children:[n.jsx(fn,{className:"h-5 w-5 text-green-500"}),"Rapports Projet"]}),n.jsx(sn,{children:"Analytics et rapports"})]}),n.jsx(W,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Mtriques dtailles"}),n.jsx(Vg,{className:"h-4 w-4"})]})})]})]}),n.jsx($Z,{})]})})}function ga({className:e,...t}){return n.jsx("div",{className:pe("animate-pulse rounded-md bg-muted",e),...t})}const Rx=({task:e,onComplete:t,onPostpone:r,onDelegate:s})=>{const a=c=>{switch(c==null?void 0:c.toLowerCase()){case"high":case"haute":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"medium":case"moyenne":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":case"basse":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},o=c=>{switch(c==null?void 0:c.toLowerCase()){case"in_progress":case"en_cours":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"completed":case"termin":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"blocked":case"bloqu":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},i=e.due_date?mn(e.due_date):null,l=i&&ic(i,Sa(new Date));return n.jsx("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-medium",children:e.title}),l&&n.jsx(re,{variant:"destructive",className:"text-xs",children:"En retard"})]}),e.description&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-xs",children:[i&&n.jsxs(re,{variant:"outline",className:"gap-1",children:[n.jsx(lt,{className:"h-3 w-3"}),Ve(i,"dd MMM HH:mm",{locale:ot})]}),e.priority&&n.jsx(re,{className:a(e.priority),children:e.priority}),e.status&&n.jsx(re,{className:o(e.status),children:e.status}),e.project_id&&n.jsxs(re,{variant:"secondary",className:"gap-1",children:["Projet #",e.project_id.slice(0,8)]})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(L,{size:"sm",variant:"ghost",onClick:()=>t(e.id),title:"Marquer comme termin",children:n.jsx(fs,{className:"h-4 w-4"})}),n.jsx(L,{size:"sm",variant:"ghost",onClick:()=>r(e.id),title:"Reporter",children:n.jsx(lt,{className:"h-4 w-4"})}),n.jsx(L,{size:"sm",variant:"ghost",onClick:()=>s(e.id),title:"Dlguer",children:n.jsx(nr,{className:"h-4 w-4"})})]})]})})},zZ=()=>{const{tasks:e,loading:t,error:r,updateTask:s,refresh:a}=Ns(),[o,i]=X.useState(null);X.useEffect(()=>{O.auth.getUser().then(({data:x})=>i(x.user))},[]);const[l,c]=h.useState({urgent:!0,today:!0,week:!0,completed:!1}),d=h.useMemo(()=>o?e.filter(x=>(x.assigned_to||x.assignee_id)===o.id&&x.status!=="completed"&&x.status!=="done"):[],[e,o]),u=h.useMemo(()=>{if(!o)return[];const x=Ht(new Date,-2);return e.filter(g=>(g.assigned_to||g.assignee_id)===o.id&&(g.status==="completed"||g.status==="done")&&g.updated_at&&mn(g.updated_at)>x)},[e,o]),f=h.useMemo(()=>{const g=Ht(Sa(new Date),1),y=[],b=[],j=[];return d.forEach(S=>{var D,C;const N=S.due_date?mn(S.due_date):null,_=((D=S.priority)==null?void 0:D.toLowerCase())==="high"||((C=S.priority)==null?void 0:C.toLowerCase())==="haute",E=N&&ic(N,g);_||E?y.push(S):N&&yy(N)?b.push(S):(N&&DH(N,{weekStartsOn:1}),j.push(S))}),{urgent:y,today:b,thisWeek:j}},[d]),m=async x=>{try{await s(x,{status:"done"})}catch(g){console.error("Erreur lors de la mise  jour:",g)}},p=async x=>{const g=e.find(b=>b.id===x);if(!(g!=null&&g.due_date))return;const y=Ht(mn(g.due_date),1);try{await s(x,{due_date:y.toISOString()})}catch(b){console.error("Erreur lors du report:",b)}},w=async x=>{console.log("Dlguer tche:",x)},v=x=>{c(g=>({...g,[x]:!g[x]}))};return t?n.jsxs("div",{className:"space-y-4",children:[n.jsx(ga,{className:"h-32 w-full"}),n.jsx(ga,{className:"h-32 w-full"}),n.jsx(ga,{className:"h-32 w-full"})]}):r?n.jsxs(qn,{variant:"destructive",children:[n.jsx(In,{className:"h-4 w-4"}),n.jsxs(Gn,{children:["Erreur lors du chargement des tches: ",typeof r=="string"?r:(r==null?void 0:r.message)||"Erreur inconnue"]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Mes Tches"}),n.jsxs("p",{className:"text-muted-foreground",children:[d.length," tche",d.length>1?"s":""," en cours"]})]}),n.jsxs(L,{variant:"outline",size:"sm",onClick:a,children:[n.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Actualiser"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Urgentes"}),n.jsx("p",{className:"text-2xl font-bold",children:f.urgent.length})]}),n.jsx(EN,{className:"h-8 w-8 text-red-500"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Aujourd'hui"}),n.jsx("p",{className:"text-2xl font-bold",children:f.today.length})]}),n.jsx(ze,{className:"h-8 w-8 text-blue-500"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"}),n.jsx("p",{className:"text-2xl font-bold",children:f.thisWeek.length})]}),n.jsx(Zd,{className:"h-8 w-8 text-yellow-500"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Termines"}),n.jsx("p",{className:"text-2xl font-bold",children:u.length})]}),n.jsx(fs,{className:"h-8 w-8 text-green-500"})]})})})]}),n.jsxs(V,{children:[n.jsx(le,{className:"cursor-pointer hover:bg-accent/50",onClick:()=>v("urgent"),children:n.jsxs(ce,{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(EN,{className:"h-5 w-5 text-red-500"}),n.jsx("span",{children:" URGENT"}),n.jsx(re,{variant:"destructive",children:f.urgent.length})]}),n.jsx(ua,{className:`h-5 w-5 transition-transform ${l.urgent?"rotate-90":""}`})]})}),l.urgent&&n.jsx(W,{className:"space-y-3",children:f.urgent.length===0?n.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucune tche urgente "}):f.urgent.map(x=>n.jsx(Rx,{task:x,onComplete:m,onPostpone:p,onDelegate:w},x.id))})]}),n.jsxs(V,{children:[n.jsx(le,{className:"cursor-pointer hover:bg-accent/50",onClick:()=>v("today"),children:n.jsxs(ce,{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ze,{className:"h-5 w-5 text-blue-500"}),n.jsx("span",{children:" AUJOURD'HUI"}),n.jsx(re,{variant:"secondary",children:f.today.length})]}),n.jsx(ua,{className:`h-5 w-5 transition-transform ${l.today?"rotate-90":""}`})]})}),l.today&&n.jsx(W,{className:"space-y-3",children:f.today.length===0?n.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucune tche pour aujourd'hui"}):f.today.map(x=>n.jsx(Rx,{task:x,onComplete:m,onPostpone:p,onDelegate:w},x.id))})]}),n.jsxs(V,{children:[n.jsx(le,{className:"cursor-pointer hover:bg-accent/50",onClick:()=>v("week"),children:n.jsxs(ce,{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zd,{className:"h-5 w-5 text-yellow-500"}),n.jsx("span",{children:" CETTE SEMAINE"}),n.jsx(re,{variant:"outline",children:f.thisWeek.length})]}),n.jsx(ua,{className:`h-5 w-5 transition-transform ${l.week?"rotate-90":""}`})]})}),l.week&&n.jsx(W,{className:"space-y-3",children:f.thisWeek.length===0?n.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucune tche cette semaine"}):f.thisWeek.map(x=>n.jsx(Rx,{task:x,onComplete:m,onPostpone:p,onDelegate:w},x.id))})]}),n.jsxs(V,{children:[n.jsx(le,{className:"cursor-pointer hover:bg-accent/50",onClick:()=>v("completed"),children:n.jsxs(ce,{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fs,{className:"h-5 w-5 text-green-500"}),n.jsx("span",{children:" TERMINES RCEMMENT"}),n.jsx(re,{variant:"secondary",children:u.length})]}),n.jsx(ua,{className:`h-5 w-5 transition-transform ${l.completed?"rotate-90":""}`})]})}),l.completed&&n.jsx(W,{className:"space-y-3",children:u.length===0?n.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucune tche termine rcemment"}):u.slice(0,10).map(x=>n.jsx("div",{className:"p-4 border rounded-lg opacity-60",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium line-through",children:x.title}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Termine ",x.updated_at&&Ve(mn(x.updated_at),"PPp",{locale:ot})]})]}),n.jsx(fs,{className:"h-5 w-5 text-green-500"})]})},x.id))})]})]})},BZ=[{name:"Bug",icon:n.jsx(g5,{className:"h-4 w-4"}),color:"bg-red-100 text-red-800 dark:bg-red-900/30",data:{title:" Bug: ",priority:"high",status:"todo"}},{name:"Feature",icon:n.jsx(j2,{className:"h-4 w-4"}),color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30",data:{title:" Feature: ",priority:"medium",status:"todo"}},{name:"Documentation",icon:n.jsx(fn,{className:"h-4 w-4"}),color:"bg-green-100 text-green-800 dark:bg-green-900/30",data:{title:" Doc: ",priority:"low",status:"todo"}},{name:"Urgent",icon:n.jsx(B5,{className:"h-4 w-4"}),color:"bg-orange-100 text-orange-800 dark:bg-orange-900/30",data:{title:" Urgent: ",priority:"high",status:"todo",due_date:new Date().toISOString().split("T")[0]}}],UZ=()=>{const{createTask:e,tasks:t,loading:r}=Ns(),{projects:s}=Vu(),{employees:a}=Ks(),[o,i]=h.useState({title:"",description:"",project_id:"",assigned_to:"",priority:"medium",due_date:"",status:"todo"}),[l,c]=h.useState(!1),[d,u]=h.useState(null),[f,m]=h.useState(!1),p=X.useMemo(()=>[...t].sort((y,b)=>{const j=y.created_at?new Date(y.created_at).getTime():0;return(b.created_at?new Date(b.created_at).getTime():0)-j}).slice(0,5),[t]),w=(y,b)=>{i(j=>({...j,[y]:b})),u(null),c(!1)},v=y=>{i(b=>({...b,...y.data}))},x=()=>o.title.trim()?o.project_id?o.due_date?!0:(u("La date d'chance est obligatoire"),!1):(u("Veuillez slectionner un projet"),!1):(u("Le titre est obligatoire"),!1),g=async(y,b=!1)=>{if(y.preventDefault(),!!x()){m(!0),u(null);try{await e({...o,start_date:new Date().toISOString()}),c(!0),i(b?j=>({...j,title:"",description:""}):{title:"",description:"",project_id:o.project_id,assigned_to:"",priority:"medium",due_date:"",status:"todo"}),setTimeout(()=>c(!1),3e3)}catch(j){u(j.message||"Erreur lors de la cration de la tche")}finally{m(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Cration Rapide"}),n.jsx("p",{className:"text-muted-foreground",children:"Crez une nouvelle tche rapidement"})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"text-base flex items-center gap-2",children:[n.jsx(j2,{className:"h-4 w-4"}),"Templates"]})}),n.jsx(W,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:BZ.map(y=>n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>v(y),className:y.color,children:[y.icon,n.jsx("span",{className:"ml-2",children:y.name})]},y.name))})})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"text-base flex items-center gap-2",children:[n.jsx(jt,{className:"h-4 w-4"}),"Nouvelle Tche"]})}),n.jsx(W,{children:n.jsxs("form",{onSubmit:y=>g(y,!1),className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(J,{htmlFor:"title",children:["Titre ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(ye,{id:"title",value:o.title,onChange:y=>w("title",y.target.value),placeholder:"Ex: Corriger le bug de connexion",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"description",children:"Description"}),n.jsx(on,{id:"description",value:o.description,onChange:y=>w("description",y.target.value),placeholder:"Dcrivez la tche en dtails...",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(J,{htmlFor:"project",children:["Projet ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs(Ie,{value:o.project_id,onValueChange:y=>w("project_id",y),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner un projet"})}),n.jsx(Re,{children:s.map(y=>n.jsx(ae,{value:y.id,children:y.name},y.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"assigned_to",children:"Assign "}),n.jsxs(Ie,{value:o.assigned_to,onValueChange:y=>w("assigned_to",y),children:[n.jsx(Pe,{children:n.jsx(Oe,{placeholder:"Slectionner une personne"})}),n.jsx(Re,{children:a.map(y=>n.jsxs(ae,{value:y.id,children:[y.first_name," ",y.last_name]},y.id))})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"priority",children:"Priorit"}),n.jsxs(Ie,{value:o.priority,onValueChange:y=>w("priority",y),children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"high",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500"}),"Haute"]})}),n.jsx(ae,{value:"medium",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-2 w-2 rounded-full bg-yellow-500"}),"Moyenne"]})}),n.jsx(ae,{value:"low",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Basse"]})})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(J,{htmlFor:"due_date",children:["chance ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(ye,{id:"due_date",type:"date",value:o.due_date,onChange:y=>w("due_date",y.target.value),required:!0})]})]}),l&&n.jsxs(qn,{className:"bg-green-50 text-green-900 border-green-200",children:[n.jsx(fs,{className:"h-4 w-4"}),n.jsx(Gn,{children:"Tche cre avec succs ! "})]}),d&&n.jsxs(qn,{variant:"destructive",children:[n.jsx(Kt,{className:"h-4 w-4"}),n.jsx(Gn,{children:d})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{type:"submit",disabled:f||r,className:"flex-1",children:f?n.jsxs(n.Fragment,{children:[n.jsx(lt,{className:"h-4 w-4 mr-2 animate-spin"}),"Cration..."]}):n.jsxs(n.Fragment,{children:[n.jsx(jt,{className:"h-4 w-4 mr-2"}),"Crer"]})}),n.jsx(L,{type:"button",variant:"secondary",disabled:f||r,onClick:y=>g(y,!0),children:"Crer et Continuer"})]})]})})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"text-base flex items-center gap-2",children:[n.jsx(lt,{className:"h-4 w-4"}),"Crations Rcentes (",p.length,")"]})}),n.jsx(W,{children:p.length===0?n.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucune tche rcente"}):n.jsx("div",{className:"space-y-2",children:p.map(y=>n.jsxs("div",{className:"p-3 border rounded-lg flex items-center justify-between hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:y.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:y.created_at&&Ve(new Date(y.created_at),"dd/MM/yyyy HH:mm")})]}),n.jsx(re,{variant:"outline",className:"text-xs",children:y.priority})]},y.id))})})]})]})},VZ=()=>{const{tasks:e,loading:t}=Ns(),{employees:r}=Ks(),s=h.useMemo(()=>{const c=new Date,d=Vr(c,{weekStartsOn:1}),u=oc(c,{weekStartsOn:1}),f=e.filter(x=>{if(!x.created_at)return!1;const g=mn(x.created_at);return TH(g,{start:d,end:u})}),m=f.length,p=f.filter(x=>x.status==="done").length,w=e.filter(x=>{if(!x.due_date)return!1;const g=mn(x.due_date);return ic(g,Sa(c))&&x.status!=="done"}).length,v=m>0?Math.round(p/m*100):0;return{created:m,completed:p,overdue:w,completionRate:v}},[e]),a=h.useMemo(()=>{const c={high:{total:0,completed:0},medium:{total:0,completed:0},low:{total:0,completed:0}};return e.forEach(d=>{var m;const u=(m=d.priority)==null?void 0:m.toLowerCase(),f=d.status==="done";u==="high"||u==="haute"?(c.high.total++,f&&c.high.completed++):u==="medium"||u==="moyenne"?(c.medium.total++,f&&c.medium.completed++):(u==="low"||u==="basse")&&(c.low.total++,f&&c.low.completed++)}),c},[e]),o=h.useMemo(()=>{const c=new Map;e.filter(u=>u.status==="done"&&(u.assigned_to||u.assignee_id)).forEach(u=>{const f=u.assigned_to||u.assignee_id;if(!f)return;const m=c.get(f)||0;c.set(f,m+1)});const d=[];return c.forEach((u,f)=>{const m=r.find(p=>p.id===f);m&&d.push({id:f,name:m.full_name||`${m.first_name||""} ${m.last_name||""}`.trim()||"Employ",completedTasks:u})}),d.sort((u,f)=>f.completedTasks-u.completedTasks).slice(0,5)},[e,r]),i=h.useMemo(()=>{const c=[];s.overdue>0&&c.push({type:"error",message:`${s.overdue} tche${s.overdue>1?"s":""} en retard ncessite${s.overdue>1?"nt":""} une attention immdiate`});const d=e.filter(u=>{if(u.assigned_to||u.status==="completed"||!u.created_at)return!1;const f=mn(u.created_at);return ic(f,fh(new Date,7))});return d.length>0&&c.push({type:"warning",message:`${d.length} tche${d.length>1?"s":""} sans assignation depuis plus de 7 jours`}),s.completionRate<50&&s.created>5&&c.push({type:"warning",message:`Taux de compltion faible cette semaine (${s.completionRate}%)`}),c},[e,s]),l=c=>c.total>0?Math.round(c.completed/c.total*100):0;return t?n.jsxs("div",{className:"space-y-4",children:[n.jsx(ga,{className:"h-32 w-full"}),n.jsx(ga,{className:"h-64 w-full"}),n.jsx(ga,{className:"h-48 w-full"})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Statistiques & Analytics"}),n.jsx("p",{className:"text-muted-foreground",children:"Performance et indicateurs cls"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Ln,{label:"Cres",value:s.created,subtitle:"Cette semaine",icon:n.jsx(ba,{className:"w-6 h-6"}),color:"blue"}),n.jsx(Ln,{label:"Termines",value:s.completed,subtitle:"Cette semaine",icon:n.jsx(fs,{className:"w-6 h-6"}),color:"green"}),n.jsx(Ln,{label:"En retard",value:s.overdue,subtitle:"Ncessitent action",icon:n.jsx(Qr,{className:"w-6 h-6"}),color:"red"}),n.jsx(Ln,{label:"Taux",value:`${s.completionRate}%`,subtitle:s.completionRate>=70?"Excellent":s.completionRate>=50?"Moyen":"Faible",icon:n.jsx(xr,{className:"w-6 h-6"}),color:s.completionRate>=70?"green":s.completionRate>=50?"orange":"red",trend:s.completionRate>=70?"up":s.completionRate>=50?void 0:"down"})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"h-5 w-5"}),"Performance par Priorit"]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"font-medium",children:" Haute"}),n.jsxs("span",{className:"text-muted-foreground",children:[l(a.high),"% (",a.high.completed,"/",a.high.total,")"]})]}),n.jsx(Tx,{value:l(a.high),color:"red"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"font-medium",children:" Moyenne"}),n.jsxs("span",{className:"text-muted-foreground",children:[l(a.medium),"% (",a.medium.completed,"/",a.medium.total,")"]})]}),n.jsx(Tx,{value:l(a.medium),color:"orange"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"font-medium",children:" Basse"}),n.jsxs("span",{className:"text-muted-foreground",children:[l(a.low),"% (",a.low.completed,"/",a.low.total,")"]})]}),n.jsx(Tx,{value:l(a.low),color:"green"})]})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(Vh,{className:"h-5 w-5"}),"Top Contributeurs"]})}),n.jsx(W,{children:o.length===0?n.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucune tche termine rcemment"}):n.jsx("div",{className:"space-y-3",children:o.map((c,d)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full ${d===0?"bg-yellow-100 text-yellow-800":d===1?"bg-gray-100 text-gray-800":d===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:n.jsx("span",{className:"font-bold text-sm",children:d+1})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:c.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.completedTasks," tche",c.completedTasks>1?"s":""," termine",c.completedTasks>1?"s":""]})]})]}),d===0&&n.jsx(Vh,{className:"h-5 w-5 text-yellow-500"})]},c.id))})})]}),i.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(In,{className:"h-5 w-5"}),"Alertes"]}),i.map((c,d)=>n.jsxs(qn,{variant:c.type==="error"?"destructive":"default",children:[n.jsx(In,{className:"h-4 w-4"}),n.jsx(Op,{children:c.type==="error"?"Action Requise":"Attention"}),n.jsx(Gn,{children:c.message})]},d))]}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:e.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total tches"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:r.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Collaborateurs"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:e.filter(c=>c.status==="in_progress"||c.status==="en_cours").length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"En cours"})]})]})})})]})},Wf={query:"",status:[],priority:[],project:"",assignee:"",dateRange:"all",showOverdueOnly:!1},WZ=()=>{const{tasks:e,loading:t,updateTask:r,deleteTask:s}=Ns();Vu(),Ks();const[a,o]=h.useState(Wf),[i,l]=h.useState(new Set),[c,d]=h.useState([{id:"1",name:" Mes tches urgentes",filters:{...Wf,priority:["high"],showOverdueOnly:!0}},{id:"2",name:" Tches marketing cette semaine",filters:{...Wf,dateRange:"week",query:"marketing"}}]),u=h.useMemo(()=>{let N=[...e];if(a.query.trim()){const _=a.query.toLowerCase();N=N.filter(E=>{var D;return E.title.toLowerCase().includes(_)||((D=E.description)==null?void 0:D.toLowerCase().includes(_))})}if(a.status.length>0&&(N=N.filter(_=>a.status.includes(_.status))),a.priority.length>0&&(N=N.filter(_=>{var E;return a.priority.includes(((E=_.priority)==null?void 0:E.toLowerCase())||"")})),a.project&&(N=N.filter(_=>_.project_id===a.project)),a.assignee&&(N=N.filter(_=>_.assignee_id===a.assignee||_.assigned_to===a.assignee)),a.showOverdueOnly){const _=new Date;N=N.filter(E=>E.due_date?mn(E.due_date)<_&&E.status!=="done":!1)}if(a.dateRange!=="all"){const _=new Date;N=N.filter(E=>{if(!E.due_date)return!1;const D=mn(E.due_date);switch(a.dateRange){case"today":return D.toDateString()===_.toDateString();case"week":const C=new Date(_);return C.setDate(_.getDate()+7),D>=_&&D<=C;case"month":const k=new Date(_);return k.setMonth(_.getMonth()+1),D>=_&&D<=k;default:return!0}})}return N},[e,a]),f=(N,_)=>{o(E=>({...E,[N]:_}))},m=N=>{o(_=>({..._,status:_.status.includes(N)?_.status.filter(E=>E!==N):[..._.status,N]}))},p=N=>{o(_=>({..._,priority:_.priority.includes(N)?_.priority.filter(E=>E!==N):[..._.priority,N]}))},w=()=>{o(Wf),l(new Set)},v=N=>{o(N.filters)},x=N=>{l(_=>{const E=new Set(_);return E.has(N)?E.delete(N):E.add(N),E})},g=()=>{l(new Set(u.map(N=>N.id)))},y=()=>{l(new Set)},b=async N=>{try{await Promise.all(Array.from(i).map(_=>r(_,{status:N}))),l(new Set)}catch(_){console.error("Erreur lors du changement de statut group:",_)}},j=async()=>{if(confirm(`Supprimer ${i.size} tche(s) ?`))try{await Promise.all(Array.from(i).map(N=>s(N))),l(new Set)}catch(N){console.error("Erreur lors de la suppression groupe:",N)}},S=()=>{const N=[["Titre","Statut","Priorit","chance","Projet","Assign"].join(","),...u.map(C=>[C.title,C.status,C.priority,C.due_date,C.project_name||"",C.assigned_name||""].join(","))].join(`
`),_=new Blob([N],{type:"text/csv"}),E=URL.createObjectURL(_),D=document.createElement("a");D.href=E,D.download=`taches_${Ve(new Date,"yyyy-MM-dd")}.csv`,D.click()};return t?n.jsxs("div",{className:"space-y-4",children:[n.jsx(ga,{className:"h-48 w-full"}),n.jsx(ga,{className:"h-64 w-full"})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Recherche Avance"}),n.jsxs("p",{className:"text-muted-foreground",children:[u.length," rsultat",u.length>1?"s":""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{variant:"outline",size:"sm",onClick:w,children:[n.jsx(Ro,{className:"h-4 w-4 mr-2"}),"Rinitialiser"]}),n.jsxs(L,{variant:"outline",size:"sm",onClick:S,children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Exporter CSV"]})]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"text-base flex items-center gap-2",children:[n.jsx(fa,{className:"h-4 w-4"}),"Recherches Sauvegardes"]})}),n.jsx(W,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(N=>n.jsx(L,{variant:"outline",size:"sm",onClick:()=>v(N),children:N.name},N.id))})})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"text-base flex items-center gap-2",children:[n.jsx(y2,{className:"h-4 w-4"}),"Filtres"]})}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Recherche"}),n.jsxs("div",{className:"relative",children:[n.jsx(vc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{placeholder:"Rechercher dans titres et descriptions...",value:a.query,onChange:N=>f("query",N.target.value),className:"pl-10"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Statut"}),n.jsx("div",{className:"space-y-2",children:["todo","doing","blocked","done"].map(N=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ha,{checked:a.status.includes(N),onCheckedChange:()=>m(N)}),n.jsx("span",{className:"text-sm capitalize",children:N})]},N))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Priorit"}),n.jsx("div",{className:"space-y-2",children:["high","medium","low"].map(N=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ha,{checked:a.priority.includes(N),onCheckedChange:()=>p(N)}),n.jsx("span",{className:"text-sm capitalize",children:N})]},N))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"chance"}),n.jsxs(Ie,{value:a.dateRange,onValueChange:N=>f("dateRange",N),children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"all",children:"Toutes"}),n.jsx(ae,{value:"today",children:"Aujourd'hui"}),n.jsx(ae,{value:"week",children:"Cette semaine"}),n.jsx(ae,{value:"month",children:"Ce mois"})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ha,{checked:a.showOverdueOnly,onCheckedChange:N=>f("showOverdueOnly",N)}),n.jsx(J,{className:"cursor-pointer",children:"Afficher seulement les tches en retard"})]})]})]}),i.size>0&&n.jsx(V,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950/20",children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{children:n.jsxs("p",{className:"font-medium",children:[i.size," tche",i.size>1?"s":""," slectionne",i.size>1?"s":""]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{variant:"outline",size:"sm",onClick:y,children:"Dslectionner"}),n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>b("done"),children:[n.jsx(Y0,{className:"h-4 w-4 mr-2"}),"Marquer termines"]}),n.jsxs(L,{variant:"destructive",size:"sm",onClick:j,children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})})}),n.jsxs(V,{children:[n.jsxs(le,{className:"flex flex-row items-center justify-between",children:[n.jsxs(ce,{className:"text-base",children:["Rsultats (",u.length,")"]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(L,{variant:"ghost",size:"sm",onClick:g,children:"Tout slectionner"})})]}),n.jsx(W,{children:u.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucune tche ne correspond aux critres de recherche"}):n.jsx("div",{className:"space-y-2",children:u.map(N=>n.jsxs("div",{className:`p-4 border rounded-lg flex items-center gap-4 hover:bg-accent/50 transition-colors ${i.has(N.id)?"bg-blue-50 dark:bg-blue-950/20 border-blue-200":""}`,children:[n.jsx(ha,{checked:i.has(N.id),onCheckedChange:()=>x(N.id)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:N.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs",children:[N.due_date&&n.jsx(re,{variant:"outline",children:Ve(mn(N.due_date),"dd MMM",{locale:ot})}),n.jsx(re,{variant:"secondary",children:N.status}),n.jsx(re,{children:N.priority})]})]})]},N.id))})})]})]})},HZ=()=>{const{tasks:e,loading:t}=Ns(),[r,s]=h.useState("month"),[a,o]=h.useState(new Date),[i,l]=h.useState(null),{startDate:c,endDate:d,days:u}=h.useMemo(()=>{if(r==="month"){const g=zr(a),y=Bu(a),b=Vr(g,{weekStartsOn:1}),j=oc(y,{weekStartsOn:1});return{startDate:b,endDate:j,days:F1({start:b,end:j})}}else if(r==="week"){const g=Vr(a,{weekStartsOn:1}),y=oc(a,{weekStartsOn:1});return{startDate:g,endDate:y,days:F1({start:g,end:y})}}else return{startDate:a,endDate:a,days:[a]}},[a,r]),f=h.useMemo(()=>{const g=new Map;return e.forEach(y=>{if(!y.due_date)return;const b=mn(y.due_date),j=Ve(b,"yyyy-MM-dd");g.has(j)||g.set(j,[]),g.get(j).push(y)}),g},[e]),m=h.useMemo(()=>{if(!i)return[];const g=Ve(i,"yyyy-MM-dd");return f.get(g)||[]},[i,f]),p=g=>{if(r==="month")o(g==="prev"?qH(a,1):Ur(a,1));else if(r==="week"){const y=g==="prev"?-7:7;o(new Date(a.getTime()+y*24*60*60*1e3))}else{const y=g==="prev"?-1:1;o(new Date(a.getTime()+y*24*60*60*1e3))}},w=()=>{o(new Date),l(new Date)},v=g=>{const y=Ve(g,"yyyy-MM-dd");return f.get(y)||[]},x=g=>{switch(g==null?void 0:g.toLowerCase()){case"high":case"haute":return"bg-red-500";case"medium":case"moyenne":return"bg-yellow-500";case"low":case"basse":return"bg-green-500";default:return"bg-gray-500"}};return t?n.jsx(ga,{className:"h-96 w-full"}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Calendrier"}),n.jsx("p",{className:"text-muted-foreground",children:Ve(a,"MMMM yyyy",{locale:ot})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex gap-1 border rounded-lg p-1",children:[n.jsx(L,{size:"sm",variant:r==="month"?"default":"ghost",onClick:()=>s("month"),children:"Mois"}),n.jsx(L,{size:"sm",variant:r==="week"?"default":"ghost",onClick:()=>s("week"),children:"Semaine"}),n.jsx(L,{size:"sm",variant:r==="day"?"default":"ghost",onClick:()=>s("day"),children:"Jour"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(L,{size:"sm",variant:"outline",onClick:()=>p("prev"),children:n.jsx(ep,{className:"h-4 w-4"})}),n.jsx(L,{size:"sm",variant:"outline",onClick:w,children:"Aujourd'hui"}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>p("next"),children:n.jsx(ua,{className:"h-4 w-4"})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx(V,{className:"lg:col-span-2",children:n.jsxs(W,{className:"p-4",children:[r==="month"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"grid grid-cols-7 gap-2",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(g=>n.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground",children:g},g))}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:u.map(g=>{const y=v(g),b=g.getMonth()===a.getMonth(),j=i&&kr(g,i);return n.jsxs("button",{onClick:()=>l(g),className:`
                          min-h-[80px] p-2 border rounded-lg text-left hover:bg-accent transition-colors
                          ${b?"":"opacity-40"}
                          ${yy(g)?"border-blue-500 bg-blue-50 dark:bg-blue-950/20":""}
                          ${j?"ring-2 ring-blue-500":""}
                        `,children:[n.jsx("div",{className:"text-sm font-medium mb-1",children:Ve(g,"d")}),y.length>0&&n.jsxs("div",{className:"space-y-1",children:[y.slice(0,2).map(S=>n.jsx("div",{className:`text-xs truncate px-1 py-0.5 rounded ${x(S.priority)} text-white`,title:S.title,children:S.title},S.id)),y.length>2&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",y.length-2," autre",y.length-2>1?"s":""]})]})]},g.toISOString())})})]}),r==="week"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"grid grid-cols-7 gap-2",children:u.map(g=>n.jsxs("div",{className:`text-center p-2 ${yy(g)?"bg-blue-50 dark:bg-blue-950/20 rounded-lg":""}`,children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:Ve(g,"EEE",{locale:ot})}),n.jsx("div",{className:"text-2xl font-bold",children:Ve(g,"d")})]},g.toISOString()))}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:u.map(g=>{const y=v(g);return n.jsx("div",{className:"space-y-1",children:y.map(b=>n.jsx("div",{className:`text-xs p-1 rounded ${x(b.priority)} text-white truncate`,title:b.title,children:b.title},b.id))},g.toISOString())})})]})]})}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"text-base flex items-center gap-2",children:[n.jsx(ze,{className:"h-4 w-4"}),i?Ve(i,"EEEE d MMMM",{locale:ot}):"Slectionnez un jour"]})}),n.jsx(W,{children:m.length===0?n.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucune tche pour ce jour"}):n.jsx("div",{className:"space-y-3",children:m.map(g=>n.jsxs("div",{className:"p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:g.title}),g.description&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:g.description})]}),n.jsx(re,{className:x(g.priority),children:g.priority})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs",children:[n.jsx(re,{variant:"secondary",children:g.status}),g.due_date&&n.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[n.jsx(lt,{className:"h-3 w-3"}),Ve(mn(g.due_date),"HH:mm")]})]})]},g.id))})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold",children:e.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total tches"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold",children:Array.from(f.values()).filter(g=>g.length>0).length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Jours avec tches"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold",children:Math.round(e.length/u.length*10)/10}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Tches/jour moyen"})]})})}),n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold",children:e.filter(g=>{var y;return((y=g.priority)==null?void 0:y.toLowerCase())==="high"}).length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Haute priorit"})]})})})]})]})};function qZ(){const[e,t]=h.useState("my-tasks"),r=Kn();return n.jsx("div",{className:"min-h-screen bg-background",children:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(L,{variant:"outline",onClick:()=>r("/"),children:[n.jsx(Zm,{className:"h-4 w-4 mr-2"}),"Retour"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Gestion des Tches"}),n.jsx("p",{className:"text-muted-foreground",children:"Hub de gestion oprationnelle"})]})]})}),n.jsxs(pr,{value:e,onValueChange:s=>t(s),className:"w-full",children:[n.jsxs(ar,{className:"grid w-full grid-cols-5",children:[n.jsxs(Ce,{value:"my-tasks",className:"flex items-center gap-2",children:[n.jsx(nr,{className:"h-4 w-4"})," Mes Tches"]}),n.jsxs(Ce,{value:"create",className:"flex items-center gap-2",children:[n.jsx(y5,{className:"h-4 w-4"})," Cration"]}),n.jsxs(Ce,{value:"analytics",className:"flex items-center gap-2",children:[n.jsx(ba,{className:"h-4 w-4"})," Analytics"]}),n.jsxs(Ce,{value:"search",className:"flex items-center gap-2",children:[n.jsx(vc,{className:"h-4 w-4"})," Recherche"]}),n.jsxs(Ce,{value:"calendar",className:"flex items-center gap-2",children:[n.jsx(ze,{className:"h-4 w-4"})," Calendrier"]})]}),n.jsx(Ee,{value:"my-tasks",className:"mt-6",children:n.jsx(zZ,{})}),n.jsx(Ee,{value:"create",className:"mt-6",children:n.jsx(UZ,{})}),n.jsx(Ee,{value:"analytics",className:"mt-6",children:n.jsx(VZ,{})}),n.jsx(Ee,{value:"search",className:"mt-6",children:n.jsx(WZ,{})}),n.jsx(Ee,{value:"calendar",className:"mt-6",children:n.jsx(HZ,{})})]})]})})}const GZ=()=>{const[e,t]=h.useState({email:"",fullName:""}),{handleFocus:r,getPlaceholder:s}=Lu({email:"tenant.owner@exemple.com",fullName:"Jean Dupont"}),[a,o]=h.useState(!1),[i,l]=h.useState(null),{toast:c}=rt(),d=(m,p)=>{t(w=>({...w,[m]:p}))},u=()=>e.email.trim()?e.fullName.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?!0:(c({title:"Erreur",description:"Format d'email invalide",variant:"destructive"}),!1):(c({title:"Erreur",description:"Le nom complet est requis",variant:"destructive"}),!1):(c({title:"Erreur",description:"L'email est requis",variant:"destructive"}),!1),f=async()=>{var m,p,w,v,x,g,y,b,j,S;if(u()){o(!0);try{const{data:{session:N}}=await O.auth.getSession();if(!(N!=null&&N.access_token))throw new Error("Session non trouve");const _=await fetch("https://qliinxtanjdnwxlvnxji.supabase.co/functions/v1/send-invitation",{method:"POST",headers:{Authorization:`Bearer ${N.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({email:e.email.toLowerCase().trim(),fullName:e.fullName.trim(),invitationType:"tenant_owner",siteUrl:window.location.origin})}),E=await _.json();if(!_.ok)throw new Error(E.error||"Erreur lors de l'envoi de l'invitation");l({email:e.email,tenantId:E.tenant_id,invitationId:E.invitation_id,sentAt:new Date().toISOString()}),t({email:"",fullName:""}),c({title:" Invitation envoye !",description:`L'invitation a t envoye  ${e.email}`,variant:"default"})}catch(N){console.error("Erreur envoi invitation:",N);let _=" Erreur d'invitation",E=N.message||"Erreur lors de l'envoi de l'invitation";(m=N.message)!=null&&m.toLowerCase().includes("email")&&((p=N.message)!=null&&p.toLowerCase().includes("already")||(w=N.message)!=null&&w.toLowerCase().includes("exists")||(v=N.message)!=null&&v.toLowerCase().includes("taken"))?(_=" Email dj utilis",E="Cette adresse email est dj utilise. Veuillez en choisir une autre."):(x=N.message)!=null&&x.toLowerCase().includes("invalid")&&((g=N.message)!=null&&g.toLowerCase().includes("email"))?(_=" Format d'email invalide",E="L'adresse email saisie n'est pas dans un format valide."):(y=N.message)!=null&&y.toLowerCase().includes("permission")||(b=N.message)!=null&&b.toLowerCase().includes("unauthorized")?(_=" Permissions insuffisantes",E="Vous n'avez pas les permissions ncessaires pour envoyer des invitations."):((j=N.message)!=null&&j.toLowerCase().includes("network")||(S=N.message)!=null&&S.toLowerCase().includes("fetch"))&&(_=" Problme de connexion",E="Impossible de se connecter au serveur. Vrifiez votre connexion internet."),c({title:_,description:E,variant:"destructive"})}finally{o(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(V,{children:[n.jsxs(le,{children:[n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(gs,{className:"h-5 w-5"}),"Inviter un Tenant Owner"]}),n.jsx(sn,{children:"Envoyez une invitation pour crer un nouveau tenant avec son propritaire"})]}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"email",children:"Email *"}),n.jsx(ye,{id:"email",type:"email",placeholder:s("email",e.email),value:e.email,onChange:m=>d("email",m.target.value),onFocus:()=>r("email"),disabled:a})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"fullName",children:"Nom complet *"}),n.jsx(ye,{id:"fullName",type:"text",placeholder:s("fullName",e.fullName),value:e.fullName,onChange:m=>d("fullName",m.target.value),onFocus:()=>r("fullName"),disabled:a})]})]}),n.jsx(L,{onClick:f,disabled:a||!e.email.trim()||!e.fullName.trim(),className:"w-full md:w-auto",children:a?n.jsxs(n.Fragment,{children:[n.jsx(Vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(oo,{className:"mr-2 h-4 w-4"}),"Envoyer l'invitation"]})})]})]}),i&&n.jsxs(qn,{children:[n.jsx(oo,{className:"h-4 w-4"}),n.jsxs(Gn,{children:[n.jsx("strong",{children:"Dernire invitation envoye :"}),n.jsx("br",{})," Email : ",i.email,n.jsx("br",{})," Nom : ",i.fullName,n.jsx("br",{})," Tenant ID : ",i.tenantId,n.jsx("br",{})," Envoye le : ",new Date(i.sentAt).toLocaleString("fr-FR")]})]}),n.jsxs(V,{children:[n.jsx(le,{children:n.jsx(ce,{children:" Informations"})}),n.jsxs(W,{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsx("p",{children:" L'invitation expire automatiquement aprs 7 jours"}),n.jsx("p",{children:" Le tenant owner pourra crer son entreprise lors de l'inscription"}),n.jsx("p",{children:" Un UUID unique sera pr-gnr pour le futur tenant"}),n.jsx("p",{children:" L'email d'invitation contient un lien scuris vers la page d'inscription"})]})]})]})},KZ=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(H0,{className:"h-8 w-8 text-yellow-500"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Super Administration"}),n.jsx("p",{className:"text-muted-foreground",children:"Gestion globale de la plateforme Wadashaqeen"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(V,{children:[n.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ce,{className:"text-sm font-medium",children:"Tenants Actifs"}),n.jsx(x2,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(W,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"0"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Entreprises enregistres"})]})]}),n.jsxs(V,{children:[n.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ce,{className:"text-sm font-medium",children:"Invitations Envoyes"}),n.jsx(At,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(W,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"0"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"En attente de validation"})]})]}),n.jsxs(V,{children:[n.jsxs(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ce,{className:"text-sm font-medium",children:"Systme"}),n.jsx(K0,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(W,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:""}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Oprationnel"})]})]})]}),n.jsx(GZ,{})]}),t4=()=>{gw();const e=Kn(),{toast:t}=rt(),[r,s]=h.useState({email:"",password:"",confirmPassword:"",fullName:"",companyName:""}),{handleFocus:a,getPlaceholder:o}=Lu({companyName:"Mon Entreprise SARL",password:"Minimum 8 caractres",confirmPassword:"Rptez votre mot de passe"}),[i,l]=h.useState(!1),[c,d]=h.useState(!1),[u,f]=h.useState(!1),[m,p]=h.useState(null),[w,v]=h.useState(!0),[x,g]=h.useState(null),[y,b]=h.useState(null);h.useEffect(()=>{const D=new URLSearchParams(window.location.search),C=D.get("token"),k=D.get("type");C?(g(C),k==="signup"?(console.log(" Token Supabase Auth dtect"),j(C)):(console.log(" Token d'invitation classique dtect"),S(C))):(b("Token d'invitation manquant dans l'URL"),v(!1))},[]);const j=async D=>{try{console.log(" Redirection vers la page de connexion aprs validation email"),window.location.href=`/tenant-login?token=${D}&type=signup`}catch(C){console.error(" Erreur redirection:",C),b("Erreur lors de la redirection"),v(!1)}},S=async D=>{var C;try{console.log(" Validation token:",D);const{data:k,error:P}=await O.from("invitations").select("id, token, email, full_name, tenant_id, tenant_name, invitation_type, status, expires_at, created_at, accepted_at, metadata").eq("token",D).eq("status","pending").gt("expires_at",new Date().toISOString()).single();if(console.log(" Rsultat invitation:",{data:k,error:P}),P)throw console.error(" Erreur validation invitation:",P),new Error("Invitation non trouve ou expire");const R={id:k.id,email:k.email,fullName:k.full_name,tenantId:k.tenant_id,tenantName:k.tenant_name||"Nouvelle entreprise",invitationType:k.invitation_type,expiresAt:k.expires_at,tempPassword:(C=k.metadata)==null?void 0:C.temp_password};p(R),s(A=>({...A,email:R.email,fullName:R.fullName}))}catch(k){console.error(" Erreur lors de la validation:",k),t({title:" Erreur",description:"Erreur lors de la validation du token",variant:"destructive"}),e("/")}finally{v(!1)}},N=(D,C)=>{s(k=>({...k,[D]:C}))},_=()=>r.email.trim()?r.fullName.trim()?r.companyName.trim()?r.password.length<8?(t({title:"Erreur",description:"Le mot de passe doit contenir au moins 8 caractres",variant:"destructive"}),!1):r.password!==r.confirmPassword?(t({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"}),!1):!0:(t({title:"Erreur",description:"Le nom de l'entreprise est requis",variant:"destructive"}),!1):(t({title:"Erreur",description:"Le nom complet est requis",variant:"destructive"}),!1):(t({title:"Erreur",description:"L'email est requis",variant:"destructive"}),!1),E=async()=>{var D,C,k,P,R,A,I,F,B,T;if(!(!_()||!m)){l(!0);try{console.log(" Dmarrage du processus d'inscription...");let M=null;if(m.metadata)if(typeof m.metadata=="string")try{M=JSON.parse(m.metadata).temp_password}catch(te){console.warn("Erreur parsing metadata:",te)}else M=m.metadata.temp_password;if(M||(M=m.tempPassword),!M)throw new Error("Mot de passe temporaire non trouv dans l'invitation");console.log(" TAPE 1: Connexion avec le mot de passe temporaire..."),console.log(" Email utilis:",r.email.toLowerCase().trim()),console.log(" Mot de passe temporaire:",M?"***masqu***":"NON TROUV"),console.log(" Vrification de l'utilisateur avant connexion...");const{data:U,error:q}=await O.auth.admin.getUserById((D=m.metadata)==null?void 0:D.supabase_user_id);q?console.error(" Erreur vrification utilisateur:",q):(console.log(" tat utilisateur existant:"),console.log("   - ID:",(C=U.user)==null?void 0:C.id),console.log("   - Email:",(k=U.user)==null?void 0:k.email),console.log("   - Email confirm:",(P=U.user)!=null&&P.email_confirmed_at?"OUI":"NON"),console.log("   - Date confirmation:",(R=U.user)==null?void 0:R.email_confirmed_at),console.log("   - Cr le:",(A=U.user)==null?void 0:A.created_at),console.log("   - Dernire connexion:",(I=U.user)==null?void 0:I.last_sign_in_at)),console.log(" Tentative de connexion...");const{data:Y,error:G}=await O.auth.signInWithPassword({email:r.email.toLowerCase().trim(),password:M});if(G)throw console.error(" ERREUR DTAILLE DE CONNEXION:"),console.error("   - Code:",G.status),console.error("   - Message:",G.message),console.error("   - Dtails complets:",G),G.message.includes("Email not confirmed")||G.message.includes("email_not_confirmed")?(console.log(" SOLUTION: Confirmer l'email manuellement dans Supabase Dashboard"),console.log("   1. Aller dans Authentication > Users"),console.log(`   2. Chercher ${r.email}`),console.log('   3. Cliquer sur "Confirm email"'),new Error("Email non confirm. L'utilisateur existe mais son email n'est pas confirm. Veuillez confirmer l'email dans Supabase Dashboard.")):G.message.includes("Invalid login credentials")?(console.log(" SOLUTION: Vrifier le mot de passe temporaire"),console.log("   - Mot de passe fourni:",M),console.log("   - Mtadonnes invitation:",m.metadata),new Error("Identifiants de connexion invalides. Le mot de passe temporaire ne correspond pas.")):new Error("Erreur de connexion: "+G.message);console.log(" CONNEXION RUSSIE:"),console.log("   - User ID:",(F=Y.user)==null?void 0:F.id),console.log("   - Email:",(B=Y.user)==null?void 0:B.email),console.log("   - Email confirm:",(T=Y.user)!=null&&T.email_confirmed_at?"OUI":"NON"),console.log(" TAPE 1 termine: Connexion temporaire russie, email confirm automatiquement"),console.log(" TAPE 3: Attente de l'excution du trigger auto_create_tenant_owner..."),await new Promise(te=>setTimeout(te,3e3)),console.log(" TAPE 4: Vrification de la cration du tenant owner..."),console.log("   - User ID  vrifier:",Y.user.id);const{data:z,error:Z}=await O.from("profiles").select("*, tenants:tenant_id(id, name)").eq("user_id",Y.user.id).single();if(console.log(" RSULTAT VRIFICATION PROFIL:"),console.log("   - Erreur:",Z),console.log("   - Profil trouv:",z?"OUI":"NON"),z&&(console.log(" PROFIL DTAILL:"),console.log("   - ID:",z.id),console.log("   - Nom complet:",z.full_name),console.log("   - Email:",z.email),console.log("   - Tenant ID:",z.tenant_id),console.log("   - Rle:",z.role),console.log("   - Tenant info:",z.tenants)),Z||!z){console.warn(" DIAGNOSTIC CHEC CRATION TENANT OWNER:"),console.warn("   - Le trigger auto_create_tenant_owner ne s'est pas excut"),console.warn("   - Ou il y a eu une erreur dans le trigger"),console.log(" Vrification user_roles...");const{data:te,error:se}=await O.from("user_roles").select("*, roles(name)").eq("user_id",Y.user.id);console.log(" USER_ROLES:",{error:se,count:(te==null?void 0:te.length)||0,data:te}),console.log(" Vrification tenants rcents...");const{data:ne,error:we}=await O.from("tenants").select("*").order("created_at",{ascending:!1}).limit(3);throw console.log(" TENANTS RCENTS:",{error:we,count:(ne==null?void 0:ne.length)||0,data:ne}),new Error("Le tenant owner n'a pas t cr automatiquement. Vrifiez les logs du trigger dans Supabase.")}console.log(" TAPE 4 termine: Tenant owner cr avec succs"),console.log(" TAPE 5: Marquage de l'invitation comme accepte...");const{error:Q}=await O.from("invitations").update({status:"accepted",accepted_at:new Date().toISOString()}).eq("token",x);if(Q&&console.warn(" Erreur mise  jour invitation:",Q),console.log(" TAPE 5 termine: Invitation marque comme accepte"),t({title:" Compte cr avec succs !",description:"Votre tenant owner a t cr. Vous pouvez maintenant changer votre mot de passe.",variant:"default"}),console.log(" TAPE 2: Proposition de mise  jour du mot de passe..."),window.confirm(`Votre compte a t cr avec succs !

Souhaitez-vous changer votre mot de passe temporaire maintenant ?

 OUI: Vous pourrez dfinir un nouveau mot de passe
 NON: Vous serez redirig vers le tableau de bord (vous pourrez changer le mot de passe plus tard)`)){console.log(" Mise  jour du mot de passe utilisateur...");const{data:te,error:se}=await O.auth.updateUser({password:r.password,data:{full_name:r.fullName.trim(),company_name:r.companyName.trim()}});se?(console.error(" Erreur mise  jour mot de passe:",se),t({title:" Erreur changement mot de passe",description:"Le mot de passe n'a pas pu tre chang, mais votre compte est cr. Vous pourrez le changer plus tard.",variant:"default"})):(console.log(" TAPE 2 termine: Mot de passe mis  jour avec succs"),t({title:" Mot de passe mis  jour !",description:"Votre nouveau mot de passe a t enregistr avec succs.",variant:"default"}))}else console.log(" TAPE 2 ignore: L'utilisateur a choisi de garder le mot de passe temporaire");setTimeout(()=>{window.location.href="/dashboard"},2e3)}catch(M){console.error(" Erreur inscription:",M),t({title:" Erreur d'inscription",description:M.message||"Erreur lors de l'inscription",variant:"destructive"})}finally{l(!1)}}};return w?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Vs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{children:"Validation de l'invitation..."})]})}):!x||!m?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(qn,{className:"max-w-md",children:n.jsx(Gn,{children:"Lien d'invitation invalide ou manquant."})})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:n.jsxs(V,{className:"w-full max-w-md",children:[n.jsxs(le,{className:"text-center",children:[n.jsxs(ce,{className:"flex items-center justify-center gap-2 text-2xl",children:[n.jsx(ao,{className:"h-6 w-6"}),"Crer votre entreprise"]}),n.jsx(sn,{children:"Finalisez votre inscription sur Wadashaqeen"})]}),n.jsxs(W,{className:"space-y-4",children:[n.jsxs(qn,{children:[n.jsx(gs,{className:"h-4 w-4"}),n.jsxs(Gn,{children:[n.jsx("strong",{children:"Invitation pour :"})," ",m.full_name,n.jsx("br",{}),n.jsx("strong",{children:"Email :"})," ",m.email]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"email",children:"Email *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ql,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{id:"email",type:"email",value:r.email,onChange:D=>N("email",D.target.value),disabled:!0,className:"pl-10 bg-muted"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"fullName",children:"Nom complet *"}),n.jsxs("div",{className:"relative",children:[n.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{id:"fullName",type:"text",value:r.fullName,onChange:D=>N("fullName",D.target.value),disabled:i,className:"pl-10"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"companyName",children:"Nom de l'entreprise *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ao,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{id:"companyName",type:"text",placeholder:o("companyName",r.companyName),value:r.companyName,onChange:D=>N("companyName",D.target.value),onFocus:()=>a("companyName"),disabled:i,className:"pl-10"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"password",children:"Mot de passe *"}),n.jsxs("div",{className:"relative",children:[n.jsx(pi,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{id:"password",type:c?"text":"password",placeholder:o("password",r.password),value:r.password,onChange:D=>N("password",D.target.value),onFocus:()=>a("password"),disabled:i,className:"pl-10 pr-10"}),n.jsx(L,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!c),children:c?n.jsx(_N,{className:"h-4 w-4"}):n.jsx(Ni,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe *"}),n.jsxs("div",{className:"relative",children:[n.jsx(pi,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{id:"confirmPassword",type:u?"text":"password",placeholder:o("confirmPassword",r.confirmPassword),value:r.confirmPassword,onChange:D=>N("confirmPassword",D.target.value),onFocus:()=>a("confirmPassword"),disabled:i,className:"pl-10 pr-10"}),n.jsx(L,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!u),children:u?n.jsx(_N,{className:"h-4 w-4"}):n.jsx(Ni,{className:"h-4 w-4"})})]})]}),n.jsx(L,{onClick:E,disabled:i,className:"w-full",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Cration en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(gs,{className:"mr-2 h-4 w-4"}),"Enregistrer mon entreprise"]})}),n.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n.jsx("p",{children:"En crant votre compte, vous acceptez nos conditions d'utilisation"})})]})]})})};function r4(){const e=Kn(),[t,r]=h.useState("Traitement de la confirmation..."),s=async a=>{var o;if(console.log(" Session rcupre:",(o=a==null?void 0:a.user)==null?void 0:o.email),a!=null&&a.user){r(" Email confirm ! Configuration en cours...");const{data:i}=await O.from("profiles").select("tenant_id, full_name").eq("user_id",a.user.id).single();if(i!=null&&i.tenant_id)console.log(" Profil trouv, redirection dashboard..."),r("Configuration termine ! Redirection..."),setTimeout(()=>{e("/dashboard")},1500);else{console.log(" Profil non trouv, attente webhook..."),r("Configuration en cours, veuillez patienter...");let l=0;const c=setInterval(async()=>{l++,console.log(` Vrification profil (tentative ${l})...`);const{data:d}=await O.from("profiles").select("tenant_id").eq("user_id",a.user.id).single();(d!=null&&d.tenant_id||l>=10)&&(clearInterval(c),d!=null&&d.tenant_id?(console.log(" Profil cr, redirection dashboard..."),r("Configuration termine ! Redirection..."),setTimeout(()=>{e("/dashboard")},1e3)):(console.log(" Timeout, redirection connexion..."),r("Configuration incomplte, redirection connexion..."),setTimeout(()=>{e("/")},2e3)))},2e3)}}else console.log(" Aucune session trouve"),r("Session non trouve, redirection vers connexion..."),setTimeout(()=>{e("/")},2e3)};return h.useEffect(()=>{(async()=>{var o,i;try{console.log(" AuthCallback: Dbut du traitement...");const l=new URLSearchParams(window.location.search),c=new URLSearchParams(window.location.hash.substring(1)),d=l.get("email"),u=l.get("type"),f=l.get("invitation"),m=c.get("error_code"),p=c.get("error_description");if(console.log(" Paramtres URL:",{email:d,type:u,invitation:f,error_code:m}),f==="true"){if(console.log(" Traitement invitation Magic Link..."),r("Traitement de votre invitation..."),u==="magiclink"){console.log(" Magic Link dtect, traitement de la session...");const x=c.get("access_token"),g=c.get("refresh_token");if(x&&g){console.log(" Tokens trouvs, tablissement de la session...");const{data:y,error:b}=await O.auth.setSession({access_token:x,refresh_token:g});if((o=y==null?void 0:y.session)!=null&&o.user){console.log(" Session Magic Link tablie"),r(" Invitation traite ! Configuration en cours..."),await s(y.session);return}else console.log(" Erreur tablissement session:",b)}}if(m==="unexpected_failure"){console.log(" Erreur confirmation, redirection connexion avec email..."),r("Redirection vers la connexion..."),setTimeout(()=>{e(`/?email=${encodeURIComponent(d||"")}&invitation=true`)},2e3);return}}const{data:{session:w},error:v}=await O.auth.getSession();if(v){console.error(" Erreur session:",v),r("Erreur lors de la confirmation");return}if(console.log(" Session rcupre:",(i=w==null?void 0:w.user)==null?void 0:i.email),w!=null&&w.user){r(" Email confirm ! Configuration en cours...");const{data:x}=await O.from("profiles").select("tenant_id, full_name").eq("user_id",w.user.id).single();if(x!=null&&x.tenant_id)console.log(" Profil trouv, vrification si setup requis..."),f==="true"?(console.log(" Nouvelle invitation dtecte, redirection vers setup..."),r("Configuration de votre compte..."),setTimeout(()=>{e(`/setup-account?tenant_id=${x.tenant_id}&email=${encodeURIComponent(w.user.email)}`)},1500)):(console.log(" Utilisateur existant, redirection dashboard..."),r("Configuration termine ! Redirection..."),setTimeout(()=>{e("/dashboard")},1500));else{console.log(" Profil non trouv, attente webhook..."),r("Configuration en cours, veuillez patienter...");let g=0;const y=setInterval(async()=>{g++,console.log(` Vrification profil (tentative ${g})...`);const{data:b}=await O.from("profiles").select("tenant_id").eq("user_id",w.user.id).single();(b!=null&&b.tenant_id||g>=10)&&(clearInterval(y),b!=null&&b.tenant_id?(console.log(" Profil cr, redirection vers setup..."),r("Configuration de votre compte..."),setTimeout(()=>{e(f==="true"?`/setup-account?tenant_id=${b.tenant_id}&email=${encodeURIComponent(w.user.email)}`:"/dashboard")},1e3)):(console.log(" Timeout, redirection connexion..."),r("Configuration incomplte, redirection connexion..."),setTimeout(()=>{e("/")},2e3)))},2e3)}}else console.log(" Aucune session trouve"),r("Session non trouve, redirection vers connexion..."),setTimeout(()=>{e("/")},2e3)}catch(l){console.error(" Erreur callback:",l),r("Erreur inattendue"),setTimeout(()=>{e("/")},3e3)}})()},[e]),n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Confirmation en cours"}),n.jsx("p",{className:"text-gray-600 mb-4",children:t}),n.jsxs("div",{className:"text-sm text-gray-500",children:[n.jsx("p",{children:" Validation de votre email"}),n.jsx("p",{children:" Configuration de votre compte"}),n.jsx("p",{children:" Prparation de votre espace"})]})]})})}const n4=()=>{const e=Kn(),[t]=gw(),r=t.get("tenant_id"),s=t.get("email"),[a,o]=h.useState(""),[i,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(""),{handleFocus:m,getPlaceholder:p}=Lu({currentPassword:"Votre mot de passe temporaire",newPassword:"Minimum 8 caractres",confirmPassword:"Rptez le nouveau mot de passe",companyName:"Entrez le nom de votre entreprise"}),[w,v]=h.useState(!1),[x,g]=h.useState(""),[y,b]=h.useState(""),[j,S]=h.useState(""),[N,_]=h.useState(null);h.useEffect(()=>{(async()=>{var A;const{data:{session:P}}=await O.auth.getSession();if(!P){console.log(" Aucune session, redirection connexion..."),e("/tenant-login");return}console.log(" Session trouve pour:",P.user.email);const R=(A=P.user.user_metadata)==null?void 0:A.temp_password;if(R&&(o(R),console.log(" Mot de passe temporaire pr-rempli")),r){const{data:I}=await O.from("tenants").select("name").eq("id",r).single();I&&console.log(" Nom entreprise actuel:",I.name)}_(P.user)})()},[e,r]);const E=async k=>{if(k.preventDefault(),i!==c){g("Les mots de passe ne correspondent pas");return}if(i.length<8){g("Le mot de passe doit contenir au moins 8 caractres");return}v(!0),g("");try{console.log(" Changement mot de passe...");const{error:P}=await O.auth.updateUser({password:i});P?(console.error(" Erreur changement mot de passe:",P),g(P.message)):(console.log(" Mot de passe chang avec succs"),S("Mot de passe mis  jour avec succs !"),o(""),l(""),d(""))}catch(P){console.error(" Erreur:",P),g("Erreur lors du changement de mot de passe")}finally{v(!1)}},D=async k=>{if(k.preventDefault(),!u.trim()){b("Le nom de l'entreprise est requis");return}if(!r){b("ID tenant manquant");return}v(!0),b("");try{console.log(" Mise  jour nom entreprise...");const{error:P}=await O.from("tenants").update({name:u.trim()}).eq("id",r);P?(console.error(" Erreur mise  jour entreprise:",P),b(P.message)):(console.log(" Nom entreprise mis  jour avec succs"),S("Nom de l'entreprise mis  jour avec succs !"),setTimeout(()=>{e("/dashboard")},2e3))}catch(P){console.error(" Erreur:",P),b("Erreur lors de la mise  jour")}finally{v(!1)}},C=()=>{console.log(" Configuration reporte, redirection dashboard..."),e("/dashboard")};return n.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:" Bienvenue !"}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Configurez votre compte pour commencer"}),s&&n.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Connect en tant que : ",s]})]})}),n.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:n.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10 space-y-8",children:[j&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm font-medium text-green-800",children:j})})]})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:" Changer votre mot de passe"}),n.jsxs("form",{onSubmit:E,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe actuel"}),n.jsx("input",{id:"current-password",name:"current-password",type:"password",value:a,onChange:k=>o(k.target.value),onFocus:()=>m("currentPassword"),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:p("currentPassword",a),required:!0}),a&&n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" Pr-rempli avec votre mot de passe temporaire"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),n.jsx("input",{id:"new-password",name:"new-password",type:"password",value:i,onChange:k=>l(k.target.value),onFocus:()=>m("newPassword"),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:p("newPassword",i),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirmer le nouveau mot de passe"}),n.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",value:c,onChange:k=>d(k.target.value),onFocus:()=>m("confirmPassword"),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:p("confirmPassword",c),required:!0})]}),x&&n.jsx("div",{className:"text-red-600 text-sm",children:x}),n.jsx("button",{type:"submit",disabled:w,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:w?"Mise  jour...":"Changer le mot de passe"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-300"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-white text-gray-500",children:"ET"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:" Nom de votre entreprise"}),n.jsxs("form",{onSubmit:D,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"company-name",className:"block text-sm font-medium text-gray-700",children:"Nouveau nom d'entreprise"}),n.jsx("input",{id:"company-name",name:"company-name",type:"text",value:u,onChange:k=>f(k.target.value),onFocus:()=>m("companyName"),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:p("companyName",u),required:!0})]}),y&&n.jsx("div",{className:"text-red-600 text-sm",children:y}),n.jsx("button",{type:"submit",disabled:w,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:w?"Mise  jour...":"Mettre  jour le nom"})]})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:C,className:"text-sm text-gray-500 hover:text-gray-700 underline",children:" Reporter la configuration et accder au dashboard"})})]})})]})};function s4(){const[e]=gw(),t=Kn(),[r,s]=h.useState("idle"),[a,o]=h.useState(""),i=e.get("code")??"";return h.useEffect(()=>{(async()=>{if(!i){o("Lien invalide"),s("error");return}s("auth");const{data:l}=await O.auth.getSession();if(!(l!=null&&l.session)){o("Veuillez vous connecter pour poursuivre."),s("error");return}try{s("calling");const c=l.session.access_token,d=await fetch("https://qliinxtanjdnwxlvnxji.supabase.co/functions/v1/onboard-tenant-owner",{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({code:i})});if(!d.ok)throw new Error(await d.text());const u=await d.json();t("/dashboard",{replace:!0})}catch(c){o((c==null?void 0:c.message)||"Erreur serveur"),s("error")}})()},[i,t]),r==="auth"||r==="calling"?n.jsx("div",{className:"p-6",children:"Validation de l'invitation"}):r==="error"?n.jsxs("div",{className:"max-w-md mx-auto p-6 space-y-3",children:[n.jsx("h1",{className:"text-xl font-semibold",children:"Invitation"}),n.jsx("p",{className:"text-red-600",children:a}),a.includes("connecter")&&n.jsx(jw,{onAuthStateChange:()=>window.location.reload()})]}):null}const YZ=()=>{const e=Fi();return h.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),n.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),n.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},XZ=()=>{var u,f;const[e,t]=h.useState(null),[r,s]=h.useState(!1),[a,o]=h.useState(!0),i=()=>{var w;const m=Is.getStats(),p=((w=performance.memory)==null?void 0:w.usedJSHeapSize)/(1024*1024);t({cacheStats:m,memoryUsage:p,renderMetrics:{}})};return h.useEffect(()=>{if(!a)return;const m=setInterval(i,2e3);return()=>clearInterval(m)},[a]),h.useEffect(()=>{i()},[]),h.useEffect(()=>{const m=p=>{p.ctrlKey&&p.shiftKey&&p.key==="P"&&s(w=>!w)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]),n.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:n.jsx(L,{size:"sm",variant:"outline",onClick:()=>s(!0),className:"bg-black/80 text-white border-gray-600 hover:bg-black/90",children:" Perf"})});const l=()=>e!=null&&e.cacheStats.metrics?e.cacheStats.metrics.hitRate.toFixed(1):0,c=()=>e!=null&&e.memoryUsage?`${e.memoryUsage.toFixed(1)} MB`:"N/A",d=()=>e!=null&&e.cacheStats.metrics?`${(e.cacheStats.metrics.size/1024).toFixed(1)} KB`:"N/A";return n.jsx("div",{className:"fixed bottom-4 right-4 z-50 w-96 max-h-96 overflow-y-auto",children:n.jsxs(V,{className:"bg-black/90 text-white border-gray-600",children:[n.jsx(le,{className:"pb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ce,{className:"text-sm font-medium",children:" Performance Monitor"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(L,{size:"sm",variant:"ghost",onClick:()=>o(!a),className:"h-6 px-2 text-xs",children:a?"":""}),n.jsx(L,{size:"sm",variant:"ghost",onClick:i,className:"h-6 px-2 text-xs",children:""}),n.jsx(L,{size:"sm",variant:"ghost",onClick:()=>s(!1),className:"h-6 px-2 text-xs",children:""})]})]})}),n.jsxs(W,{className:"space-y-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-300 mb-1",children:" Cache Performance"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Hit Rate:"}),n.jsxs(re,{variant:parseFloat(l())>80?"default":"destructive",className:"ml-1 text-xs",children:[l(),"%"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Size:"}),n.jsx("span",{className:"ml-1 text-green-400",children:d()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Entries:"}),n.jsx("span",{className:"ml-1 text-blue-400",children:((u=e==null?void 0:e.cacheStats.metrics)==null?void 0:u.totalEntries)||0})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Hits:"}),n.jsx("span",{className:"ml-1 text-green-400",children:((f=e==null?void 0:e.cacheStats.metrics)==null?void 0:f.hits)||0})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-purple-300 mb-1",children:" Memory Usage"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Heap Size:"}),n.jsx(re,{variant:e!=null&&e.memoryUsage&&e.memoryUsage>100?"destructive":"default",className:"ml-1 text-xs",children:c()})]})]}),(e==null?void 0:e.cacheStats.keys)&&e.cacheStats.keys.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-300 mb-1",children:" Active Cache Keys"}),n.jsxs("div",{className:"max-h-20 overflow-y-auto space-y-1",children:[e.cacheStats.keys.slice(0,5).map((m,p)=>n.jsx("div",{className:"text-xs text-gray-300 truncate",children:m},p)),e.cacheStats.keys.length>5&&n.jsxs("div",{className:"text-xs text-gray-500",children:["+",e.cacheStats.keys.length-5," more..."]})]})]}),n.jsx("div",{className:"pt-2 border-t border-gray-700",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{size:"sm",variant:"destructive",onClick:()=>{Is.clear(),i()},className:"h-6 px-2 text-xs",children:" Clear Cache"}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>{Is.cleanup(),i()},className:"h-6 px-2 text-xs",children:" Cleanup"})]})}),n.jsxs("div",{className:"pt-2 border-t border-gray-700 text-xs text-gray-500",children:["Press ",n.jsx("kbd",{className:"bg-gray-800 px-1 rounded",children:"Ctrl+Shift+P"})," to toggle"]})]})]})})},Ja=new Map,JZ=3*60*1e3;function a4(e){return JSON.stringify(e||{})}function QZ(e){const t=a4(e),r=Ja.get(t);return r?Date.now()-r.timestamp>JZ?(Ja.delete(t),null):r.data:null}function ZZ(e,t){const r=a4(t);Ja.set(r,{data:e,timestamp:Date.now(),filters:r})}function Rb(e={}){const{autoFetch:t=!0,filters:r}=e,{currentTenant:s}=Ui(),[a,o]=h.useState([]),[i,l]=h.useState(t),[c,d]=h.useState(null),[u,f]=h.useState({fetchTime:0,dataSize:0,cacheHit:!1,totalCount:0,activeCount:0,recurringCount:0,oneOffCount:0}),m=h.useCallback(async(y=!1)=>{const b=Date.now();l(!0),d(null);try{if(!y){const E=QZ(r);if(E){o(E),f({fetchTime:Date.now()-b,dataSize:JSON.stringify(E).length,cacheHit:!0,totalCount:E.length,activeCount:E.filter(D=>D.is_active).length,recurringCount:E.filter(D=>D.kind==="recurring").length,oneOffCount:E.filter(D=>D.kind==="one_off").length}),l(!1);return}}let j=O.from("operational_activities").select("*").order("created_at",{ascending:!1});r!=null&&r.kind&&(j=j.eq("kind",r.kind)),r!=null&&r.scope&&(j=j.eq("scope",r.scope)),(r==null?void 0:r.isActive)!==void 0&&(j=j.eq("is_active",r.isActive)),r!=null&&r.ownerId&&(j=j.eq("owner_id",r.ownerId)),r!=null&&r.search&&(j=j.or(`name.ilike.%${r.search}%,description.ilike.%${r.search}%`));const{data:S,error:N}=await j;if(N)throw N;const _=S||[];o(_),ZZ(_,r),f({fetchTime:Date.now()-b,dataSize:JSON.stringify(_).length,cacheHit:!1,totalCount:_.length,activeCount:_.filter(E=>E.is_active).length,recurringCount:_.filter(E=>E.kind==="recurring").length,oneOffCount:_.filter(E=>E.kind==="one_off").length})}catch(j){console.error(" Erreur fetchActivities:",j),d(j.message)}finally{l(!1)}},[r]),p=h.useCallback(async y=>{try{if(!(s!=null&&s.id))throw new Error("Aucun tenant actif. Veuillez vous connecter.");const{data:{user:b}}=await O.auth.getUser();if(!b)throw new Error("Utilisateur non authentifi. Veuillez vous reconnecter.");const j={...y,tenant_id:s.id,created_by:b.id};console.log(" Insertion activit avec tenant et user:",j);const{data:S,error:N}=await O.from("operational_activities").insert(j).select().single();if(N)throw N;return console.log(" Activit insre:",S),Ja.clear(),await m(!0),S}catch(b){throw console.error(" Erreur createActivity:",b),d(b.message),b}},[m,s]),w=h.useCallback(async(y,b)=>{try{const{data:j,error:S}=await O.from("operational_activities").update({...b,updated_at:new Date().toISOString()}).eq("id",y).select().single();if(S)throw S;return Ja.clear(),await m(!0),j}catch(j){throw console.error(" Erreur updateActivity:",j),d(j.message),j}},[m]),v=h.useCallback(async(y,b=!0)=>{try{const{data:j,error:S}=await O.rpc("delete_activity_with_future_occurrences",{p_activity_id:y,p_keep_completed:b});if(S)throw S;return Ja.clear(),await m(!0),j}catch(j){throw console.error(" Erreur deleteActivity:",j),d(j.message),j}},[m]),x=h.useCallback(async(y,b)=>{try{const{error:j}=await O.rpc("pause_activity",{p_activity_id:y,p_is_active:b});if(j)throw j;Ja.clear(),await m(!0)}catch(j){throw console.error(" Erreur toggleActive:",j),d(j.message),j}},[m]),g=h.useCallback(async y=>{try{const{data:b,error:j}=await O.rpc("get_activity_statistics",{p_activity_id:y});if(j)throw j;return b}catch(b){throw console.error(" Erreur getStatistics:",b),b}},[]);return h.useEffect(()=>{t&&m()},[t,m]),{activities:a,loading:i,error:c,metrics:u,fetchActivities:m,createActivity:p,updateActivity:w,deleteActivity:v,toggleActive:x,getStatistics:g,refresh:()=>m(!0),clearCache:()=>Ja.clear()}}function o4(){const{currentTenant:e}=Ui(),[t,r]=h.useState([]),[s,a]=h.useState(!1),[o,i]=h.useState(null),l=h.useCallback(async m=>{a(!0),i(null);try{const{data:p,error:w}=await O.from("operational_action_templates").select("*").eq("activity_id",m).order("position",{ascending:!0});if(w)throw w;return r(p||[]),p||[]}catch(p){return console.error(" Erreur fetchTemplates:",p),i(p.message),[]}finally{a(!1)}},[]),c=h.useCallback(async m=>{a(!0),i(null);try{if(!(e!=null&&e.id))throw new Error("Aucun tenant actif");const p={...m,tenant_id:e.id,created_at:new Date().toISOString()},{data:w,error:v}=await O.from("operational_action_templates").insert(p).select().single();if(v)throw v;return w.activity_id&&await l(w.activity_id),w}catch(p){throw console.error(" Erreur createTemplate:",p),i(p.message),p}finally{a(!1)}},[l,e]),d=h.useCallback(async(m,p)=>{a(!0),i(null);try{const{error:w}=await O.from("operational_action_templates").update(p).eq("id",m).select().single();if(w)throw w;return p.activity_id&&await l(p.activity_id),p}catch(w){throw console.error(" Erreur updateTemplate:",w),i(w.message),w}finally{a(!1)}},[l]),u=h.useCallback(async(m,p)=>{a(!0),i(null);try{const{error:w}=await O.from("operational_action_templates").delete().eq("id",m);if(w)throw w;await l(p)}catch(w){throw console.error(" Erreur deleteTemplate:",w),i(w.message),w}finally{a(!1)}},[l]),f=h.useCallback(async(m,p)=>{a(!0),i(null);try{const{error:w}=await O.from("operational_action_templates").upsert(p.map((v,x)=>({id:v.id,position:x})));if(w)throw w;await l(m)}catch(w){throw console.error(" Erreur reorderTemplates:",w),i(w.message),w}finally{a(!1)}},[l]);return{templates:t,loading:s,error:o,fetchTemplates:l,createTemplate:c,updateTemplate:d,deleteTemplate:u,reorderTemplates:f}}function i4(){const{currentTenant:e}=Ui(),[t,r]=h.useState(!1),[s,a]=h.useState(null),o=h.useCallback(async c=>{r(!0),a(null);try{const{data:d,error:u}=await O.from("operational_schedules").select("*").eq("activity_id",c).single();if(u&&u.code!=="PGRST116")throw u;return d}catch(d){return console.error(" Erreur getSchedule:",d),a(d.message),null}finally{r(!1)}},[]),i=h.useCallback(async c=>{r(!0),a(null);try{if(!(e!=null&&e.id))throw new Error("Aucun tenant actif");const d={...c,tenant_id:e.id},{data:u,error:f}=await O.from("operational_schedules").upsert(d).select().single();if(f)throw f;return u}catch(d){throw console.error(" Erreur upsertSchedule:",d),a(d.message),d}finally{r(!1)}},[e]),l=h.useCallback(async c=>{r(!0),a(null);try{const{error:d}=await O.from("operational_schedules").delete().eq("activity_id",c);if(d)throw d}catch(d){throw console.error(" Erreur deleteSchedule:",d),a(d.message),d}finally{r(!1)}},[]);return{loading:t,error:s,getSchedule:o,upsertSchedule:i,deleteSchedule:l}}var l4="AlertDialog",[eee,woe]=sr(l4,[uD]),Pa=uD(),c4=e=>{const{__scopeAlertDialog:t,...r}=e,s=Pa(t);return n.jsx(ED,{...s,...r,modal:!0})};c4.displayName=l4;var tee="AlertDialogTrigger",ree=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Pa(r);return n.jsx(kD,{...a,...s,ref:t})});ree.displayName=tee;var nee="AlertDialogPortal",d4=e=>{const{__scopeAlertDialog:t,...r}=e,s=Pa(t);return n.jsx(DD,{...s,...r})};d4.displayName=nee;var see="AlertDialogOverlay",u4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Pa(r);return n.jsx(Ew,{...a,...s,ref:t})});u4.displayName=see;var Ol="AlertDialogContent",[aee,oee]=eee(Ol),iee=WE("AlertDialogContent"),f4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,o=Pa(r),i=h.useRef(null),l=Ae(t,i),c=h.useRef(null);return n.jsx(TV,{contentName:Ol,titleName:h4,docsSlug:"alert-dialog",children:n.jsx(aee,{scope:r,cancelRef:c,children:n.jsxs(kw,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:ue(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[n.jsx(iee,{children:s}),n.jsx(cee,{contentRef:i})]})})})});f4.displayName=Ol;var h4="AlertDialogTitle",m4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Pa(r);return n.jsx(Dw,{...a,...s,ref:t})});m4.displayName=h4;var p4="AlertDialogDescription",g4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Pa(r);return n.jsx(Tw,{...a,...s,ref:t})});g4.displayName=p4;var lee="AlertDialogAction",x4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Pa(r);return n.jsx(Pw,{...a,...s,ref:t})});x4.displayName=lee;var v4="AlertDialogCancel",y4=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=oee(v4,r),o=Pa(r),i=Ae(t,a);return n.jsx(Pw,{...o,...s,ref:i})});y4.displayName=v4;var cee=({contentRef:e})=>{const t=`\`${Ol}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ol}\` by passing a \`${p4}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ol}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},dee=c4,uee=d4,w4=u4,b4=f4,j4=x4,N4=y4,S4=m4,_4=g4;const C4=dee,fee=uee,E4=h.forwardRef(({className:e,...t},r)=>n.jsx(w4,{className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));E4.displayName=w4.displayName;const Ab=h.forwardRef(({className:e,...t},r)=>n.jsxs(fee,{children:[n.jsx(E4,{}),n.jsx(b4,{ref:r,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Ab.displayName=b4.displayName;const Mb=({className:e,...t})=>n.jsx("div",{className:pe("flex flex-col space-y-2 text-center sm:text-left",e),...t});Mb.displayName="AlertDialogHeader";const Ib=({className:e,...t})=>n.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ib.displayName="AlertDialogFooter";const Ob=h.forwardRef(({className:e,...t},r)=>n.jsx(S4,{ref:r,className:pe("text-lg font-semibold",e),...t}));Ob.displayName=S4.displayName;const Lb=h.forwardRef(({className:e,...t},r)=>n.jsx(_4,{ref:r,className:pe("text-sm text-muted-foreground",e),...t}));Lb.displayName=_4.displayName;const $b=h.forwardRef(({className:e,...t},r)=>n.jsx(j4,{ref:r,className:pe(lu(),e),...t}));$b.displayName=j4.displayName;const Fb=h.forwardRef(({className:e,...t},r)=>n.jsx(N4,{ref:r,className:pe(lu({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Fb.displayName=N4.displayName;const LS=[{value:"MO",label:"Lun",fullLabel:"Lundi"},{value:"TU",label:"Mar",fullLabel:"Mardi"},{value:"WE",label:"Mer",fullLabel:"Mercredi"},{value:"TH",label:"Jeu",fullLabel:"Jeudi"},{value:"FR",label:"Ven",fullLabel:"Vendredi"},{value:"SA",label:"Sam",fullLabel:"Samedi"},{value:"SU",label:"Dim",fullLabel:"Dimanche"}],hee=({value:e,onChange:t,activityId:r})=>{const[s,a]=h.useState("weekly"),[o,i]=h.useState(["MO"]),[l,c]=h.useState("1"),[d,u]=h.useState(new Date),[f,m]=h.useState(void 0),[p,w]=h.useState(30);h.useEffect(()=>{if(e.rrule){const b=e.rrule;if(b.startsWith("FREQ=DAILY"))a("daily");else if(b.startsWith("FREQ=WEEKLY")){a("weekly");const j=b.match(/BYDAY=([A-Z,]+)/);j&&i(j[1].split(","))}else if(b.startsWith("FREQ=MONTHLY")){a("monthly");const j=b.match(/BYMONTHDAY=([0-9,]+)/);j&&c(j[1])}}e.start_date&&u(new Date(e.start_date)),e.until&&m(new Date(e.until)),e.generate_window_days&&w(e.generate_window_days)},[e]);const v=()=>{switch(s){case"daily":return"FREQ=DAILY";case"weekly":return o.length>0?`FREQ=WEEKLY;BYDAY=${o.join(",")}`:null;case"monthly":return l.trim()?`FREQ=MONTHLY;BYMONTHDAY=${l}`:null;default:return null}},x=()=>{const b=[];let S=new Date(d);const N=f||Ur(d,3);switch(s){case"daily":for(let k=0;k<5&&S<=N;k++)b.push(new Date(S)),S=Ht(S,1);break;case"weekly":const _=o.map(k=>LS.findIndex(P=>P.value===k));let E=0;for(;b.length<5&&E<100;){const k=S.getDay(),P=k===0?6:k-1;_.includes(P)&&b.push(new Date(S)),S=Ht(S,1),E++}break;case"monthly":const D=l.split(",").map(k=>parseInt(k.trim())).filter(k=>!isNaN(k));let C=0;for(;b.length<5&&C<12;){for(const k of D){const P=new Date(S.getFullYear(),S.getMonth(),k);if(P>=d&&P<=N&&(b.push(P),b.length>=5))break}S=Ur(S,1),C++}break}return b.slice(0,5)};h.useEffect(()=>{t({activity_id:r,rrule:v(),start_date:Ve(d,"yyyy-MM-dd"),until:f?Ve(f,"yyyy-MM-dd"):null,timezone:"Africa/Djibouti",generate_window_days:p})},[s,o,l,d,f,p]);const g=(b,j)=>{i(j?[...o,b]:o.filter(S=>S!==b))},y=x();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Frquence de rcurrence"}),n.jsxs(Ie,{value:s,onValueChange:b=>a(b),children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"daily",children:"Quotidien (tous les jours)"}),n.jsx(ae,{value:"weekly",children:"Hebdomadaire (jours spcifiques)"}),n.jsx(ae,{value:"monthly",children:"Mensuel (dates spcifiques)"})]})]})]}),s==="weekly"&&n.jsxs("div",{className:"space-y-3",children:[n.jsx(J,{children:"Jours de la semaine"}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:LS.map(b=>n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(ha,{id:`day-${b.value}`,checked:o.includes(b.value),onCheckedChange:j=>g(b.value,j)}),n.jsx(J,{htmlFor:`day-${b.value}`,className:"text-xs cursor-pointer mt-1",title:b.fullLabel,children:b.label})]},b.value))}),o.length===0&&n.jsx("p",{className:"text-sm text-destructive",children:" Slectionnez au moins un jour"})]}),s==="monthly"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"monthDays",children:"Jours du mois (spars par des virgules)"}),n.jsx(ye,{id:"monthDays",value:l,onChange:b=>c(b.target.value),placeholder:"Ex: 1,15,30"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Entrez les numros des jours (1-31) spars par des virgules"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Date de dbut *"}),n.jsxs(yo,{children:[n.jsx(wo,{asChild:!0,children:n.jsxs(L,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[n.jsx(ze,{className:"mr-2 h-4 w-4"}),Ve(d,"PP",{locale:ot})]})}),n.jsx(pa,{className:"w-auto p-0",children:n.jsx(xi,{mode:"single",selected:d,onSelect:b=>b&&u(b),initialFocus:!0})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Date de fin (optionnel)"}),n.jsxs(yo,{children:[n.jsx(wo,{asChild:!0,children:n.jsxs(L,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[n.jsx(ze,{className:"mr-2 h-4 w-4"}),f?Ve(f,"PP",{locale:ot}):"Aucune"]})}),n.jsx(pa,{className:"w-auto p-0",children:n.jsx(xi,{mode:"single",selected:f,onSelect:m,initialFocus:!0})})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{htmlFor:"windowDays",children:"Fentre de gnration (jours)"}),n.jsx(ye,{id:"windowDays",type:"number",min:"1",max:"365",value:p,onChange:b=>w(parseInt(b.target.value)||30)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Les tches seront gnres jusqu' ",p," jours  l'avance"]})]}),n.jsxs("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(q0,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium",children:"Rgle de rcurrence (RRULE)"})]}),n.jsx("code",{className:"text-xs block bg-background p-2 rounded",children:v()||"Aucune rgle dfinie"})]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg space-y-2",children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:" Aperu des 5 prochaines occurrences"}),y.length>0?n.jsx("ul",{className:"space-y-1",children:y.map((b,j)=>n.jsxs("li",{className:"text-sm text-blue-700 dark:text-blue-300",children:[j+1,". ",Ve(b,"EEEE d MMMM yyyy",{locale:ot})]},j))}):n.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Aucune occurrence  afficher (vrifiez la configuration)"})]})]})};function Ar(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mee=typeof Symbol=="function"&&Symbol.observable||"@@observable",$S=mee,Ax=()=>Math.random().toString(36).substring(7).split("").join("."),pee={INIT:`@@redux/INIT${Ax()}`,REPLACE:`@@redux/REPLACE${Ax()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ax()}`},FS=pee;function gee(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function k4(e,t,r){if(typeof e!="function")throw new Error(Ar(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ar(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ar(1));return r(k4)(e,t)}let s=e,a=t,o=new Map,i=o,l=0,c=!1;function d(){i===o&&(i=new Map,o.forEach((x,g)=>{i.set(g,x)}))}function u(){if(c)throw new Error(Ar(3));return a}function f(x){if(typeof x!="function")throw new Error(Ar(4));if(c)throw new Error(Ar(5));let g=!0;d();const y=l++;return i.set(y,x),function(){if(g){if(c)throw new Error(Ar(6));g=!1,d(),i.delete(y),o=null}}}function m(x){if(!gee(x))throw new Error(Ar(7));if(typeof x.type>"u")throw new Error(Ar(8));if(typeof x.type!="string")throw new Error(Ar(17));if(c)throw new Error(Ar(9));try{c=!0,a=s(a,x)}finally{c=!1}return(o=i).forEach(y=>{y()}),x}function p(x){if(typeof x!="function")throw new Error(Ar(10));s=x,m({type:FS.REPLACE})}function w(){const x=f;return{subscribe(g){if(typeof g!="object"||g===null)throw new Error(Ar(11));function y(){const j=g;j.next&&j.next(u())}return y(),{unsubscribe:x(y)}},[$S](){return this}}}return m({type:FS.INIT}),{dispatch:m,subscribe:f,getState:u,replaceReducer:p,[$S]:w}}function zS(e,t){return function(...r){return t(e.apply(this,r))}}function BS(e,t){if(typeof e=="function")return zS(e,t);if(typeof e!="object"||e===null)throw new Error(Ar(16));const r={};for(const s in e){const a=e[s];typeof a=="function"&&(r[s]=zS(a,t))}return r}function D4(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...s)=>t(r(...s)))}function xee(...e){return t=>(r,s)=>{const a=t(r,s);let o=()=>{throw new Error(Ar(15))};const i={getState:a.getState,dispatch:(c,...d)=>o(c,...d)},l=e.map(c=>c(i));return o=D4(...l)(a.dispatch),{...a,dispatch:o}}}var vee={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf=h;function yee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wee=typeof Object.is=="function"?Object.is:yee,bee=tf.useSyncExternalStore,jee=tf.useRef,Nee=tf.useEffect,See=tf.useMemo,_ee=tf.useDebugValue;vee.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var o=jee(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=See(function(){function c(p){if(!d){if(d=!0,u=p,p=s(p),a!==void 0&&i.hasValue){var w=i.value;if(a(w,p))return f=w}return f=p}if(w=f,wee(u,p))return w;var v=s(p);return a!==void 0&&a(w,v)?(u=p,w):(u=p,f=v)}var d=!1,u,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,s,a]);var l=bee(e,o[0],o[1]);return Nee(function(){i.hasValue=!0,i.value=l},[l]),_ee(l),l};var Cee=h.version.startsWith("19"),Eee=Symbol.for(Cee?"react.transitional.element":"react.element"),kee=Symbol.for("react.portal"),Dee=Symbol.for("react.fragment"),Tee=Symbol.for("react.strict_mode"),Pee=Symbol.for("react.profiler"),Ree=Symbol.for("react.consumer"),Aee=Symbol.for("react.context"),T4=Symbol.for("react.forward_ref"),Mee=Symbol.for("react.suspense"),Iee=Symbol.for("react.suspense_list"),zb=Symbol.for("react.memo"),Oee=Symbol.for("react.lazy"),Lee=T4,$ee=zb;function Fee(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case Eee:switch(e=e.type,e){case Dee:case Pee:case Tee:case Mee:case Iee:return e;default:switch(e=e&&e.$$typeof,e){case Aee:case T4:case Oee:case zb:return e;case Ree:return e;default:return t}}case kee:return t}}}function zee(e){return Fee(e)===zb}function Bee(e,t,r,s,{areStatesEqual:a,areOwnPropsEqual:o,areStatePropsEqual:i}){let l=!1,c,d,u,f,m;function p(y,b){return c=y,d=b,u=e(c,d),f=t(s,d),m=r(u,f,d),l=!0,m}function w(){return u=e(c,d),t.dependsOnOwnProps&&(f=t(s,d)),m=r(u,f,d),m}function v(){return e.dependsOnOwnProps&&(u=e(c,d)),t.dependsOnOwnProps&&(f=t(s,d)),m=r(u,f,d),m}function x(){const y=e(c,d),b=!i(y,u);return u=y,b&&(m=r(u,f,d)),m}function g(y,b){const j=!o(b,d),S=!a(y,c,b,d);return c=y,d=b,j&&S?w():j?v():S?x():m}return function(b,j){return l?g(b,j):p(b,j)}}function Uee(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:s,...a}){const o=t(e,a),i=r(e,a),l=s(e,a);return Bee(o,i,l,e,a)}function Vee(e,t){const r={};for(const s in e){const a=e[s];typeof a=="function"&&(r[s]=(...o)=>t(a(...o)))}return r}function Oy(e){return function(r){const s=e(r);function a(){return s}return a.dependsOnOwnProps=!1,a}}function US(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function P4(e,t){return function(s,{displayName:a}){const o=function(l,c){return o.dependsOnOwnProps?o.mapToProps(l,c):o.mapToProps(l,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,c){o.mapToProps=e,o.dependsOnOwnProps=US(e);let d=o(l,c);return typeof d=="function"&&(o.mapToProps=d,o.dependsOnOwnProps=US(d),d=o(l,c)),d},o}}function Bb(e,t){return(r,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function Wee(e){return e&&typeof e=="object"?Oy(t=>Vee(e,t)):e?typeof e=="function"?P4(e):Bb(e,"mapDispatchToProps"):Oy(t=>({dispatch:t}))}function Hee(e){return e?typeof e=="function"?P4(e):Bb(e,"mapStateToProps"):Oy(()=>({}))}function qee(e,t,r){return{...r,...e,...t}}function Gee(e){return function(r,{displayName:s,areMergedPropsEqual:a}){let o=!1,i;return function(c,d,u){const f=e(c,d,u);return o?a(f,i)||(i=f):(o=!0,i=f),i}}}function Kee(e){return e?typeof e=="function"?Gee(e):Bb(e,"mergeProps"):()=>qee}function Yee(e){e()}function Xee(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Yee(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!s||e===null||(s=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var VS={notify(){},get:()=>[]};function R4(e,t){let r,s=VS,a=0,o=!1;function i(v){u();const x=s.subscribe(v);let g=!1;return()=>{g||(g=!0,x(),f())}}function l(){s.notify()}function c(){w.onStateChange&&w.onStateChange()}function d(){return o}function u(){a++,r||(r=t?t.addNestedSub(c):e.subscribe(c),s=Xee())}function f(){a--,r&&a===0&&(r(),r=void 0,s.clear(),s=VS)}function m(){o||(o=!0,u())}function p(){o&&(o=!1,f())}const w={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>s};return w}var Jee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qee=Jee(),Zee=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ete=Zee(),tte=()=>Qee||ete?h.useLayoutEffect:h.useEffect,Sm=tte();function WS(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Mx(e,t){if(WS(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!WS(e[r[a]],t[r[a]]))return!1;return!0}var rte={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},nte={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ste={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},A4={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ate={[Lee]:ste,[$ee]:A4};function HS(e){return zee(e)?A4:ate[e.$$typeof]||rte}var ote=Object.defineProperty,ite=Object.getOwnPropertyNames,qS=Object.getOwnPropertySymbols,lte=Object.getOwnPropertyDescriptor,cte=Object.getPrototypeOf,GS=Object.prototype;function Ly(e,t){if(typeof t!="string"){if(GS){const o=cte(t);o&&o!==GS&&Ly(e,o)}let r=ite(t);qS&&(r=r.concat(qS(t)));const s=HS(e),a=HS(t);for(let o=0;o<r.length;++o){const i=r[o];if(!nte[i]&&!(a&&a[i])&&!(s&&s[i])){const l=lte(t,i);try{ote(e,i,l)}catch{}}}}return e}var Ix=Symbol.for("react-redux-context"),Ox=typeof globalThis<"u"?globalThis:{};function dte(){if(!h.createContext)return{};const e=Ox[Ix]??(Ox[Ix]=new Map);let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var M4=dte(),ute=[null,null];function fte(e,t,r){Sm(()=>e(...t),r)}function hte(e,t,r,s,a,o){e.current=s,r.current=!1,a.current&&(a.current=null,o())}function mte(e,t,r,s,a,o,i,l,c,d,u){if(!e)return()=>{};let f=!1,m=null;const p=()=>{if(f||!l.current)return;const v=t.getState();let x,g;try{x=s(v,a.current)}catch(y){g=y,m=y}g||(m=null),x===o.current?i.current||d():(o.current=x,c.current=x,i.current=!0,u())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,m)throw m}}function pte(e,t){return e===t}function gte(e,t,r,{pure:s,areStatesEqual:a=pte,areOwnPropsEqual:o=Mx,areStatePropsEqual:i=Mx,areMergedPropsEqual:l=Mx,forwardRef:c=!1,context:d=M4}={}){const u=d,f=Hee(e),m=Wee(t),p=Kee(r),w=!!e;return x=>{const g=x.displayName||x.name||"Component",y=`Connect(${g})`,b={shouldHandleStateChanges:w,displayName:y,wrappedComponentName:g,WrappedComponent:x,initMapStateToProps:f,initMapDispatchToProps:m,initMergeProps:p,areStatesEqual:a,areStatePropsEqual:i,areOwnPropsEqual:o,areMergedPropsEqual:l};function j(_){const[E,D,C]=h.useMemo(()=>{const{reactReduxForwardedRef:he,...be}=_;return[_.context,he,be]},[_]),k=h.useMemo(()=>{let he=u;return E!=null&&E.Consumer,he},[E,u]),P=h.useContext(k),R=!!_.store&&!!_.store.getState&&!!_.store.dispatch,A=!!P&&!!P.store,I=R?_.store:P.store,F=A?P.getServerState:I.getState,B=h.useMemo(()=>Uee(I.dispatch,b),[I]),[T,M]=h.useMemo(()=>{if(!w)return ute;const he=R4(I,R?void 0:P.subscription),be=he.notifyNestedSubs.bind(he);return[he,be]},[I,R,P]),U=h.useMemo(()=>R?P:{...P,subscription:T},[R,P,T]),q=h.useRef(void 0),Y=h.useRef(C),G=h.useRef(void 0),z=h.useRef(!1),Z=h.useRef(!1),Q=h.useRef(void 0);Sm(()=>(Z.current=!0,()=>{Z.current=!1}),[]);const H=h.useMemo(()=>()=>G.current&&C===Y.current?G.current:B(I.getState(),C),[I,C]),te=h.useMemo(()=>be=>T?mte(w,I,T,B,Y,q,z,Z,G,M,be):()=>{},[T]);fte(hte,[Y,q,z,C,G,M]);let se;try{se=h.useSyncExternalStore(te,H,F?()=>B(F(),C):H)}catch(he){throw Q.current&&(he.message+=`
The error may be correlated with this previous error:
${Q.current.stack}

`),he}Sm(()=>{Q.current=void 0,G.current=void 0,q.current=se});const ne=h.useMemo(()=>h.createElement(x,{...se,ref:D}),[D,x,se]);return h.useMemo(()=>w?h.createElement(k.Provider,{value:U},ne):ne,[k,ne,U])}const N=h.memo(j);if(N.WrappedComponent=x,N.displayName=j.displayName=y,c){const E=h.forwardRef(function(C,k){return h.createElement(N,{...C,reactReduxForwardedRef:k})});return E.displayName=y,E.WrappedComponent=x,Ly(E,x)}return Ly(N,x)}}var I4=gte;function xte(e){const{children:t,context:r,serverState:s,store:a}=e,o=h.useMemo(()=>{const c=R4(a);return{store:a,subscription:c,getServerState:s?()=>s:void 0}},[a,s]),i=h.useMemo(()=>a.getState(),[a]);Sm(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,i]);const l=r||M4;return h.createElement(l.Provider,{value:o},t)}var vte=xte,yte="Invariant failed";function wte(e,t){throw new Error(yte)}var cs=function(t){var r=t.top,s=t.right,a=t.bottom,o=t.left,i=s-o,l=a-r,c={top:r,right:s,bottom:a,left:o,width:i,height:l,x:o,y:r,center:{x:(s+o)/2,y:(a+r)/2}};return c},Ub=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},KS=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},bte=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Lx={top:0,right:0,bottom:0,left:0},Vb=function(t){var r=t.borderBox,s=t.margin,a=s===void 0?Lx:s,o=t.border,i=o===void 0?Lx:o,l=t.padding,c=l===void 0?Lx:l,d=cs(Ub(r,a)),u=cs(KS(r,i)),f=cs(KS(u,c));return{marginBox:d,borderBox:cs(r),paddingBox:u,contentBox:f,margin:a,border:i,padding:c}},kn=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var a=Number(r);return isNaN(a)&&wte(),a},jte=function(){return{x:window.pageXOffset,y:window.pageYOffset}},_m=function(t,r){var s=t.borderBox,a=t.border,o=t.margin,i=t.padding,l=bte(s,r);return Vb({borderBox:l,border:a,margin:o,padding:i})},Cm=function(t,r){return r===void 0&&(r=jte()),_m(t,r)},O4=function(t,r){var s={top:kn(r.marginTop),right:kn(r.marginRight),bottom:kn(r.marginBottom),left:kn(r.marginLeft)},a={top:kn(r.paddingTop),right:kn(r.paddingRight),bottom:kn(r.paddingBottom),left:kn(r.paddingLeft)},o={top:kn(r.borderTopWidth),right:kn(r.borderRightWidth),bottom:kn(r.borderBottomWidth),left:kn(r.borderLeftWidth)};return Vb({borderBox:t,margin:s,padding:a,border:o})},L4=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return O4(r,s)},gu=function(t){var r=[],s=null,a=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};function Em(){return Em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Em.apply(null,arguments)}function $4(e,t){}$4.bind(null,"warn");$4.bind(null,"error");function bo(){}function Nte(e,t){return{...e,...t}}function $n(e,t,r){const s=t.map(a=>{const o=Nte(r,a.options);return e.addEventListener(a.eventName,a.fn,o),function(){e.removeEventListener(a.eventName,a.fn,o)}});return function(){s.forEach(o=>{o()})}}const Ste="Invariant failed";class km extends Error{}km.prototype.toString=function(){return this.message};function ve(e,t){throw new km(Ste)}class _te extends X.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=bo,this.onWindowError=r=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),r.error instanceof km&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=$n(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof km){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Cte=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Dm=e=>e+1,Ete=e=>`
  You have lifted an item in position ${Dm(e.source.index)}
`,F4=(e,t)=>{const r=e.droppableId===t.droppableId,s=Dm(e.index),a=Dm(t.index);return r?`
      You have moved the item from position ${s}
      to position ${a}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},z4=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,kte=e=>{const t=e.destination;if(t)return F4(e.source,t);const r=e.combine;return r?z4(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},YS=e=>`
  The item has returned to its starting position
  of ${Dm(e.index)}
`,Dte=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${YS(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${F4(e.source,t)}
    `:r?`
      You have dropped the item.
      ${z4(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${YS(e.source)}
  `},vh={dragHandleUsageInstructions:Cte,onDragStart:Ete,onDragUpdate:kte,onDragEnd:Dte};function Tte(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function B4(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Tte(e[r],t[r]))return!1;return!0}function Qe(e,t){const r=h.useState(()=>({inputs:t,result:e()}))[0],s=h.useRef(!0),a=h.useRef(r),i=s.current||!!(t&&a.current.inputs&&B4(t,a.current.inputs))?a.current:{inputs:t,result:e()};return h.useEffect(()=>{s.current=!1,a.current=i},[i]),i.result}function ke(e,t){return Qe(()=>e,t)}const hr={x:0,y:0},vr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),pn=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),jo=(e,t)=>e.x===t.x&&e.y===t.y,Ac=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Mi=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},xu=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),XS=(e,t)=>Math.min(...t.map(r=>xu(e,r))),U4=e=>t=>({x:e(t.x),y:e(t.y)});var Pte=(e,t)=>{const r=cs({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const rf=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),JS=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Rte={top:0,right:0,bottom:0,left:0},Ate=(e,t)=>t?rf(e,t.scroll.diff.displacement):e,Mte=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,Ite=(e,t)=>t&&t.shouldClipSubject?Pte(t.pageMarginBox,e):cs(e);var dc=({page:e,withPlaceholder:t,axis:r,frame:s})=>{const a=Ate(e.marginBox,s),o=Mte(a,r,t),i=Ite(o,s);return{page:e,withPlaceholder:t,active:i}},Wb=(e,t)=>{e.frame||ve();const r=e.frame,s=pn(t,r.scroll.initial),a=Ac(s),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:a},max:r.scroll.max}},i=dc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:i}};function fr(e,t=B4){let r=null;function s(...a){if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;const o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return s.clear=function(){r=null},s}const V4=fr(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),W4=fr(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),sg=fr(e=>Object.values(e)),Ote=fr(e=>Object.values(e));var Mc=fr((e,t)=>Ote(t).filter(s=>e===s.descriptor.droppableId).sort((s,a)=>s.descriptor.index-a.descriptor.index));function Hb(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function ag(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var og=fr((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),Lte=({isMovingForward:e,draggable:t,destination:r,insideDestination:s,previousImpact:a})=>{if(!r.isCombineEnabled||!Hb(a))return null;function i(p){const w={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...a,at:w}}const l=a.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const d=og(t,s);if(!c){if(!d.length)return null;const p=d[d.length-1];return i(p.descriptor.id)}const u=d.findIndex(p=>p.descriptor.id===c);u===-1&&ve();const f=u-1;if(f<0)return null;const m=d[f];return i(m.descriptor.id)},Ic=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const H4={point:hr,value:0},vu={invisible:{},visible:{},all:[]},$te={displaced:vu,displacedBy:H4,at:null};var Un=(e,t)=>r=>e<=r&&r<=t,q4=e=>{const t=Un(e.top,e.bottom),r=Un(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right))return!0;const o=t(s.top)||t(s.bottom),i=r(s.left)||r(s.right);if(o&&i)return!0;const c=s.top<e.top&&s.bottom>e.bottom,d=s.left<e.left&&s.right>e.right;return c&&d?!0:c&&i||d&&o}},Fte=e=>{const t=Un(e.top,e.bottom),r=Un(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right)};const qb={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},G4={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var zte=e=>t=>{const r=Un(t.top,t.bottom),s=Un(t.left,t.right);return a=>e===qb?r(a.top)&&r(a.bottom):s(a.left)&&s(a.right)};const Bte=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:hr;return rf(e,r)},Ute=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,Vte=(e,t,r)=>r(t)(e),Gb=({target:e,destination:t,viewport:r,withDroppableDisplacement:s,isVisibleThroughFrameFn:a})=>{const o=s?Bte(e,t):e;return Ute(o,t,a)&&Vte(o,r,a)},Wte=e=>Gb({...e,isVisibleThroughFrameFn:q4}),K4=e=>Gb({...e,isVisibleThroughFrameFn:Fte}),Hte=e=>Gb({...e,isVisibleThroughFrameFn:zte(e.destination.axis)}),qte=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:s,visible:a}=t;if(s[e])return!1;const o=a[e];return o?o.shouldAnimate:!0};function Gte(e,t){const r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return cs(Ub(r,s))}function yu({afterDragging:e,destination:t,displacedBy:r,viewport:s,forceShouldAnimate:a,last:o}){return e.reduce(function(l,c){const d=Gte(c,r),u=c.descriptor.id;if(l.all.push(u),!Wte({target:d,destination:t,viewport:s,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const m=qte(u,o,a),p={draggableId:u,shouldAnimate:m};return l.visible[u]=p,l},{all:[],visible:{},invisible:{}})}function Kte(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function QS({insideDestination:e,inHomeList:t,displacedBy:r,destination:s}){const a=Kte(e,{inHomeList:t});return{displaced:vu,displacedBy:r,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Tm({draggable:e,insideDestination:t,destination:r,viewport:s,displacedBy:a,last:o,index:i,forceShouldAnimate:l}){const c=Ic(e,r);if(i==null)return QS({insideDestination:t,inHomeList:c,displacedBy:a,destination:r});const d=t.find(w=>w.descriptor.index===i);if(!d)return QS({insideDestination:t,inHomeList:c,displacedBy:a,destination:r});const u=og(e,t),f=t.indexOf(d),m=u.slice(f);return{displaced:yu({afterDragging:m,destination:r,displacedBy:a,last:o,viewport:s.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function ko(e,t){return!!t.effected[e]}var Yte=({isMovingForward:e,destination:t,draggables:r,combine:s,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const o=s.draggableId,l=r[o].descriptor.index;return ko(o,a)?e?l:l-1:e?l+1:l},Xte=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:s})=>{if(!r.length)return null;const a=s.index,o=e?a+1:a-1,i=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return o<i||o>c?null:o},Jte=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:s,destination:a,insideDestination:o,previousImpact:i,viewport:l,afterCritical:c})=>{const d=i.at;if(d||ve(),d.type==="REORDER"){const f=Xte({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:o});return f==null?null:Tm({draggable:r,insideDestination:o,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:f})}const u=Yte({isMovingForward:e,destination:a,displaced:i.displaced,draggables:s,combine:d.combine,afterCritical:c});return u==null?null:Tm({draggable:r,insideDestination:o,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:u})},Qte=({displaced:e,afterCritical:t,combineWith:r,displacedBy:s})=>{const a=!!(e.visible[r]||e.invisible[r]);return ko(r,t)?a?hr:Ac(s.point):a?s.point:hr},Zte=({afterCritical:e,impact:t,draggables:r})=>{const s=ag(t);s||ve();const a=s.draggableId,o=r[a].page.borderBox.center,i=Qte({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return vr(o,i)};const Y4=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,ere=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Kb=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,ZS=({axis:e,moveRelativeTo:t,isMoving:r})=>Mi(e.line,t.marginBox[e.end]+Y4(e,r),Kb(e,t.marginBox,r)),e_=({axis:e,moveRelativeTo:t,isMoving:r})=>Mi(e.line,t.marginBox[e.start]-ere(e,r),Kb(e,t.marginBox,r)),tre=({axis:e,moveInto:t,isMoving:r})=>Mi(e.line,t.contentBox[e.start]+Y4(e,r),Kb(e,t.contentBox,r));var rre=({impact:e,draggable:t,draggables:r,droppable:s,afterCritical:a})=>{const o=Mc(s.descriptor.id,r),i=t.page,l=s.axis;if(!o.length)return tre({axis:l,moveInto:s.page,isMoving:i});const{displaced:c,displacedBy:d}=e,u=c.all[0];if(u){const m=r[u];if(ko(u,a))return e_({axis:l,moveRelativeTo:m.page,isMoving:i});const p=_m(m.page,d.point);return e_({axis:l,moveRelativeTo:p,isMoving:i})}const f=o[o.length-1];if(f.descriptor.id===t.descriptor.id)return i.borderBox.center;if(ko(f.descriptor.id,a)){const m=_m(f.page,Ac(a.displacedBy.point));return ZS({axis:l,moveRelativeTo:m,isMoving:i})}return ZS({axis:l,moveRelativeTo:f.page,isMoving:i})},$y=(e,t)=>{const r=e.frame;return r?vr(t,r.scroll.diff.displacement):t};const nre=({impact:e,draggable:t,droppable:r,draggables:s,afterCritical:a})=>{const o=t.page.borderBox.center,i=e.at;return!r||!i?o:i.type==="REORDER"?rre({impact:e,draggable:t,draggables:s,droppable:r,afterCritical:a}):Zte({impact:e,draggables:s,afterCritical:a})};var ig=e=>{const t=nre(e),r=e.droppable;return r?$y(r,t):t},X4=(e,t)=>{const r=pn(t,e.scroll.initial),s=Ac(r);return{frame:cs({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}}};function t_(e,t){return e.map(r=>t[r])}function sre(e,t){for(let r=0;r<t.length;r++){const s=t[r].visible[e];if(s)return s}return null}var are=({impact:e,viewport:t,destination:r,draggables:s,maxScrollChange:a})=>{const o=X4(t,vr(t.scroll.current,a)),i=r.frame?Wb(r,vr(r.frame.scroll.current,a)):r,l=e.displaced,c=yu({afterDragging:t_(l.all,s),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),d=yu({afterDragging:t_(l.all,s),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),u={},f={},m=[l,c,d];return l.all.forEach(w=>{const v=sre(w,m);if(v){f[w]=v;return}u[w]=!0}),{...e,displaced:{all:l.all,invisible:u,visible:f}}},ore=(e,t)=>vr(e.scroll.diff.displacement,t),Yb=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const s=ore(r,e),a=pn(s,t.page.borderBox.center);return vr(t.client.borderBox.center,a)},J4=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:s,withDroppableDisplacement:a,onlyOnMainAxis:o=!1})=>{const i=pn(r,e.page.borderBox.center),c={target:rf(e.page.borderBox,i),destination:t,withDroppableDisplacement:a,viewport:s};return o?Hte(c):K4(c)},ire=({isMovingForward:e,draggable:t,destination:r,draggables:s,previousImpact:a,viewport:o,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const d=Mc(r.descriptor.id,s),u=Ic(t,r),f=Lte({isMovingForward:e,draggable:t,destination:r,insideDestination:d,previousImpact:a})||Jte({isMovingForward:e,isInHomeList:u,draggable:t,draggables:s,destination:r,insideDestination:d,previousImpact:a,viewport:o,afterCritical:c});if(!f)return null;const m=ig({impact:f,draggable:t,droppable:r,draggables:s,afterCritical:c});if(J4({draggable:t,destination:r,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Yb({pageBorderBoxCenter:m,draggable:t,viewport:o}),impact:f,scrollJumpRequest:null};const w=pn(m,i),v=are({impact:f,viewport:o,destination:r,draggables:s,maxScrollChange:w});return{clientSelection:l,impact:v,scrollJumpRequest:w}};const Rr=e=>{const t=e.subject.active;return t||ve(),t};var lre=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:s,viewport:a})=>{const o=r.subject.active;if(!o)return null;const i=r.axis,l=Un(o[i.start],o[i.end]),c=sg(s).filter(u=>u!==r).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>q4(a.frame)(Rr(u))).filter(u=>{const f=Rr(u);return e?o[i.crossAxisEnd]<f[i.crossAxisEnd]:f[i.crossAxisStart]<o[i.crossAxisStart]}).filter(u=>{const f=Rr(u),m=Un(f[i.start],f[i.end]);return l(f[i.start])||l(f[i.end])||m(o[i.start])||m(o[i.end])}).sort((u,f)=>{const m=Rr(u)[i.crossAxisStart],p=Rr(f)[i.crossAxisStart];return e?m-p:p-m}).filter((u,f,m)=>Rr(u)[i.crossAxisStart]===Rr(m[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const d=c.filter(u=>Un(Rr(u)[i.start],Rr(u)[i.end])(t[i.line]));return d.length===1?d[0]:d.length>1?d.sort((u,f)=>Rr(u)[i.start]-Rr(f)[i.start])[0]:c.sort((u,f)=>{const m=XS(t,JS(Rr(u))),p=XS(t,JS(Rr(f)));return m!==p?m-p:Rr(u)[i.start]-Rr(f)[i.start]})[0]};const r_=(e,t)=>{const r=e.page.borderBox.center;return ko(e.descriptor.id,t)?pn(r,t.displacedBy.point):r},cre=(e,t)=>{const r=e.page.borderBox;return ko(e.descriptor.id,t)?rf(r,Ac(t.displacedBy.point)):r};var dre=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:s,afterCritical:a})=>s.filter(i=>K4({target:cre(i,a),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=xu(e,$y(r,r_(i,a))),d=xu(e,$y(r,r_(l,a)));return c<d?-1:d<c?1:i.descriptor.index-l.descriptor.index})[0]||null,nf=fr(function(t,r){const s=r[t.line];return{value:s,point:Mi(t.line,s)}});const ure=(e,t,r)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return Mi(s.line,t[s.line]);const a=e.subject.page.contentBox[s.size],c=Mc(e.descriptor.id,r).reduce((d,u)=>d+u.client.marginBox[s.size],0)+t[s.line]-a;return c<=0?null:Mi(s.line,c)},Q4=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),Z4=(e,t,r)=>{const s=e.frame;Ic(t,e)&&ve(),e.subject.withPlaceholder&&ve();const a=nf(e.axis,t.displaceBy).point,o=ure(e,a,r),i={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const u=dc({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:u}}const l=o?vr(s.scroll.max,o):s.scroll.max,c=Q4(s,l),d=dc({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:d,frame:c}},fre=e=>{const t=e.subject.withPlaceholder;t||ve();const r=e.frame;if(!r){const i=dc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const s=t.oldFrameMaxScroll;s||ve();const a=Q4(r,s),o=dc({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:o,frame:a}};var hre=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:s,draggables:a,destination:o,viewport:i,afterCritical:l})=>{if(!t){if(r.length)return null;const f={displaced:vu,displacedBy:H4,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},m=ig({impact:f,draggable:s,droppable:o,draggables:a,afterCritical:l}),p=Ic(s,o)?o:Z4(o,s,a);return J4({draggable:s,destination:p,newPageBorderBoxCenter:m,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const c=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],d=(()=>{const f=t.descriptor.index;return t.descriptor.id===s.descriptor.id||c?f:f+1})(),u=nf(o.axis,s.displaceBy);return Tm({draggable:s,insideDestination:r,destination:o,viewport:i,displacedBy:u,last:vu,index:d})},mre=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:s,draggables:a,droppables:o,viewport:i,afterCritical:l})=>{const c=lre({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:o,viewport:i});if(!c)return null;const d=Mc(c.descriptor.id,a),u=dre({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:d,afterCritical:l}),f=hre({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:a,moveRelativeTo:u,insideDestination:d,viewport:i,afterCritical:l});if(!f)return null;const m=ig({impact:f,draggable:r,droppable:c,draggables:a,afterCritical:l});return{clientSelection:Yb({pageBorderBoxCenter:m,draggable:r,viewport:i}),impact:f,scrollJumpRequest:null}},vn=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const pre=(e,t)=>{const r=vn(e);return r?t[r]:null};var gre=({state:e,type:t})=>{const r=pre(e.impact,e.dimensions.droppables),s=!!r,a=e.dimensions.droppables[e.critical.droppable.id],o=r||a,i=o.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!s)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:f,droppables:m}=e.dimensions;return l?ire({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:o,draggables:f,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):mre({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:o,draggables:f,droppables:m,viewport:e.viewport,afterCritical:e.afterCritical})};function ei(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function eI(e){const t=Un(e.top,e.bottom),r=Un(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function xre(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function vre({pageBorderBox:e,draggable:t,candidates:r}){const s=t.page.borderBox.center,a=r.map(o=>{const i=o.axis,l=Mi(o.axis.line,e.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:xu(s,l)}}).sort((o,i)=>i.distance-o.distance);return a[0]?a[0].id:null}function yre({pageBorderBox:e,draggable:t,droppables:r}){const s=sg(r).filter(a=>{if(!a.isEnabled)return!1;const o=a.subject.active;if(!o||!xre(e,o))return!1;if(eI(o)(e.center))return!0;const i=a.axis,l=o.center[i.crossAxisLine],c=e[i.crossAxisStart],d=e[i.crossAxisEnd],u=Un(o[i.crossAxisStart],o[i.crossAxisEnd]),f=u(c),m=u(d);return!f&&!m?!0:f?c<l:d>l});return s.length?s.length===1?s[0].descriptor.id:vre({pageBorderBox:e,draggable:t,candidates:s}):null}const tI=(e,t)=>cs(rf(e,t));var wre=(e,t)=>{const r=e.frame;return r?tI(t,r.scroll.diff.value):t};function rI({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function bre({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var jre=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:s,last:a,viewport:o,afterCritical:i})=>{const l=r.axis,c=nf(r.axis,t.displaceBy),d=c.value,u=e[l.start],f=e[l.end],p=og(t,s).find(v=>{const x=v.descriptor.id,g=v.page.borderBox.center[l.line],y=ko(x,i),b=rI({displaced:a,id:x});return y?b?f<=g:u<g-d:b?f<=g+d:u<g})||null,w=bre({draggable:t,closest:p,inHomeList:Ic(t,r)});return Tm({draggable:t,insideDestination:s,destination:r,viewport:o,last:a,displacedBy:c,index:w})};const Nre=4;var Sre=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:s,insideDestination:a,afterCritical:o})=>{if(!s.isCombineEnabled)return null;const i=s.axis,l=nf(s.axis,e.displaceBy),c=l.value,d=t[i.start],u=t[i.end],m=og(e,a).find(w=>{const v=w.descriptor.id,x=w.page.borderBox,y=x[i.size]/Nre,b=ko(v,o),j=rI({displaced:r.displaced,id:v});return b?j?u>x[i.start]+y&&u<x[i.end]-y:d>x[i.start]-c+y&&d<x[i.end]-c-y:j?u>x[i.start]+c+y&&u<x[i.end]+c-y:d>x[i.start]+y&&d<x[i.end]-y});return m?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:s.descriptor.id}}}:null},nI=({pageOffset:e,draggable:t,draggables:r,droppables:s,previousImpact:a,viewport:o,afterCritical:i})=>{const l=tI(t.page.borderBox,e),c=yre({pageBorderBox:l,draggable:t,droppables:s});if(!c)return $te;const d=s[c],u=Mc(d.descriptor.id,r),f=wre(d,l);return Sre({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:a,destination:d,insideDestination:u,afterCritical:i})||jre({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:d,insideDestination:u,last:a.displaced,viewport:o,afterCritical:i})},Xb=(e,t)=>({...e,[t.descriptor.id]:t});const _re=({previousImpact:e,impact:t,droppables:r})=>{const s=vn(e),a=vn(t);if(!s||s===a)return r;const o=r[s];if(!o.subject.withPlaceholder)return r;const i=fre(o);return Xb(r,i)};var Cre=({draggable:e,draggables:t,droppables:r,previousImpact:s,impact:a})=>{const o=_re({previousImpact:s,impact:a,droppables:r}),i=vn(a);if(!i)return o;const l=r[i];if(Ic(e,l)||l.subject.withPlaceholder)return o;const c=Z4(l,e,t);return Xb(o,c)},Md=({state:e,clientSelection:t,dimensions:r,viewport:s,impact:a,scrollJumpRequest:o})=>{const i=s||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,d=pn(c,e.initial.client.selection),u={offset:d,selection:c,borderBoxCenter:vr(e.initial.client.borderBoxCenter,d)},f={selection:vr(u.selection,i.scroll.current),borderBoxCenter:vr(u.borderBoxCenter,i.scroll.current),offset:vr(u.offset,i.scroll.diff.value)},m={client:u,page:f};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:m};const p=l.draggables[e.critical.draggable.id],w=a||nI({pageOffset:f.offset,draggable:p,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),v=Cre({draggable:p,impact:w,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:m,dimensions:{draggables:l.draggables,droppables:v},impact:w,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function Ere(e,t){return e.map(r=>t[r])}var sI=({impact:e,viewport:t,draggables:r,destination:s,forceShouldAnimate:a})=>{const o=e.displaced,i=Ere(o.all,r),l=yu({afterDragging:i,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:o});return{...e,displaced:l}},aI=({impact:e,draggable:t,droppable:r,draggables:s,viewport:a,afterCritical:o})=>{const i=ig({impact:e,draggable:t,draggables:s,droppable:r,afterCritical:o});return Yb({pageBorderBoxCenter:i,draggable:t,viewport:a})},oI=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&ve();const s=e.impact,a=r||e.viewport,o=t||e.dimensions,{draggables:i,droppables:l}=o,c=i[e.critical.draggable.id],d=vn(s);d||ve();const u=l[d],f=sI({impact:s,viewport:a,destination:u,draggables:i}),m=aI({impact:f,draggable:c,droppable:u,draggables:i,viewport:a,afterCritical:e.afterCritical});return Md({impact:f,clientSelection:m,state:e,dimensions:o,viewport:a})},kre=e=>({index:e.index,droppableId:e.droppableId}),iI=({draggable:e,home:t,draggables:r,viewport:s})=>{const a=nf(t.axis,e.displaceBy),o=Mc(t.descriptor.id,r),i=o.indexOf(e);i===-1&&ve();const l=o.slice(i+1),c=l.reduce((m,p)=>(m[p.descriptor.id]=!0,m),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:c};return{impact:{displaced:yu({afterDragging:l,destination:t,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:kre(e.descriptor)}},afterCritical:d}},Dre=(e,t)=>({draggables:e.draggables,droppables:Xb(e.droppables,t)}),Tre=({draggable:e,offset:t,initialWindowScroll:r})=>{const s=_m(e.client,t),a=Cm(s,r);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:a}},Pre=e=>{const t=e.frame;return t||ve(),t},Rre=({additions:e,updatedDroppables:t,viewport:r})=>{const s=r.scroll.diff.value;return e.map(a=>{const o=a.descriptor.droppableId,i=t[o],c=Pre(i).scroll.diff.value,d=vr(s,c);return Tre({draggable:a,offset:d,initialWindowScroll:r.scroll.initial})})},Are=({state:e,published:t})=>{const r=t.modified.map(g=>{const y=e.dimensions.droppables[g.droppableId];return Wb(y,g.scroll)}),s={...e.dimensions.droppables,...V4(r)},a=W4(Rre({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),o={...e.dimensions.draggables,...a};t.removals.forEach(g=>{delete o[g]});const i={droppables:s,draggables:o},l=vn(e.impact),c=l?i.droppables[l]:null,d=i.draggables[e.critical.draggable.id],u=i.droppables[e.critical.droppable.id],{impact:f,afterCritical:m}=iI({draggable:d,home:u,draggables:o,viewport:e.viewport}),p=c&&c.isCombineEnabled?e.impact:f,w=nI({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:p,viewport:e.viewport,afterCritical:m}),v={...e,phase:"DRAGGING",impact:w,onLiftImpact:f,dimensions:i,afterCritical:m,forceShouldAnimate:!1};return e.phase==="COLLECTING"?v:{...v,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Fy=e=>e.movementMode==="SNAP",$x=(e,t,r)=>{const s=Dre(e.dimensions,t);return!Fy(e)||r?Md({state:e,dimensions:s}):oI({state:e,dimensions:s})};function Fx(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const n_={phase:"IDLE",completed:null,shouldFlush:!1};var Mre=(e=n_,t)=>{if(t.type==="FLUSH")return{...n_,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ve();const{critical:r,clientSelection:s,viewport:a,dimensions:o,movementMode:i}=t.payload,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],d={selection:s,borderBoxCenter:l.client.borderBox.center,offset:hr},u={client:d,page:{selection:vr(d.selection,a.scroll.initial),borderBoxCenter:vr(d.selection,a.scroll.initial),offset:vr(d.selection,a.scroll.diff.value)}},f=sg(o.droppables).every(v=>!v.isFixedOnPage),{impact:m,afterCritical:p}=iI({draggable:l,home:c,draggables:o.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:o,initial:u,current:u,isWindowScrollAllowed:f,impact:m,afterCritical:p,onLiftImpact:m,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ve(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ve(),Are({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ei(e)||ve();const{client:r}=t.payload;return jo(r,e.current.client.selection)?e:Md({state:e,clientSelection:r,impact:Fy(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Fx(e);ei(e)||ve();const{id:r,newScroll:s}=t.payload,a=e.dimensions.droppables[r];if(!a)return e;const o=Wb(a,s);return $x(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ei(e)||ve();const{id:r,isEnabled:s}=t.payload,a=e.dimensions.droppables[r];a||ve(),a.isEnabled===s&&ve();const o={...a,isEnabled:s};return $x(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ei(e)||ve();const{id:r,isCombineEnabled:s}=t.payload,a=e.dimensions.droppables[r];a||ve(),a.isCombineEnabled===s&&ve();const o={...a,isCombineEnabled:s};return $x(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ei(e)||ve(),e.isWindowScrollAllowed||ve();const r=t.payload.newScroll;if(jo(e.viewport.scroll.current,r))return Fx(e);const s=X4(e.viewport,r);return Fy(e)?oI({state:e,viewport:s}):Md({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ei(e))return e;const r=t.payload.maxScroll;if(jo(r,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ve();const r=gre({state:e,type:t.type});return r?Md({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&ve(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:s,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ve(),{phase:"DROP_ANIMATING",completed:r,dropDuration:s,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function st(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Ire=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Ore=e=>({type:"LIFT",payload:e}),Lre=e=>({type:"INITIAL_PUBLISH",payload:e}),$re=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Fre=()=>({type:"COLLECTION_STARTING",payload:null}),zre=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Bre=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Ure=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),lI=e=>({type:"MOVE",payload:e}),Vre=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Wre=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Hre=()=>({type:"MOVE_UP",payload:null}),qre=()=>({type:"MOVE_DOWN",payload:null}),Gre=()=>({type:"MOVE_RIGHT",payload:null}),Kre=()=>({type:"MOVE_LEFT",payload:null}),Jb=()=>({type:"FLUSH",payload:null}),Yre=e=>({type:"DROP_ANIMATE",payload:e}),Qb=e=>({type:"DROP_COMPLETE",payload:e}),cI=e=>({type:"DROP",payload:e}),Xre=e=>({type:"DROP_PENDING",payload:e}),dI=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Jre=e=>({getState:t,dispatch:r})=>s=>a=>{if(!st(a,"LIFT")){s(a);return}const{id:o,clientSelection:i,movementMode:l}=a.payload,c=t();c.phase==="DROP_ANIMATING"&&r(Qb({completed:c.completed})),t().phase!=="IDLE"&&ve(),r(Jb()),r(Ire({draggableId:o,movementMode:l}));const u={draggableId:o,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:f,dimensions:m,viewport:p}=e.startPublishing(u);r(Lre({critical:f,dimensions:m,clientSelection:i,movementMode:l,viewport:p}))},Qre=e=>()=>t=>r=>{st(r,"INITIAL_PUBLISH")&&e.dragging(),st(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(st(r,"FLUSH")||st(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const Zb={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},wu={opacity:{drop:0,combining:.7},scale:{drop:.75}},uI={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Yo=`${uI.outOfTheWay}s ${Zb.outOfTheWay}`,Id={fluid:`opacity ${Yo}`,snap:`transform ${Yo}, opacity ${Yo}`,drop:e=>{const t=`${e}s ${Zb.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Yo}`,placeholder:`height ${Yo}, width ${Yo}, margin ${Yo}`},s_=e=>jo(e,hr)?void 0:`translate(${e.x}px, ${e.y}px)`,zy={moveTo:s_,drop:(e,t)=>{const r=s_(e);if(r)return t?`${r} scale(${wu.scale.drop})`:r}},{minDropTime:By,maxDropTime:fI}=uI,Zre=fI-By,a_=1500,ene=.6;var tne=({current:e,destination:t,reason:r})=>{const s=xu(e,t);if(s<=0)return By;if(s>=a_)return fI;const a=s/a_,o=By+Zre*a,i=r==="CANCEL"?o*ene:o;return Number(i.toFixed(2))},rne=({impact:e,draggable:t,dimensions:r,viewport:s,afterCritical:a})=>{const{draggables:o,droppables:i}=r,l=vn(e),c=l?i[l]:null,d=i[t.descriptor.droppableId],u=aI({impact:e,draggable:t,draggables:o,afterCritical:a,droppable:c||d,viewport:s});return pn(u,t.client.borderBox.center)},nne=({draggables:e,reason:t,lastImpact:r,home:s,viewport:a,onLiftImpact:o})=>!r.at||t!=="DROP"?{impact:sI({draggables:e,impact:o,destination:s,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:vu},didDropInsideDroppable:!0};const sne=({getState:e,dispatch:t})=>r=>s=>{if(!st(s,"DROP")){r(s);return}const a=e(),o=s.payload.reason;if(a.phase==="COLLECTING"){t(Xre({reason:o}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&ve(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||ve();const l=a.critical,c=a.dimensions,d=c.draggables[a.critical.draggable.id],{impact:u,didDropInsideDroppable:f}=nne({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),m=f?Hb(u):null,p=f?ag(u):null,w={index:l.draggable.index,droppableId:l.droppable.id},v={draggableId:d.descriptor.id,type:d.descriptor.type,source:w,reason:o,mode:a.movementMode,destination:m,combine:p},x=rne({impact:u,draggable:d,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),g={critical:a.critical,afterCritical:a.afterCritical,result:v,impact:u};if(!(!jo(a.current.client.offset,x)||!!v.combine)){t(Qb({completed:g}));return}const b=tne({current:a.current.client.offset,destination:x,reason:o});t(Yre({newHomeClientOffset:x,dropDuration:b,completed:g}))};var hI=()=>({x:window.pageXOffset,y:window.pageYOffset});function ane(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function one({onWindowScroll:e}){function t(){e(hI())}const r=gu(t),s=ane(r);let a=bo;function o(){return a!==bo}function i(){o()&&ve(),a=$n(window,[s])}function l(){o()||ve(),r.cancel(),a(),a=bo}return{start:i,stop:l,isActive:o}}const ine=e=>st(e,"DROP_COMPLETE")||st(e,"DROP_ANIMATE")||st(e,"FLUSH"),lne=e=>{const t=one({onWindowScroll:r=>{e.dispatch(Vre({newScroll:r}))}});return r=>s=>{!t.isActive()&&st(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&ine(s)&&t.stop(),r(s)}};var cne=e=>{let t=!1,r=!1;const s=setTimeout(()=>{r=!0}),a=o=>{t||r||(t=!0,e(o),clearTimeout(s))};return a.wasCalled=()=>t,a},dne=()=>{const e=[],t=a=>{const o=e.findIndex(l=>l.timerId===a);o===-1&&ve();const[i]=e.splice(o,1);i.callback()};return{add:a=>{const o=setTimeout(()=>t(o)),i={timerId:o,callback:a};e.push(i)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const une=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,fne=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,hne=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&s},nd=(e,t)=>{t()},Hf=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function zx(e,t,r,s){if(!e){r(s(t));return}const a=cne(r);e(t,{announce:a}),a.wasCalled()||r(s(t))}var mne=(e,t)=>{const r=dne();let s=null;const a=(f,m)=>{s&&ve(),nd("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:f,mode:m})})},o=(f,m)=>{s&&ve(),nd("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(Hf(f,m))})},i=(f,m)=>{s&&ve();const p=Hf(f,m);s={mode:m,lastCritical:f,lastLocation:p.source,lastCombine:null},r.add(()=>{nd("onDragStart",()=>zx(e().onDragStart,p,t,vh.onDragStart))})},l=(f,m)=>{const p=Hb(m),w=ag(m);s||ve();const v=!hne(f,s.lastCritical);v&&(s.lastCritical=f);const x=!une(s.lastLocation,p);x&&(s.lastLocation=p);const g=!fne(s.lastCombine,w);if(g&&(s.lastCombine=w),!v&&!x&&!g)return;const y={...Hf(f,s.mode),combine:w,destination:p};r.add(()=>{nd("onDragUpdate",()=>zx(e().onDragUpdate,y,t,vh.onDragUpdate))})},c=()=>{s||ve(),r.flush()},d=f=>{s||ve(),s=null,nd("onDragEnd",()=>zx(e().onDragEnd,f,t,vh.onDragEnd))};return{beforeCapture:a,beforeStart:o,start:i,update:l,flush:c,drop:d,abort:()=>{if(!s)return;const f={...Hf(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};d(f)}}},pne=(e,t)=>{const r=mne(e,t);return s=>a=>o=>{if(st(o,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(st(o,"INITIAL_PUBLISH")){const l=o.payload.critical;r.beforeStart(l,o.payload.movementMode),a(o),r.start(l,o.payload.movementMode);return}if(st(o,"DROP_COMPLETE")){const l=o.payload.completed.result;r.flush(),a(o),r.drop(l);return}if(a(o),st(o,"FLUSH")){r.abort();return}const i=s.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const gne=e=>t=>r=>{if(!st(r,"DROP_ANIMATION_FINISHED")){t(r);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&ve(),e.dispatch(Qb({completed:s.completed}))},xne=e=>{let t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return a=>o=>{if((st(o,"FLUSH")||st(o,"DROP_COMPLETE")||st(o,"DROP_ANIMATION_FINISHED"))&&s(),a(o),!st(o,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(dI())}};r=requestAnimationFrame(()=>{r=null,t=$n(window,[i])})}};var vne=e=>()=>t=>r=>{(st(r,"DROP_COMPLETE")||st(r,"FLUSH")||st(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},yne=e=>{let t=!1;return()=>r=>s=>{if(st(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(st(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(st(s,"DROP_COMPLETE")){t=!1;const a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const wne=e=>st(e,"DROP_COMPLETE")||st(e,"DROP_ANIMATE")||st(e,"FLUSH");var bne=e=>t=>r=>s=>{if(wne(s)){e.stop(),r(s);return}if(st(s,"INITIAL_PUBLISH")){r(s);const a=t.getState();a.phase!=="DRAGGING"&&ve(),e.start(a);return}r(s),e.scroll(t.getState())};const jne=e=>t=>r=>{if(t(r),!st(r,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(cI({reason:s.reason})))},Nne=D4;var Sne=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:s,announce:a,autoScroller:o})=>k4(Mre,Nne(xee(Qre(r),vne(e),Jre(e),sne,gne,xne,jne,bne(o),lne,yne(t),pne(s,a))));const Bx=()=>({additions:{},removals:{},modified:{}});function _ne({registry:e,callbacks:t}){let r=Bx(),s=null;const a=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:c,removals:d,modified:u}=r,f=Object.keys(c).map(w=>e.draggable.getById(w).getDimension(hr)).sort((w,v)=>w.descriptor.index-v.descriptor.index),m=Object.keys(u).map(w=>{const x=e.droppable.getById(w).callbacks.getScrollWhileDragging();return{droppableId:w,scroll:x}}),p={additions:f,removals:Object.keys(d),modified:m};r=Bx(),t.publish(p)}))};return{add:c=>{const d=c.descriptor.id;r.additions[d]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[d]&&delete r.removals[d],a()},remove:c=>{const d=c.descriptor;r.removals[d.id]=!0,r.modified[d.droppableId]=!0,r.additions[d.id]&&delete r.additions[d.id],a()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,r=Bx())}}}var mI=({scrollHeight:e,scrollWidth:t,height:r,width:s})=>{const a=pn({x:t,y:e},{x:s,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},pI=()=>{const e=document.documentElement;return e||ve(),e},gI=()=>{const e=pI();return mI({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Cne=()=>{const e=hI(),t=gI(),r=e.y,s=e.x,a=pI(),o=a.clientWidth,i=a.clientHeight,l=s+o,c=r+i;return{frame:cs({top:r,left:s,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:hr,displacement:hr}}}},Ene=({critical:e,scrollOptions:t,registry:r})=>{const s=Cne(),a=s.scroll.current,o=e.droppable,i=r.droppable.getAllByType(o.type).map(u=>u.callbacks.getDimensionAndWatchScroll(a,t)),l=r.draggable.getAllByType(e.draggable.type).map(u=>u.getDimension(a));return{dimensions:{draggables:W4(l),droppables:V4(i)},critical:e,viewport:s}};function o_(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var kne=(e,t)=>{let r=null;const s=_ne({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(m,p)=>{e.droppable.exists(m)||ve(),r&&t.updateDroppableIsEnabled({id:m,isEnabled:p})},o=(m,p)=>{r&&(e.droppable.exists(m)||ve(),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:p}))},i=(m,p)=>{r&&(e.droppable.exists(m)||ve(),t.updateDroppableScroll({id:m,newScroll:p}))},l=(m,p)=>{r&&e.droppable.getById(m).callbacks.scroll(p)},c=()=>{if(!r)return;s.stop();const m=r.critical.droppable;e.droppable.getAllByType(m.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},d=m=>{r||ve();const p=r.critical.draggable;m.type==="ADDITION"&&o_(e,p,m.value)&&s.add(m.value),m.type==="REMOVAL"&&o_(e,p,m.value)&&s.remove(m.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:i,startPublishing:m=>{r&&ve();const p=e.draggable.getById(m.draggableId),w=e.droppable.getById(p.descriptor.droppableId),v={draggable:p.descriptor,droppable:w.descriptor},x=e.subscribe(d);return r={critical:v,unsubscribe:x},Ene({critical:v,registry:e,scrollOptions:m.scrollOptions})},stopPublishing:c}},xI=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Dne=e=>{window.scrollBy(e.x,e.y)};const Tne=fr(e=>sg(e).filter(t=>!(!t.isEnabled||!t.frame))),Pne=(e,t)=>Tne(t).find(s=>(s.frame||ve(),eI(s.frame.pageMarginBox)(e)))||null;var Rne=({center:e,destination:t,droppables:r})=>{if(t){const a=r[t];return a.frame?a:null}return Pne(e,r)};const bu={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Ane=(e,t,r=()=>bu)=>{const s=r(),a=e[t.size]*s.startFromPercentage,o=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:o}},vI=({startOfRange:e,endOfRange:t,current:r})=>{const s=t-e;return s===0?0:(r-e)/s},ej=1,Mne=(e,t,r=()=>bu)=>{const s=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return ej;const o=1-vI({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=s.maxPixelScroll*s.ease(o);return Math.ceil(i)},Ine=(e,t,r)=>{const s=r(),a=s.durationDampening.accelerateAt,o=s.durationDampening.stopDampeningAt,i=t,l=o,d=Date.now()-i;if(d>=o)return e;if(d<a)return ej;const u=vI({startOfRange:a,endOfRange:l,current:d}),f=e*s.ease(u);return Math.ceil(f)},i_=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const o=Mne(e,t,a);return o===0?0:s?Math.max(Ine(o,r,a),ej):o},l_=({container:e,distanceToEdges:t,dragStartTime:r,axis:s,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=Ane(e,s,o);return t[s.end]<t[s.start]?i_({distanceToEdge:t[s.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o}):-1*i_({distanceToEdge:t[s.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o})},One=({container:e,subject:t,proposedScroll:r})=>{const s=t.height>e.height,a=t.width>e.width;return!a&&!s?r:a&&s?null:{x:a?0:r.x,y:s?0:r.y}};const Lne=U4(e=>e===0?0:e);var yI=({dragStartTime:e,container:t,subject:r,center:s,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},l=l_({container:t,distanceToEdges:i,dragStartTime:e,axis:qb,shouldUseTimeDampening:a,getAutoScrollerOptions:o}),c=l_({container:t,distanceToEdges:i,dragStartTime:e,axis:G4,shouldUseTimeDampening:a,getAutoScrollerOptions:o}),d=Lne({x:c,y:l});if(jo(d,hr))return null;const u=One({container:t,subject:r,proposedScroll:d});return u?jo(u,hr)?null:u:null};const $ne=U4(e=>e===0?0:e>0?1:-1),tj=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:s})=>{const a=vr(t,s),o={x:e(a.x,r.x),y:e(a.y,r.y)};return jo(o,hr)?null:o}})(),wI=({max:e,current:t,change:r})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=$ne(r),o=tj({max:s,current:t,change:a});return!o||a.x!==0&&o.x===0||a.y!==0&&o.y===0},rj=(e,t)=>wI({current:e.scroll.current,max:e.scroll.max,change:t}),Fne=(e,t)=>{if(!rj(e,t))return null;const r=e.scroll.max,s=e.scroll.current;return tj({current:s,max:r,change:t})},nj=(e,t)=>{const r=e.frame;return r?wI({current:r.scroll.current,max:r.scroll.max,change:t}):!1},zne=(e,t)=>{const r=e.frame;return!r||!nj(e,t)?null:tj({current:r.scroll.current,max:r.scroll.max,change:t})};var Bne=({viewport:e,subject:t,center:r,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=yI({dragStartTime:s,container:e.frame,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o});return i&&rj(e,i)?i:null},Une=({droppable:e,subject:t,center:r,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=e.frame;if(!i)return null;const l=yI({dragStartTime:s,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o});return l&&nj(e,l)?l:null},c_=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:s,scrollDroppable:a,getAutoScrollerOptions:o})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const f=e.viewport,m=Bne({dragStartTime:t,viewport:f,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(m){s(m);return}}const d=Rne({center:i,destination:vn(e.impact),droppables:e.dimensions.droppables});if(!d)return;const u=Une({dragStartTime:t,droppable:d,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});u&&a(d.descriptor.id,u)},Vne=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>bu})=>{const s=gu(e),a=gu(t);let o=null;const i=d=>{o||ve();const{shouldUseTimeDampening:u,dragStartTime:f}=o;c_({state:d,scrollWindow:s,scrollDroppable:a,dragStartTime:f,shouldUseTimeDampening:u,getAutoScrollerOptions:r})};return{start:d=>{o&&ve();const u=Date.now();let f=!1;const m=()=>{f=!0};c_({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m,getAutoScrollerOptions:r}),o={dragStartTime:u,shouldUseTimeDampening:f},f&&i(d)},stop:()=>{o&&(s.cancel(),a.cancel(),o=null)},scroll:i}},Wne=({move:e,scrollDroppable:t,scrollWindow:r})=>{const s=(l,c)=>{const d=vr(l.current.client.selection,c);e({client:d})},a=(l,c)=>{if(!nj(l,c))return c;const d=zne(l,c);if(!d)return t(l.descriptor.id,c),null;const u=pn(c,d);return t(l.descriptor.id,u),pn(c,u)},o=(l,c,d)=>{if(!l||!rj(c,d))return d;const u=Fne(c,d);if(!u)return r(d),null;const f=pn(d,u);return r(f),pn(d,f)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const d=vn(l.impact);d||ve();const u=a(l.dimensions.droppables[d],c);if(!u)return;const f=l.viewport,m=o(l.isWindowScrollAllowed,f,u);m&&s(l,m)}},Hne=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:s})=>{const a=Vne({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),o=Wne({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(s().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){a.scroll(c);return}c.scrollJumpRequest&&o(c)}},start:a.start,stop:a.stop}};const uc="data-rfd",fc=(()=>{const e=`${uc}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Uy=(()=>{const e=`${uc}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),qne=(()=>{const e=`${uc}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),d_={contextId:`${uc}-scroll-container-context-id`},Gne=e=>t=>`[${t}="${e}"]`,sd=(e,t)=>e.map(r=>{const s=r.styles[t];return s?`${r.selector} { ${s} }`:""}).join(" "),Kne="pointer-events: none;";var Yne=e=>{const t=Gne(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(fc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Kne,dropAnimating:l}}})(),s=(()=>{const l=`
      transition: ${Id.outOfTheWay};
    `;return{selector:t(Uy.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),a={selector:t(qne.contextId),styles:{always:"overflow-anchor: none;"}},i=[s,r,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:sd(i,"always"),resting:sd(i,"resting"),dragging:sd(i,"dragging"),dropAnimating:sd(i,"dropAnimating"),userCancel:sd(i,"userCancel")}};const yn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?h.useLayoutEffect:h.useEffect,Ux=()=>{const e=document.querySelector("head");return e||ve(),e},u_=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Xne(e,t){const r=Qe(()=>Yne(e),[e]),s=h.useRef(null),a=h.useRef(null),o=ke(fr(f=>{const m=a.current;m||ve(),m.textContent=f}),[]),i=ke(f=>{const m=s.current;m||ve(),m.textContent=f},[]);yn(()=>{!s.current&&!a.current||ve();const f=u_(t),m=u_(t);return s.current=f,a.current=m,f.setAttribute(`${uc}-always`,e),m.setAttribute(`${uc}-dynamic`,e),Ux().appendChild(f),Ux().appendChild(m),i(r.always),o(r.resting),()=>{const p=w=>{const v=w.current;v||ve(),Ux().removeChild(v),w.current=null};p(s),p(a)}},[t,i,o,r.always,r.resting,e]);const l=ke(()=>o(r.dragging),[o,r.dragging]),c=ke(f=>{if(f==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),d=ke(()=>{a.current&&o(r.resting)},[o,r.resting]);return Qe(()=>({dragging:l,dropping:c,resting:d}),[l,c,d])}function bI(e,t){return Array.from(e.querySelectorAll(t))}var jI=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function lg(e){return e instanceof jI(e).HTMLElement}function Jne(e,t){const r=`[${fc.contextId}="${e}"]`,s=bI(document,r);if(!s.length)return null;const a=s.find(o=>o.getAttribute(fc.draggableId)===t);return!a||!lg(a)?null:a}function Qne(e){const t=h.useRef({}),r=h.useRef(null),s=h.useRef(null),a=h.useRef(!1),o=ke(function(m,p){const w={id:m,focus:p};return t.current[m]=w,function(){const x=t.current;x[m]!==w&&delete x[m]}},[]),i=ke(function(m){const p=Jne(e,m);p&&p!==document.activeElement&&p.focus()},[e]),l=ke(function(m,p){r.current===m&&(r.current=p)},[]),c=ke(function(){s.current||a.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const m=r.current;m&&i(m)}))},[i]),d=ke(function(m){r.current=null;const p=document.activeElement;p&&p.getAttribute(fc.draggableId)===m&&(r.current=m)},[]);return yn(()=>(a.current=!0,function(){a.current=!1;const m=s.current;m&&cancelAnimationFrame(m)}),[]),Qe(()=>({register:o,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[o,d,c,l])}function Zne(){const e={draggables:{},droppables:{}},t=[];function r(f){return t.push(f),function(){const p=t.indexOf(f);p!==-1&&t.splice(p,1)}}function s(f){t.length&&t.forEach(m=>m(f))}function a(f){return e.draggables[f]||null}function o(f){const m=a(f);return m||ve(),m}const i={register:f=>{e.draggables[f.descriptor.id]=f,s({type:"ADDITION",value:f})},update:(f,m)=>{const p=e.draggables[m.descriptor.id];p&&p.uniqueId===f.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:f=>{const m=f.descriptor.id,p=a(m);p&&f.uniqueId===p.uniqueId&&(delete e.draggables[m],e.droppables[f.descriptor.droppableId]&&s({type:"REMOVAL",value:f}))},getById:o,findById:a,exists:f=>!!a(f),getAllByType:f=>Object.values(e.draggables).filter(m=>m.descriptor.type===f)};function l(f){return e.droppables[f]||null}function c(f){const m=l(f);return m||ve(),m}const d={register:f=>{e.droppables[f.descriptor.id]=f},unregister:f=>{const m=l(f.descriptor.id);m&&f.uniqueId===m.uniqueId&&delete e.droppables[f.descriptor.id]},getById:c,findById:l,exists:f=>!!l(f),getAllByType:f=>Object.values(e.droppables).filter(m=>m.descriptor.type===f)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:d,subscribe:r,clean:u}}function ese(){const e=Qe(Zne,[]);return h.useEffect(()=>function(){e.clean()},[e]),e}var sj=X.createContext(null),Pm=()=>{const e=document.body;return e||ve(),e};const tse={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},rse=e=>`rfd-announcement-${e}`;function nse(e){const t=Qe(()=>rse(e),[e]),r=h.useRef(null);return h.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Em(o.style,tse),Pm().appendChild(o),function(){setTimeout(function(){const c=Pm();c.contains(o)&&c.removeChild(o),o===r.current&&(r.current=null)})}},[t]),ke(a=>{const o=r.current;if(o){o.textContent=a;return}},[])}const sse={separator:"::"};function aj(e,t=sse){const r=X.useId();return Qe(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function ase({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function ose({contextId:e,text:t}){const r=aj("hidden-text",{separator:"-"}),s=Qe(()=>ase({contextId:e,uniqueId:r}),[r,e]);return h.useEffect(function(){const o=document.createElement("div");return o.id=s,o.textContent=t,o.style.display="none",Pm().appendChild(o),function(){const l=Pm();l.contains(o)&&l.removeChild(o)}},[s,t]),s}var cg=X.createContext(null);function NI(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),t}function ise(){let e=null;function t(){return!!e}function r(i){return i===e}function s(i){e&&ve();const l={abandon:i};return e=l,l}function a(){e||ve(),e=null}function o(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:s,release:a,tryAbandon:o}}function ju(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const lse=9,cse=13,oj=27,SI=32,dse=33,use=34,fse=35,hse=36,mse=37,pse=38,gse=39,xse=40,vse={[cse]:!0,[lse]:!0};var _I=e=>{vse[e.keyCode]&&e.preventDefault()};const dg=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),CI=0,f_=5;function yse(e,t){return Math.abs(t.x-e.x)>=f_||Math.abs(t.y-e.y)>=f_}const h_={type:"IDLE"};function wse({cancel:e,completed:t,getPhase:r,setPhase:s}){return[{eventName:"mousemove",fn:a=>{const{button:o,clientX:i,clientY:l}=a;if(o!==CI)return;const c={x:i,y:l},d=r();if(d.type==="DRAGGING"){a.preventDefault(),d.actions.move(c);return}d.type!=="PENDING"&&ve();const u=d.point;if(!yse(u,c))return;a.preventDefault();const f=d.actions.fluidLift(c);s({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:a=>{const o=r();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{r().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(r().type==="PENDING"){e();return}if(a.keyCode===oj){a.preventDefault(),e();return}_I(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const o=r();if(o.type==="IDLE"&&ve(),o.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:dg,fn:e}]}function bse(e){const t=h.useRef(h_),r=h.useRef(bo),s=Qe(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==CI||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const m=e.findClosestDraggableId(f);if(!m)return;const p=e.tryGetLock(m,i,{sourceEvent:f});if(!p)return;f.preventDefault();const w={x:f.clientX,y:f.clientY};r.current(),d(p,w)}}),[e]),a=Qe(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const f=e.findClosestDraggableId(u);if(!f)return;const m=e.findOptionsForDraggable(f);m&&(m.shouldRespectForcePress||e.canGetLock(f)&&u.preventDefault())}}),[e]),o=ke(function(){const f={passive:!1,capture:!0};r.current=$n(window,[a,s],f)},[a,s]),i=ke(()=>{t.current.type!=="IDLE"&&(t.current=h_,r.current(),o())},[o]),l=ke(()=>{const u=t.current;i(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[i]),c=ke(function(){const f={capture:!0,passive:!1},m=wse({cancel:l,completed:i,getPhase:()=>t.current,setPhase:p=>{t.current=p}});r.current=$n(window,m,f)},[l,i]),d=ke(function(f,m){t.current.type!=="IDLE"&&ve(),t.current={type:"PENDING",point:m,actions:f},c()},[c]);yn(function(){return o(),function(){r.current()}},[o])}function jse(){}const Nse={[use]:!0,[dse]:!0,[hse]:!0,[fse]:!0};function Sse(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===oj){a.preventDefault(),r();return}if(a.keyCode===SI){a.preventDefault(),s();return}if(a.keyCode===xse){a.preventDefault(),e.moveDown();return}if(a.keyCode===pse){a.preventDefault(),e.moveUp();return}if(a.keyCode===gse){a.preventDefault(),e.moveRight();return}if(a.keyCode===mse){a.preventDefault(),e.moveLeft();return}if(Nse[a.keyCode]){a.preventDefault();return}_I(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:dg,fn:r}]}function _se(e){const t=h.useRef(jse),r=Qe(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==SI)return;const i=e.findClosestDraggableId(o);if(!i)return;const l=e.tryGetLock(i,u,{sourceEvent:o});if(!l)return;o.preventDefault();let c=!0;const d=l.snapLift();t.current();function u(){c||ve(),c=!1,t.current(),s()}t.current=$n(window,Sse(d,u),{capture:!0,passive:!1})}}),[e]),s=ke(function(){const o={passive:!1,capture:!0};t.current=$n(window,[r],o)},[r]);yn(function(){return s(),function(){t.current()}},[s])}const Vx={type:"IDLE"},Cse=120,Ese=.15;function kse({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===oj&&r.preventDefault(),e()}},{eventName:dg,fn:e}]}function Dse({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const a=r();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:o,clientY:i}=s.touches[0],l={x:o,y:i};s.preventDefault(),a.actions.move(l)}},{eventName:"touchend",fn:s=>{const a=r();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(r().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const a=r();a.type==="IDLE"&&ve();const o=s.touches[0];if(!o||!(o.force>=Ese))return;const l=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){l&&e();return}if(l){if(a.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:dg,fn:e}]}function Tse(e){const t=h.useRef(Vx),r=h.useRef(bo),s=ke(function(){return t.current},[]),a=ke(function(p){t.current=p},[]),o=Qe(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const w=e.findClosestDraggableId(p);if(!w)return;const v=e.tryGetLock(w,l,{sourceEvent:p});if(!v)return;const x=p.touches[0],{clientX:g,clientY:y}=x,b={x:g,y};r.current(),f(v,b)}}),[e]),i=ke(function(){const p={capture:!0,passive:!1};r.current=$n(window,[o],p)},[o]),l=ke(()=>{const m=t.current;m.type!=="IDLE"&&(m.type==="PENDING"&&clearTimeout(m.longPressTimerId),a(Vx),r.current(),i())},[i,a]),c=ke(()=>{const m=t.current;l(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[l]),d=ke(function(){const p={capture:!0,passive:!1},w={cancel:c,completed:l,getPhase:s},v=$n(window,Dse(w),p),x=$n(window,kse(w),p);r.current=function(){v(),x()}},[c,s,l]),u=ke(function(){const p=s();p.type!=="PENDING"&&ve();const w=p.actions.fluidLift(p.point);a({type:"DRAGGING",actions:w,hasMoved:!1})},[s,a]),f=ke(function(p,w){s().type!=="IDLE"&&ve();const v=setTimeout(u,Cse);a({type:"PENDING",point:w,actions:p,longPressTimerId:v}),d()},[d,s,a,u]);yn(function(){return i(),function(){r.current();const w=s();w.type==="PENDING"&&(clearTimeout(w.longPressTimerId),a(Vx))}},[s,i,a]),yn(function(){return $n(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Pse=["input","button","textarea","select","option","optgroup","video","audio"];function EI(e,t){if(t==null)return!1;if(Pse.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:EI(e,t.parentElement)}function Rse(e,t){const r=t.target;return lg(r)?EI(e,r):!1}var Ase=e=>cs(e.getBoundingClientRect()).center;function Mse(e){return e instanceof jI(e).Element}const Ise=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function kI(e,t){return e==null?null:e[Ise](t)?e:kI(e.parentElement,t)}function Ose(e,t){return e.closest?e.closest(t):kI(e,t)}function Lse(e){return`[${fc.contextId}="${e}"]`}function $se(e,t){const r=t.target;if(!Mse(r))return null;const s=Lse(e),a=Ose(r,s);return!a||!lg(a)?null:a}function Fse(e,t){const r=$se(e,t);return r?r.getAttribute(fc.draggableId):null}function zse(e,t){const r=`[${Uy.contextId}="${e}"]`,a=bI(document,r).find(o=>o.getAttribute(Uy.id)===t);return!a||!lg(a)?null:a}function Bse(e){e.preventDefault()}function qf({expected:e,phase:t,isLockActive:r,shouldWarn:s}){return!(!r()||e!==t)}function DI({lockAPI:e,store:t,registry:r,draggableId:s}){if(e.isClaimed())return!1;const a=r.draggable.findById(s);return!(!a||!a.options.isEnabled||!xI(t.getState(),s))}function Use({lockAPI:e,contextId:t,store:r,registry:s,draggableId:a,forceSensorStop:o,sourceEvent:i}){if(!DI({lockAPI:e,store:r,registry:s,draggableId:a}))return null;const c=s.draggable.getById(a),d=zse(t,c.descriptor.id);if(!d||i&&!c.options.canDragInteractiveElements&&Rse(d,i))return null;const u=e.claim(o||bo);let f="PRE_DRAG";function m(){return c.options.shouldRespectForcePress}function p(){return e.isActive(u)}function w(S,N){qf({expected:S,phase:f,isLockActive:p,shouldWarn:!0})&&r.dispatch(N())}const v=w.bind(null,"DRAGGING");function x(S){function N(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(N(),ve()),r.dispatch(Ore(S.liftActionArgs)),f="DRAGGING";function _(E,D={shouldBlockNextClick:!1}){if(S.cleanup(),D.shouldBlockNextClick){const C=$n(window,[{eventName:"click",fn:Bse,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(C)}N(),r.dispatch(cI({reason:E}))}return{isActive:()=>qf({expected:"DRAGGING",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:m,drop:E=>_("DROP",E),cancel:E=>_("CANCEL",E),...S.actions}}function g(S){const N=gu(E=>{v(()=>lI({client:E}))});return{...x({liftActionArgs:{id:a,clientSelection:S,movementMode:"FLUID"},cleanup:()=>N.cancel(),actions:{move:N}}),move:N}}function y(){const S={moveUp:()=>v(Hre),moveRight:()=>v(Gre),moveDown:()=>v(qre),moveLeft:()=>v(Kre)};return x({liftActionArgs:{id:a,clientSelection:Ase(d),movementMode:"SNAP"},cleanup:bo,actions:S})}function b(){qf({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>qf({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:m,fluidLift:g,snapLift:y,abort:b}}const Vse=[bse,_se,Tse];function Wse({contextId:e,store:t,registry:r,customSensors:s,enableDefaultSensors:a}){const o=[...a?Vse:[],...s||[]],i=h.useState(()=>ise())[0],l=ke(function(x,g){ju(x)&&!ju(g)&&i.tryAbandon()},[i]);yn(function(){let x=t.getState();return t.subscribe(()=>{const y=t.getState();l(x,y),x=y})},[i,t,l]),yn(()=>i.tryAbandon,[i.tryAbandon]);const c=ke(v=>DI({lockAPI:i,registry:r,store:t,draggableId:v}),[i,r,t]),d=ke((v,x,g)=>Use({lockAPI:i,registry:r,contextId:e,store:t,draggableId:v,forceSensorStop:x||null,sourceEvent:g&&g.sourceEvent?g.sourceEvent:null}),[e,i,r,t]),u=ke(v=>Fse(e,v),[e]),f=ke(v=>{const x=r.draggable.findById(v);return x?x.options:null},[r.draggable]),m=ke(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Jb()))},[i,t]),p=ke(()=>i.isClaimed(),[i]),w=Qe(()=>({canGetLock:c,tryGetLock:d,findClosestDraggableId:u,findOptionsForDraggable:f,tryReleaseLock:m,isLockClaimed:p}),[c,d,u,f,m,p]);for(let v=0;v<o.length;v++)o[v](w)}const Hse=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};en.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),qse=e=>({...bu,...e.autoScrollerOptions,durationDampening:{...bu.durationDampening,...e.autoScrollerOptions}});function ad(e){return e.current||ve(),e.current}function Gse(e){const{contextId:t,setCallbacks:r,sensors:s,nonce:a,dragHandleUsageInstructions:o}=e,i=h.useRef(null),l=NI(e),c=ke(()=>Hse(l.current),[l]),d=ke(()=>qse(l.current),[l]),u=nse(t),f=ose({contextId:t,text:o}),m=Xne(t,a),p=ke(C=>{ad(i).dispatch(C)},[]),w=Qe(()=>BS({publishWhileDragging:$re,updateDroppableScroll:zre,updateDroppableIsEnabled:Bre,updateDroppableIsCombineEnabled:Ure,collectionStarting:Fre},p),[p]),v=ese(),x=Qe(()=>kne(v,w),[v,w]),g=Qe(()=>Hne({scrollWindow:Dne,scrollDroppable:x.scrollDroppable,getAutoScrollerOptions:d,...BS({move:lI},p)}),[x.scrollDroppable,p,d]),y=Qne(t),b=Qe(()=>Sne({announce:u,autoScroller:g,dimensionMarshal:x,focusMarshal:y,getResponders:c,styleMarshal:m}),[u,g,x,y,c,m]);i.current=b;const j=ke(()=>{const C=ad(i);C.getState().phase!=="IDLE"&&C.dispatch(Jb())},[]),S=ke(()=>{const C=ad(i).getState();return C.phase==="DROP_ANIMATING"?!0:C.phase==="IDLE"?!1:C.isDragging},[]),N=Qe(()=>({isDragging:S,tryAbort:j}),[S,j]);r(N);const _=ke(C=>xI(ad(i).getState(),C),[]),E=ke(()=>ei(ad(i).getState()),[]),D=Qe(()=>({marshal:x,focus:y,contextId:t,canLift:_,isMovementAllowed:E,dragHandleUsageInstructionsId:f,registry:v}),[t,x,f,y,_,E,v]);return Wse({contextId:t,store:b,registry:v,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),h.useEffect(()=>j,[j]),X.createElement(cg.Provider,{value:D},X.createElement(vte,{context:sj,store:b},e.children))}function Kse(){return X.useId()}function Yse(e){const t=Kse(),r=e.dragHandleUsageInstructions||vh.dragHandleUsageInstructions;return X.createElement(_te,null,s=>X.createElement(Gse,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const m_={dragging:5e3,dropAnimating:4500},Xse=(e,t)=>t?Id.drop(t.duration):e?Id.snap:Id.fluid,Jse=(e,t)=>{if(e)return t?wu.opacity.drop:wu.opacity.combining},Qse=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Zse(e){const r=e.dimension.client,{offset:s,combineWith:a,dropping:o}=e,i=!!a,l=Qse(e),c=!!o,d=c?zy.drop(s,i):zy.moveTo(s);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Xse(l,o),transform:d,opacity:Jse(i,c),zIndex:c?m_.dropAnimating:m_.dragging,pointerEvents:"none"}}function eae(e){return{transform:zy.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function tae(e){return e.type==="DRAGGING"?Zse(e):eae(e)}function rae(e,t,r=hr){const s=window.getComputedStyle(t),a=t.getBoundingClientRect(),o=O4(a,s),i=Cm(o,r),l={client:o,tagName:t.tagName.toLowerCase(),display:s.display},c={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:o,page:i}}function nae(e){const t=aj("draggable"),{descriptor:r,registry:s,getDraggableRef:a,canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}=e,c=Qe(()=>({canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}),[o,l,i]),d=ke(p=>{const w=a();return w||ve(),rae(r,w,p)},[r,a]),u=Qe(()=>({uniqueId:t,descriptor:r,options:c,getDimension:d}),[r,d,c,t]),f=h.useRef(u),m=h.useRef(!0);yn(()=>(s.draggable.register(f.current),()=>s.draggable.unregister(f.current)),[s.draggable]),yn(()=>{if(m.current){m.current=!1;return}const p=f.current;f.current=u,s.draggable.update(u,p)},[u,s.draggable])}var ij=X.createContext(null);function Rm(e){const t=h.useContext(e);return t||ve(),t}function sae(e){e.preventDefault()}const aae=e=>{const t=h.useRef(null),r=ke((N=null)=>{t.current=N},[]),s=ke(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:o,registry:i}=Rm(cg),{type:l,droppableId:c}=Rm(ij),d=Qe(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:u,draggableId:f,isEnabled:m,shouldRespectForcePress:p,canDragInteractiveElements:w,isClone:v,mapped:x,dropAnimationFinished:g}=e;if(!v){const N=Qe(()=>({descriptor:d,registry:i,getDraggableRef:s,canDragInteractiveElements:w,shouldRespectForcePress:p,isEnabled:m}),[d,i,s,w,p,m]);nae(N)}const y=Qe(()=>m?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:sae}:null,[a,o,f,m]),b=ke(N=>{x.type==="DRAGGING"&&x.dropping&&N.propertyName==="transform"&&en.flushSync(g)},[g,x]),j=Qe(()=>{const N=tae(x),_=x.type==="DRAGGING"&&x.dropping?b:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":f,style:N,onTransitionEnd:_},dragHandleProps:y}},[a,y,f,x,b,r]),S=Qe(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return X.createElement(X.Fragment,null,u(j,x.snapshot,S))};var TI=(e,t)=>e===t,PI=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const oae=e=>e.combine?e.combine.draggableId:null,iae=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function lae(){const e=fr((a,o)=>({x:a,y:o})),t=fr((a,o,i=null,l=null,c=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:i,combineWith:l,combineTargetFor:null})),r=fr((a,o,i,l,c=null,d=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:o,offset:a,dimension:i,forceShouldAnimate:u,snapshot:t(o,l,c,d,null)}}));return(a,o)=>{if(ju(a)){if(a.critical.draggable.id!==o.draggableId)return null;const i=a.current.client.offset,l=a.dimensions.draggables[o.draggableId],c=vn(a.impact),d=iae(a.impact),u=a.forceShouldAnimate;return r(e(i.x,i.y),a.movementMode,l,o.isClone,c,d,u)}if(a.phase==="DROP_ANIMATING"){const i=a.completed;if(i.result.draggableId!==o.draggableId)return null;const l=o.isClone,c=a.dimensions.draggables[o.draggableId],d=i.result,u=d.mode,f=PI(d),m=oae(d),w={duration:a.dropDuration,curve:Zb.drop,moveTo:a.newHomeClientOffset,opacity:m?wu.opacity.drop:null,scale:m?wu.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:c,dropping:w,draggingOver:f,combineWith:m,mode:u,forceShouldAnimate:null,snapshot:t(u,l,f,m,w)}}}return null}}function RI(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const cae={mapped:{type:"SECONDARY",offset:hr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:RI(null)}};function dae(){const e=fr((i,l)=>({x:i,y:l})),t=fr(RI),r=fr((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),s=i=>i?r(hr,i,!0):null,a=(i,l,c,d)=>{const u=c.displaced.visible[i],f=!!(d.inVirtualList&&d.effected[i]),m=ag(c),p=m&&m.draggableId===i?l:null;if(!u){if(!f)return s(p);if(c.displaced.invisible[i])return null;const x=Ac(d.displacedBy.point),g=e(x.x,x.y);return r(g,p,!0)}if(f)return s(p);const w=c.displacedBy.point,v=e(w.x,w.y);return r(v,p,u.shouldAnimate)};return(i,l)=>{if(ju(i))return i.critical.draggable.id===l.draggableId?null:a(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:a(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const uae=()=>{const e=lae(),t=dae();return(s,a)=>e(s,a)||t(s,a)||cae},fae={dropAnimationFinished:dI},hae=I4(uae,fae,null,{context:sj,areStatePropsEqual:TI})(aae);function AI(e){return Rm(ij).isUsingCloneFor===e.draggableId&&!e.isClone?null:X.createElement(hae,e)}function mae(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return X.createElement(AI,Em({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}const MI=e=>t=>e===t,pae=MI("scroll"),gae=MI("auto"),p_=(e,t)=>t(e.overflowX)||t(e.overflowY),xae=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return p_(r,pae)||p_(r,gae)},vae=()=>!1,II=e=>e==null?null:e===document.body?vae()?e:null:e===document.documentElement?null:xae(e)?e:II(e.parentElement);var Vy=e=>({x:e.scrollLeft,y:e.scrollTop});const OI=e=>e?window.getComputedStyle(e).position==="fixed"?!0:OI(e.parentElement):!1;var yae=e=>{const t=II(e),r=OI(e);return{closestScrollable:t,isFixedOnPage:r}},wae=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:s,direction:a,client:o,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:m,client:p}=l,w=mI({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:p,scrollSize:m,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:w,diff:{value:hr,displacement:hr}}}})(),d=a==="vertical"?qb:G4,u=dc({page:i,withPlaceholder:null,axis:d,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:s,axis:d,isEnabled:t,client:o,page:i,frame:c,subject:u}};const bae=(e,t)=>{const r=L4(e);if(!t||e!==t)return r;const s=r.paddingBox.top-t.scrollTop,a=r.paddingBox.left-t.scrollLeft,o=s+t.scrollHeight,i=a+t.scrollWidth,c=Ub({top:s,right:i,bottom:o,left:a},r.border);return Vb({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var jae=({ref:e,descriptor:t,env:r,windowScroll:s,direction:a,isDropDisabled:o,isCombineEnabled:i,shouldClipSubject:l})=>{const c=r.closestScrollable,d=bae(e,c),u=Cm(d,s),f=(()=>{if(!c)return null;const p=L4(c),w={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:p,page:Cm(p,s),scroll:Vy(c),scrollSize:w,shouldClipSubject:l}})();return wae({descriptor:t,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:a,client:d,page:u,closest:f})};const Nae={passive:!1},Sae={passive:!0};var g_=e=>e.shouldPublishImmediately?Nae:Sae;const Gf=e=>e&&e.env.closestScrollable||null;function _ae(e){const t=h.useRef(null),r=Rm(cg),s=aj("droppable"),{registry:a,marshal:o}=r,i=NI(e),l=Qe(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=h.useRef(l),d=Qe(()=>fr((j,S)=>{t.current||ve();const N={x:j,y:S};o.updateDroppableScroll(l.id,N)}),[l.id,o]),u=ke(()=>{const j=t.current;return!j||!j.env.closestScrollable?hr:Vy(j.env.closestScrollable)},[]),f=ke(()=>{const j=u();d(j.x,j.y)},[u,d]),m=Qe(()=>gu(f),[f]),p=ke(()=>{const j=t.current,S=Gf(j);if(j&&S||ve(),j.scrollOptions.shouldPublishImmediately){f();return}m()},[m,f]),w=ke((j,S)=>{t.current&&ve();const N=i.current,_=N.getDroppableRef();_||ve();const E=yae(_),D={ref:_,descriptor:l,env:E,scrollOptions:S};t.current=D;const C=jae({ref:_,descriptor:l,env:E,windowScroll:j,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),k=E.closestScrollable;return k&&(k.setAttribute(d_.contextId,r.contextId),k.addEventListener("scroll",p,g_(D.scrollOptions))),C},[r.contextId,l,p,i]),v=ke(()=>{const j=t.current,S=Gf(j);return j&&S||ve(),Vy(S)},[]),x=ke(()=>{const j=t.current;j||ve();const S=Gf(j);t.current=null,S&&(m.cancel(),S.removeAttribute(d_.contextId),S.removeEventListener("scroll",p,g_(j.scrollOptions)))},[p,m]),g=ke(j=>{const S=t.current;S||ve();const N=Gf(S);N||ve(),N.scrollTop+=j.y,N.scrollLeft+=j.x},[]),y=Qe(()=>({getDimensionAndWatchScroll:w,getScrollWhileDragging:v,dragStopped:x,scroll:g}),[x,w,v,g]),b=Qe(()=>({uniqueId:s,descriptor:l,callbacks:y}),[y,l,s]);yn(()=>(c.current=b.descriptor,a.droppable.register(b),()=>{t.current&&x(),a.droppable.unregister(b)}),[y,l,x,b,o,a.droppable]),yn(()=>{t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),yn(()=>{t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function Wx(){}const x_={width:0,height:0,margin:Rte},Cae=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?x_:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Eae=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const s=Cae({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Id.placeholder:null}},kae=e=>{const t=h.useRef(null),r=ke(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:a,onClose:o,contextId:i}=e,[l,c]=h.useState(e.animate==="open");h.useEffect(()=>l?s!=="open"?(r(),c(!1),Wx):t.current?Wx:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):Wx,[s,l,r]);const d=ke(f=>{f.propertyName==="height"&&(a(),s==="close"&&o())},[s,o,a]),u=Eae({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return X.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":i,onTransitionEnd:d,ref:e.innerRef})};var Dae=X.memo(kae);class Tae extends X.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Pae=e=>{const t=h.useContext(cg);t||ve();const{contextId:r,isMovementAllowed:s}=t,a=h.useRef(null),o=h.useRef(null),{children:i,droppableId:l,type:c,mode:d,direction:u,ignoreContainerClipping:f,isDropDisabled:m,isCombineEnabled:p,snapshot:w,useClone:v,updateViewportMaxScroll:x,getContainerForClone:g}=e,y=ke(()=>a.current,[]),b=ke((k=null)=>{a.current=k},[]);ke(()=>o.current,[]);const j=ke((k=null)=>{o.current=k},[]),S=ke(()=>{s()&&x({maxScroll:gI()})},[s,x]);_ae({droppableId:l,type:c,mode:d,direction:u,isDropDisabled:m,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:y});const N=Qe(()=>X.createElement(Tae,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:k,data:P,animate:R})=>X.createElement(Dae,{placeholder:P,onClose:k,innerRef:j,animate:R,contextId:r,onTransitionEnd:S})),[r,S,e.placeholder,e.shouldAnimatePlaceholder,j]),_=Qe(()=>({innerRef:b,placeholder:N,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,N,b]),E=v?v.dragging.draggableId:null,D=Qe(()=>({droppableId:l,type:c,isUsingCloneFor:E}),[l,E,c]);function C(){if(!v)return null;const{dragging:k,render:P}=v,R=X.createElement(AI,{draggableId:k.draggableId,index:k.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(A,I)=>P(A,I,k));return $0.createPortal(R,g())}return X.createElement(ij.Provider,{value:D},i(_,w),C())};function Rae(){return document.body||ve(),document.body}const v_={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Rae},LI=e=>{let t={...e},r;for(r in v_)e[r]===void 0&&(t={...t,[r]:v_[r]});return t},Hx=(e,t)=>e===t.droppable.type,y_=(e,t)=>t.draggables[e.draggable.id],Aae=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=fr(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),s=fr((o,i,l,c,d,u)=>{const f=d.descriptor.id;if(d.descriptor.droppableId===o){const w=u?{render:u,dragging:r(d.descriptor)}:null,v={isDraggingOver:l,draggingOverWith:l?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:v,useClone:w}}if(!i)return t;if(!c)return e;const p={isDraggingOver:l,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,i)=>{const l=LI(i),c=l.droppableId,d=l.type,u=!l.isDropDisabled,f=l.renderClone;if(ju(o)){const m=o.critical;if(!Hx(d,m))return t;const p=y_(m,o.dimensions),w=vn(o.impact)===c;return s(c,u,w,w,p,f)}if(o.phase==="DROP_ANIMATING"){const m=o.completed;if(!Hx(d,m.critical))return t;const p=y_(m.critical,o.dimensions);return s(c,u,PI(m.result)===c,vn(m.impact)===c,p,f)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const m=o.completed;if(!Hx(d,m.critical))return t;const p=vn(m.impact)===c,w=!!(m.impact.at&&m.impact.at.type==="COMBINE"),v=m.critical.droppable.id===c;return p?w?e:t:v?e:t}return t}},Mae={updateViewportMaxScroll:Wre},Iae=I4(Aae,Mae,(e,t,r)=>({...LI(r),...e,...t}),{context:sj,areStatePropsEqual:TI})(Pae);function Oae(e){return e?e.includes("FREQ=DAILY")?"daily":e.includes("FREQ=WEEKLY")?"weekly":e.includes("FREQ=MONTHLY")?"monthly":e.includes("FREQ=QUARTERLY")?"quarterly":e.includes("FREQ=YEARLY")?"yearly":null:null}function $I(e,t){if(t==="one_off")return 30;switch(e){case"daily":return 0;case"weekly":return 7;case"monthly":return 30;case"quarterly":return 90;case"yearly":return 365;default:return 30}}function Lae(e,t){const r=$I(e,t);if(r===0)return[0];const s=[],a=Math.floor(r/2);for(let o=-a;o<=a;o++)s.push(o);return s}function $ae(e,t){if(t==="one_off")return"Fourchette de 15 jours autour de la date de la tche ponctuelle";switch(e){case"daily":return"Les tches sont gnres quotidiennement, pas de dcalage possible";case"weekly":return"Fourchette de 3 jours autour de la semaine";case"monthly":return"Fourchette de 15 jours autour du jour du mois";case"quarterly":return"Fourchette de 45 jours autour du trimestre";case"yearly":return"Fourchette de 6 mois autour de la date annuelle";default:return"Fourchette de 15 jours autour de la tche principale"}}const Fae=({open:e,onOpenChange:t,onSubmit:r,initialData:s,mainTaskAssignee:a,mainTaskDate:o=new Date,activityKind:i="recurring",rrule:l=null})=>{const{employees:c,loading:d}=Ks(),[u,f]=h.useState({title:"",description:"",position:0,inherit_assignee:!0,estimated_hours:1,offset_days:0,...s}),[m,p]=h.useState({}),w=i==="recurring"?Oae(l):null,v=Lae(w,i),x=$I(w,i),g=$ae(w,i),y=w==="daily";h.useEffect(()=>{e&&s&&f({...u,...s})},[e,s]);const b=()=>{const R={};if(u.title.trim()||(R.title="Le titre est obligatoire"),!u.inherit_assignee&&!u.assignee_id&&(R.assignee="Veuillez slectionner un employ"),u.estimated_hours<=0&&(R.estimated_hours="La dure doit tre suprieure  0"),i==="one_off")if(!u.specific_date)R.specific_date="La date est obligatoire pour une action ponctuelle";else{const A=new Date(u.specific_date),I=new Date(C),F=new Date(k);(A<I||A>F)&&(R.specific_date=`La date doit tre entre le ${I.toLocaleDateString("fr-FR")} et le ${F.toLocaleDateString("fr-FR")}`)}return p(R),Object.keys(R).length===0},j=R=>{if(R.preventDefault(),b()){const A={...u};if(!A.inherit_assignee&&A.assignee_id){const I=c.find(F=>F.user_id===A.assignee_id);A.assigned_name=(I==null?void 0:I.full_name)||""}r(A),t(!1)}},S=R=>{f({...u,offset_days:R})},N=c.find(R=>R.user_id===u.assignee_id),_=u.inherit_assignee?a:N?{id:N.user_id,name:N.full_name}:null,E=()=>{const R=new Date(o);return R.setDate(R.getDate()+u.offset_days),R},D=()=>{const R=new Date(o),A=new Date(o),I=i==="one_off"?15:x/2;return R.setDate(R.getDate()-I),A.setDate(A.getDate()+I),{min:R.toISOString().split("T")[0],max:A.toISOString().split("T")[0]}},{min:C,max:k}=D(),P=R=>{const A=new Date(o);return A.setDate(A.getDate()+R),A.toLocaleDateString("fr-FR",{day:"2-digit",month:"short"})};return n.jsx(yt,{open:e,onOpenChange:t,children:n.jsxs(ft,{className:"max-w-3xl max-h-[90vh]",children:[n.jsxs(ht,{children:[n.jsx(mt,{className:"text-xl",children:s!=null&&s.title?"Modifier l'action":"Nouvelle action"}),n.jsx(Sp,{children:"Configurez l'action avec son assignation et sa position temporelle"})]}),n.jsx($r,{className:"max-h-[calc(90vh-200px)] pr-4",children:n.jsxs("form",{onSubmit:j,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"title",className:"required",children:"Titre de l'action"}),n.jsx(ye,{id:"title",value:u.title,onChange:R=>f({...u,title:R.target.value}),placeholder:"Ex: Prparer le rapport hebdomadaire",className:m.title?"border-red-500":""}),m.title&&n.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),m.title]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"description",children:"Description (optionnelle)"}),n.jsx(on,{id:"description",value:u.description||"",onChange:R=>f({...u,description:R.target.value}),placeholder:"Dtails supplmentaires sur cette action...",rows:3})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"estimated_hours",children:"Dure estime (heures)"}),n.jsx(ye,{id:"estimated_hours",type:"number",step:"0.5",min:"0.5",max:"24",value:u.estimated_hours,onChange:R=>f({...u,estimated_hours:parseFloat(R.target.value)}),className:m.estimated_hours?"border-red-500":""}),m.estimated_hours&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:m.estimated_hours})]})]}),n.jsx(Ai,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsx(J,{htmlFor:"inherit_assignee",className:"text-base font-semibold",children:"Assignation"})}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Y0,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Hriter de la tche principale"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Mme personne que la tche principale"})]})]}),n.jsx(rc,{id:"inherit_assignee",checked:u.inherit_assignee,onCheckedChange:R=>f({...u,inherit_assignee:R})})]}),!u.inherit_assignee&&n.jsxs("div",{children:[n.jsx(J,{htmlFor:"assignee",className:"required",children:"Assign "}),n.jsxs(Ie,{value:u.assignee_id,onValueChange:R=>f({...u,assignee_id:R}),children:[n.jsx(Pe,{className:m.assignee?"border-red-500":"",children:n.jsx(Oe,{placeholder:"Slectionnez un employ"})}),n.jsx(Re,{children:d?n.jsx(ae,{value:"loading",disabled:!0,children:"Chargement..."}):c.length===0?n.jsx(ae,{value:"empty",disabled:!0,children:"Aucun employ disponible"}):c.map(R=>n.jsx(ae,{value:R.user_id,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nr,{className:"h-4 w-4"}),n.jsx("span",{children:R.full_name}),R.job_title&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",R.job_title,")"]})]})},R.user_id))})]}),m.assignee&&n.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),m.assignee]})]}),_&&n.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nr,{className:"h-4 w-4 text-blue-600"}),n.jsxs("span",{className:"font-medium",children:["Assign  : ",_.name]}),u.inherit_assignee&&n.jsx(re,{variant:"secondary",className:"text-xs",children:"Hrit"})]})})]}),n.jsx(Ai,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(J,{className:"text-base font-semibold",children:i==="recurring"?"Position temporelle":"Date de l'action"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i==="recurring"?"Quand cette action doit-elle tre effectue par rapport  la tche principale ?":" quelle date cette action doit-elle tre ralise ?"})]}),i==="recurring"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg border-2 border-dashed",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Tche principale"}),n.jsx(re,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:" Fixe"})]}),n.jsx("p",{className:"font-medium",children:o.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center justify-end gap-2 mb-1",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette action"}),n.jsx(re,{variant:"outline",className:"text-[10px] px-1.5 py-0 border-blue-500 text-blue-600",children:" Variable"})]}),n.jsx("p",{className:"font-medium text-blue-600",children:E().toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-3 text-center",children:" La date de la tche parent est fixe (non modifiable)"})]}),n.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),n.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Fourchette disponible"})]}),n.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["Vous pouvez planifier cette action entre ",n.jsx("strong",{children:v[0]<0?v[0]:`J+${v[0]}`})," et ",n.jsx("strong",{children:v[v.length-1]>0?`J+${v[v.length-1]}`:v[v.length-1]})," par rapport  la tche principale"]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(L,{type:"button",variant:"outline",size:"sm",onClick:()=>S(u.offset_days-1),disabled:y||u.offset_days<=v[0],children:[n.jsx(ep,{className:"h-4 w-4"}),"Jour prcdent"]}),n.jsx(re,{variant:"outline",className:"px-4 py-2",children:u.offset_days===0?"Mme jour (J)":u.offset_days>0?`J+${u.offset_days}`:`J${u.offset_days}`}),n.jsxs(L,{type:"button",variant:"outline",size:"sm",onClick:()=>S(u.offset_days+1),disabled:y||u.offset_days>=v[v.length-1],children:["Jour suivant",n.jsx(ua,{className:"h-4 w-4"})]})]}),n.jsx("div",{className:"relative",children:y?n.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg text-center",children:[n.jsx(ze,{className:"h-8 w-8 mx-auto text-blue-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Tches quotidiennes"}),n.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Les actions sont excutes le mme jour que la tche (pas de dcalage possible)"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center gap-1 overflow-x-auto pb-2",children:v.map(R=>{const A=R===0,I=R===u.offset_days;return R<u.offset_days,R>u.offset_days,n.jsxs("button",{type:"button",onClick:()=>S(R),className:`
                            relative flex-1 min-w-[60px] p-3 rounded-lg border-2 transition-all
                            ${A?"border-orange-500 bg-orange-50 dark:bg-orange-950/20":I?"border-blue-500 bg-blue-50 dark:bg-blue-950/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}
                          `,children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs font-medium mb-1",children:R===0?"J":R>0?`J+${R}`:`J${R}`}),n.jsx("div",{className:"text-[10px] text-muted-foreground",children:P(R)})]}),A&&n.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2",children:n.jsx(re,{variant:"default",className:"text-[10px] px-1.5 py-0",children:"Tche"})}),I&&!A&&n.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2",children:n.jsx(Ea,{className:"h-4 w-4 text-blue-600"})})]},R)})}),n.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 rounded border-2 border-orange-500 bg-orange-50"}),n.jsx("span",{children:"Tche principale"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 rounded border-2 border-blue-500 bg-blue-50"}),n.jsx("span",{children:"Action slectionne"})]})]})]})})]}),n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:g})]}),i==="one_off"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg border-2 border-dashed",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ze,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(J,{className:"text-sm font-medium text-muted-foreground",children:"Tche ponctuelle parent"})]}),n.jsx("p",{className:"font-medium text-lg",children:o.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" Date fixe de rfrence (non modifiable)"})]}),n.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),n.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Fourchette autorise"})]}),n.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["Du ",n.jsx("strong",{children:new Date(C).toLocaleDateString("fr-FR")})," au ",n.jsx("strong",{children:new Date(k).toLocaleDateString("fr-FR")})," (15 jours)"]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"specific_date",className:"required",children:"Date de l'action *"}),n.jsx(ye,{id:"specific_date",type:"date",min:C,max:k,value:u.specific_date||"",onChange:R=>f({...u,specific_date:R.target.value}),className:m.specific_date?"border-red-500":""}),m.specific_date&&n.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),m.specific_date]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" Slectionnez une date dans la fourchette autorise"})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4",children:[n.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),n.jsx(L,{type:"submit",children:s!=null&&s.title?"Enregistrer":"Crer l'action"})]})]})})]})})},zae=({templates:e,onAdd:t,onUpdate:r,onDelete:s,onReorder:a,mainTaskAssignee:o,mainTaskDate:i=new Date,activityKind:l="recurring",rrule:c=null,readonly:d=!1,loading:u=!1})=>{const[f,m]=h.useState(!1),[p,w]=h.useState(null),[v,x]=h.useState(!1),[g,y]=h.useState(null),[b,j]=h.useState(!1),[S,N]=h.useState(null),[_,E]=h.useState({}),{currentTenant:D}=Ui();X.useEffect(()=>{const U=async()=>{if(!D)return;const q={};for(const Y of e)try{const{count:G,error:z}=await O.from("operational_action_attachments").select("*",{count:"exact",head:!0}).eq("tenant_id",D.id).eq("action_template_id",Y.id);!z&&G!==null&&(q[Y.id]=G)}catch(G){console.error(`Erreur chargement compteur pour ${Y.id}:`,G)}E(q)};e.length>0&&!d&&D&&U()},[e,d,D]);const C=()=>{w(null),m(!0)},k=U=>{w(U),m(!0)},P=async U=>{p?await r(p.id,U):await t(U),m(!1),w(null)},R=U=>{y(U),x(!0)},A=async()=>{g&&(await s(g),y(null)),x(!1)},I=U=>{if(!U.destination||d)return;const q=Array.from(e),[Y]=q.splice(U.source.index,1);q.splice(U.destination.index,0,Y);const G=q.map((z,Z)=>({...z,position:Z}));a(G)},F=U=>{N(U),j(!0)},B=()=>{if(S){const U=(_[S.id]||0)+1;E(q=>({...q,[S.id]:U}))}},T=U=>U===0?"Mme jour":U>0?`J+${U}`:`J${U}`,M=U=>U<0?"default":U===0?"secondary":"outline";return d&&e.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Si,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Aucune action dfinie pour cette activit"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Si,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("h3",{className:"text-base font-semibold",children:["Actions (",e.length,")"]})]}),!d&&n.jsxs(L,{onClick:C,size:"sm",variant:"outline",className:"gap-2",children:[n.jsx(jt,{className:"h-4 w-4"}),"Ajouter"]})]}),!d&&e.length===0&&n.jsx(V,{className:"border-dashed",children:n.jsxs(W,{className:"pt-6 text-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Crez des actions qui seront automatiquement clones pour chaque tche"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Assignez des personnes et dfinissez leur position temporelle"})]})}),n.jsx(Yse,{onDragEnd:I,children:n.jsx(Iae,{droppableId:"actions-list",children:(U,q)=>n.jsxs("div",{...U.droppableProps,ref:U.innerRef,className:`space-y-2 ${q.isDraggingOver?"bg-muted/50 rounded-lg p-2":""}`,children:[e.map((Y,G)=>n.jsx(mae,{draggableId:Y.id,index:G,isDragDisabled:d||u,children:(z,Z)=>n.jsx(V,{ref:z.innerRef,...z.draggableProps,className:`transition-all ${Z.isDragging?"shadow-lg ring-2 ring-primary":""}`,children:n.jsx(W,{className:"p-4",children:n.jsxs("div",{className:"flex gap-3",children:[!d&&n.jsx("div",{...z.dragHandleProps,className:"flex items-center cursor-grab active:cursor-grabbing",children:n.jsx(w2,{className:"h-5 w-5 text-muted-foreground"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(re,{variant:"secondary",className:"text-xs",children:["#",G+1]}),n.jsx(Xh,{children:n.jsxs(dk,{children:[n.jsx(uk,{asChild:!0,children:n.jsxs(L,{onClick:()=>F(Y),size:"sm",variant:"ghost",className:"h-6 w-6 p-0 relative hover:bg-primary/10",children:[n.jsx(P5,{className:"h-3.5 w-3.5"}),n.jsx(jt,{className:"h-2.5 w-2.5 absolute -top-0.5 -right-0.5 text-green-600"}),_[Y.id]>0&&n.jsx(re,{variant:"destructive",className:"absolute -top-2 -right-2 h-4 w-4 p-0 flex items-center justify-center text-[9px]",children:_[Y.id]})]})}),n.jsxs(cw,{children:[n.jsx("p",{className:"text-xs",children:_[Y.id]>0?`${_[Y.id]} fichier(s)  Cliquez pour ajouter`:"Ajouter des preuves de ralisation"}),n.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:" Requis pour validation"})]})]})})]}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("h4",{className:"font-medium",children:Y.title}),Y.description&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:Y.description}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[n.jsx("div",{className:"flex items-center gap-1.5",children:Y.inherit_assignee?n.jsxs(n.Fragment,{children:[n.jsx(Y0,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:"Hrite de la tche"})]}):Y.assigned_name?n.jsxs(n.Fragment,{children:[n.jsx(nr,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:Y.assigned_name})]}):n.jsxs(n.Fragment,{children:[n.jsx(nr,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"text-orange-500",children:"Non assign"})]})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(ze,{className:"h-3.5 w-3.5"}),n.jsx(re,{variant:M(Y.offset_days),className:"text-[10px] px-1.5 py-0",children:T(Y.offset_days)})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(lt,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:[Y.estimated_hours,"h"]})]})]})]}),!d&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(L,{onClick:()=>k(Y),size:"sm",variant:"ghost",className:"h-8 w-8 p-0",disabled:u,children:n.jsx(A5,{className:"h-3.5 w-3.5"})}),n.jsx(L,{onClick:()=>R(Y.id),size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-destructive/10 hover:text-destructive",disabled:u,children:n.jsx(Hs,{className:"h-3.5 w-3.5"})})]})]})})})},Y.id)),U.placeholder]})})})]}),n.jsx(Fae,{open:f,onOpenChange:m,onSubmit:P,initialData:p||void 0,mainTaskAssignee:o,mainTaskDate:i,activityKind:l,rrule:c}),n.jsx(C4,{open:v,onOpenChange:x,children:n.jsxs(Ab,{children:[n.jsxs(Mb,{children:[n.jsx(Ob,{children:"Supprimer cette action ?"}),n.jsxs(Lb,{children:["Cette action sera supprime du template. Les actions dj cres sur les tches existantes ne seront pas affectes.",n.jsx("br",{}),n.jsx("br",{})," Tous les fichiers attachs  cette action seront galement supprims."]})]}),n.jsxs(Ib,{children:[n.jsx(Fb,{children:"Annuler"}),n.jsx($b,{onClick:A,className:"bg-destructive hover:bg-destructive/90",children:"Supprimer"})]})]})}),S&&n.jsx(uM,{open:b,onOpenChange:j,actionTemplateId:S.id,actionTitle:S.title,onUploadSuccess:B})]})},Bae=({activityId:e,activityName:t})=>{const[r,s]=h.useState([]),[a,o]=h.useState(!0),[i,l]=h.useState(null),[c,d]=h.useState("all"),[u,f]=h.useState(""),[m,p]=h.useState(0),w=20;h.useEffect(()=>{v()},[e,c]);const v=async()=>{o(!0),l(null);try{let _=O.from("tasks").select("id, title, status, priority, start_date, due_date, progress, assigned_name, created_at").eq("activity_id",e).eq("is_operational",!0).order("start_date",{ascending:!1});c!=="all"&&(_=_.eq("status",c));const{data:E,error:D}=await _;if(D)throw D;s(E||[])}catch(_){console.error(" Erreur fetchTasks:",_),l(_.message)}finally{o(!1)}},x=r.filter(_=>_.title.toLowerCase().includes(u.toLowerCase())),g=x.slice(m*w,(m+1)*w),y=Math.ceil(x.length/w),b={total:r.length,todo:r.filter(_=>_.status==="todo").length,doing:r.filter(_=>_.status==="doing").length,done:r.filter(_=>_.status==="done").length},j={todo:"bg-gray-100 text-gray-700",doing:"bg-blue-100 text-blue-700",done:"bg-green-100 text-green-700",blocked:"bg-red-100 text-red-700"},S={todo:" faire",doing:"En cours",done:"Termin",blocked:"Bloqu"},N={low:"bg-gray-100 text-gray-600",medium:"bg-yellow-100 text-yellow-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[n.jsxs(V,{children:[n.jsx(le,{className:"pb-2",children:n.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:"Total"})}),n.jsx(W,{children:n.jsx("div",{className:"text-2xl font-bold",children:b.total})})]}),n.jsxs(V,{children:[n.jsx(le,{className:"pb-2",children:n.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:" faire"})}),n.jsx(W,{children:n.jsx("div",{className:"text-2xl font-bold text-gray-700",children:b.todo})})]}),n.jsxs(V,{children:[n.jsx(le,{className:"pb-2",children:n.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:"En cours"})}),n.jsx(W,{children:n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.doing})})]}),n.jsxs(V,{children:[n.jsx(le,{className:"pb-2",children:n.jsx(ce,{className:"text-sm font-medium text-muted-foreground",children:"Termines"})}),n.jsx(W,{children:n.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.done})})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{placeholder:"Rechercher une tche...",value:u,onChange:_=>f(_.target.value),className:"pl-10"})]}),n.jsxs(Ie,{value:c,onValueChange:d,children:[n.jsx(Pe,{className:"w-48",children:n.jsx(Oe,{placeholder:"Statut"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"all",children:"Tous les statuts"}),n.jsx(ae,{value:"todo",children:" faire"}),n.jsx(ae,{value:"doing",children:"En cours"}),n.jsx(ae,{value:"done",children:"Termines"}),n.jsx(ae,{value:"blocked",children:"Bloques"})]})]})]}),a?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Chargement des occurrences..."})]}):i?n.jsx(V,{className:"border-destructive",children:n.jsxs(W,{className:"pt-6 text-center text-destructive",children:[n.jsx("p",{className:"font-semibold",children:"Erreur lors du chargement"}),n.jsx("p",{className:"text-sm mt-2",children:i}),n.jsx(L,{onClick:v,className:"mt-4",children:"Ressayer"})]})}):x.length===0?n.jsx(V,{children:n.jsxs(W,{className:"pt-6 text-center py-12",children:[n.jsx(ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-lg font-semibold",children:"Aucune occurrence gnre"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Les tches apparatront ici une fois que l'Edge Function aura gnr les occurrences"})]})}):n.jsxs(n.Fragment,{children:[n.jsx(V,{children:n.jsxs(Hp,{children:[n.jsx(qp,{children:n.jsxs(Ri,{children:[n.jsx(Vt,{children:"Titre"}),n.jsx(Vt,{children:"Date"}),n.jsx(Vt,{children:"Statut"}),n.jsx(Vt,{children:"Priorit"}),n.jsx(Vt,{children:"Assign"}),n.jsx(Vt,{children:"Progrs"}),n.jsx(Vt,{className:"text-right",children:"Actions"})]})}),n.jsx(Gp,{children:g.map(_=>n.jsxs(Ri,{className:"hover:bg-muted/50",children:[n.jsx(Wt,{className:"font-medium",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:_.title}),n.jsx(re,{variant:"outline",className:"text-xs",children:"Opration"})]})}),n.jsx(Wt,{children:n.jsx("div",{className:"text-sm",children:Ve(new Date(_.start_date),"dd MMM yyyy",{locale:ot})})}),n.jsx(Wt,{children:n.jsx(re,{className:j[_.status]||"",children:S[_.status]||_.status})}),n.jsx(Wt,{children:n.jsx(re,{variant:"outline",className:N[_.priority]||"",children:_.priority})}),n.jsx(Wt,{className:"text-sm",children:_.assigned_name}),n.jsx(Wt,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${_.progress}%`}})}),n.jsxs("span",{className:"text-xs text-muted-foreground w-10 text-right",children:[_.progress,"%"]})]})}),n.jsx(Wt,{className:"text-right",children:n.jsx(L,{size:"sm",variant:"ghost",asChild:!0,children:n.jsx("a",{href:`/tasks/${_.id}`,target:"_blank",rel:"noopener noreferrer",children:n.jsx(_5,{className:"h-4 w-4"})})})})]},_.id))})]})}),y>1&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Page ",m+1," sur ",y," (",x.length," tche(s))"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{size:"sm",variant:"outline",onClick:()=>p(m-1),disabled:m===0,children:"Prcdent"}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>p(m+1),disabled:m>=y-1,children:"Suivant"})]})]})]})]})},Uae=({activityId:e})=>{const{getStatistics:t}=Rb({autoFetch:!1}),[r,s]=h.useState(null),[a,o]=h.useState(!0),[i,l]=h.useState(null);h.useEffect(()=>{c()},[e]);const c=async()=>{o(!0),l(null);try{const d=await t(e);s(d)}catch(d){console.error(" Erreur loadStatistics:",d),l(d.message)}finally{o(!1)}};return a?n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Chargement des statistiques..."})]})})}):i||!r?n.jsx(V,{className:"border-destructive",children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Kt,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),n.jsx("p",{className:"font-semibold text-destructive",children:"Erreur lors du chargement"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:i||"Donnes non disponibles"}),n.jsx(L,{onClick:c,variant:"outline",className:"mt-4",children:"Ressayer"})]})})}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs(V,{children:[n.jsx(le,{children:n.jsxs(ce,{className:"flex items-center gap-2",children:[n.jsx(ba,{className:"h-5 w-5"}),"Statistiques de l'activit"]})}),n.jsxs(W,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Taux de compltion"}),n.jsxs("span",{className:"text-2xl font-bold text-primary",children:[r.completion_rate,"%"]})]}),n.jsx(Ot,{value:r.completion_rate,className:"h-3"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.completed_count," sur ",r.total_occurrences," occurrence(s) termine(s)"]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[n.jsx(fs,{className:"h-6 w-6 mx-auto text-green-600 mb-1"}),n.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:r.completed_count}),n.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"Termines"})]}),n.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[n.jsx(lt,{className:"h-6 w-6 mx-auto text-blue-600 mb-1"}),n.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:r.in_progress_count}),n.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"En cours"})]}),n.jsxs("div",{className:"text-center p-3 bg-red-50 dark:bg-red-950 rounded-lg",children:[n.jsx(Kt,{className:"h-6 w-6 mx-auto text-red-600 mb-1"}),n.jsx("div",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:r.blocked_count}),n.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Bloques"})]})]}),r.avg_completion_time_days!==null&&n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xr,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium",children:"Temps moyen de compltion"})]}),n.jsxs("span",{className:"text-lg font-bold",children:[Math.round(r.avg_completion_time_days)," jour(s)"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.next_occurrence&&n.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[n.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:"Prochaine occurrence"}),n.jsx("div",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:Ve(new Date(r.next_occurrence),"dd MMMM yyyy",{locale:ot})})]}),r.last_occurrence&&n.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Dernire occurrence"}),n.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:Ve(new Date(r.last_occurrence),"dd MMMM yyyy",{locale:ot})})]})]})]})]}),r.total_occurrences===0&&n.jsx(V,{className:"border-dashed",children:n.jsxs(W,{className:"pt-6 text-center py-8",children:[n.jsx(ba,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 opacity-50"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune occurrence gnre pour le moment"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Les statistiques apparatront une fois que des tches auront t gnres"})]})})]})},Vae=({activityId:e,open:t,onOpenChange:r})=>{const[s,a]=h.useState(!1),[o,i]=h.useState(null),[l,c]=h.useState(null),[d,u]=h.useState({}),[f,m]=h.useState({}),{activities:p,updateActivity:w}=Rb({autoFetch:!1}),{getSchedule:v,upsertSchedule:x}=i4(),{templates:g,fetchTemplates:y,createTemplate:b,updateTemplate:j,deleteTemplate:S}=o4();h.useEffect(()=>{t&&e&&N()},[t,e]);const N=async()=>{try{const C=p.find(k=>k.id===e);if(C&&(i(C),u(C)),(C==null?void 0:C.kind)==="recurring"){const k=await v(e);c(k),m(k||{})}await y(e)}catch(C){console.error("Erreur loadData:",C)}},_=async()=>{try{await w(e,d),(o==null?void 0:o.kind)==="recurring"&&f&&await x({...f,activity_id:e}),a(!1),N()}catch(C){console.error("Erreur handleSave:",C)}},E=()=>{u(o||{}),m(l||{}),a(!1)};if(!o)return null;const D={org:"Organisation",department:"Dpartement",team:"quipe",person:"Personne"};return n.jsx(yt,{open:t,onOpenChange:r,children:n.jsxs(ft,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx(ht,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[s?n.jsx(ye,{value:d.name||"",onChange:C=>u({...d,name:C.target.value}),className:"text-2xl font-bold"}):n.jsx(mt,{className:"text-2xl",children:o.name}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(re,{variant:o.is_active?"default":"secondary",children:o.is_active?"Active":"Inactive"}),n.jsx(re,{variant:"outline",children:o.kind==="recurring"?"Rcurrente":"Ponctuelle"}),n.jsx(re,{variant:"secondary",children:D[o.scope]})]})]}),s?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{onClick:E,variant:"outline",size:"sm",children:"Annuler"}),n.jsxs(L,{onClick:_,size:"sm",children:[n.jsx(G0,{className:"h-4 w-4 mr-2"}),"Sauvegarder"]})]}):n.jsxs(L,{onClick:()=>a(!0),variant:"outline",size:"sm",children:[n.jsx($i,{className:"h-4 w-4 mr-2"}),"Modifier"]})]})}),n.jsx(Ai,{className:"my-4"}),n.jsxs(pr,{defaultValue:"info",className:"w-full",children:[n.jsxs(ar,{className:"grid w-full grid-cols-5",children:[n.jsxs(Ce,{value:"info",children:[n.jsx(kN,{className:"h-4 w-4 mr-2"}),"Infos"]}),n.jsxs(Ce,{value:"schedule",disabled:o.kind==="one_off",children:[n.jsx(ze,{className:"h-4 w-4 mr-2"}),"Planning"]}),n.jsxs(Ce,{value:"actions",children:[n.jsx(Si,{className:"h-4 w-4 mr-2"}),"Actions"]}),n.jsxs(Ce,{value:"occurrences",children:[n.jsx(kN,{className:"h-4 w-4 mr-2"}),"Occurrences"]}),n.jsxs(Ce,{value:"stats",children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Stats"]})]}),n.jsx(Ee,{value:"info",className:"space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Description"}),s?n.jsx(on,{value:d.description||"",onChange:C=>u({...d,description:C.target.value}),rows:4}):n.jsx("p",{className:"text-sm text-muted-foreground",children:o.description||"Aucune description"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(J,{children:"Template du titre"}),s?n.jsx(ye,{value:d.task_title_template||"",onChange:C=>u({...d,task_title_template:C.target.value})}):n.jsx("p",{className:"text-sm font-mono bg-muted p-2 rounded",children:o.task_title_template||"Aucun template"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx(J,{className:"text-muted-foreground",children:"Type"}),n.jsx("p",{className:"font-medium",children:o.kind==="recurring"?"Rcurrente":"Ponctuelle"})]}),n.jsxs("div",{children:[n.jsx(J,{className:"text-muted-foreground",children:"Porte"}),n.jsx("p",{className:"font-medium",children:D[o.scope]})]}),n.jsxs("div",{children:[n.jsx(J,{className:"text-muted-foreground",children:"Cre le"}),n.jsx("p",{className:"font-medium",children:new Date(o.created_at).toLocaleDateString("fr-FR")})]}),n.jsxs("div",{children:[n.jsx(J,{className:"text-muted-foreground",children:"Modifie le"}),n.jsx("p",{className:"font-medium",children:new Date(o.updated_at).toLocaleDateString("fr-FR")})]})]})]})}),n.jsx(Ee,{value:"schedule",className:"space-y-4",children:o.kind==="recurring"?s?n.jsx(hee,{value:f,onChange:m,activityId:e}):l?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[n.jsx(J,{children:"Rgle RRULE"}),n.jsx("code",{className:"text-sm block mt-2",children:l.rrule||"Aucune"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(J,{className:"text-muted-foreground",children:"Date de dbut"}),n.jsx("p",{className:"font-medium",children:new Date(l.start_date).toLocaleDateString("fr-FR")})]}),n.jsxs("div",{children:[n.jsx(J,{className:"text-muted-foreground",children:"Date de fin"}),n.jsx("p",{className:"font-medium",children:l.until?new Date(l.until).toLocaleDateString("fr-FR"):"Aucune"})]})]})]}):n.jsx("p",{className:"text-muted-foreground",children:"Aucune planification configure"}):n.jsx("p",{className:"text-muted-foreground",children:"Non applicable pour les activits ponctuelles"})}),n.jsx(Ee,{value:"actions",children:n.jsx(zae,{templates:g,onAdd:async C=>{await b({activity_id:e,...C}),await y(e)},onUpdate:async(C,k)=>{await j(C,k),await y(e)},onDelete:async C=>{await S(C,e)},onReorder:async C=>{for(const k of C)await j(k.id,{position:k.position});await y(e)},mainTaskAssignee:o.owner_name&&o.owner_employee_id?{id:o.owner_employee_id,name:o.owner_name}:void 0,mainTaskDate:o.one_off_date?new Date(o.one_off_date):new Date,activityKind:o.kind,rrule:(l==null?void 0:l.rrule)||null,readonly:!s})}),n.jsx(Ee,{value:"occurrences",children:n.jsx(Bae,{activityId:e,activityName:o.name})}),n.jsx(Ee,{value:"stats",children:n.jsx(Uae,{activityId:e})})]})]})})},Wae=({activity:e,onUpdate:t,onDelete:r,onToggleActive:s,onRefresh:a})=>{const[o,i]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),f=async()=>{try{await s(e.id,!e.is_active),a()}catch(x){console.error("Erreur toggle active:",x)}},m=async x=>{try{u(!0),await r(e.id,x),i(!1),a()}catch(g){console.error("Erreur suppression:",g)}finally{u(!1)}},w=e.kind==="recurring"?Uv:Zd,v={org:"Organisation",department:"Dpartement",team:"quipe",person:"Personne"};return n.jsxs(n.Fragment,{children:[n.jsxs(V,{className:`hover:shadow-lg transition-shadow ${e.is_active?"":"opacity-60"}`,children:[n.jsxs(le,{className:"flex flex-row items-start justify-between space-y-0 pb-2",children:[n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[n.jsx("div",{className:`p-2 rounded-lg ${e.kind==="recurring"?"bg-blue-100":"bg-purple-100"}`,children:n.jsx(w,{className:`h-5 w-5 ${e.kind==="recurring"?"text-blue-600":"text-purple-600"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:e.name}),n.jsxs("div",{className:"flex gap-2 mt-1 flex-wrap",children:[n.jsx(re,{variant:e.is_active?"default":"secondary",children:e.is_active?"Active":"Inactive"}),n.jsx(re,{variant:"outline",children:e.kind==="recurring"?"Rcurrente":"Ponctuelle"}),n.jsx(re,{variant:"secondary",children:v[e.scope]})]})]})]}),n.jsxs(aM,{children:[n.jsx(oM,{asChild:!0,children:n.jsx(L,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:n.jsx(S5,{className:"h-4 w-4"})})}),n.jsxs(yb,{align:"end",children:[n.jsxs(la,{onClick:()=>c(!0),children:[n.jsx(Ni,{className:"h-4 w-4 mr-2"}),"Voir les dtails"]}),n.jsx(la,{onClick:f,children:e.is_active?n.jsxs(n.Fragment,{children:[n.jsx(R5,{className:"h-4 w-4 mr-2"}),"Dsactiver"]}):n.jsxs(n.Fragment,{children:[n.jsx(I5,{className:"h-4 w-4 mr-2"}),"Activer"]})}),n.jsxs(la,{onClick:()=>c(!0),children:[n.jsx($i,{className:"h-4 w-4 mr-2"}),"Modifier"]}),n.jsxs(la,{children:[n.jsx(ba,{className:"h-4 w-4 mr-2"}),"Statistiques"]}),n.jsx(iM,{}),n.jsxs(la,{onClick:()=>i(!0),className:"text-destructive",children:[n.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})]}),n.jsxs(W,{children:[e.description&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-4",children:e.description}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Cre le ",new Date(e.created_at).toLocaleDateString("fr-FR")]}),e.task_title_template&&n.jsxs("span",{className:"truncate ml-2",title:e.task_title_template,children:["Template: ",e.task_title_template]})]})]})]}),n.jsx(Vae,{activityId:e.id,open:l,onOpenChange:c}),n.jsx(C4,{open:o,onOpenChange:i,children:n.jsxs(Ab,{children:[n.jsxs(Mb,{children:[n.jsx(Ob,{children:"Supprimer l'activit ?"}),n.jsxs(Lb,{children:[`Cette action supprimera l'activit "`,e.name,'" et ses occurrences futures.',n.jsx("br",{}),n.jsx("br",{}),"Que souhaitez-vous faire des tches dj termines ?"]})]}),n.jsxs(Ib,{children:[n.jsx(Fb,{disabled:d,children:"Annuler"}),n.jsx(L,{variant:"outline",onClick:()=>m(!0),disabled:d,children:"Conserver les termines"}),n.jsx($b,{onClick:()=>m(!1),disabled:d,className:"bg-destructive hover:bg-destructive/90",children:d?"Suppression...":"Tout supprimer"})]})]})})]})},Hae=({open:e,onOpenChange:t,onSubmit:r,initialData:s,mode:a="create"})=>{const{employees:o,loading:i}=Ks(),[l,c]=h.useState({name:"",description:"",kind:"recurring",scope:"org",owner_employee_id:"",task_title_template:"Activit {{date}}",is_active:!0,...s}),[d,u]=h.useState({}),[f,m]=h.useState("info");h.useEffect(()=>{e&&(c(s?x=>({...x,...s}):{name:"",description:"",kind:"recurring",scope:"org",owner_employee_id:"",task_title_template:"Activit {{date}}",is_active:!0}),u({}))},[e]);const p=()=>{const x={};return l.name.trim()?l.name.length<3&&(x.name="Le nom doit contenir au moins 3 caractres"):x.name="Le nom de l'activit est obligatoire",l.owner_employee_id||(x.owner="Vous devez assigner cette activit  une personne"),l.kind==="one_off"&&!l.one_off_date&&(x.one_off_date="La date est obligatoire pour une activit ponctuelle"),u(x),Object.keys(x).length===0},w=x=>{if(x.preventDefault(),p()){const g=o.find(b=>b.id===l.owner_employee_id),y={...l,owner_name:(g==null?void 0:g.full_name)||""};r(y),t(!1)}},v=o.find(x=>x.id===l.owner_employee_id);return n.jsx(yt,{open:e,onOpenChange:t,children:n.jsxs(ft,{className:"max-w-2xl max-h-[90vh]",children:[n.jsxs(ht,{children:[n.jsx(mt,{className:"text-xl",children:a==="edit"?"Modifier l'activit":"Nouvelle activit oprationnelle"}),n.jsx(Sp,{children:"Crez une activit rcurrente ou ponctuelle avec son responsable"})]}),n.jsx($r,{className:"max-h-[calc(90vh-180px)] pr-4",children:n.jsxs("form",{onSubmit:w,className:"space-y-6",children:[n.jsxs(pr,{value:f,onValueChange:m,children:[n.jsxs(ar,{className:`grid w-full ${l.kind==="recurring"?"grid-cols-3":"grid-cols-2"}`,children:[n.jsx(Ce,{value:"info",children:"Informations"}),l.kind==="recurring"&&n.jsx(Ce,{value:"planification",children:"Planification"}),n.jsx(Ce,{value:"assignment",children:"Assignation"})]}),n.jsxs(Ee,{value:"info",className:"space-y-4 mt-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"name",className:"required",children:"Nom de l'activit"}),n.jsx(ye,{id:"name",value:l.name,onChange:x=>c({...l,name:x.target.value}),placeholder:"Ex: Rapport hebdomadaire des ventes",className:d.name?"border-red-500":""}),d.name&&n.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),d.name]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"description",children:"Description"}),n.jsx(on,{id:"description",value:l.description||"",onChange:x=>c({...l,description:x.target.value}),placeholder:"Dcrivez l'objectif de cette activit...",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(J,{htmlFor:"kind",children:"Type"}),n.jsxs(Ie,{value:l.kind,onValueChange:x=>c({...l,kind:x}),children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"recurring",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ze,{className:"h-4 w-4"}),"Rcurrente"]})}),n.jsx(ae,{value:"one_off",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Si,{className:"h-4 w-4"}),"Ponctuelle"]})})]})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"scope",children:"Porte"}),n.jsxs(Ie,{value:l.scope,onValueChange:x=>c({...l,scope:x}),children:[n.jsx(Pe,{children:n.jsx(Oe,{})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"org",children:"Organisation"}),n.jsx(ae,{value:"department",children:"Dpartement"}),n.jsx(ae,{value:"team",children:"quipe"}),n.jsx(ae,{value:"person",children:"Individuelle"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"task_title_template",children:"Template du titre de tche"}),n.jsx(ye,{id:"task_title_template",value:l.task_title_template||"",onChange:x=>c({...l,task_title_template:x.target.value}),placeholder:"Activit {{date}}"}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Variables disponibles : ","{","{"," date ","}","}",", ","{","{"," isoWeek ","}","}",", ","{","{"," year ","}","}",", ","{","{"," month ","}","}",", ","{","{"," day ","}","}"]})]}),l.kind==="one_off"&&n.jsxs("div",{children:[n.jsx(J,{htmlFor:"one_off_date",className:"required",children:"Date de la tche ponctuelle"}),n.jsx(ye,{id:"one_off_date",type:"date",value:l.one_off_date||"",onChange:x=>c({...l,one_off_date:x.target.value}),className:d.one_off_date?"border-red-500":""}),d.one_off_date&&n.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),d.one_off_date]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Date  laquelle la tche doit tre effectue"})]})]}),l.kind==="recurring"&&n.jsxs(Ee,{value:"planification",className:"space-y-4 mt-4",children:[n.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ze,{className:"h-5 w-5 text-amber-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Planification rcurrente"}),n.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Dfinissez quand cette activit doit se rpter (quotidien, hebdomadaire, mensuel)"})]})]})}),n.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[n.jsx(ze,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"La planification dtaille sera configure aprs la cration"}),n.jsx("p",{className:"text-sm mt-1",children:"Vous pourrez dfinir la frquence, les jours, etc."})]})]}),n.jsxs(Ee,{value:"assignment",className:"space-y-4 mt-4",children:[n.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Kt,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Assignation obligatoire"}),n.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Chaque activit doit avoir un responsable. Cette personne sera assigne par dfaut aux tches gnres (sauf si les actions ont des assignations spcifiques)."})]})]})}),n.jsxs("div",{children:[n.jsx(J,{htmlFor:"owner",className:"required",children:"Responsable de l'activit"}),n.jsxs(Ie,{value:l.owner_employee_id,onValueChange:x=>c({...l,owner_employee_id:x}),children:[n.jsx(Pe,{className:d.owner?"border-red-500":"",children:n.jsx(Oe,{placeholder:"Slectionnez un employ"})}),n.jsx(Re,{children:i?n.jsx(ae,{value:"loading",disabled:!0,children:"Chargement..."}):o.length===0?n.jsx(ae,{value:"empty",disabled:!0,children:"Aucun employ disponible"}):o.map(x=>n.jsx(ae,{value:x.id,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(w5,{className:"h-4 w-4"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:x.full_name}),x.job_title&&n.jsx("div",{className:"text-xs text-muted-foreground",children:x.job_title})]})]})},x.id))})]}),d.owner&&n.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),d.owner]})]}),v&&n.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:n.jsx(nr,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:v.full_name}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.job_title&&n.jsx(re,{variant:"secondary",className:"text-xs",children:v.job_title}),n.jsx(re,{variant:"outline",className:"text-xs",children:v.employee_id})]})]})]})})]})]}),n.jsx(Ai,{}),n.jsxs("div",{className:"flex items-center justify-between pt-2",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:["tape ",f==="info"?"1":"2"," sur 2"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),f==="info"?n.jsx(L,{type:"button",onClick:()=>m("assignment"),children:"Suivant : Assignation"}):n.jsx(L,{type:"submit",children:a==="edit"?"Enregistrer":"Crer l'activit"})]})]})]})})]})})},qae=()=>{const[e,t]=h.useState(""),[r,s]=h.useState("all"),[a,o]=h.useState("all"),[i,l]=h.useState(!1),[c,d]=h.useState("recurring"),{activities:u,loading:f,error:m,metrics:p,createActivity:w,updateActivity:v,deleteActivity:x,toggleActive:g,refresh:y}=Rb({autoFetch:!0,filters:{kind:r==="all"?void 0:r,isActive:a==="all"?void 0:a==="active",search:e||void 0}}),b=u.filter(E=>{var P;const D=r==="all"||E.kind===r,C=a==="all"||a==="active"&&E.is_active||a==="inactive"&&!E.is_active,k=!e||E.name.toLowerCase().includes(e.toLowerCase())||((P=E.description)==null?void 0:P.toLowerCase().includes(e.toLowerCase()));return D&&C&&k}),j=E=>{d(E),l(!0)},{createTemplate:S}=o4(),{upsertSchedule:N}=i4(),_=async E=>{var C,k,P,R,A;const D=Pn.loading("Cration de l'activit en cours...");try{console.log(" Donnes du formulaire:",E);const{action_templates:I,schedule:F,...B}=E;if(!((C=B.name)!=null&&C.trim()))throw new Error("Le nom de l'activit est requis");console.log(" Envoi donnes activit:",B);const T=await w(B);if(console.log(" Activit cre:",T),!T)throw new Error("chec de la cration de l'activit - Aucune donne retourne");if(F&&E.kind==="recurring"&&await N({...F,activity_id:T.id}),I&&I.length>0)for(const[M,U]of I.entries())(k=U.title)!=null&&k.trim()&&await S({activity_id:T.id,title:U.title,description:U.description||null,position:M});Pn.success("Activit cre avec succs ! ",{description:`"${T.name}" est maintenant active`,duration:4e3}),l(!1),await y()}catch(I){console.error(" Erreur cration activit:",I);let F="Impossible de crer l'activit",B=(I==null?void 0:I.message)||"Une erreur inattendue s'est produite";(I==null?void 0:I.code)==="42501"?(F="Permission refuse",B=(P=I==null?void 0:I.message)!=null&&P.includes("created_by")?"Utilisateur non authentifi. Veuillez vous reconnecter.":"Erreur de scurit RLS. Vrifiez que vous tes connect  un tenant actif."):(I==null?void 0:I.code)==="PGRST204"?(F="Erreur de schma de base de donnes",B="Certains champs ne sont pas reconnus. Contactez le support."):(I==null?void 0:I.code)==="23505"?(F="Activit dj existante",B="Une activit avec ce nom existe dj"):(R=I==null?void 0:I.message)!=null&&R.includes("permission")?(F="Permission refuse",B="Vous n'avez pas les droits pour crer cette activit"):(A=I==null?void 0:I.message)!=null&&A.includes("tenant")&&(F="Tenant manquant",B="Aucun tenant actif dtect. Reconnectez-vous."),Pn.error(F,{description:B,duration:6e3,action:{label:"Ressayer",onClick:()=>_(E)}})}finally{Pn.dismiss(D)}};return n.jsxs("div",{className:"container mx-auto px-4 py-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Activits Oprationnelles"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Grez vos tches rcurrentes et ponctuelles hors projet"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{onClick:()=>j("recurring"),className:"gap-2",children:[n.jsx(Uv,{className:"h-4 w-4"}),"Nouvelle Rcurrente"]}),n.jsxs(L,{onClick:()=>j("one_off"),variant:"outline",className:"gap-2",children:[n.jsx(Zd,{className:"h-4 w-4"}),"Nouvelle Ponctuelle"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs(V,{children:[n.jsx(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:n.jsx(ce,{className:"text-sm font-medium",children:"Total Activits"})}),n.jsxs(W,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p.totalCount}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.cacheHit?" Cache":`${p.fetchTime}ms`})]})]}),n.jsxs(V,{children:[n.jsx(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:n.jsx(ce,{className:"text-sm font-medium",children:"Actives"})}),n.jsxs(W,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.activeCount}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"En gnration"})]})]}),n.jsxs(V,{children:[n.jsx(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:n.jsx(ce,{className:"text-sm font-medium",children:"Rcurrentes"})}),n.jsxs(W,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.recurringCount}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatiques"})]})]}),n.jsxs(V,{children:[n.jsx(le,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:n.jsx(ce,{className:"text-sm font-medium",children:"Ponctuelles"})}),n.jsxs(W,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p.oneOffCount}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Manuelles"})]})]})]}),n.jsx(V,{className:"mb-6",children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(ye,{placeholder:"Rechercher une activit...",value:e,onChange:E=>t(E.target.value),className:"pl-10"})]}),n.jsxs(Ie,{value:r,onValueChange:E=>s(E),children:[n.jsx(Pe,{className:"w-full md:w-48",children:n.jsx(Oe,{placeholder:"Type"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"all",children:"Tous les types"}),n.jsx(ae,{value:"recurring",children:"Rcurrentes"}),n.jsx(ae,{value:"one_off",children:"Ponctuelles"})]})]}),n.jsxs(Ie,{value:a,onValueChange:E=>o(E),children:[n.jsx(Pe,{className:"w-full md:w-48",children:n.jsx(Oe,{placeholder:"Statut"})}),n.jsxs(Re,{children:[n.jsx(ae,{value:"all",children:"Tous les statuts"}),n.jsx(ae,{value:"active",children:"Actives"}),n.jsx(ae,{value:"inactive",children:"Inactives"})]})]}),n.jsx(L,{variant:"outline",size:"icon",onClick:()=>y(),children:n.jsx(y2,{className:"h-4 w-4"})})]})})}),f&&u.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Chargement des activits..."})]}):m?n.jsx(V,{className:"border-destructive",children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"text-center text-destructive",children:[n.jsx("p",{className:"font-semibold",children:"Erreur lors du chargement"}),n.jsx("p",{className:"text-sm mt-2",children:m}),n.jsx(L,{onClick:()=>y(),className:"mt-4",children:"Ressayer"})]})})}):b.length===0?n.jsx(V,{children:n.jsx(W,{className:"pt-6",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Uv,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-lg font-semibold",children:"Aucune activit trouve"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Crez votre premire activit rcurrente ou ponctuelle"}),n.jsxs("div",{className:"flex gap-2 justify-center mt-6",children:[n.jsx(L,{onClick:()=>j("recurring"),children:"Crer une rcurrente"}),n.jsx(L,{onClick:()=>j("one_off"),variant:"outline",children:"Crer une ponctuelle"})]})]})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(E=>n.jsx(Wae,{activity:E,onUpdate:v,onDelete:x,onToggleActive:g,onRefresh:y},E.id))}),n.jsx(Hae,{open:i,onOpenChange:l,onSubmit:_,initialData:{kind:c},mode:"create"})]})},w_=new cz,FI=h.memo(({accessRights:e,showWarning:t,timeLeftFormatted:r,signOut:s,isTenantAdmin:a})=>n.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:n.jsx("div",{className:"container mx-auto px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("nav",{className:"flex items-center space-x-4",children:[n.jsx(Ho,{to:"/",className:"text-foreground hover:text-primary transition-colors",children:"Accueil"}),e.canAccessHR&&n.jsx(Ho,{to:"/hr",className:"text-foreground hover:text-primary transition-colors",children:"RH"}),e.canAccessProjects&&n.jsx(Ho,{to:"/projects",className:"text-foreground hover:text-primary transition-colors",children:"Projets"}),e.canAccessTasks&&n.jsx(Ho,{to:"/tasks",className:"text-foreground hover:text-primary transition-colors",children:"Tches"}),e.canAccessTasks&&n.jsx(Ho,{to:"/operations",className:"text-foreground hover:text-primary transition-colors",children:"Oprations"}),e.canAccessSuperAdmin&&n.jsx(Ho,{to:"/super-admin",className:"text-sm font-medium text-yellow-600 hover:text-yellow-500 transition-colors flex items-center gap-1",children:" Super Admin"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[a&&n.jsx(Ho,{to:"/invite-collaborators",children:n.jsxs(L,{variant:"default",size:"sm",className:"flex items-center gap-2 bg-primary hover:bg-primary/90",children:[n.jsx(gs,{className:"h-4 w-4"}),"Inviter des collaborateurs"]})}),t&&n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-orange-100 text-orange-800 rounded-md text-sm font-medium",children:[" Dconnexion automatique dans ",r]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Nw,{}),n.jsx(N9,{}),e.canManageRoles&&n.jsx(o7,{}),n.jsx(zQ,{}),n.jsx(d7,{}),n.jsx(i7,{onSignOut:s})]})]})]})})}));FI.displayName="MemoizedHeader";const zI=h.memo(()=>n.jsxs(Dk,{children:[n.jsx(Ut,{path:"/",element:n.jsx(MQ,{})}),n.jsx(Ut,{path:"/dashboard",element:n.jsx(kk,{to:"/",replace:!0})}),n.jsx(Ut,{path:"/hr",element:n.jsx(al,{requiredAccess:"canAccessHR",children:n.jsx(e4,{})})}),n.jsx(Ut,{path:"/invite-collaborators",element:n.jsx(al,{requiredAccess:"canAccessHR",children:n.jsx(OZ,{})})}),n.jsx(Ut,{path:"/projects",element:n.jsx(al,{requiredAccess:"canAccessProjects",children:n.jsx(FZ,{})})}),n.jsx(Ut,{path:"/tasks",element:n.jsx(al,{requiredAccess:"canAccessTasks",children:n.jsx(qZ,{})})}),n.jsx(Ut,{path:"/operations",element:n.jsx(al,{requiredAccess:"canAccessTasks",children:n.jsx(qae,{})})}),n.jsx(Ut,{path:"/super-admin",element:n.jsx(al,{requiredAccess:"canAccessSuperAdmin",children:n.jsx(KZ,{})})}),n.jsx(Ut,{path:"/auth",element:n.jsx(jw,{onAuthStateChange:()=>{}})}),n.jsx(Ut,{path:"/signup",element:n.jsx(t4,{})}),n.jsx(Ut,{path:"/auth/callback",element:n.jsx(r4,{})}),n.jsx(Ut,{path:"/setup",element:n.jsx(n4,{})}),n.jsx(Ut,{path:"/invite/:inviteId",element:n.jsx(s4,{})}),n.jsx(Ut,{path:"*",element:n.jsx(YZ,{})})]}));zI.displayName="MemoizedRoutes";function Gae(){const e=h.useRef(0);h.useRef(0);const t=h.useRef(null),{session:r,loading:s,signOut:a,handleAuthStateChange:o}=LQ(),{isSuperAdmin:i,isTenantAdmin:l,isLoading:c}=Fo();i();const d=l(),{accessRights:u,isLoading:f}=Cb(),m={session:!!r,loading:s,accessLoading:f,accessRights:JSON.stringify(u)},p=t.current,w=!p||p.session!==m.session||p.loading!==m.loading||p.accessLoading!==m.accessLoading||p.accessRights!==m.accessRights;w&&(t.current={session:r,loading:s,accessLoading:f,accessRights:u});const v=h.useMemo(()=>({totalTimeoutMinutes:15,warningMinutes:5,enabled:!!r&&!s}),[!!r,s]),{showWarning:x,timeLeftFormatted:g,isActive:y}=IQ(v),b=c8(async()=>{Is.clear(),await a()}),j=h.useMemo(()=>!w&&t.current?{accessRights:t.current.accessRights,showWarning:x,timeLeftFormatted:g,signOut:b,isTenantAdmin:d}:{accessRights:u,showWarning:x,timeLeftFormatted:g,signOut:b,isTenantAdmin:d},[w,u,x,g,b,d]);e.current+=1;const S=h.useRef(!1);return S.current||(e.current<=3?console.log(` App rendered (${e.current})`):e.current===4?(console.log(" App stabilized after 4 renders"),S.current=!0):e.current>10&&(console.warn(` ${e.current} renders - possible loop`),S.current=!0)),s||f?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:s?"Chargement...":"Vrification des permissions..."})]})}):r?n.jsx(e1,{client:w_,children:n.jsxs(Xh,{children:[n.jsx(h7,{children:n.jsx(M2,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:n.jsx(m7,{children:n.jsxs(g7,{children:[n.jsx(LN,{}),n.jsx(i1,{children:n.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[n.jsx(FI,{...j}),n.jsx("main",{className:"flex-1",children:n.jsx(zI,{})})]})})]})})})}),n.jsx(RN,{}),n.jsx(XZ,{})]})}):n.jsx(e1,{client:w_,children:n.jsxs(Xh,{children:[n.jsx(RN,{}),n.jsx(LN,{}),n.jsx(i1,{children:n.jsxs(Dk,{children:[n.jsx(Ut,{path:"/signup/tenant-owner",element:n.jsx(t4,{})}),n.jsx(Ut,{path:"/auth/callback",element:n.jsx(r4,{})}),n.jsx(Ut,{path:"/setup-account",element:n.jsx(n4,{})}),n.jsx(Ut,{path:"/invite",element:n.jsx(s4,{})}),n.jsx(Ut,{path:"*",element:n.jsx(jw,{onAuthStateChange:o})})]})})]})})}UE(document.getElementById("root")).render(n.jsx(M2,{attribute:"class",defaultTheme:"dark",enableSystem:!0,children:n.jsx(Gae,{})}));
